---
title: SQL 条件语句
description: 了解SQL中的条件语句，掌握如何在SQL查询中使用条件逻辑来控制数据流和结果。
---

# SQL 条件语句

在SQL中，条件语句是用于根据特定条件执行不同操作的关键工具。它们允许你在查询中引入逻辑判断，从而根据数据的实际情况返回不同的结果。条件语句在存储过程、触发器以及复杂的查询中尤为重要。

## 介绍

SQL条件语句主要包括 `IF`、`CASE` 和 `WHERE` 子句。这些语句可以帮助你在查询中实现条件逻辑，从而根据不同的条件返回不同的结果。

### IF 语句

`IF` 语句用于在SQL中执行条件判断。它通常用于存储过程和触发器中。

```sql
IF condition THEN
    statements;
ELSE
    statements;
END IF;
```

#### 示例

假设我们有一个表 `employees`，我们想要根据员工的薪水来决定是否给他们加薪：

```sql
IF (SELECT salary FROM employees WHERE employee_id = 1) < 5000 THEN
    UPDATE employees SET salary = salary + 1000 WHERE employee_id = 1;
ELSE
    UPDATE employees SET salary = salary + 500 WHERE employee_id = 1;
END IF;
```

在这个例子中，如果员工的薪水低于5000，则加薪1000，否则加薪500。

### CASE 语句

`CASE` 语句用于在查询中实现多条件判断。它可以在 `SELECT`、`UPDATE`、`DELETE` 等语句中使用。

```sql
CASE
    WHEN condition1 THEN result1
    WHEN condition2 THEN result2
    ELSE result
END;
```

#### 示例

假设我们有一个表 `orders`，我们想要根据订单金额来分类：

```sql
SELECT order_id, 
       CASE 
           WHEN amount < 100 THEN 'Small'
           WHEN amount BETWEEN 100 AND 500 THEN 'Medium'
           ELSE 'Large'
       END AS order_size
FROM orders;
```

在这个例子中，我们根据订单金额将订单分为“Small”、“Medium”和“Large”三类。

### WHERE 子句

`WHERE` 子句用于在查询中过滤记录。它可以根据指定的条件返回符合条件的记录。

```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```

#### 示例

假设我们有一个表 `customers`，我们想要查询所有来自“USA”的客户：

```sql
SELECT * FROM customers WHERE country = 'USA';
```

在这个例子中，我们只返回来自“USA”的客户记录。

## 实际案例

### 案例1：员工奖金计算

假设我们有一个表 `employees`，我们想要根据员工的绩效评分来计算他们的奖金：

```sql
SELECT employee_id, 
       CASE 
           WHEN performance_score >= 90 THEN salary * 0.2
           WHEN performance_score BETWEEN 70 AND 89 THEN salary * 0.1
           ELSE 0
       END AS bonus
FROM employees;
```

在这个例子中，我们根据员工的绩效评分来计算他们的奖金。绩效评分大于等于90的员工将获得20%的薪水作为奖金，绩效评分在70到89之间的员工将获得10%的薪水作为奖金，其他员工则没有奖金。

### 案例2：订单状态更新

假设我们有一个表 `orders`，我们想要根据订单的状态来更新订单的处理方式：

```sql
UPDATE orders
SET status = CASE 
                 WHEN order_date < '2023-01-01' THEN 'Archived'
                 ELSE 'Active'
             END;
```

在这个例子中，我们将所有在2023年之前的订单状态更新为“Archived”，其他订单状态更新为“Active”。

## 总结

SQL条件语句是SQL查询中非常重要的部分，它们允许你根据不同的条件执行不同的操作。通过 `IF`、`CASE` 和 `WHERE` 子句，你可以实现复杂的逻辑判断，从而更好地控制数据流和查询结果。

## 附加资源

- [SQL IF Statement Documentation](https://www.w3schools.com/sql/sql_if.asp)
- [SQL CASE Statement Documentation](https://www.w3schools.com/sql/sql_case.asp)
- [SQL WHERE Clause Documentation](https://www.w3schools.com/sql/sql_where.asp)

## 练习

1. 编写一个SQL查询，使用 `CASE` 语句将 `employees` 表中的员工按薪水分为“Low”、“Medium”和“High”三类。
2. 编写一个SQL查询，使用 `IF` 语句在存储过程中根据员工的绩效评分更新他们的薪水。
3. 编写一个SQL查询，使用 `WHERE` 子句过滤出 `orders` 表中所有金额大于1000的订单。

通过完成这些练习，你将更好地理解和掌握SQL条件语句的使用。