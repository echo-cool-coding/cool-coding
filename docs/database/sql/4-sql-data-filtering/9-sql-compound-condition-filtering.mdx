---
title: SQL 复合条件过滤
description: 学习如何使用SQL中的复合条件过滤数据，掌握AND、OR和NOT操作符的组合使用，提升数据查询的灵活性和精确性。
---

# SQL 复合条件过滤

在SQL中，数据过滤是查询的核心部分之一。通过使用条件过滤，我们可以从数据库中提取出符合特定条件的数据。而**复合条件过滤**则允许我们组合多个条件，以实现更复杂和精确的查询。本文将详细介绍如何使用SQL中的复合条件过滤数据。

## 什么是复合条件过滤？

复合条件过滤是指在SQL查询中同时使用多个条件来筛选数据。这些条件可以通过逻辑操作符（如`AND`、`OR`和`NOT`）进行组合。通过复合条件过滤，我们可以创建更复杂的查询，从而更精确地获取所需的数据。

### 常用的逻辑操作符

- **AND**: 当所有条件都为真时，返回结果。
- **OR**: 当至少一个条件为真时，返回结果。
- **NOT**: 当条件为假时，返回结果。

## 复合条件过滤的基本语法

在SQL中，复合条件过滤通常与`WHERE`子句一起使用。以下是一个基本的语法示例：

```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition1 AND condition2;
```

在这个示例中，`condition1`和`condition2`是两个独立的过滤条件，它们通过`AND`操作符组合在一起。只有当这两个条件都为真时，查询才会返回结果。

## 使用AND操作符

`AND`操作符用于组合多个条件，只有当所有条件都为真时，查询才会返回结果。以下是一个使用`AND`操作符的示例：

```sql
SELECT * FROM employees
WHERE department = 'Sales' AND salary > 50000;
```

在这个查询中，我们筛选出`department`为`Sales`且`salary`大于`50000`的所有员工。

### 输入与输出

假设我们有一个`employees`表，内容如下：

| id  | name   | department | salary |
|-----|--------|------------|--------|
| 1   | Alice  | Sales      | 60000  |
| 2   | Bob    | HR         | 45000  |
| 3   | Charlie| Sales      | 55000  |
| 4   | David  | Sales      | 48000  |

执行上述查询后，输出结果为：

| id  | name   | department | salary |
|-----|--------|------------|--------|
| 1   | Alice  | Sales      | 60000  |
| 3   | Charlie| Sales      | 55000  |

## 使用OR操作符

`OR`操作符用于组合多个条件，只要有一个条件为真，查询就会返回结果。以下是一个使用`OR`操作符的示例：

```sql
SELECT * FROM employees
WHERE department = 'Sales' OR salary > 50000;
```

在这个查询中，我们筛选出`department`为`Sales`或`salary`大于`50000`的所有员工。

### 输入与输出

使用相同的`employees`表，执行上述查询后，输出结果为：

| id  | name   | department | salary |
|-----|--------|------------|--------|
| 1   | Alice  | Sales      | 60000  |
| 3   | Charlie| Sales      | 55000  |
| 4   | David  | Sales      | 48000  |

:::note
注意：`OR`操作符会返回所有满足任一条件的记录，因此结果集中可能包含不符合所有条件的记录。
:::

## 使用NOT操作符

`NOT`操作符用于排除满足特定条件的记录。以下是一个使用`NOT`操作符的示例：

```sql
SELECT * FROM employees
WHERE NOT department = 'Sales';
```

在这个查询中，我们筛选出`department`不为`Sales`的所有员工。

### 输入与输出

使用相同的`employees`表，执行上述查询后，输出结果为：

| id  | name   | department | salary |
|-----|--------|------------|--------|
| 2   | Bob    | HR         | 45000  |

## 复合条件的组合使用

在实际应用中，我们经常需要组合使用多个逻辑操作符来创建更复杂的查询。以下是一个组合使用`AND`和`OR`操作符的示例：

```sql
SELECT * FROM employees
WHERE (department = 'Sales' AND salary > 50000)
   OR (department = 'HR' AND salary < 40000);
```

在这个查询中，我们筛选出`department`为`Sales`且`salary`大于`50000`，或者`department`为`HR`且`salary`小于`40000`的所有员工。

### 输入与输出

使用相同的`employees`表，执行上述查询后，输出结果为：

| id  | name   | department | salary |
|-----|--------|------------|--------|
| 1   | Alice  | Sales      | 60000  |
| 3   | Charlie| Sales      | 55000  |

:::caution
注意：在使用复合条件时，务必注意条件的优先级。通常，`AND`操作符的优先级高于`OR`操作符。为了避免混淆，建议使用括号明确指定条件的组合顺序。
:::

## 实际应用场景

假设你是一家电商公司的数据分析师，你需要从订单表中筛选出所有在2023年1月1日至2023年1月31日之间下单，且订单金额大于100美元的订单。你可以使用以下SQL查询：

```sql
SELECT * FROM orders
WHERE order_date BETWEEN '2023-01-01' AND '2023-01-31'
  AND order_amount > 100;
```

这个查询使用了`BETWEEN`操作符来筛选日期范围，并通过`AND`操作符组合了金额条件。

## 总结

通过本文的学习，你应该已经掌握了如何使用SQL中的复合条件过滤数据。我们介绍了`AND`、`OR`和`NOT`操作符的基本用法，并通过实际案例展示了如何组合这些操作符来创建复杂的查询。

:::tip
练习：尝试在你的数据库中创建一个包含多个条件的查询，使用`AND`、`OR`和`NOT`操作符组合不同的条件，观察查询结果的变化。
:::

## 附加资源

- [SQL教程 - W3Schools](https://www.w3schools.com/sql/)
- [SQL条件过滤 - SQLZoo](https://sqlzoo.net/wiki/SELECT_with_conditions)

通过不断练习和探索，你将能够更熟练地使用SQL进行数据过滤，从而更高效地处理和分析数据。