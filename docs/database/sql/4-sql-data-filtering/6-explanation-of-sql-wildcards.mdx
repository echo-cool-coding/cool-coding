---
title: SQL 通配符详解
description: 了解SQL中的通配符及其在数据过滤中的应用。本文详细介绍了通配符的使用方法、常见场景以及实际案例，帮助初学者掌握SQL数据过滤的核心技巧。
---

# SQL 通配符详解

在SQL中，通配符（Wildcard）是用于匹配字符串的特殊字符。它们通常与 `LIKE` 操作符一起使用，用于在 `WHERE` 子句中进行模式匹配。通配符可以帮助我们在查询中更灵活地过滤数据，尤其是在处理不确定或部分已知的数据时。

## 常见的SQL通配符

SQL中常用的通配符有以下几种：

1. **百分号 (`%`)**：匹配任意数量的字符（包括零个字符）。
2. **下划线 (`_`)**：匹配单个字符。
3. **方括号 (`[]`)**：匹配指定范围内的单个字符（仅在某些数据库系统中支持，如SQL Server）。
4. **脱字符 (`^`)**：在方括号内使用，表示不匹配指定范围内的字符（仅在某些数据库系统中支持，如SQL Server）。

接下来，我们将逐一介绍这些通配符的用法。

### 1. 百分号 (`%`)

百分号 `%` 是最常用的通配符，它可以匹配任意长度的字符（包括零个字符）。例如，如果你想查找所有以字母 "S" 开头的名字，可以使用以下查询：

```sql
SELECT * FROM employees
WHERE name LIKE 'S%';
```

**输入数据示例：**

| id  | name      |
|-----|-----------|
| 1   | Sarah     |
| 2   | Steve     |
| 3   | Samantha  |
| 4   | John      |
| 5   | Susan     |

**输出结果：**

| id  | name      |
|-----|-----------|
| 1   | Sarah     |
| 2   | Steve     |
| 3   | Samantha  |
| 5   | Susan     |

:::tip
`%` 可以出现在模式的任何位置。例如，`'%son'` 会匹配所有以 "son" 结尾的字符串。
:::

### 2. 下划线 (`_`)

下划线 `_` 用于匹配单个字符。例如，如果你想查找所有名字长度为5个字符且以 "S" 开头的员工，可以使用以下查询：

```sql
SELECT * FROM employees
WHERE name LIKE 'S____';
```

**输入数据示例：**

| id  | name      |
|-----|-----------|
| 1   | Sarah     |
| 2   | Steve     |
| 3   | Samantha  |
| 4   | John      |
| 5   | Susan     |

**输出结果：**

| id  | name      |
|-----|-----------|
| 2   | Steve     |
| 5   | Susan     |

:::caution
`_` 只能匹配一个字符。如果你需要匹配多个字符，请使用 `%`。
:::

### 3. 方括号 (`[]`)

方括号 `[]` 用于匹配指定范围内的单个字符。例如，如果你想查找所有名字以 "S" 或 "J" 开头的员工，可以使用以下查询：

```sql
SELECT * FROM employees
WHERE name LIKE '[SJ]%';
```

**输入数据示例：**

| id  | name      |
|-----|-----------|
| 1   | Sarah     |
| 2   | Steve     |
| 3   | Samantha  |
| 4   | John      |
| 5   | Susan     |

**输出结果：**

| id  | name      |
|-----|-----------|
| 1   | Sarah     |
| 2   | Steve     |
| 3   | Samantha  |
| 4   | John      |
| 5   | Susan     |

:::note
方括号 `[]` 仅在部分数据库系统（如SQL Server）中支持。如果你使用的是MySQL或PostgreSQL，可能需要使用正则表达式来实现类似的功能。
:::

### 4. 脱字符 (`^`)

脱字符 `^` 在方括号内使用，表示不匹配指定范围内的字符。例如，如果你想查找所有名字不以 "S" 或 "J" 开头的员工，可以使用以下查询：

```sql
SELECT * FROM employees
WHERE name LIKE '[^SJ]%';
```

**输入数据示例：**

| id  | name      |
|-----|-----------|
| 1   | Sarah     |
| 2   | Steve     |
| 3   | Samantha  |
| 4   | John      |
| 5   | Susan     |

**输出结果：**

| id  | name      |
|-----|-----------|
| 4   | John      |

:::warning
脱字符 `^` 也仅在部分数据库系统（如SQL Server）中支持。在其他数据库中，你可能需要使用 `NOT LIKE` 来实现类似的功能。
:::

## 实际应用场景

### 场景1：模糊搜索

假设你正在开发一个电商网站，用户可以通过输入部分商品名称来搜索商品。你可以使用 `%` 通配符来实现模糊搜索：

```sql
SELECT * FROM products
WHERE product_name LIKE '%phone%';
```

这将返回所有名称中包含 "phone" 的商品，如 "iPhone", "Smartphone" 等。

### 场景2：数据清理

在数据清理过程中，你可能需要查找所有不符合特定格式的数据。例如，查找所有不以字母开头的用户名：

```sql
SELECT * FROM users
WHERE username NOT LIKE '[A-Za-z]%';
```

## 总结

SQL通配符是数据过滤中非常强大的工具，尤其是在处理不确定或部分已知的数据时。通过合理使用 `%`、`_`、`[]` 和 `^` 等通配符，你可以编写出更加灵活和高效的查询语句。

:::tip
在实际使用中，通配符可能会导致查询性能下降，尤其是在处理大量数据时。因此，建议在使用通配符时尽量缩小查询范围，以提高查询效率。
:::

## 附加资源

- [SQL LIKE 操作符文档](https://www.w3schools.com/sql/sql_like.asp)
- [SQL Server 通配符指南](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/like-transact-sql)

## 练习

1. 编写一个SQL查询，查找所有以 "A" 开头且长度为4个字符的员工名字。
2. 编写一个SQL查询，查找所有不以数字开头的用户名。
3. 编写一个SQL查询，查找所有包含 "book" 但不以 "e-book" 结尾的商品名称。

通过完成这些练习，你将更好地掌握SQL通配符的使用技巧。