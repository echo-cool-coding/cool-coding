---
title: SQL 空值排序
description: 学习如何在SQL查询中对包含空值（NULL）的列进行排序，掌握空值在排序中的默认行为以及如何自定义空值的排序方式。
---

# SQL 空值排序

在SQL中，排序是一个常见的操作，通常用于按照某一列的值对查询结果进行升序或降序排列。然而，当列中包含空值（NULL）时，排序行为可能会与预期不同。本文将详细介绍SQL中空值排序的默认行为，以及如何自定义空值的排序方式。

## 空值排序的默认行为

在SQL中，空值（NULL）表示缺失或未知的值。当对包含空值的列进行排序时，SQL的默认行为是将空值视为最小值（在升序排序中）或最大值（在降序排序中）。这意味着，在升序排序中，空值会出现在结果的最前面；而在降序排序中，空值会出现在结果的最后面。

### 示例

假设我们有一个名为 `employees` 的表，其中包含员工的姓名和工资信息。工资列中可能包含空值。

```sql
SELECT name, salary
FROM employees
ORDER BY salary ASC;
```

**输入数据：**

| name   | salary |
|--------|--------|
| Alice  | 5000   |
| Bob    | NULL   |
| Charlie| 7000   |
| David  | NULL   |

**输出结果：**

| name   | salary |
|--------|--------|
| Bob    | NULL   |
| David  | NULL   |
| Alice  | 5000   |
| Charlie| 7000   |

在这个例子中，`salary` 列中的空值在升序排序中被视为最小值，因此它们出现在结果的最前面。

## 自定义空值排序

在某些情况下，我们可能希望自定义空值的排序行为。例如，我们可能希望将空值放在结果的最后面，而不是最前面。SQL提供了 `NULLS FIRST` 和 `NULLS LAST` 子句来实现这一点。

### 使用 `NULLS LAST`

如果我们希望在升序排序中将空值放在最后面，可以使用 `NULLS LAST` 子句。

```sql
SELECT name, salary
FROM employees
ORDER BY salary ASC NULLS LAST;
```

**输出结果：**

| name   | salary |
|--------|--------|
| Alice  | 5000   |
| Charlie| 7000   |
| Bob    | NULL   |
| David  | NULL   |

在这个例子中，空值被放在了结果的最后面。

### 使用 `NULLS FIRST`

类似地，如果我们希望在降序排序中将空值放在最前面，可以使用 `NULLS FIRST` 子句。

```sql
SELECT name, salary
FROM employees
ORDER BY salary DESC NULLS FIRST;
```

**输出结果：**

| name   | salary |
|--------|--------|
| Bob    | NULL   |
| David  | NULL   |
| Charlie| 7000   |
| Alice  | 5000   |

在这个例子中，空值被放在了结果的最前面。

## 实际应用场景

在实际应用中，空值排序的需求可能出现在各种场景中。例如，在一个销售报表中，我们可能希望将未填写销售金额的记录放在最后面，以便优先查看已填写金额的记录。

### 示例场景

假设我们有一个 `sales` 表，其中包含销售人员的姓名和销售金额。销售金额列中可能包含空值。

```sql
SELECT salesperson, amount
FROM sales
ORDER BY amount ASC NULLS LAST;
```

**输入数据：**

| salesperson | amount |
|-------------|--------|
| Alice       | 1000   |
| Bob         | NULL   |
| Charlie     | 1500   |
| David       | NULL   |

**输出结果：**

| salesperson | amount |
|-------------|--------|
| Alice       | 1000   |
| Charlie     | 1500   |
| Bob         | NULL   |
| David       | NULL   |

在这个场景中，未填写销售金额的记录被放在了结果的最后面，使得已填写金额的记录能够优先显示。

## 总结

在SQL中，空值排序是一个常见的需求。默认情况下，空值在升序排序中被视为最小值，在降序排序中被视为最大值。通过使用 `NULLS FIRST` 和 `NULLS LAST` 子句，我们可以自定义空值的排序行为，以满足不同的业务需求。

## 附加资源与练习

- **练习1**：在一个包含学生成绩的表中，尝试对成绩列进行排序，并将空值放在最前面。
- **练习2**：在一个包含产品价格的表中，尝试对价格列进行排序，并将空值放在最后面。

通过练习这些操作，您将更好地掌握SQL中空值排序的技巧。

:::tip
在实际开发中，了解如何处理空值排序可以帮助您编写更高效、更符合业务需求的SQL查询。
:::