---
title: SQL 通配符查询
description: 了解如何使用SQL通配符进行灵活的数据查询，掌握通配符的基本用法和实际应用场景。
---

# SQL 通配符查询

在SQL中，通配符是用于匹配字符串的特殊字符。它们可以帮助我们在查询数据时更加灵活，尤其是在我们不确定完整数据的情况下。通配符通常与 `LIKE` 操作符一起使用，用于在 `WHERE` 子句中进行模式匹配。

## 常见的SQL通配符

SQL中常用的通配符有两种：

1. **百分号 (`%`)**：匹配任意长度的字符（包括零个字符）。
2. **下划线 (`_`)**：匹配单个字符。

### 1. 百分号 (`%`) 通配符

百分号通配符可以匹配任意长度的字符。例如，如果你想查找所有以字母 "A" 开头的名字，可以使用以下查询：

```sql
SELECT * FROM employees
WHERE name LIKE 'A%';
```

**输入：**
假设 `employees` 表中有以下数据：

| id  | name      |
|-----|-----------|
| 1   | Alice     |
| 2   | Bob       |
| 3   | Anna      |
| 4   | Alex      |
| 5   | Charlie   |

**输出：**
查询结果将返回所有以 "A" 开头的名字：

| id  | name  |
|-----|-------|
| 1   | Alice |
| 3   | Anna  |
| 4   | Alex  |

### 2. 下划线 (`_`) 通配符

下划线通配符用于匹配单个字符。例如，如果你想查找所有名字长度为5个字符且以 "A" 开头的员工，可以使用以下查询：

```sql
SELECT * FROM employees
WHERE name LIKE 'A____';
```

**输入：**
使用与上面相同的 `employees` 表。

**输出：**
查询结果将返回所有名字长度为5个字符且以 "A" 开头的员工：

| id  | name  |
|-----|-------|
| 1   | Alice |
| 4   | Alex  |

:::note
注意：下划线通配符 `_` 只匹配一个字符。如果你需要匹配多个字符，可以使用多个下划线，例如 `A____` 匹配长度为5的字符串。
:::

## 实际应用场景

### 场景1：模糊搜索

假设你正在开发一个电商网站，用户可以通过搜索框查找商品。用户输入了 "shirt"，但你希望搜索结果不仅包含 "shirt"，还包含 "t-shirt"、"shirts" 等。这时可以使用 `%` 通配符：

```sql
SELECT * FROM products
WHERE name LIKE '%shirt%';
```

**输入：**
假设 `products` 表中有以下数据：

| id  | name         |
|-----|--------------|
| 1   | T-Shirt      |
| 2   | Shirt        |
| 3   | Polo Shirt   |
| 4   | Dress Shirt  |
| 5   | Hoodie       |

**输出：**
查询结果将返回所有包含 "shirt" 的商品：

| id  | name         |
|-----|--------------|
| 1   | T-Shirt      |
| 2   | Shirt        |
| 3   | Polo Shirt   |
| 4   | Dress Shirt  |

### 场景2：匹配特定格式的数据

假设你需要查找所有以 "2023" 开头的订单号，且订单号长度为10个字符。可以使用以下查询：

```sql
SELECT * FROM orders
WHERE order_number LIKE '2023______';
```

**输入：**
假设 `orders` 表中有以下数据：

| id  | order_number |
|-----|--------------|
| 1   | 2023001234   |
| 2   | 2023123456   |
| 3   | 2023ABCDEF   |
| 4   | 2022XYZ123   |

**输出：**
查询结果将返回所有以 "2023" 开头且长度为10个字符的订单号：

| id  | order_number |
|-----|--------------|
| 1   | 2023001234   |
| 2   | 2023123456   |
| 3   | 2023ABCDEF   |

:::caution
注意：通配符查询可能会影响查询性能，尤其是在处理大量数据时。尽量避免在大型数据集上使用 `%` 开头的通配符查询，因为这会导致全表扫描。
:::

## 总结

SQL通配符是强大的工具，可以帮助我们在查询数据时更加灵活。通过使用 `%` 和 `_` 通配符，我们可以轻松地进行模糊搜索和模式匹配。然而，在使用通配符时，需要注意其对性能的影响，尤其是在处理大数据集时。

## 附加资源与练习

### 练习1
编写一个SQL查询，查找所有以 "J" 开头且长度为4个字符的员工名字。

### 练习2
编写一个SQL查询，查找所有包含 "book" 的商品名称。

### 附加资源
- [SQL LIKE 操作符文档](https://www.w3schools.com/sql/sql_like.asp)
- [SQL 通配符教程](https://www.sqlservertutorial.net/sql-server-basics/sql-server-like/)

通过练习和进一步学习，你将能够更好地掌握SQL通配符的使用，并在实际项目中灵活应用。