---
title: SQL COUNT 函数
description: 了解如何使用 SQL 的 COUNT 函数来计算表中的行数或特定列的非空值数量。本文适合初学者，包含代码示例和实际应用场景。
---

# SQL COUNT 函数

在 SQL 中，`COUNT` 函数是最常用的聚合函数之一。它的主要作用是计算表中的行数或特定列中非空值的数量。无论是统计记录总数，还是计算满足特定条件的行数，`COUNT` 都是一个非常实用的工具。

## 什么是 COUNT 函数？

`COUNT` 函数用于返回指定列中非空值的数量，或者返回表中的总行数。它可以与 `GROUP BY` 子句结合使用，以分组统计数据。

### 基本语法

```sql
COUNT(expression)
```

- `expression`：可以是列名、`*` 或常量。如果使用 `*`，`COUNT` 将返回表中的总行数，包括空值和重复值。

### 示例 1：计算表中的总行数

假设我们有一个名为 `employees` 的表，其中包含员工的信息。我们可以使用 `COUNT(*)` 来计算表中的总行数。

```sql
SELECT COUNT(*) AS total_employees
FROM employees;
```

**输出：**

| total_employees |
|-----------------|
| 50              |

在这个例子中，`COUNT(*)` 返回了 `employees` 表中的总行数。

### 示例 2：计算特定列的非空值数量

如果我们只想计算某一列中非空值的数量，可以将列名作为 `COUNT` 的参数。例如，计算 `employees` 表中 `department` 列的非空值数量：

```sql
SELECT COUNT(department) AS non_null_departments
FROM employees;
```

**输出：**

| non_null_departments |
|----------------------|
| 45                   |

在这个例子中，`COUNT(department)` 返回了 `department` 列中非空值的数量。

:::note
`COUNT` 函数会忽略 `NULL` 值。如果某一列包含 `NULL` 值，这些值不会被计入总数。
:::

## 使用 COUNT 与 DISTINCT

`COUNT` 函数还可以与 `DISTINCT` 关键字结合使用，以计算某一列中不同值的数量。

### 示例 3：计算不同部门的数量

假设我们想要计算 `employees` 表中不同部门的数量，可以使用以下查询：

```sql
SELECT COUNT(DISTINCT department) AS unique_departments
FROM employees;
```

**输出：**

| unique_departments |
|--------------------|
| 10                 |

在这个例子中，`COUNT(DISTINCT department)` 返回了 `department` 列中不同值的数量。

## 使用 COUNT 与 GROUP BY

`COUNT` 函数经常与 `GROUP BY` 子句一起使用，以分组统计数据。

### 示例 4：按部门统计员工数量

假设我们想要按部门统计员工数量，可以使用以下查询：

```sql
SELECT department, COUNT(*) AS employee_count
FROM employees
GROUP BY department;
```

**输出：**

| department | employee_count |
|------------|----------------|
| HR         | 5              |
| IT         | 10             |
| Sales      | 15             |
| ...        | ...            |

在这个例子中，`COUNT(*)` 与 `GROUP BY` 结合使用，按部门统计了员工数量。

## 实际应用场景

### 场景 1：统计网站用户数量

假设你有一个 `users` 表，其中包含网站用户的信息。你可以使用 `COUNT` 函数来统计注册用户的总数：

```sql
SELECT COUNT(*) AS total_users
FROM users;
```

### 场景 2：统计活跃用户数量

如果你有一个 `login_logs` 表，记录了用户的登录时间，你可以使用 `COUNT(DISTINCT user_id)` 来统计活跃用户的数量：

```sql
SELECT COUNT(DISTINCT user_id) AS active_users
FROM login_logs
WHERE login_time >= '2023-01-01';
```

### 场景 3：按类别统计产品数量

假设你有一个 `products` 表，其中包含产品的类别信息。你可以使用 `COUNT` 与 `GROUP BY` 来按类别统计产品数量：

```sql
SELECT category, COUNT(*) AS product_count
FROM products
GROUP BY category;
```

## 总结

`COUNT` 函数是 SQL 中一个非常强大的工具，用于计算表中的行数或特定列的非空值数量。它可以与 `DISTINCT` 和 `GROUP BY` 结合使用，以满足各种统计需求。

:::tip
在使用 `COUNT` 时，请记住：
- `COUNT(*)` 计算所有行，包括空值和重复值。
- `COUNT(column_name)` 只计算指定列中的非空值。
- `COUNT(DISTINCT column_name)` 计算指定列中不同值的数量。
:::

## 附加资源与练习

为了巩固你对 `COUNT` 函数的理解，建议你尝试以下练习：

1. 在你的数据库中创建一个包含多个列的表，并使用 `COUNT` 函数计算不同列的非空值数量。
2. 使用 `COUNT` 与 `GROUP BY` 结合，按某一列分组统计数据。
3. 尝试使用 `COUNT(DISTINCT column_name)` 计算某一列中不同值的数量。

通过这些练习，你将更好地掌握 `COUNT` 函数的用法，并能够在实际项目中灵活运用。