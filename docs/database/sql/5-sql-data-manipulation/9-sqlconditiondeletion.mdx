---
title: SQL 条件删除
description: 学习如何使用SQL的DELETE语句结合WHERE子句进行条件删除，掌握删除特定数据的技巧。
---

# SQL 条件删除

在SQL中，`DELETE`语句用于从数据库表中删除记录。然而，直接使用`DELETE`语句会删除表中的所有数据，这通常不是我们想要的。为了避免这种情况，我们可以结合`WHERE`子句来指定删除的条件，从而实现**条件删除**。

## 什么是条件删除？

条件删除是指根据特定条件从数据库表中删除记录。通过使用`WHERE`子句，我们可以指定哪些记录需要被删除，而哪些记录需要保留。这种方式非常有用，尤其是在处理大量数据时，可以避免误删重要数据。

### 基本语法

```sql
DELETE FROM 表名
WHERE 条件;
```

- `表名`：要删除数据的表名称。
- `条件`：指定删除记录的条件。只有满足条件的记录才会被删除。

## 代码示例

假设我们有一个名为`employees`的表，结构如下：

```sql
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    department VARCHAR(50),
    salary DECIMAL(10, 2)
);
```

表中包含以下数据：

| id  | name    | department | salary  |
|-----|---------|------------|---------|
| 1   | Alice   | HR         | 5000.00 |
| 2   | Bob     | IT         | 6000.00 |
| 3   | Charlie | HR         | 5500.00 |
| 4   | David   | IT         | 7000.00 |
| 5   | Eve     | Finance    | 8000.00 |

### 示例1：删除特定部门的员工

假设我们想删除所有属于`HR`部门的员工，可以使用以下SQL语句：

```sql
DELETE FROM employees
WHERE department = 'HR';
```

执行后，`employees`表将变为：

| id  | name  | department | salary  |
|-----|-------|------------|---------|
| 2   | Bob   | IT         | 6000.00 |
| 4   | David | IT         | 7000.00 |
| 5   | Eve   | Finance    | 8000.00 |

### 示例2：删除工资低于特定值的员工

如果我们想删除工资低于`6000.00`的员工，可以使用以下SQL语句：

```sql
DELETE FROM employees
WHERE salary < 6000.00;
```

执行后，`employees`表将变为：

| id  | name  | department | salary  |
|-----|-------|------------|---------|
| 2   | Bob   | IT         | 6000.00 |
| 4   | David | IT         | 7000.00 |
| 5   | Eve   | Finance    | 8000.00 |

## 实际应用场景

### 场景1：清理过期数据

假设我们有一个`orders`表，其中包含订单信息。为了节省存储空间，我们可以定期删除已经完成且超过一年的订单：

```sql
DELETE FROM orders
WHERE status = 'completed' AND order_date < DATE_SUB(NOW(), INTERVAL 1 YEAR);
```

### 场景2：删除无效用户

在一个用户管理系统中，我们可能需要删除那些从未激活过账户的用户：

```sql
DELETE FROM users
WHERE activated = 0;
```

## 注意事项

:::caution
在使用`DELETE`语句时，请务必小心，尤其是在没有`WHERE`子句的情况下。误删数据可能会导致不可逆的损失。
:::

:::tip
在执行`DELETE`操作之前，建议先使用`SELECT`语句检查将要删除的数据，以确保删除的是正确的记录。
:::

## 总结

通过结合`DELETE`语句和`WHERE`子句，我们可以实现条件删除，从而精确地删除数据库中的特定记录。这对于数据清理、维护和优化数据库性能非常重要。

## 附加资源与练习

1. **练习1**：在`employees`表中，删除所有工资高于`7000.00`的员工。
2. **练习2**：在`orders`表中，删除所有状态为`cancelled`的订单。
3. **进一步学习**：了解如何使用`TRUNCATE`语句删除表中的所有数据，并比较它与`DELETE`语句的区别。

通过不断练习，你将更加熟练地掌握SQL条件删除的技巧！