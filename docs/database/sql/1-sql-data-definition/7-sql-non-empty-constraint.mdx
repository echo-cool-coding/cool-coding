---
title: SQL 非空约束
description: 了解SQL中的非空约束，掌握如何确保表中的列不接受空值，并通过实际案例加深理解。
---

# SQL 非空约束

在SQL中，**非空约束（NOT NULL Constraint）** 是一种用于确保表中某一列不接受空值（NULL）的约束。空值表示该列的值是未知的或未定义的，而非空约束则强制要求该列必须包含一个有效的值。

## 为什么需要非空约束？

在实际应用中，某些列的值是至关重要的，不能为空。例如，在用户表中，用户的电子邮件地址或用户名通常是必填项。如果允许这些列为空，可能会导致数据不完整或应用程序逻辑错误。通过使用非空约束，可以确保这些列始终包含有效的数据。

## 如何定义非空约束？

在创建表时，可以通过在列定义中添加 `NOT NULL` 关键字来指定非空约束。以下是一个简单的示例：

```sql
CREATE TABLE Users (
    UserID INT PRIMARY KEY,
    Username VARCHAR(50) NOT NULL,
    Email VARCHAR(100) NOT NULL
);
```

在这个例子中，`Username` 和 `Email` 列都被定义为非空列。这意味着在插入或更新数据时，这两列必须包含有效的值，否则SQL引擎将拒绝操作并返回错误。

## 修改现有表的列以添加非空约束

如果已经有一个表，并且希望为某一列添加非空约束，可以使用 `ALTER TABLE` 语句。以下是一个示例：

```sql
ALTER TABLE Users
MODIFY Email VARCHAR(100) NOT NULL;
```

在这个例子中，我们将 `Users` 表中的 `Email` 列修改为非空列。如果 `Email` 列中已经存在空值，此操作将失败，除非你首先处理这些空值。

## 实际案例

假设我们有一个 `Orders` 表，用于存储客户的订单信息。每个订单必须有一个订单号和一个客户ID，这些信息不能为空。我们可以使用非空约束来确保这一点：

```sql
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT NOT NULL,
    OrderDate DATE NOT NULL,
    TotalAmount DECIMAL(10, 2) NOT NULL
);
```

在这个表中，`CustomerID`、`OrderDate` 和 `TotalAmount` 列都被定义为非空列。这意味着在插入新订单时，必须为这些列提供有效的值。

## 非空约束与默认值

有时，你可能希望为某一列设置默认值，以确保即使没有显式提供值，该列也不会为空。例如：

```sql
CREATE TABLE Products (
    ProductID INT PRIMARY KEY,
    ProductName VARCHAR(100) NOT NULL,
    Price DECIMAL(10, 2) NOT NULL,
    StockQuantity INT NOT NULL DEFAULT 0
);
```

在这个例子中，`StockQuantity` 列被定义为非空列，并且设置了默认值为 `0`。这意味着如果插入新记录时没有提供 `StockQuantity` 的值，它将自动设置为 `0`。

## 总结

非空约束是SQL中一种重要的数据完整性工具，用于确保表中的关键列始终包含有效的数据。通过合理使用非空约束，可以避免数据不完整和应用程序逻辑错误。

:::tip
在实际开发中，建议为所有关键列添加非空约束，以确保数据的完整性和一致性。
:::

## 附加资源与练习

1. **练习**：创建一个 `Employees` 表，包含 `EmployeeID`、`FirstName`、`LastName` 和 `HireDate` 列，并确保 `FirstName` 和 `HireDate` 列不能为空。
2. **进一步阅读**：了解SQL中的其他约束类型，如主键约束、唯一约束和外键约束。

通过掌握非空约束，你将能够更好地设计和管理数据库表，确保数据的完整性和可靠性。