---
title: SQL 唯一约束
description: 了解SQL中的唯一约束，确保表中某一列或多列的值是唯一的，避免重复数据。
---

# SQL 唯一约束

在SQL中，**唯一约束（Unique Constraint）** 是一种用于确保表中某一列或多列的值是唯一的约束条件。与主键约束类似，唯一约束也用于防止重复数据的插入，但它允许列中包含空值（NULL），而主键约束则不允许。

## 什么是唯一约束？

唯一约束用于确保表中某一列或多列的值在每一行中都是唯一的。这意味着，如果你尝试插入或更新数据时，违反了唯一约束，数据库会拒绝该操作并返回错误。

:::note
唯一约束与主键约束的区别：
- 主键约束不允许NULL值，而唯一约束允许。
- 一个表只能有一个主键约束，但可以有多个唯一约束。
:::

## 创建唯一约束

你可以在创建表时定义唯一约束，也可以在表创建后通过修改表结构来添加唯一约束。

### 在创建表时定义唯一约束

以下是一个在创建表时定义唯一约束的示例：

```sql
CREATE TABLE Users (
    UserID INT PRIMARY KEY,
    Username VARCHAR(50) UNIQUE,
    Email VARCHAR(100) UNIQUE
);
```

在这个例子中，`Username` 和 `Email` 列都被定义为唯一约束。这意味着每个用户名和电子邮件地址在表中都必须是唯一的。

### 在现有表上添加唯一约束

如果你已经有一个表，并且想要为其添加唯一约束，可以使用 `ALTER TABLE` 语句：

```sql
ALTER TABLE Users
ADD CONSTRAINT UQ_Email UNIQUE (Email);
```

在这个例子中，我们为 `Users` 表的 `Email` 列添加了一个名为 `UQ_Email` 的唯一约束。

## 唯一约束的实际应用

唯一约束在现实世界中有很多应用场景。以下是一些常见的例子：

1. **用户注册系统**：在用户注册系统中，通常需要确保每个用户的用户名和电子邮件地址是唯一的。通过在这些列上添加唯一约束，可以防止重复注册。

2. **产品库存管理**：在库存管理系统中，每个产品的SKU（库存单位）必须是唯一的。通过在SKU列上添加唯一约束，可以避免重复的产品条目。

3. **员工管理系统**：在员工管理系统中，每个员工的员工编号必须是唯一的。通过在员工编号列上添加唯一约束，可以确保每个员工都有一个唯一的标识符。

## 唯一约束的注意事项

1. **NULL值**：唯一约束允许列中包含NULL值，但每个NULL值都被视为唯一。这意味着你可以在唯一约束列中插入多个NULL值，而不会违反约束。

2. **复合唯一约束**：你可以为多个列定义唯一约束，这称为复合唯一约束。在这种情况下，组合列的值必须是唯一的，但单个列的值可以重复。

```sql
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT,
    ProductID INT,
    UNIQUE (CustomerID, ProductID)
);
```

在这个例子中，`CustomerID` 和 `ProductID` 的组合必须是唯一的，但单个 `CustomerID` 或 `ProductID` 可以重复。

## 总结

唯一约束是SQL中一种强大的工具，用于确保表中某一列或多列的值是唯一的。它可以帮助你避免重复数据，并确保数据的完整性。通过在实际应用中使用唯一约束，你可以有效地管理数据库中的数据。

:::tip
如果你想进一步练习，可以尝试以下任务：
1. 创建一个包含唯一约束的表，并尝试插入重复数据，观察数据库的反应。
2. 为现有表添加复合唯一约束，并测试其效果。
:::

## 附加资源

- [SQL唯一约束文档](https://www.w3schools.com/sql/sql_unique.asp)
- [SQL约束指南](https://www.sqlservertutorial.net/sql-server-basics/sql-server-unique-constraint/)

希望这篇内容能帮助你更好地理解SQL中的唯一约束！如果你有任何问题，欢迎在评论区留言。