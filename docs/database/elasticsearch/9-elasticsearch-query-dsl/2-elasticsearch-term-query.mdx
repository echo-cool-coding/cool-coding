---
title: Elasticsearch Term查询
description: 了解Elasticsearch中的Term查询，掌握如何使用它进行精确匹配搜索。
---

# Elasticsearch Term查询

Elasticsearch 是一个强大的分布式搜索引擎，支持多种查询方式。其中，**Term查询** 是最基础的查询之一，用于在文档中精确匹配某个字段的值。本文将详细介绍 Term 查询的概念、用法以及实际应用场景。

## 什么是Term查询？

Term查询用于在Elasticsearch中精确匹配某个字段的值。与全文搜索不同，Term查询不会对查询字符串进行分词处理，而是直接匹配字段的原始值。因此，Term查询通常用于精确匹配，例如匹配一个特定的ID、状态或标签。

:::note
Term查询不会对查询字符串进行分词处理，因此它适用于精确匹配的场景。
:::

## Term查询的基本语法

Term查询的基本语法如下：

```json
{
  "query": {
    "term": {
      "field_name": {
        "value": "search_value"
      }
    }
  }
}
```

- `field_name`：要查询的字段名称。
- `search_value`：要匹配的值。

### 示例

假设我们有一个索引 `products`，其中包含以下文档：

```json
{
  "id": 1,
  "name": "Laptop",
  "category": "electronics"
}
{
  "id": 2,
  "name": "Smartphone",
  "category": "electronics"
}
{
  "id": 3,
  "name": "Tablet",
  "category": "electronics"
}
```

如果我们想要查找 `category` 字段值为 `electronics` 的所有文档，可以使用以下Term查询：

```json
{
  "query": {
    "term": {
      "category": {
        "value": "electronics"
      }
    }
  }
}
```

### 查询结果

执行上述查询后，Elasticsearch 将返回所有 `category` 字段值为 `electronics` 的文档：

```json
{
  "hits": {
    "total": {
      "value": 3,
      "relation": "eq"
    },
    "hits": [
      {
        "_id": "1",
        "_source": {
          "id": 1,
          "name": "Laptop",
          "category": "electronics"
        }
      },
      {
        "_id": "2",
        "_source": {
          "id": 2,
          "name": "Smartphone",
          "category": "electronics"
        }
      },
      {
        "_id": "3",
        "_source": {
          "id": 3,
          "name": "Tablet",
          "category": "electronics"
        }
      }
    ]
  }
}
```

## Term查询的实际应用场景

### 1. 精确匹配ID

在大多数应用中，ID字段通常用于唯一标识一个文档。使用Term查询可以快速查找特定ID的文档。

```json
{
  "query": {
    "term": {
      "id": {
        "value": 1
      }
    }
  }
}
```

### 2. 匹配状态字段

假设我们有一个订单系统，订单的状态可能是 `pending`、`shipped` 或 `delivered`。我们可以使用Term查询来查找所有状态为 `shipped` 的订单。

```json
{
  "query": {
    "term": {
      "status": {
        "value": "shipped"
      }
    }
  }
}
```

### 3. 匹配标签

在博客系统中，每篇文章可能有多个标签。我们可以使用Term查询来查找所有包含特定标签的文章。

```json
{
  "query": {
    "term": {
      "tags": {
        "value": "programming"
      }
    }
  }
}
```

## Term查询的注意事项

:::caution
Term查询对大小写敏感。如果字段的值是 `Electronics`，而查询的值是 `electronics`，则不会匹配成功。
:::

:::tip
如果需要对查询字符串进行分词处理，可以使用 `match` 查询而不是 `term` 查询。
:::

## 总结

Term查询是Elasticsearch中最基础的查询之一，适用于精确匹配场景。通过本文的学习，你应该已经掌握了Term查询的基本语法、实际应用场景以及注意事项。

## 附加资源

- [Elasticsearch官方文档 - Term查询](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html)
- [Elasticsearch查询DSL入门指南](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html)

## 练习

1. 创建一个包含多个文档的索引，并使用Term查询查找特定字段的值。
2. 尝试使用Term查询匹配一个不存在的值，观察返回结果。
3. 比较Term查询和Match查询的区别，并记录你的发现。
