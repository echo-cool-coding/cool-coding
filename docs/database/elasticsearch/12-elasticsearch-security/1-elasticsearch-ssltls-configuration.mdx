---
title: Elasticsearch SSL/TLS 配置
description: 学习如何在 Elasticsearch 中配置 SSL/TLS，以保护数据传输的安全性。本文适合初学者，包含详细的步骤和代码示例。
---

# Elasticsearch SSL/TLS 配置

在现代分布式系统中，数据的安全性至关重要。Elasticsearch 作为一个强大的搜索引擎，通常用于存储和检索大量敏感数据。为了保护这些数据在传输过程中不被窃取或篡改，配置 SSL/TLS 是必不可少的。本文将详细介绍如何在 Elasticsearch 中配置 SSL/TLS，确保数据在传输过程中的安全性。

## 什么是 SSL/TLS？

SSL（Secure Sockets Layer）和 TLS（Transport Layer Security）是用于在网络上加密数据传输的协议。它们通过在客户端和服务器之间建立加密连接，确保数据在传输过程中不会被窃听或篡改。TLS 是 SSL 的继任者，目前广泛使用的是 TLS 协议。

在 Elasticsearch 中，SSL/TLS 可以用于加密节点之间的通信、客户端与 Elasticsearch 之间的通信，以及 Kibana 与 Elasticsearch 之间的通信。

## 配置 Elasticsearch SSL/TLS

### 1. 生成证书

首先，我们需要为 Elasticsearch 生成 SSL/TLS 证书。可以使用 OpenSSL 工具来生成自签名证书，或者从受信任的证书颁发机构（CA）获取证书。

以下是一个使用 OpenSSL 生成自签名证书的示例：

```bash
# 生成私钥
openssl genpkey -algorithm RSA -out elasticsearch.key

# 生成证书签名请求 (CSR)
openssl req -new -key elasticsearch.key -out elasticsearch.csr

# 自签名证书
openssl x509 -req -days 365 -in elasticsearch.csr -signkey elasticsearch.key -out elasticsearch.crt
```

### 2. 配置 Elasticsearch

接下来，我们需要将生成的证书配置到 Elasticsearch 中。编辑 Elasticsearch 的配置文件 `elasticsearch.yml`，添加以下内容：

```yaml
xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.key: /path/to/elasticsearch.key
xpack.security.transport.ssl.certificate: /path/to/elasticsearch.crt
xpack.security.transport.ssl.certificate_authorities: /path/to/elasticsearch.crt
```

:::note
确保将 `/path/to/elasticsearch.key` 和 `/path/to/elasticsearch.crt` 替换为实际的证书路径。
:::

### 3. 配置 Kibana

如果你使用 Kibana 作为 Elasticsearch 的前端，还需要在 Kibana 中配置 SSL/TLS。编辑 Kibana 的配置文件 `kibana.yml`，添加以下内容：

```yaml
elasticsearch.hosts: ["https://localhost:9200"]
elasticsearch.ssl.certificateAuthorities: /path/to/elasticsearch.crt
elasticsearch.ssl.verificationMode: certificate
```

### 4. 重启服务

完成配置后，重启 Elasticsearch 和 Kibana 服务以使更改生效。

```bash
# 重启 Elasticsearch
sudo systemctl restart elasticsearch

# 重启 Kibana
sudo systemctl restart kibana
```

## 实际应用场景

假设你正在为一个电子商务网站构建搜索功能，该网站需要处理用户的个人信息和支付数据。为了保护这些敏感数据，你决定在 Elasticsearch 中启用 SSL/TLS 加密。通过上述步骤，你可以确保数据在传输过程中是安全的，防止中间人攻击和数据泄露。

## 总结

通过本文，你已经学会了如何在 Elasticsearch 中配置 SSL/TLS 以保护数据传输的安全性。SSL/TLS 是确保数据在传输过程中不被窃取或篡改的关键技术。希望本文能帮助你更好地理解并应用这一技术。

## 附加资源

- [Elasticsearch 官方文档](https://www.elastic.co/guide/en/elasticsearch/reference/current/security-basic-setup.html)
- [OpenSSL 官方文档](https://www.openssl.org/docs/)
- [Kibana 官方文档](https://www.elastic.co/guide/en/kibana/current/settings.html)

## 练习

1. 使用 OpenSSL 生成一个新的自签名证书，并将其配置到 Elasticsearch 中。
2. 尝试在 Kibana 中配置 SSL/TLS，并验证是否能够成功连接到 Elasticsearch。
3. 阅读 Elasticsearch 官方文档，了解更多关于安全配置的选项。

通过完成这些练习，你将更深入地理解 Elasticsearch 的 SSL/TLS 配置，并能够在实际项目中应用这些知识。