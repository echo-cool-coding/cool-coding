---
title: MySQL 与Java连接
description: 学习如何使用Java连接MySQL数据库，掌握JDBC的基本用法，并通过实际案例理解其应用场景。
---

## 介绍

在现代应用程序开发中，数据库是不可或缺的一部分。MySQL作为一种流行的关系型数据库管理系统，广泛应用于各种项目中。Java作为一种强大的编程语言，提供了JDBC（Java Database Connectivity）API，使得开发者能够轻松地与MySQL数据库进行交互。

本文将带你从零开始，学习如何使用Java连接MySQL数据库，并通过实际案例展示其应用场景。

## 准备工作

在开始之前，确保你已经完成以下准备工作：

1. **安装MySQL数据库**：确保MySQL已经安装并运行在你的机器上。
2. **下载MySQL Connector/J**：这是MySQL官方提供的JDBC驱动程序，可以从[MySQL官网](https://dev.mysql.com/downloads/connector/j/)下载。
3. **配置Java开发环境**：确保你已经安装了Java Development Kit (JDK) 并配置好了环境变量。

## 连接MySQL数据库

### 1. 导入JDBC驱动

首先，你需要在Java项目中导入MySQL的JDBC驱动。如果你使用的是Maven项目，可以在`pom.xml`中添加以下依赖：

```xml
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.26</version>
</dependency>
```

如果你不使用Maven，可以将下载的`mysql-connector-java-x.x.xx.jar`文件添加到项目的类路径中。

### 2. 加载JDBC驱动

在Java代码中，首先需要加载MySQL的JDBC驱动：

```java
Class.forName("com.mysql.cj.jdbc.Driver");
```

:::note
从JDBC 4.0开始，`Class.forName()`不再是必须的，因为JDBC会自动加载驱动。但为了兼容性，建议仍然保留这一行代码。
:::

### 3. 建立数据库连接

接下来，使用`DriverManager.getConnection()`方法建立与MySQL数据库的连接：

```java
String url = "jdbc:mysql://localhost:3306/mydatabase";
String username = "root";
String password = "password";

Connection connection = DriverManager.getConnection(url, username, password);
```

:::caution
确保`url`中的`mydatabase`替换为你实际的数据库名称，`username`和`password`替换为你的MySQL登录凭据。
:::

### 4. 执行SQL查询

一旦连接建立，你可以使用`Statement`或`PreparedStatement`来执行SQL查询。以下是一个简单的查询示例：

```java
Statement statement = connection.createStatement();
ResultSet resultSet = statement.executeQuery("SELECT * FROM users");

while (resultSet.next()) {
    System.out.println("ID: " + resultSet.getInt("id") + ", Name: " + resultSet.getString("name"));
}
```

### 5. 关闭连接

完成数据库操作后，记得关闭连接以释放资源：

```java
resultSet.close();
statement.close();
connection.close();
```

:::warning
始终确保在`finally`块中关闭连接，以避免资源泄漏。
:::

## 实际案例：用户管理系统

假设你正在开发一个简单的用户管理系统，需要从数据库中读取用户信息并显示在控制台上。以下是完整的代码示例：

```java
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class UserManagementSystem {
    public static void main(String[] args) {
        Connection connection = null;
        Statement statement = null;
        ResultSet resultSet = null;

        try {
            // 加载驱动
            Class.forName("com.mysql.cj.jdbc.Driver");

            // 建立连接
            String url = "jdbc:mysql://localhost:3306/mydatabase";
            String username = "root";
            String password = "password";
            connection = DriverManager.getConnection(url, username, password);

            // 执行查询
            statement = connection.createStatement();
            resultSet = statement.executeQuery("SELECT * FROM users");

            // 处理结果
            while (resultSet.next()) {
                System.out.println("ID: " + resultSet.getInt("id") + ", Name: " + resultSet.getString("name"));
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            // 关闭资源
            try {
                if (resultSet != null) resultSet.close();
                if (statement != null) statement.close();
                if (connection != null) connection.close();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
}
```

## 总结

通过本文，你已经学会了如何使用Java连接MySQL数据库，并执行基本的SQL查询。JDBC是Java与数据库交互的核心技术，掌握它将为你的应用程序开发打下坚实的基础。

## 附加资源与练习

1. **练习**：尝试修改上述代码，使其能够插入、更新和删除数据库中的记录。
2. **深入学习**：了解更多关于JDBC的高级特性，如事务管理、批量处理和连接池。
3. **官方文档**：阅读[MySQL Connector/J官方文档](https://dev.mysql.com/doc/connector-j/8.0/en/)以获取更多详细信息。

希望本文对你有所帮助，祝你在编程学习的道路上越走越远！