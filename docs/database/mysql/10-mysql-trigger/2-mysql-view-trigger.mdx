---
title: MySQL 查看触发器
description: 学习如何在MySQL中查看已创建的触发器，了解触发器的定义、作用以及如何通过SQL语句查看触发器的详细信息。
---

# MySQL 查看触发器

在MySQL中，触发器（Trigger）是一种特殊的存储过程，它会在指定的数据库事件（如INSERT、UPDATE或DELETE）发生时自动执行。触发器通常用于实现复杂的业务逻辑、数据验证或审计跟踪。为了更好地管理和调试触发器，了解如何查看已创建的触发器是非常重要的。

## 什么是触发器？

触发器是与表相关联的数据库对象，它在特定的事件发生时自动执行。触发器可以用于以下场景：

- **数据验证**：在插入或更新数据之前检查数据的有效性。
- **审计跟踪**：记录数据的变化历史。
- **自动计算**：在数据插入或更新时自动计算某些字段的值。

## 如何查看触发器？

在MySQL中，您可以使用以下方法来查看已创建的触发器：

### 1. 使用 `SHOW TRIGGERS` 语句

`SHOW TRIGGERS` 是MySQL提供的一个简单命令，用于查看当前数据库中所有触发器的基本信息。

```sql
SHOW TRIGGERS;
```

**输出示例：**

| Trigger | Event | Table | Statement | Timing | Created | sql_mode | Definer | character_set_client | collation_connection | Database Collation |
|---------|-------|-------|-----------|--------|---------|----------|---------|-----------------------|-----------------------|--------------------|
| trg1    | INSERT| users | BEGIN ... | BEFORE | 2023-10-01 12:00:00 | STRICT_TRANS_TABLES | root@localhost | utf8mb4 | utf8mb4_0900_ai_ci | utf8mb4_0900_ai_ci |

### 2. 使用 `INFORMATION_SCHEMA.TRIGGERS` 表

`INFORMATION_SCHEMA.TRIGGERS` 表提供了更详细的触发器信息。您可以通过查询该表来获取触发器的定义、事件类型、触发时机等详细信息。

```sql
SELECT * FROM INFORMATION_SCHEMA.TRIGGERS WHERE TRIGGER_SCHEMA = 'your_database_name';
```

**输出示例：**

| TRIGGER_CATALOG | TRIGGER_SCHEMA | TRIGGER_NAME | EVENT_MANIPULATION | EVENT_OBJECT_CATALOG | EVENT_OBJECT_SCHEMA | EVENT_OBJECT_TABLE | ACTION_ORDER | ACTION_CONDITION | ACTION_STATEMENT | ACTION_ORIENTATION | ACTION_TIMING | ACTION_REFERENCE_OLD_TABLE | ACTION_REFERENCE_NEW_TABLE | ACTION_REFERENCE_OLD_ROW | ACTION_REFERENCE_NEW_ROW | CREATED | SQL_MODE | DEFINER | CHARACTER_SET_CLIENT | COLLATION_CONNECTION | DATABASE_COLLATION |
|-----------------|----------------|--------------|---------------------|----------------------|---------------------|--------------------|--------------|------------------|------------------|--------------------|---------------|---------------------------|---------------------------|--------------------------|--------------------------|---------|----------|---------|-----------------------|-----------------------|--------------------|
| def             | your_database  | trg1         | INSERT              | def                  | your_database       | users             | 1            | NULL             | BEGIN ...        | ROW                | BEFORE        | NULL                      | NULL                      | OLD                      | NEW                      | 2023-10-01 12:00:00 | STRICT_TRANS_TABLES | root@localhost | utf8mb4 | utf8mb4_0900_ai_ci | utf8mb4_0900_ai_ci |

### 3. 使用 `SHOW CREATE TRIGGER` 语句

`SHOW CREATE TRIGGER` 语句可以显示特定触发器的完整定义，包括触发器的创建语句。

```sql
SHOW CREATE TRIGGER your_database_name.your_trigger_name;
```

**输出示例：**

| Trigger | sql_mode | SQL Original Statement | character_set_client | collation_connection | Database Collation |
|---------|----------|------------------------|-----------------------|-----------------------|--------------------|
| trg1    | STRICT_TRANS_TABLES | CREATE TRIGGER trg1 BEFORE INSERT ON users FOR EACH ROW BEGIN ... | utf8mb4 | utf8mb4_0900_ai_ci | utf8mb4_0900_ai_ci |

## 实际案例

假设我们有一个名为 `orders` 的表，每当有新订单插入时，我们希望自动更新 `order_count` 表中的订单总数。为此，我们创建了一个触发器 `update_order_count`。

```sql
CREATE TRIGGER update_order_count
AFTER INSERT ON orders
FOR EACH ROW
BEGIN
    UPDATE order_count SET count = count + 1;
END;
```

现在，我们可以使用 `SHOW TRIGGERS` 来查看这个触发器的基本信息：

```sql
SHOW TRIGGERS;
```

或者使用 `INFORMATION_SCHEMA.TRIGGERS` 来获取更详细的信息：

```sql
SELECT * FROM INFORMATION_SCHEMA.TRIGGERS WHERE TRIGGER_NAME = 'update_order_count';
```

## 总结

通过本文，您已经学会了如何在MySQL中查看触发器。无论是使用 `SHOW TRIGGERS`、`INFORMATION_SCHEMA.TRIGGERS` 还是 `SHOW CREATE TRIGGER`，您都可以轻松获取触发器的详细信息。掌握这些技能将帮助您更好地管理和调试数据库中的触发器。

## 附加资源

- [MySQL官方文档 - 触发器](https://dev.mysql.com/doc/refman/8.0/en/triggers.html)
- [MySQL触发器教程](https://www.mysqltutorial.org/mysql-triggers/)

## 练习

1. 创建一个简单的触发器，并在 `orders` 表中插入一条记录，观察触发器的执行效果。
2. 使用 `SHOW TRIGGERS` 和 `INFORMATION_SCHEMA.TRIGGERS` 查看您创建的触发器，并记录其详细信息。