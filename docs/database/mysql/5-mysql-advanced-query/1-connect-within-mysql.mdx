---
title: MySQL 内连接
description: 了解MySQL中的内连接（INNER JOIN），掌握如何使用内连接从多个表中提取相关数据，并通过实际案例加深理解。
---

# MySQL 内连接

在MySQL中，**内连接（INNER JOIN）** 是一种用于从多个表中提取相关数据的查询方式。它通过匹配两个表中的共同字段（通常是主键和外键）来返回满足条件的记录。内连接是SQL中最常用的连接类型之一，特别适合初学者学习。

## 什么是内连接？

内连接的核心思想是**只返回两个表中匹配的记录**。如果某条记录在一个表中存在，但在另一个表中没有匹配的记录，那么这条记录将不会出现在结果集中。

### 内连接的语法

内连接的基本语法如下：

```sql
SELECT 列名
FROM 表1
INNER JOIN 表2
ON 表1.共同字段 = 表2.共同字段;
```

- `表1` 和 `表2` 是需要连接的两个表。
- `ON` 子句用于指定连接条件，通常是两个表中的共同字段。

:::tip
如果两个表中的共同字段名称相同，可以使用 `USING` 子句简化语法：

```sql
SELECT 列名
FROM 表1
INNER JOIN 表2
USING (共同字段);
```
:::

## 内连接的工作原理

为了更好地理解内连接，我们可以通过一个简单的例子来说明。

假设我们有两个表：`orders`（订单表）和 `customers`（客户表）。

```sql
-- 创建 customers 表
CREATE TABLE customers (
    customer_id INT PRIMARY KEY,
    name VARCHAR(100)
);

-- 创建 orders 表
CREATE TABLE orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    order_date DATE,
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
);
```

插入一些示例数据：

```sql
-- 插入 customers 数据
INSERT INTO customers (customer_id, name) VALUES
(1, 'Alice'),
(2, 'Bob'),
(3, 'Charlie');

-- 插入 orders 数据
INSERT INTO orders (order_id, customer_id, order_date) VALUES
(101, 1, '2023-10-01'),
(102, 2, '2023-10-02'),
(103, 1, '2023-10-03');
```

现在，我们想要查询每个订单的详细信息，包括客户名称。可以使用内连接来实现：

```sql
SELECT orders.order_id, customers.name, orders.order_date
FROM orders
INNER JOIN customers
ON orders.customer_id = customers.customer_id;
```

### 查询结果

| order_id | name  | order_date  |
|----------|-------|-------------|
| 101      | Alice | 2023-10-01  |
| 102      | Bob   | 2023-10-02  |
| 103      | Alice | 2023-10-03  |

:::note
在这个例子中，`orders` 表中的 `customer_id` 与 `customers` 表中的 `customer_id` 匹配，因此只有匹配的记录被返回。
:::

## 内连接的实际应用场景

内连接在实际开发中非常常见，尤其是在需要从多个表中提取相关数据时。以下是一些典型的应用场景：

1. **订单与客户信息**：如上面的例子所示，查询订单时通常需要关联客户信息。
2. **产品与库存信息**：查询产品时，可能需要关联库存信息以获取当前库存量。
3. **员工与部门信息**：查询员工时，可能需要关联部门信息以获取员工所属部门。

### 示例：查询产品与库存信息

假设我们有以下两个表：

```sql
-- 创建 products 表
CREATE TABLE products (
    product_id INT PRIMARY KEY,
    product_name VARCHAR(100)
);

-- 创建 inventory 表
CREATE TABLE inventory (
    product_id INT,
    quantity INT,
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);
```

插入一些示例数据：

```sql
-- 插入 products 数据
INSERT INTO products (product_id, product_name) VALUES
(1, 'Laptop'),
(2, 'Smartphone'),
(3, 'Tablet');

-- 插入 inventory 数据
INSERT INTO inventory (product_id, quantity) VALUES
(1, 10),
(2, 5),
(3, 0);
```

现在，我们想要查询每个产品的名称及其库存量：

```sql
SELECT products.product_name, inventory.quantity
FROM products
INNER JOIN inventory
ON products.product_id = inventory.product_id;
```

### 查询结果

| product_name | quantity |
|--------------|----------|
| Laptop       | 10       |
| Smartphone   | 5        |
| Tablet       | 0        |

:::caution
如果某个产品在 `inventory` 表中没有对应的记录（例如库存量为0），它仍然会出现在结果集中，因为内连接只关心匹配的记录。
:::

## 总结

内连接是MySQL中非常强大且常用的查询工具，它允许我们从多个表中提取相关数据。通过匹配两个表中的共同字段，内连接能够高效地返回满足条件的记录。

### 关键点回顾
- 内连接只返回两个表中匹配的记录。
- 使用 `ON` 或 `USING` 子句指定连接条件。
- 内连接适用于需要从多个表中提取相关数据的场景。

### 附加练习
1. 尝试在 `orders` 表和 `customers` 表中添加更多数据，并练习使用内连接查询。
2. 创建一个新的表 `employees` 和 `departments`，并使用内连接查询员工及其所属部门的信息。

通过不断练习，你将能够熟练掌握内连接的使用，并在实际项目中灵活应用。