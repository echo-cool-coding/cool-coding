---
title: MySQL JSON函数
description: "了解如何使用 MySQL 中的 JSON 函数来处理和操作 JSON 数据。本文适合初学者，包含详细的解释、代码示例和实际应用场景。"
---

# MySQL JSON函数

在现代应用程序中，JSON（JavaScript Object Notation）已成为一种常见的数据交换格式。MySQL 从 5.7 版本开始引入了对 JSON 数据类型的支持，并提供了一系列强大的 JSON 函数，用于处理和操作 JSON 数据。本文将详细介绍这些函数，并通过示例展示它们的用法。

## 什么是 JSON？

JSON 是一种轻量级的数据交换格式，易于人类阅读和编写，同时也易于机器解析和生成。它基于 JavaScript 的一个子集，但独立于语言，广泛用于 Web 应用程序中。

在 MySQL 中，JSON 数据可以存储在 `JSON` 数据类型的列中，并且可以使用各种 JSON 函数来查询和操作这些数据。

## 常用的 MySQL JSON 函数

### 1. `JSON_EXTRACT`

`JSON_EXTRACT` 函数用于从 JSON 文档中提取数据。它接受两个参数：JSON 文档和路径表达式。

**语法：**
```sql
JSON_EXTRACT(json_doc, path)
```

**示例：**
```sql
SELECT JSON_EXTRACT('{"name": "John", "age": 30}', '$.name');
```

**输出：**
```
"John"
```

### 2. `JSON_OBJECT`

`JSON_OBJECT` 函数用于创建一个 JSON 对象。它接受一系列键值对作为参数。

**语法：**
```sql
JSON_OBJECT(key1, value1, key2, value2, ...)
```

**示例：**
```sql
SELECT JSON_OBJECT('name', 'John', 'age', 30);
```

**输出：**
```
{"name": "John", "age": 30}
```

### 3. `JSON_ARRAY`

`JSON_ARRAY` 函数用于创建一个 JSON 数组。它接受一系列值作为参数。

**语法：**
```sql
JSON_ARRAY(value1, value2, ...)
```

**示例：**
```sql
SELECT JSON_ARRAY('apple', 'banana', 'cherry');
```

**输出：**
```
["apple", "banana", "cherry"]
```

### 4. `JSON_CONTAINS`

`JSON_CONTAINS` 函数用于检查 JSON 文档是否包含指定的值。

**语法：**
```sql
JSON_CONTAINS(json_doc, value[, path])
```

**示例：**
```sql
SELECT JSON_CONTAINS('["apple", "banana", "cherry"]', '"banana"');
```

**输出：**
```
1
```

### 5. `JSON_SET`

`JSON_SET` 函数用于在 JSON 文档中设置或更新值。

**语法：**
```sql
JSON_SET(json_doc, path, value[, path, value] ...)
```

**示例：**
```sql
SELECT JSON_SET('{"name": "John", "age": 30}', '$.age', 31);
```

**输出：**
```
{"name": "John", "age": 31}
```

### 6. `JSON_REMOVE`

`JSON_REMOVE` 函数用于从 JSON 文档中删除指定的键或值。

**语法：**
```sql
JSON_REMOVE(json_doc, path[, path] ...)
```

**示例：**
```sql
SELECT JSON_REMOVE('{"name": "John", "age": 30}', '$.age');
```

**输出：**
```
{"name": "John"}
```

## 实际应用场景

### 场景 1：存储和查询用户配置文件

假设我们有一个用户配置文件表 `user_profiles`，其中包含一个 `profile_data` 列，用于存储 JSON 格式的用户信息。

**表结构：**
```sql
CREATE TABLE user_profiles (
    id INT PRIMARY KEY AUTO_INCREMENT,
    profile_data JSON
);
```

**插入数据：**
```sql
INSERT INTO user_profiles (profile_data)
VALUES ('{"name": "John", "age": 30, "hobbies": ["reading", "traveling"]}');
```

**查询用户年龄：**
```sql
SELECT JSON_EXTRACT(profile_data, '$.age') AS age
FROM user_profiles
WHERE id = 1;
```

**输出：**
```
30
```

### 场景 2：更新用户配置文件

我们可以使用 `JSON_SET` 函数来更新用户的年龄。

**更新用户年龄：**
```sql
UPDATE user_profiles
SET profile_data = JSON_SET(profile_data, '$.age', 31)
WHERE id = 1;
```

**查询更新后的数据：**
```sql
SELECT profile_data
FROM user_profiles
WHERE id = 1;
```

**输出：**
```
{"name": "John", "age": 31, "hobbies": ["reading", "traveling"]}
```

## 总结

MySQL 的 JSON 函数为处理和操作 JSON 数据提供了强大的工具。通过本文的介绍，你应该已经掌握了如何使用这些函数来提取、创建、更新和删除 JSON 数据。这些功能在现代应用程序中非常有用，尤其是在处理复杂的数据结构时。

## 附加资源

- [MySQL 官方文档：JSON 函数](https://dev.mysql.com/doc/refman/8.0/en/json-functions.html)
- [JSON 数据格式介绍](https://www.json.org/json-zh.html)

## 练习

1. 创建一个包含 JSON 数据的表，并插入一些示例数据。
2. 使用 `JSON_EXTRACT` 函数查询特定的 JSON 字段。
3. 使用 `JSON_SET` 函数更新 JSON 数据中的某个字段。
4. 使用 `JSON_REMOVE` 函数删除 JSON 数据中的某个字段。

通过这些练习，你将更深入地理解 MySQL 中的 JSON 函数，并能够在实际项目中应用它们。