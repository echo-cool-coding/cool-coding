---
title: 以太网帧格式
description: 了解以太网帧格式的基本结构及其在局域网通信中的作用。本文适合初学者，将逐步讲解以太网帧的各个字段及其功能。
---

## 介绍

以太网（Ethernet）是局域网（LAN）中最常用的通信协议之一。它定义了数据在网络中传输的格式和规则。以太网帧（Ethernet Frame）是以太网协议中用于传输数据的基本单位。理解以太网帧的格式对于学习网络通信至关重要。

本文将详细介绍以太网帧的各个字段，并通过实际案例展示其应用场景。

## 以太网帧的基本结构

以太网帧由多个字段组成，每个字段都有特定的功能。以下是标准的以太网帧格式：

```mermaid
graph LR
    A[前导码] --> B[目的MAC地址] --> C[源MAC地址] --> D[类型/长度] --> E[数据] --> F[帧校验序列]
```

### 1. 前导码（Preamble）

前导码是帧的起始部分，由7个字节的`10101010`组成，用于同步发送方和接收方的时钟。最后一个字节是帧起始定界符（Start Frame Delimiter, SFD），其值为`10101011`，表示帧的开始。

### 2. 目的MAC地址（Destination MAC Address）

目的MAC地址是一个6字节的字段，用于标识数据帧的目标设备。每个网络设备都有一个唯一的MAC地址。

### 3. 源MAC地址（Source MAC Address）

源MAC地址也是一个6字节的字段，用于标识发送数据帧的设备。

### 4. 类型/长度（Type/Length）

这个字段可以是2字节的类型字段，表示上层协议的类型（如IPv4、IPv6等），也可以是长度字段，表示数据字段的长度。

### 5. 数据（Data）

数据字段包含实际传输的数据，长度在46到1500字节之间。如果数据少于46字节，则需要填充（Padding）以达到最小长度。

### 6. 帧校验序列（Frame Check Sequence, FCS）

FCS是一个4字节的字段，用于检测帧在传输过程中是否发生了错误。它使用CRC（循环冗余校验）算法进行计算。

## 实际案例

假设我们有一个简单的局域网，其中有两台计算机A和B。计算机A要向计算机B发送一条消息“Hello, World!”。

1. **封装帧**：计算机A将消息封装成一个以太网帧。目的MAC地址为计算机B的MAC地址，源MAC地址为计算机A的MAC地址，类型字段设置为`0x0800`（表示IPv4协议），数据字段包含“Hello, World!”，并计算FCS。

2. **传输帧**：计算机A通过以太网将帧发送到计算机B。

3. **接收帧**：计算机B接收到帧后，检查目的MAC地址是否与自己的MAC地址匹配。如果匹配，则继续处理帧。

4. **校验帧**：计算机B计算FCS，并与帧中的FCS字段进行比较。如果一致，则帧未被损坏。

5. **解封装帧**：计算机B提取数据字段中的“Hello, World!”，并将其传递给上层协议进行处理。

## 总结

以太网帧是以太网通信的基本单位，理解其结构对于学习网络通信至关重要。本文详细介绍了以太网帧的各个字段及其功能，并通过实际案例展示了以太网帧在局域网中的应用。

## 附加资源

- [以太网协议详解](https://en.wikipedia.org/wiki/Ethernet_frame)
- [网络协议入门](https://www.example.com/network-protocols)

## 练习

1. 请解释前导码的作用。
2. 如果数据字段的长度为30字节，会发生什么情况？
3. 编写一个简单的程序，模拟以太网帧的封装和解封装过程。

:::tip
提示：在编写程序时，可以使用Python的`struct`模块来处理二进制数据。
:::