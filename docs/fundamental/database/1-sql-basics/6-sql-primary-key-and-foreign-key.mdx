---
title: SQL主键与外键
description: 了解SQL中的主键和外键，掌握它们在数据库设计中的重要性以及如何使用它们来建立表之间的关系。
---

# SQL主键与外键

在关系型数据库中，主键（Primary Key）和外键（Foreign Key）是两个非常重要的概念。它们不仅用于唯一标识表中的记录，还用于建立表与表之间的关系。本文将详细介绍主键和外键的定义、作用以及如何使用它们。

## 什么是主键？

主键是表中用于唯一标识每一行记录的列或列的组合。主键的值必须是唯一的，且不能为NULL。每个表只能有一个主键。

### 主键的特点
- **唯一性**：主键的值在表中必须是唯一的。
- **非空性**：主键的值不能为NULL。
- **不可变性**：主键的值一旦设定，通常不应更改。

### 主键的创建

在创建表时，可以使用 `PRIMARY KEY` 关键字来定义主键。以下是一个简单的示例：

```sql
CREATE TABLE Students (
    StudentID INT PRIMARY KEY,
    FirstName VARCHAR(50),
    LastName VARCHAR(50)
);
```

在这个例子中，`StudentID` 列被定义为主键，这意味着每个学生的 `StudentID` 必须是唯一的。

## 什么是外键？

外键是表中的一列或一组列，它们引用了另一个表中的主键。外键用于建立表与表之间的关系，确保数据的完整性和一致性。

### 外键的特点
- **引用性**：外键引用另一个表的主键。
- **可空性**：外键的值可以为NULL，表示没有关联的记录。
- **一致性**：外键的值必须存在于被引用的表中。

### 外键的创建

在创建表时，可以使用 `FOREIGN KEY` 关键字来定义外键。以下是一个简单的示例：

```sql
CREATE TABLE Enrollments (
    EnrollmentID INT PRIMARY KEY,
    StudentID INT,
    CourseID INT,
    FOREIGN KEY (StudentID) REFERENCES Students(StudentID),
    FOREIGN KEY (CourseID) REFERENCES Courses(CourseID)
);
```

在这个例子中，`StudentID` 和 `CourseID` 列被定义为外键，分别引用了 `Students` 表和 `Courses` 表的主键。

## 主键与外键的关系

主键和外键共同作用，用于建立表与表之间的关系。主键用于唯一标识表中的记录，而外键用于引用其他表中的记录。通过这种方式，数据库可以确保数据的一致性和完整性。

### 实际案例

假设我们有两个表：`Students` 和 `Enrollments`。`Students` 表存储学生的信息，`Enrollments` 表存储学生的选课信息。

```sql
CREATE TABLE Students (
    StudentID INT PRIMARY KEY,
    FirstName VARCHAR(50),
    LastName VARCHAR(50)
);

CREATE TABLE Enrollments (
    EnrollmentID INT PRIMARY KEY,
    StudentID INT,
    CourseID INT,
    FOREIGN KEY (StudentID) REFERENCES Students(StudentID),
    FOREIGN KEY (CourseID) REFERENCES Courses(CourseID)
);
```

在这个例子中，`Enrollments` 表中的 `StudentID` 列引用了 `Students` 表中的 `StudentID` 列。这意味着每个选课记录都必须与一个有效的学生记录相关联。

## 总结

主键和外键是关系型数据库设计中的核心概念。主键用于唯一标识表中的记录，而外键用于建立表与表之间的关系。通过合理使用主键和外键，可以确保数据的完整性和一致性。

### 附加资源与练习

- **练习**：尝试创建一个包含主键和外键的数据库，并插入一些数据来验证它们的作用。
- **资源**：阅读更多关于数据库设计的书籍或在线教程，深入了解主键和外键的高级用法。

:::tip
在实际应用中，合理使用主键和外键可以大大提高数据库的性能和数据的一致性。建议在设计数据库时，仔细考虑表之间的关系，并合理使用主键和外键。
:::