---
title: SQL聚合函数
description: 了解SQL中的聚合函数，包括COUNT、SUM、AVG、MIN和MAX，以及如何在查询中使用它们来汇总和分析数据。
---

# SQL聚合函数

在SQL中，聚合函数是用于对一组值执行计算并返回单个值的函数。它们通常用于汇总和分析数据，例如计算总和、平均值、最大值或最小值。聚合函数在数据分析和报表生成中非常有用。

## 常见的SQL聚合函数

以下是SQL中最常用的聚合函数：

1. **COUNT**: 计算行数。
2. **SUM**: 计算数值列的总和。
3. **AVG**: 计算数值列的平均值。
4. **MIN**: 查找列中的最小值。
5. **MAX**: 查找列中的最大值。

### 1. COUNT函数

`COUNT`函数用于计算表中的行数或满足特定条件的行数。

**语法：**
```sql
SELECT COUNT(column_name)
FROM table_name
WHERE condition;
```

**示例：**
假设我们有一个名为`employees`的表，其中包含员工的信息。我们想要计算表中的员工总数。

```sql
SELECT COUNT(*) AS total_employees
FROM employees;
```

**输出：**
```
total_employees
---------------
100
```

### 2. SUM函数

`SUM`函数用于计算数值列的总和。

**语法：**
```sql
SELECT SUM(column_name)
FROM table_name
WHERE condition;
```

**示例：**
假设我们有一个名为`sales`的表，其中包含每笔销售的金额。我们想要计算所有销售的总金额。

```sql
SELECT SUM(amount) AS total_sales
FROM sales;
```

**输出：**
```
total_sales
-----------
50000
```

### 3. AVG函数

`AVG`函数用于计算数值列的平均值。

**语法：**
```sql
SELECT AVG(column_name)
FROM table_name
WHERE condition;
```

**示例：**
假设我们有一个名为`products`的表，其中包含产品的价格。我们想要计算所有产品的平均价格。

```sql
SELECT AVG(price) AS average_price
FROM products;
```

**输出：**
```
average_price
-------------
25.50
```

### 4. MIN函数

`MIN`函数用于查找列中的最小值。

**语法：**
```sql
SELECT MIN(column_name)
FROM table_name
WHERE condition;
```

**示例：**
假设我们有一个名为`orders`的表，其中包含订单的金额。我们想要查找最小订单金额。

```sql
SELECT MIN(amount) AS min_order_amount
FROM orders;
```

**输出：**
```
min_order_amount
----------------
10
```

### 5. MAX函数

`MAX`函数用于查找列中的最大值。

**语法：**
```sql
SELECT MAX(column_name)
FROM table_name
WHERE condition;
```

**示例：**
假设我们有一个名为`products`的表，其中包含产品的价格。我们想要查找最高价格。

```sql
SELECT MAX(price) AS max_price
FROM products;
```

**输出：**
```
max_price
---------
100
```

## 实际应用场景

### 场景1：计算每个部门的员工数量

假设我们有一个`employees`表，其中包含员工的`department_id`。我们想要计算每个部门的员工数量。

```sql
SELECT department_id, COUNT(*) AS employee_count
FROM employees
GROUP BY department_id;
```

**输出：**
```
department_id | employee_count
--------------|---------------
1             | 20
2             | 15
3             | 25
```

### 场景2：计算每个产品的总销售额

假设我们有一个`sales`表，其中包含`product_id`和`amount`。我们想要计算每个产品的总销售额。

```sql
SELECT product_id, SUM(amount) AS total_sales
FROM sales
GROUP BY product_id;
```

**输出：**
```
product_id | total_sales
-----------|------------
101        | 5000
102        | 3000
103        | 7000
```

## 总结

SQL聚合函数是数据分析中不可或缺的工具。通过使用`COUNT`、`SUM`、`AVG`、`MIN`和`MAX`等函数，我们可以轻松地对数据进行汇总和分析。掌握这些函数将帮助你在处理数据库时更加高效。

## 附加资源与练习

- **练习1**：在一个包含学生成绩的表中，计算每个学生的平均成绩。
- **练习2**：在一个包含订单信息的表中，查找每个客户的最大订单金额。
- **练习3**：在一个包含产品销售数据的表中，计算每个月的总销售额。

:::tip
建议在实际数据库中尝试这些查询，以加深对SQL聚合函数的理解。
:::