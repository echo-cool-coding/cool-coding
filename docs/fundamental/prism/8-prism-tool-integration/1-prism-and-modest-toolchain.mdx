---
title: PRISM 与MODEST工具链
description: 学习如何将PRISM概率模型检测器与MODEST工具链集成，用于高级概率系统建模与分析。
---

# PRISM 与MODEST工具链

## 介绍

PRISM和MODEST（Modeling and Description Language for Stochastic Timed Systems）是两个互补的工具，用于概率系统的建模与分析。PRISM是一个著名的**概率模型检测器**，而MODEST是一个更通用的**建模语言和工具链**，支持更丰富的特性（如实时行为、混合系统等）。通过集成两者，用户可以结合PRISM的精确分析与MODEST的灵活建模能力。

:::note 关键概念
- **PRISM**: 专注于离散概率模型（如马尔可夫链）的模型检测。
- **MODEST**: 提供更广泛的建模能力，包括实时、随机和混合系统。
- **工具链集成**: 将MODEST模型转换为PRISM可读格式（如`.prism`），利用PRISM进行验证。
:::

---

## 工具链集成步骤

### 1. 安装与配置
确保已安装以下工具：
- [PRISM](https://www.prismmodelchecker.org/)
- [MODEST Toolset](https://www.modestchecker.net/)

### 2. 从MODEST到PRISM的转换
MODEST的`modest`工具可以将`.modest`模型转换为PRISM格式：
```bash
modest convert model.modest model.prism
```

### 3. 在PRISM中分析
转换后的`.prism`文件可直接用PRISM分析：
```bash
prism model.prism properties.pctl
```

---

## 实际案例：简单通信协议

### MODEST模型示例
以下是一个MODEST模型（`protocol.modest`），描述了一个可能丢失消息的通信协议：
```modest
// 定义发送方行为
sender = {
  send! { rate: 1.0 };
  if (prob(0.9)) { receiver?; } 
  else { sender; }
};

// 定义接收方行为
receiver = {
  receive! { rate: 1.0 };
  sender!;
};

// 系统初始化
system = sender || receiver;
```

### 转换为PRISM格式
运行转换命令后，生成的`protocol.prism`文件如下：
```prism
dtmc

module Sender
  s : [0..1] init 0;
  [send] s=0 -> 1.0: (s'=1);
  [receive] s=1 -> 0.9: (s'=0) + 0.1: (s'=1);
endmodule

module Receiver
  r : [0..1] init 0;
  [receive] r=0 -> 1.0: (r'=1);
  [send] r=1 -> 1.0: (r'=0);
endmodule
```

### 验证属性
在PRISM中验证“消息最终被接收的概率”：
```pctl
P>=1 [ F receive=1 ]
```

---

## 进阶应用：混合系统建模

MODEST支持**混合自动机**（Hybrid Automata），可建模连续动态与离散事件的交互。例如，温度控制器模型：
```modest
hybrid controller = {
  real temp = 20.0;
  while (true) {
    when (temp >= 25.0) { 
      cool! { temp' = temp - 1.0; };
    } 
    when (temp <= 15.0) { 
      heat! { temp' = temp + 1.0; };
    }
    wait { rate: 0.1; temp' = temp + 0.5 * normal(0,1); };
  }
};
```

:::caution 注意
PRISM本身不支持混合系统，但可通过离散化近似分析。MODEST的`modes`工具更适合此类场景。
:::

---

## 总结与资源

### 总结
- MODEST提供更丰富的建模语法，PRISM提供强大的分析能力。
- 通过工具链集成，可以覆盖从简单概率模型到复杂混合系统的验证需求。

### 扩展练习
1. 尝试将MODEST的[案例库](https://www.modestchecker.net/examples/)中的模型转换为PRISM格式。
2. 用PRISM验证转换后模型的概率性质（如`P=? [ F "success" ]`）。

### 附加资源
- [PRISM官方文档](https://prismmodelchecker.org/manual/)
- [MODEST用户指南](https://www.modestchecker.net/documentation/)