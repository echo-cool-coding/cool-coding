---
title: PRISM 常量声明
description: 学习如何在PRISM概率模型检查器中声明和使用常量，包括语法规则、实际应用示例和最佳实践。
---

# PRISM 常量声明

## 介绍

在PRISM模型中，常量(constants)是固定值的命名标识符，用于提高模型的可读性和可维护性。与变量不同，常量的值在模型执行过程中不会改变。PRISM支持多种类型的常量，包括整数、布尔值和浮点数。

常量声明的主要优势包括：
- 使模型更易于理解和修改
- 避免在多个位置重复相同的字面值
- 方便进行参数化分析

## 基本语法

PRISM中的常量声明使用`const`关键字，基本语法如下：

```prism
const [类型] [名称] = [值];
```

其中：
- `[类型]`是可选的，可以是`int`、`bool`或`double`
- `[名称]`是常量的标识符
- `[值]`是常量初始值

:::note
如果省略类型，PRISM会根据初始值自动推断常量类型。
:::

### 示例1：简单常量声明

```prism
const int MAX_USERS = 10;
const bool DEBUG_MODE = false;
const double FAILURE_RATE = 0.01;
```

## 常量类型详解

### 1. 整数常量

用于表示整数值：

```prism
const int BUFFER_SIZE = 100;
const RETRY_LIMIT = 3;  // 类型推断为int
```

### 2. 布尔常量

只有`true`或`false`两个值：

```prism
const bool ENABLE_LOGGING = true;
const USE_CACHE = false;  // 类型推断为bool
```

### 3. 双精度浮点常量

用于表示实数：

```prism
const double PROB_SUCCESS = 0.95;
const ERROR_RATE = 0.001;  // 类型推断为double
```

## 常量表达式

常量可以使用表达式初始化，只要表达式中的所有成分都是常量：

```prism
const int TOTAL_STATES = 20;
const ACTIVE_STATES = TOTAL_STATES - 5;  // 使用常量表达式
const double PROB_FAILURE = 1.0 - PROB_SUCCESS;
```

:::caution 注意事项
常量表达式不能包含变量或非确定性值，必须在模型解析时就能计算出确定值。
:::

## 实际应用案例

### 案例1：队列系统模型

考虑一个简单的队列系统，我们可以使用常量定义系统参数：

```prism
const int QUEUE_CAPACITY = 5;      // 队列最大容量
const double ARRIVAL_RATE = 0.3;   // 到达率
const double SERVICE_RATE = 0.5;   // 服务率

module Queue
  q : [0..QUEUE_CAPACITY] init 0;  // 队列当前长度
  
  [arrival] q < QUEUE_CAPACITY -> ARRIVAL_RATE : (q' = q + 1);
  [service] q > 0 -> SERVICE_RATE : (q' = q - 1);
endmodule
```

### 案例2：网络协议参数

定义网络协议中的超时参数：

```prism
const int MAX_RETRIES = 3;
const TIMEOUT = 1000;  // 毫秒

module Sender
  retries : [0..MAX_RETRIES] init 0;
  
  [send] retries < MAX_RETRIES -> (retries' = retries + 1);
  [timeout] retries > 0 -> (retries' = retries - 1);
endmodule
```

## 高级用法

### 常量重定义

在PRISM命令行中，可以使用`-const`选项覆盖模型中定义的常量值，便于参数化分析：

```bash
prism model.pm -const "QUEUE_CAPACITY=10,ARRIVAL_RATE=0.5"
```

### 常量与公式

常量可以与公式结合使用，创建更灵活的定义：

```prism
formula IS_FULL = (q = QUEUE_CAPACITY);
formula IS_EMPTY = (q = 0);
```

## 总结

PRISM中的常量声明是构建清晰、可维护模型的重要工具。关键要点包括：

1. 使用`const`关键字声明常量
2. 支持整数、布尔和浮点类型
3. 可以通过表达式初始化
4. 提高模型的可读性和可重用性
5. 支持命令行覆盖进行参数化分析

## 练习与扩展

1. 尝试创建一个简单的PRISM模型，使用至少3种不同类型的常量
2. 探索如何在命令行中覆盖常量值并观察模型行为变化
3. 设计一个使用常量表达式的模型，例如计算几何图形的属性

## 附加资源

- PRISM官方文档：常量声明部分
- 《概率模型检查》教材第三章
- PRISM示例模型库中的常量使用案例