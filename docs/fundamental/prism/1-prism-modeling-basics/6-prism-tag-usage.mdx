---
title: PRISM 标签使用
description: 学习如何在PRISM概率模型检查器中使用标签(label)来标记模型状态和简化属性规范。
---

# PRISM 标签使用

## 介绍

在PRISM模型检查器中，**标签(label)** 是用于标识模型特定状态的布尔表达式。它们类似于编程中的布尔标志，可以帮助您：

1. 标记模型中的关键状态（如"故障状态"或"目标状态"）
2. 简化概率属性规范
3. 提高模型可读性
4. 在复杂模型中创建逻辑分组

标签在PRISM语言中通过`label`关键字定义，可以像状态变量一样在属性规范中使用。

## 基本语法

PRISM中定义标签的标准语法是：

```prism
label "label_name" = condition;
```

其中：
- `label_name` 是您选择的标识符（建议使用描述性名称）
- `condition` 是布尔表达式，定义哪些状态应该被标记

### 简单示例

```prism
// 定义一个标记所有x大于5的状态的标签
label "x_large" = x > 5;

// 定义标记系统故障状态的标签
label "system_failed" = (status1 = "failed") | (status2 = "failed");
```

## 标签类型

PRISM支持两种主要标签类型：

1. **状态标签**：标记特定状态条件
   ```prism
   label "safe" = temperature <= 100;
   ```

2. **初始化标签**：仅标记初始状态
   ```prism
   label "init" = init;
   ```

:::tip
PRISM会自动为每个模块创建`"init"`标签，标记所有可能的初始状态。
:::

## 实际应用案例

### 案例1：标记目标状态

考虑一个简单的随机游走模型，我们想标记位置3为目标状态：

```prism
module RandomWalk
  x : [0..3] init 0;
  
  [] x=0 -> 0.5:(x'=1) + 0.5:(x'=0);
  [] x=1 -> 0.5:(x'=2) + 0.5:(x'=0);
  [] x=2 -> 0.5:(x'=3) + 0.5:(x'=1);
  [] x=3 -> 1.0:(x'=3);
  
  label "goal" = x=3;
endmodule
```

现在我们可以使用这个标签来查询属性，例如"最终到达目标的概率"：

```prism
P=? [ F "goal" ]
```

### 案例2：系统健康监测

在更复杂的系统中，标签可以帮助识别故障状态：

```prism
module ServerCluster
  server1 : [0..2]; // 0=off, 1=ok, 2=failed
  server2 : [0..2];
  
  // 转移规则...
  
  label "fully_operational" = (server1=1) & (server2=1);
  label "partial_failure" = (server1=2 & server2=1) | (server1=1 & server2=2);
  label "total_failure" = (server1=2) & (server2=2);
endmodule
```

## 在属性规范中使用标签

标签可以大大简化属性规范。比较以下两种写法：

不使用标签：
```prism
P>=0.99 [ G !((server1=2 & server2=2) | (server1=2 & server3=2) | ...) ]
```

使用标签：
```prism
label "any_failure" = ...; // 定义所有故障情况的组合
P>=0.99 [ G !"any_failure" ]
```

## 高级用法

### 标签组合

标签可以像布尔变量一样组合：

```prism
label "critical" = "high_temp" & "low_pressure";
```

### 模块特定标签

在不同模块中定义同名标签会自动进行逻辑或(OR)组合：

```prism
// 模块1
label "error" = ...;

// 模块2
label "error" = ...;

// 最终"error"标签 = 模块1的error OR 模块2的error
```

## 常见错误与调试

:::caution
1. **循环定义**：避免标签间的循环引用
   ```prism
   label "A" = "B";
   label "B" = "A"; // 错误！
   ```

2. **未定义标签**：确保使用的标签已定义

3. **复杂表达式**：过度复杂的标签条件可能影响模型检查性能
:::

## 总结

PRISM标签是强大的工具，可以：
- 提高模型可读性和可维护性
- 简化复杂属性的规范
- 标记关键系统状态
- 创建状态条件的逻辑分组

## 练习与扩展

1. 在您的模型中添加三个标签，分别标记：
   - 初始状态
   - 某种中间状态
   - 目标/结束状态

2. 重写现有属性，使用新定义的标签替代原始状态条件

3. 尝试创建组合标签，将多个简单标签用逻辑运算符连接

## 附加资源

- PRISM官方文档：Labels部分
- 《Principles of Model Checking》第10章
- PRISM示例模型中的标签使用案例