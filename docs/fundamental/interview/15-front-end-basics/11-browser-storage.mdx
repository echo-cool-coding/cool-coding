---
title: 浏览器存储
description: 了解浏览器存储的基本概念、类型及其在前端开发中的应用场景。
---

## 介绍

在现代 Web 开发中，浏览器存储是一个非常重要的概念。它允许我们在用户的浏览器中存储数据，以便在页面刷新或关闭后仍然可以访问这些数据。浏览器存储有多种方式，每种方式都有其特定的用途和限制。本文将详细介绍常见的浏览器存储方式，包括 `Cookie`、`LocalStorage`、`SessionStorage` 和 `IndexedDB`，并通过实际案例展示它们的应用场景。

## 1. Cookie

### 什么是 Cookie？

`Cookie` 是最早的浏览器存储方式之一，主要用于存储少量数据（通常不超过 4KB）。`Cookie` 通常用于存储用户的会话信息、偏好设置等。每次 HTTP 请求时，`Cookie` 会自动附加到请求头中，因此它非常适合用于身份验证和会话管理。

### 如何使用 Cookie？

以下是一个简单的 `Cookie` 设置和读取的示例：

```javascript
// 设置 Cookie
document.cookie = "username=JohnDoe; expires=Thu, 18 Dec 2023 12:00:00 UTC; path=/";

// 读取 Cookie
console.log(document.cookie); // 输出: username=JohnDoe
```

:::note
`Cookie` 的 `expires` 属性用于设置 `Cookie` 的过期时间。如果不设置过期时间，`Cookie` 将在浏览器关闭时自动删除。
:::

### 实际应用场景

`Cookie` 常用于以下场景：
- 用户登录状态的保持
- 购物车信息的存储
- 用户偏好的保存

## 2. LocalStorage

### 什么是 LocalStorage？

`LocalStorage` 是 HTML5 引入的一种持久化存储方式，允许在浏览器中存储较大量的数据（通常为 5MB 或更多）。与 `Cookie` 不同，`LocalStorage` 中的数据不会随 HTTP 请求发送到服务器，且数据在页面关闭后仍然保留。

### 如何使用 LocalStorage？

以下是一个 `LocalStorage` 的示例：

```javascript
// 存储数据
localStorage.setItem("username", "JohnDoe");

// 读取数据
const username = localStorage.getItem("username");
console.log(username); // 输出: JohnDoe

// 删除数据
localStorage.removeItem("username");
```

:::tip
`LocalStorage` 的数据不会过期，除非手动删除或清除浏览器缓存。
:::

### 实际应用场景

`LocalStorage` 常用于以下场景：
- 保存用户的主题偏好
- 缓存静态资源以提高页面加载速度
- 存储用户输入的表单数据

## 3. SessionStorage

### 什么是 SessionStorage？

`SessionStorage` 与 `LocalStorage` 类似，但它的数据仅在当前会话期间有效。当用户关闭浏览器标签页或窗口时，`SessionStorage` 中的数据将被清除。

### 如何使用 SessionStorage？

以下是一个 `SessionStorage` 的示例：

```javascript
// 存储数据
sessionStorage.setItem("theme", "dark");

// 读取数据
const theme = sessionStorage.getItem("theme");
console.log(theme); // 输出: dark

// 删除数据
sessionStorage.removeItem("theme");
```

:::caution
`SessionStorage` 的数据仅在当前会话期间有效，关闭标签页或窗口后数据将被清除。
:::

### 实际应用场景

`SessionStorage` 常用于以下场景：
- 临时存储表单数据
- 保存当前页面的状态
- 存储用户在一次会话中的操作记录

## 4. IndexedDB

### 什么是 IndexedDB？

`IndexedDB` 是一种低级 API，用于在浏览器中存储大量结构化数据。与 `LocalStorage` 和 `SessionStorage` 不同，`IndexedDB` 支持事务、索引和复杂的查询操作，适合存储大量数据。

### 如何使用 IndexedDB？

以下是一个简单的 `IndexedDB` 示例：

```javascript
// 打开或创建数据库
const request = indexedDB.open("MyDatabase", 1);

request.onupgradeneeded = function(event) {
  const db = event.target.result;
  const store = db.createObjectStore("users", { keyPath: "id" });
};

request.onsuccess = function(event) {
  const db = event.target.result;
  const transaction = db.transaction("users", "readwrite");
  const store = transaction.objectStore("users");

  // 添加数据
  store.add({ id: 1, name: "John Doe", age: 30 });

  // 读取数据
  const getRequest = store.get(1);
  getRequest.onsuccess = function() {
    console.log(getRequest.result); // 输出: { id: 1, name: "John Doe", age: 30 }
  };
};
```

:::warning
`IndexedDB` 的 API 较为复杂，适合处理大量结构化数据。对于简单的存储需求，建议使用 `LocalStorage` 或 `SessionStorage`。
:::

### 实际应用场景

`IndexedDB` 常用于以下场景：
- 离线应用程序的数据存储
- 存储大量结构化数据
- 复杂查询和事务处理

## 总结

浏览器存储是前端开发中不可或缺的一部分，不同的存储方式适用于不同的场景。`Cookie` 适合存储少量数据并随请求发送，`LocalStorage` 和 `SessionStorage` 适合存储较大量的数据，而 `IndexedDB` 则适合处理大量结构化数据和复杂查询。

## 附加资源与练习

- **练习 1**: 使用 `LocalStorage` 实现一个简单的主题切换功能。
- **练习 2**: 使用 `IndexedDB` 创建一个简单的任务管理应用。
- **进一步阅读**: [MDN Web Docs - Web Storage API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API)
- **进一步阅读**: [MDN Web Docs - IndexedDB API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)
