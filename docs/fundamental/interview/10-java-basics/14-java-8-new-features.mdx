---
title: Java 8 新特性
description: 了解 Java 8 引入的关键新特性，包括 Lambda 表达式、Stream API、默认方法等，并通过代码示例和实际案例掌握其应用。
---

## 介绍

Java 8 是 Java 编程语言的一个重要版本，于 2014 年发布。它引入了许多新特性，旨在提高开发效率、简化代码并增强功能。这些新特性不仅改变了 Java 的编程方式，还为开发者提供了更强大的工具来处理数据和编写简洁的代码。

本文将详细介绍 Java 8 的主要新特性，包括：

- Lambda 表达式
- Stream API
- 默认方法
- 方法引用
- Optional 类
- 新的日期和时间 API

让我们逐步了解这些特性，并通过代码示例和实际案例展示它们的应用。

---

## Lambda 表达式

Lambda 表达式是 Java 8 中最引人注目的新特性之一。它允许你将函数作为方法参数传递，或者将代码作为数据处理。Lambda 表达式简化了匿名内部类的写法，使代码更加简洁。

### 语法

Lambda 表达式的基本语法如下：

```java
(parameters) -> expression
```

或者：

```java
(parameters) -> { statements; }
```

### 示例

以下是一个简单的 Lambda 表达式示例，用于对列表进行排序：

```java
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
names.sort((a, b) -> a.compareTo(b));
System.out.println(names); // 输出: [Alice, Bob, Charlie]
```

### 实际应用

Lambda 表达式常用于集合操作、事件处理和并行计算。例如，在 GUI 编程中，可以使用 Lambda 表达式简化事件监听器的实现：

```java
button.addActionListener(e -> System.out.println("Button clicked!"));
```

---

## Stream API

Stream API 是 Java 8 中引入的另一个重要特性，用于处理集合数据的流式操作。它支持函数式编程风格，可以高效地执行过滤、映射、排序等操作。

### 示例

以下是一个使用 Stream API 过滤和映射列表的示例：

```java
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
List<String> result = names.stream()
                           .filter(name -> name.startsWith("A"))
                           .map(String::toUpperCase)
                           .collect(Collectors.toList());
System.out.println(result); // 输出: [ALICE]
```

### 实际应用

Stream API 非常适合处理大数据集，例如从数据库中查询数据并进行处理。它还可以与并行流结合使用，以提高性能：

```java
List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5);
int sum = numbers.parallelStream()
                 .mapToInt(Integer::intValue)
                 .sum();
System.out.println(sum); // 输出: 15
```

---

## 默认方法

默认方法允许在接口中定义具有默认实现的方法。这是 Java 8 引入的一个重要特性，旨在支持接口的演化，而不会破坏现有的实现类。

### 示例

以下是一个包含默认方法的接口示例：

```java
interface Greeting {
    void sayHello();

    default void sayGoodbye() {
        System.out.println("Goodbye!");
    }
}

class EnglishGreeting implements Greeting {
    @Override
    public void sayHello() {
        System.out.println("Hello!");
    }
}

public class Main {
    public static void main(String[] args) {
        Greeting greeting = new EnglishGreeting();
        greeting.sayHello(); // 输出: Hello!
        greeting.sayGoodbye(); // 输出: Goodbye!
    }
}
```

### 实际应用

默认方法常用于为接口添加新功能，而无需修改所有实现类。例如，Java 8 中的 `Collection` 接口新增了 `stream()` 方法作为默认方法。

---

## 方法引用

方法引用是 Lambda 表达式的一种简化形式，用于直接引用已有方法。它使代码更加简洁和易读。

### 语法

方法引用的语法如下：

```java
ClassName::methodName
```

### 示例

以下是一个使用方法引用的示例：

```java
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
names.forEach(System.out::println);
```

### 实际应用

方法引用常用于 Stream API 中的操作，例如 `map` 和 `filter`：

```java
List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
List<String> upperCaseNames = names.stream()
                                   .map(String::toUpperCase)
                                   .collect(Collectors.toList());
System.out.println(upperCaseNames); // 输出: [ALICE, BOB, CHARLIE]
```

---

## Optional 类

`Optional` 类是 Java 8 引入的一个容器类，用于表示一个值可能存在或不存在。它可以帮助避免空指针异常，并使代码更加健壮。

### 示例

以下是一个使用 `Optional` 的示例：

```java
Optional<String> name = Optional.ofNullable(getName());
name.ifPresent(System.out::println); // 如果值存在，则打印
```

### 实际应用

`Optional` 常用于处理可能为 `null` 的返回值，例如从数据库中查询数据：

```java
Optional<User> user = userRepository.findById(1);
user.ifPresent(u -> System.out.println("User found: " + u.getName()));
```

---

## 新的日期和时间 API

Java 8 引入了全新的日期和时间 API（`java.time` 包），以替代旧的 `Date` 和 `Calendar` 类。新 API 更加直观且线程安全。

### 示例

以下是一个使用新日期和时间 API 的示例：

```java
LocalDate today = LocalDate.now();
LocalDate nextWeek = today.plusWeeks(1);
System.out.println("Today: " + today); // 输出: Today: 2023-10-01
System.out.println("Next week: " + nextWeek); // 输出: Next week: 2023-10-08
```

### 实际应用

新日期和时间 API 非常适合处理复杂的日期计算和格式化操作，例如计算两个日期之间的天数：

```java
LocalDate startDate = LocalDate.of(2023, 10, 1);
LocalDate endDate = LocalDate.of(2023, 10, 10);
long daysBetween = ChronoUnit.DAYS.between(startDate, endDate);
System.out.println("Days between: " + daysBetween); // 输出: Days between: 9
```

---

## 总结

Java 8 引入了许多强大的新特性，包括 Lambda 表达式、Stream API、默认方法、方法引用、`Optional` 类和新的日期时间 API。这些特性不仅简化了代码，还提高了开发效率和程序的可读性。

通过本文的学习，你应该已经掌握了这些新特性的基本用法，并了解了它们的实际应用场景。接下来，你可以尝试在自己的项目中应用这些特性，以进一步提升代码质量。

---

## 附加资源与练习

1. **练习**：尝试使用 Stream API 对一个包含整数的列表进行排序、过滤和求和。
2. **资源**：
   - [Java 8 官方文档](https://docs.oracle.com/javase/8/docs/)
   - [Java 8 新特性教程](https://www.baeldung.com/java-8-new-features)
3. **挑战**：使用 Lambda 表达式和 Stream API 实现一个简单的购物车系统，支持添加商品、计算总价和过滤商品。

Happy coding! 🚀