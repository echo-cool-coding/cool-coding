---
title: Lean 几何库
description: 了解Lean几何库的基础知识，掌握如何使用Lean进行几何证明和计算。
---

# Lean 几何库

## 介绍

Lean几何库是Lean定理证明器中的一个重要组成部分，专门用于处理几何相关的证明和计算。通过Lean几何库，用户可以定义几何对象（如点、线、面等），并利用Lean的强大证明能力来验证几何定理。对于初学者来说，Lean几何库提供了一个直观且严谨的方式来学习几何学，同时也能帮助理解形式化证明的基本概念。

## 基本概念

### 几何对象的定义

在Lean几何库中，几何对象通常通过类型和属性来定义。例如，点（Point）、线（Line）和圆（Circle）是常见的几何对象类型。以下是一个简单的例子，展示如何定义一个点和一条线：

```lean
structure Point :=
  (x : ℝ)
  (y : ℝ)

structure Line :=
  (p1 : Point)
  (p2 : Point)
```

在这个例子中，`Point` 结构体包含两个实数坐标 `x` 和 `y`，而 `Line` 结构体由两个点 `p1` 和 `p2` 组成。

### 几何关系的定义

几何关系通常通过谓词（predicate）来定义。例如，我们可以定义一个谓词来表示两个点是否相等：

```lean
def points_equal (p1 p2 : Point) : Prop :=
  p1.x = p2.x ∧ p1.y = p2.y
```

这个谓词 `points_equal` 检查两个点的 `x` 和 `y` 坐标是否相等。

## 代码示例

### 示例1：验证两点是否相等

以下是一个简单的例子，展示如何使用Lean几何库来验证两个点是否相等：

```lean
def p1 : Point := { x := 1.0, y := 2.0 }
def p2 : Point := { x := 1.0, y := 2.0 }

example : points_equal p1 p2 :=
begin
  split,
  { exact rfl },
  { exact rfl }
end
```

在这个例子中，我们定义了两个点 `p1` 和 `p2`，并使用 `points_equal` 谓词来验证它们是否相等。`begin ... end` 块中的代码是Lean的证明脚本，用于证明 `points_equal p1 p2` 成立。

### 示例2：验证两条线是否平行

接下来，我们定义一个谓词来表示两条线是否平行：

```lean
def lines_parallel (l1 l2 : Line) : Prop :=
  let slope1 := (l1.p2.y - l1.p1.y) / (l1.p2.x - l1.p1.x)
  let slope2 := (l2.p2.y - l2.p1.y) / (l2.p2.x - l2.p1.x)
  slope1 = slope2
```

然后，我们可以使用这个谓词来验证两条线是否平行：

```lean
def l1 : Line := { p1 := { x := 0.0, y := 0.0 }, p2 := { x := 1.0, y := 1.0 } }
def l2 : Line := { p1 := { x := 2.0, y := 2.0 }, p2 := { x := 3.0, y := 3.0 } }

example : lines_parallel l1 l2 :=
begin
  unfold lines_parallel,
  simp,
  exact rfl
end
```

在这个例子中，我们定义了两条线 `l1` 和 `l2`，并使用 `lines_parallel` 谓词来验证它们是否平行。

## 实际案例

### 案例1：验证三角形的内角和

假设我们有一个三角形，由三个点 `A`、`B` 和 `C` 组成。我们可以使用Lean几何库来验证三角形的内角和是否等于180度。

```lean
structure Triangle :=
  (A : Point)
  (B : Point)
  (C : Point)

def triangle_angle_sum (t : Triangle) : Prop :=
  let angle_A := -- 计算角A的度数
  let angle_B := -- 计算角B的度数
  let angle_C := -- 计算角C的度数
  angle_A + angle_B + angle_C = 180.0
```

:::note
在实际实现中，计算角度的具体方法可能需要更复杂的几何计算，这里仅展示概念。
:::

### 案例2：验证圆的切线

假设我们有一个圆和一个点，我们可以验证该点是否在圆的切线上。

```lean
structure Circle :=
  (center : Point)
  (radius : ℝ)

def point_on_tangent (c : Circle) (p : Point) : Prop :=
  let distance_sq := (p.x - c.center.x)^2 + (p.y - c.center.y)^2
  distance_sq = c.radius^2
```

在这个例子中，我们定义了一个圆 `c` 和一个点 `p`，并验证 `p` 是否在圆的切线上。

## 总结

Lean几何库为初学者提供了一个强大的工具来学习和验证几何定理。通过定义几何对象和关系，并使用Lean的证明能力，用户可以逐步掌握几何学的基本概念和证明技巧。希望本文的内容能帮助你更好地理解Lean几何库，并激发你进一步探索的兴趣。

## 附加资源与练习

- **练习1**：定义一个矩形结构体，并验证其对角线是否相等。
- **练习2**：定义一个圆的面积计算函数，并验证其正确性。
- **附加资源**：阅读Lean官方文档中关于几何库的更多内容，探索更复杂的几何证明。

:::tip
建议初学者从简单的几何对象和关系开始，逐步过渡到更复杂的定理和证明。
:::