---
title: 状态转移方程
description: 了解动态规划中的核心概念——状态转移方程，掌握如何通过状态转移方程解决实际问题。
---

# 状态转移方程

动态规划（Dynamic Programming, DP）是解决复杂问题的一种高效算法设计方法。它的核心思想是将问题分解为子问题，并通过存储子问题的解来避免重复计算。而**状态转移方程**是动态规划的核心工具，它定义了如何从一个状态转移到另一个状态，从而逐步求解问题。

## 什么是状态转移方程？

状态转移方程是动态规划中描述问题状态之间关系的数学表达式。它定义了如何从已知的子问题的解推导出当前问题的解。简单来说，状态转移方程告诉我们：**当前状态的值如何由之前的状态推导而来**。

### 状态转移方程的基本结构

状态转移方程通常具有以下形式：

```
dp[i] = f(dp[j], dp[k], ...)
```

其中：
- `dp[i]` 表示当前状态的值。
- `f` 是一个函数，描述了如何从之前的状态 `dp[j], dp[k], ...` 推导出 `dp[i]`。

## 状态转移方程的构建步骤

1. **定义状态**：明确问题的状态是什么。状态通常是一个或多个变量，表示问题的某个子问题的解。
2. **确定初始状态**：找到问题的边界条件或初始值。
3. **推导状态转移方程**：找到状态之间的关系，即如何从已知状态推导出未知状态。
4. **计算最终结果**：通过状态转移方程逐步计算，直到得到最终问题的解。

## 示例：斐波那契数列

斐波那契数列是一个经典的动态规划问题。它的定义如下：

```
F(0) = 0
F(1) = 1
F(n) = F(n-1) + F(n-2)  (n >= 2)
```

### 状态定义

- 状态 `dp[i]` 表示第 `i` 个斐波那契数。

### 初始状态

```
dp[0] = 0
dp[1] = 1
```

### 状态转移方程

```
dp[i] = dp[i-1] + dp[i-2]  (i >= 2)
```

### 代码实现

```python
def fibonacci(n):
    if n == 0:
        return 0
    elif n == 1:
        return 1
    
    dp = [0] * (n + 1)
    dp[0] = 0
    dp[1] = 1
    
    for i in range(2, n + 1):
        dp[i] = dp[i-1] + dp[i-2]
    
    return dp[n]
```

### 输入与输出

```
输入: n = 5
输出: 5
```

:::tip
在实际应用中，斐波那契数列可以通过优化空间复杂度，仅使用两个变量来存储前两个状态，从而避免使用数组。
:::

## 实际案例：爬楼梯问题

假设你正在爬楼梯，每次你可以爬 1 阶或 2 阶。问：有多少种不同的方法可以爬到第 `n` 阶？

### 状态定义

- 状态 `dp[i]` 表示爬到第 `i` 阶楼梯的方法数。

### 初始状态

```
dp[0] = 1  # 爬到第 0 阶有一种方法（不爬）
dp[1] = 1  # 爬到第 1 阶有一种方法（爬 1 阶）
```

### 状态转移方程

```
dp[i] = dp[i-1] + dp[i-2]  (i >= 2)
```

### 代码实现

```python
def climb_stairs(n):
    if n == 0:
        return 1
    elif n == 1:
        return 1
    
    dp = [0] * (n + 1)
    dp[0] = 1
    dp[1] = 1
    
    for i in range(2, n + 1):
        dp[i] = dp[i-1] + dp[i-2]
    
    return dp[n]
```

### 输入与输出

```
输入: n = 3
输出: 3
```

:::note
爬楼梯问题的状态转移方程与斐波那契数列非常相似，因为它们都涉及到从之前的状态推导当前状态。
:::

## 总结

状态转移方程是动态规划的核心工具，它定义了如何从一个状态转移到另一个状态。通过定义状态、确定初始状态、推导状态转移方程，我们可以逐步解决复杂的动态规划问题。

## 附加资源与练习

1. **练习 1**：尝试解决“最小路径和”问题。给定一个二维网格，找到从左上角到右下角的最小路径和。
2. **练习 2**：研究“背包问题”，并尝试推导其状态转移方程。
3. **资源**：阅读《算法导论》中的动态规划章节，深入了解状态转移方程的理论基础。

:::caution
在解决动态规划问题时，务必确保状态转移方程的正确性。错误的转移方程可能导致错误的解。
:::