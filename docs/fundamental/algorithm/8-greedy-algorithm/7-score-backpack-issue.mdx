---
title: 分数背包问题
description: 了解如何使用贪心算法解决分数背包问题，掌握其核心思想和实际应用场景。
---

# 分数背包问题

## 介绍

分数背包问题（Fractional Knapsack Problem）是经典的优化问题之一，属于贪心算法的典型应用场景。与 0-1 背包问题不同，分数背包问题允许将物品分割成任意大小，从而更灵活地利用背包容量。

### 问题描述

假设你有一个容量为 `W` 的背包，以及 `n` 件物品。每件物品有一个重量 `w_i` 和一个价值 `v_i`。你的目标是从这些物品中选择一部分（可以分割）放入背包，使得背包中物品的总价值最大。

:::note
与 0-1 背包问题不同，分数背包问题允许将物品分割成任意比例，因此可以更灵活地优化总价值。
:::

## 贪心算法的核心思想

贪心算法的核心思想是**每一步都选择当前最优的局部解**，从而希望最终得到全局最优解。在分数背包问题中，我们可以通过以下步骤实现贪心算法：

1. **计算每件物品的单位价值**：即 `v_i / w_i`。
2. **按单位价值从高到低排序**。
3. **依次选择单位价值最高的物品**，直到背包装满。

:::tip
贪心算法在分数背包问题中总是能得到最优解，但在其他问题（如 0-1 背包问题）中可能无法保证最优解。
:::

## 代码示例

以下是一个使用 Python 实现分数背包问题的代码示例：

```python
def fractional_knapsack(items, capacity):
    # 计算每件物品的单位价值
    for item in items:
        item.append(item[1] / item[0])  # item[0]是重量，item[1]是价值
    
    # 按单位价值从高到低排序
    items.sort(key=lambda x: x[2], reverse=True)
    
    total_value = 0  # 总价值
    for item in items:
        if capacity >= item[0]:  # 如果背包还能装下整个物品
            capacity -= item[0]
            total_value += item[1]
        else:  # 如果只能装下部分物品
            total_value += capacity * item[2]
            break
    return total_value

# 示例输入
items = [[10, 60], [20, 100], [30, 120]]  # 每件物品的重量和价值
capacity = 50  # 背包容量

# 输出结果
print("最大价值:", fractional_knapsack(items, capacity))
```

**输入**：
- `items = [[10, 60], [20, 100], [30, 120]]`  
  表示三件物品，重量分别为 10、20、30，价值分别为 60、100、120。
- `capacity = 50`  
  表示背包的容量为 50。

**输出**：
```
最大价值: 240.0
```

:::caution
在实际代码中，记得处理物品列表的索引和单位价值的计算，避免出现错误。
:::

## 逐步讲解

1. **计算单位价值**：  
   对于每件物品，计算其单位价值 `v_i / w_i`，并将其添加到物品信息中。

2. **排序**：  
   按单位价值从高到低排序，确保优先选择单位价值最高的物品。

3. **选择物品**：  
   - 如果当前物品的重量小于等于剩余容量，则将其全部装入背包。
   - 如果当前物品的重量大于剩余容量，则只装入部分物品，直到背包装满。

4. **计算总价值**：  
   每次选择物品后，更新背包的剩余容量和总价值。

## 实际应用场景

分数背包问题在现实生活中有着广泛的应用，例如：

- **资源分配**：在有限的预算下，选择最具性价比的项目进行投资。
- **物流运输**：在有限的运输容量下，选择最有价值的货物进行运输。
- **时间管理**：在有限的时间内，选择最有价值的任务来完成。

:::warning
虽然分数背包问题在实际中非常有用，但需要注意其与 0-1 背包问题的区别。分数背包问题允许分割物品，而 0-1 背包问题不允许。
:::

## 总结

分数背包问题是贪心算法的经典应用之一。通过计算每件物品的单位价值并优先选择单位价值最高的物品，我们可以高效地解决这一问题。贪心算法在分数背包问题中总是能得到最优解，但在其他问题中可能需要更复杂的算法。

## 附加资源与练习

- **练习 1**：修改上述代码，使其能够输出具体选择了哪些物品以及它们的比例。
- **练习 2**：尝试用其他编程语言（如 Java 或 C++）实现分数背包问题。
- **扩展阅读**：了解 0-1 背包问题及其动态规划解法，比较其与分数背包问题的异同。

:::tip
如果你对贪心算法感兴趣，可以进一步学习其他贪心算法的经典问题，如活动选择问题、霍夫曼编码等。
:::