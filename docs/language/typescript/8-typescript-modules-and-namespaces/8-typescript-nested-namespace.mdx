---
title: TypeScript 嵌套命名空间
description: 了解 TypeScript 中的嵌套命名空间，掌握如何通过嵌套命名空间组织代码并避免命名冲突。
---

# TypeScript 嵌套命名空间

在 TypeScript 中，命名空间（Namespace）是一种将代码组织成逻辑分组的方式，避免全局作用域中的命名冲突。而**嵌套命名空间**则是将命名空间进一步细分为更小的逻辑单元，以更好地组织和管理代码。

## 什么是嵌套命名空间？

嵌套命名空间是指在一个命名空间内部定义另一个命名空间。通过这种方式，可以将相关的功能分组到更小的命名空间中，从而增强代码的可读性和可维护性。

:::note
命名空间在 TypeScript 中主要用于组织代码，尤其是在大型项目中。虽然现代 JavaScript 和 TypeScript 更推荐使用模块（`import`/`export`），但命名空间仍然在某些场景下有用，特别是在需要避免全局污染时。
:::

## 基本语法

嵌套命名空间的语法非常简单。你只需要在一个命名空间内部定义另一个命名空间即可。以下是一个简单的示例：

```typescript
namespace OuterNamespace {
  export namespace InnerNamespace {
    export const message = "Hello from InnerNamespace!";
  }
}

console.log(OuterNamespace.InnerNamespace.message); // 输出: Hello from InnerNamespace!
```

在这个例子中，`InnerNamespace` 是 `OuterNamespace` 的一个嵌套命名空间。通过 `export` 关键字，我们可以在外部访问 `InnerNamespace` 中的内容。

## 嵌套命名空间的实际应用

嵌套命名空间在以下场景中非常有用：

1. **组织大型项目**：当项目规模较大时，嵌套命名空间可以帮助你将代码划分为更小的逻辑单元。
2. **避免命名冲突**：通过嵌套命名空间，可以确保不同模块中的同名变量或函数不会冲突。
3. **封装私有逻辑**：嵌套命名空间可以隐藏内部实现细节，只暴露必要的接口。

### 示例：组织工具函数

假设你正在开发一个工具库，其中包含数学和字符串相关的工具函数。你可以使用嵌套命名空间来组织这些函数：

```typescript
namespace Utils {
  export namespace Math {
    export function add(a: number, b: number): number {
      return a + b;
    }

    export function subtract(a: number, b: number): number {
      return a - b;
    }
  }

  export namespace String {
    export function capitalize(str: string): string {
      return str.charAt(0).toUpperCase() + str.slice(1);
    }
  }
}

console.log(Utils.Math.add(5, 3)); // 输出: 8
console.log(Utils.String.capitalize("hello")); // 输出: Hello
```

在这个例子中，`Utils` 命名空间包含了 `Math` 和 `String` 两个嵌套命名空间，分别用于组织数学和字符串相关的工具函数。

## 嵌套命名空间的访问规则

嵌套命名空间的访问规则与普通命名空间类似：

- 使用 `export` 关键字导出的内容可以在外部访问。
- 未使用 `export` 关键字的内容只能在命名空间内部访问。

例如：

```typescript
namespace Outer {
  export namespace Inner {
    export const publicValue = "I am public!";
    const privateValue = "I am private!";
  }
}

console.log(Outer.Inner.publicValue); // 输出: I am public!
console.log(Outer.Inner.privateValue); // 报错: privateValue 未定义
```

## 嵌套命名空间与模块

虽然嵌套命名空间在某些场景下非常有用，但在现代 TypeScript 开发中，更推荐使用模块（`import`/`export`）来组织代码。模块提供了更好的封装性和更清晰的依赖管理。

:::tip
如果你正在开发一个新项目，建议优先使用模块而不是命名空间。命名空间更适合在遗留代码或特定场景下使用。
:::

## 总结

嵌套命名空间是 TypeScript 中一种强大的代码组织工具，特别适用于大型项目或需要避免命名冲突的场景。通过将命名空间进一步细分为更小的逻辑单元，你可以更好地组织和管理代码。

### 附加资源

- [TypeScript 官方文档 - 命名空间](https://www.typescriptlang.org/docs/handbook/namespaces.html)
- [TypeScript 模块与命名空间的区别](https://www.typescriptlang.org/docs/handbook/modules.html)

### 练习

1. 创建一个名为 `Library` 的命名空间，并在其中定义两个嵌套命名空间 `Books` 和 `Authors`，分别用于管理书籍和作者信息。
2. 在 `Books` 命名空间中添加一个函数 `getBookTitle`，在 `Authors` 命名空间中添加一个函数 `getAuthorName`，并在外部调用这些函数。

通过练习，你将更深入地理解嵌套命名空间的使用方法。