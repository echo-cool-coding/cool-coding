---
title: TypeScript 全局声明
description: 了解 TypeScript 中的全局声明，掌握如何扩展全局作用域中的类型和变量，提升代码的可维护性和可读性。
---

# TypeScript 全局声明

在 TypeScript 中，全局声明是一种强大的工具，允许你在全局作用域中定义类型、变量或模块。这对于扩展第三方库的类型定义或声明全局变量非常有用。本文将详细介绍 TypeScript 全局声明的概念、用法以及实际应用场景。

## 什么是全局声明？

全局声明是指在 TypeScript 中，通过 `declare` 关键字在全局作用域中声明变量、类型或模块。这些声明不会生成实际的 JavaScript 代码，而是告诉 TypeScript 编译器这些变量或类型的存在。

全局声明通常用于以下场景：
- 扩展第三方库的类型定义。
- 声明全局变量或函数。
- 为浏览器环境中的全局对象（如 `window` 或 `document`）添加类型。

## 全局声明的基本语法

全局声明的语法非常简单，使用 `declare` 关键字即可。以下是一些常见的全局声明示例：

### 1. 声明全局变量

```typescript
declare const VERSION: string;
```

在这个例子中，我们声明了一个全局变量 `VERSION`，它的类型是 `string`。这意味着在代码的任何地方都可以访问 `VERSION`，而 TypeScript 编译器会知道它的类型。

### 2. 声明全局函数

```typescript
declare function greet(name: string): void;
```

这里我们声明了一个全局函数 `greet`，它接受一个 `string` 类型的参数 `name`，并且没有返回值（`void`）。

### 3. 声明全局类型

```typescript
declare type User = {
  id: number;
  name: string;
};
```

在这个例子中，我们声明了一个全局类型 `User`，它包含 `id` 和 `name` 两个属性。

## 全局声明的实际应用

### 1. 扩展第三方库的类型

假设你使用了一个第三方库 `myLibrary`，但它没有提供完整的类型定义。你可以通过全局声明来扩展它的类型：

```typescript
declare module "myLibrary" {
  interface MyLibraryOptions {
    debug?: boolean;
    timeout?: number;
  }

  function initialize(options: MyLibraryOptions): void;
}
```

在这个例子中，我们扩展了 `myLibrary` 模块的类型定义，添加了一个 `MyLibraryOptions` 接口和一个 `initialize` 函数。

### 2. 声明浏览器环境中的全局变量

在浏览器环境中，你可能需要访问一些全局变量，比如 `window` 或 `document`。你可以通过全局声明来为这些变量添加类型：

```typescript
declare interface Window {
  myGlobalVariable: string;
}
```

在这个例子中，我们为 `window` 对象添加了一个 `myGlobalVariable` 属性，它的类型是 `string`。

### 3. 声明全局模块

如果你有一个全局模块，比如一个 UMD 模块，你可以通过全局声明来告诉 TypeScript 它的存在：

```typescript
declare module "myGlobalModule" {
  export const version: string;
  export function doSomething(): void;
}
```

在这个例子中，我们声明了一个全局模块 `myGlobalModule`，它包含一个 `version` 常量和一个 `doSomething` 函数。

## 全局声明的注意事项

:::caution
全局声明会影响整个项目的作用域，因此在使用时要格外小心。避免在全局作用域中声明过多的变量或类型，以免造成命名冲突或代码难以维护。
:::

## 总结

TypeScript 的全局声明是一种强大的工具，可以帮助你扩展全局作用域中的类型和变量。通过 `declare` 关键字，你可以为第三方库、浏览器环境中的全局对象或全局模块添加类型定义，从而提升代码的可维护性和可读性。

在实际开发中，全局声明常用于扩展第三方库的类型定义或声明全局变量。然而，由于全局声明会影响整个项目的作用域，因此在使用时要格外小心，避免造成命名冲突或代码难以维护。

## 附加资源

- [TypeScript 官方文档 - 声明文件](https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html)
- [TypeScript Deep Dive - 全局声明](https://basarat.gitbook.io/typescript/type-system/intro)

## 练习

1. 尝试为一个第三方库（如 `lodash`）添加自定义类型定义。
2. 在浏览器环境中，为 `window` 对象添加一个全局变量，并在代码中使用它。
3. 创建一个全局模块声明，并在代码中引用它。

通过这些练习，你将更好地理解 TypeScript 全局声明的用法和应用场景。