---
title: TypeScript 符号与标记
description: 了解TypeScript中的符号（Symbols）与标记（Markers），掌握它们的基本概念、用法以及在实际开发中的应用场景。
---

# TypeScript 符号与标记

在TypeScript中，符号（Symbols）和标记（Markers）是两种重要的概念，它们可以帮助我们更好地组织和管理代码。符号是JavaScript中的一种原始数据类型，而标记则是一种用于标识特定类型或行为的工具。本文将详细介绍这两种概念，并通过实际案例展示它们的应用。

## 符号（Symbols）

### 什么是符号？

符号是JavaScript中的一种原始数据类型，它表示一个唯一的、不可变的值。符号的主要用途是作为对象属性的键，以确保属性名的唯一性。在TypeScript中，符号的使用方式与JavaScript相同。

### 创建符号

你可以使用`Symbol`函数来创建一个符号：

```typescript
const mySymbol = Symbol();
```

每个符号都是唯一的，即使它们的描述相同：

```typescript
const symbol1 = Symbol('description');
const symbol2 = Symbol('description');

console.log(symbol1 === symbol2); // 输出: false
```

### 使用符号作为对象属性

符号可以作为对象的属性键，这样可以避免属性名的冲突：

```typescript
const mySymbol = Symbol('mySymbol');

const obj = {
    [mySymbol]: 'This is a symbol property'
};

console.log(obj[mySymbol]); // 输出: This is a symbol property
```

### 符号的实际应用

符号常用于定义对象的私有属性或方法，因为它们不会被常规的遍历方法（如`for...in`或`Object.keys()`）访问到：

```typescript
const privateProperty = Symbol('privateProperty');

class MyClass {
    [privateProperty] = 'This is private';

    getPrivateProperty() {
        return this[privateProperty];
    }
}

const instance = new MyClass();
console.log(instance.getPrivateProperty()); // 输出: This is private
console.log(instance[privateProperty]); // 输出: This is private
```

:::note
符号属性不会出现在`Object.keys()`或`for...in`循环中，但它们可以通过`Object.getOwnPropertySymbols()`访问。
:::

## 标记（Markers）

### 什么是标记？

标记是一种用于标识特定类型或行为的工具。在TypeScript中，标记通常用于类型系统的高级特性中，例如条件类型、映射类型等。标记可以帮助我们更精确地控制类型的行为。

### 使用标记

标记通常是一个特殊的类型或符号，用于标识某种特定的行为或条件。例如，我们可以使用标记来定义一个类型是否为`never`：

```typescript
type IsNever<T> = [T] extends [never] ? true : false;

type Result1 = IsNever<never>; // 输出: true
type Result2 = IsNever<string>; // 输出: false
```

### 标记的实际应用

标记在条件类型和映射类型中非常有用。例如，我们可以使用标记来过滤掉对象中的某些属性：

```typescript
type FilterProperties<T, U> = {
    [K in keyof T as T[K] extends U ? K : never]: T[K];
};

type MyObject = {
    name: string;
    age: number;
    isActive: boolean;
};

type StringProperties = FilterProperties<MyObject, string>; // 输出: { name: string }
```

在这个例子中，`FilterProperties`类型通过标记`T[K] extends U ? K : never`来过滤掉不符合条件的属性。

## 总结

符号和标记是TypeScript中非常有用的工具，它们可以帮助我们更好地组织和管理代码。符号用于创建唯一的属性键，而标记则用于在类型系统中标识特定的行为或条件。通过掌握这些概念，你可以编写出更加健壮和可维护的TypeScript代码。

### 附加资源

- [TypeScript官方文档](https://www.typescriptlang.org/docs/)
- [JavaScript Symbols](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol)
- [TypeScript高级类型](https://www.typescriptlang.org/docs/handbook/advanced-types.html)

### 练习

1. 创建一个符号，并将其作为对象的属性键，然后尝试访问该属性。
2. 使用标记定义一个条件类型，判断一个类型是否为`string`。
3. 编写一个映射类型，过滤掉对象中所有非数字类型的属性。

通过完成这些练习，你将更好地理解符号和标记在TypeScript中的应用。