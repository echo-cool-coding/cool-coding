---
title: TypeScript 构造函数
description: 了解TypeScript中的构造函数，掌握如何使用构造函数初始化对象，并通过实际案例理解其应用场景。
---

# TypeScript 构造函数

在TypeScript中，构造函数（Constructor）是面向对象编程中的一个核心概念。它用于在创建对象时初始化对象的属性。构造函数是类的一个特殊方法，当使用 `new` 关键字创建类的实例时，构造函数会自动调用。

## 什么是构造函数？

构造函数是类中的一个特殊方法，通常用于初始化对象的属性。它的名称必须与类名相同，并且没有返回类型（包括 `void`）。在TypeScript中，构造函数使用 `constructor` 关键字定义。

### 基本语法

```typescript
class ClassName {
    // 属性声明
    propertyName: type;

    // 构造函数
    constructor(parameter: type) {
        this.propertyName = parameter;
    }
}
```

### 示例

让我们通过一个简单的例子来理解构造函数的工作原理。

```typescript
class Person {
    name: string;
    age: number;

    constructor(name: string, age: number) {
        this.name = name;
        this.age = age;
    }
}

const person = new Person("Alice", 30);
console.log(person.name); // 输出: Alice
console.log(person.age);  // 输出: 30
```

在这个例子中，`Person` 类有两个属性：`name` 和 `age`。构造函数接受两个参数 `name` 和 `age`，并将它们赋值给类的属性。当我们使用 `new Person("Alice", 30)` 创建一个 `Person` 实例时，构造函数会自动调用，并将 `"Alice"` 和 `30` 分别赋值给 `name` 和 `age` 属性。

## 构造函数的参数

构造函数可以接受任意数量的参数，这些参数用于初始化对象的属性。参数的类型可以是任何有效的TypeScript类型。

### 可选参数

在TypeScript中，构造函数的参数可以是可选的。可选参数使用 `?` 标记。

```typescript
class Person {
    name: string;
    age?: number;

    constructor(name: string, age?: number) {
        this.name = name;
        this.age = age;
    }
}

const person1 = new Person("Alice");
const person2 = new Person("Bob", 25);

console.log(person1.age); // 输出: undefined
console.log(person2.age); // 输出: 25
```

在这个例子中，`age` 参数是可选的。如果创建 `Person` 实例时没有提供 `age` 参数，则 `age` 属性将为 `undefined`。

### 默认参数

构造函数还可以使用默认参数。如果调用构造函数时没有提供某个参数，则使用默认值。

```typescript
class Person {
    name: string;
    age: number;

    constructor(name: string, age: number = 18) {
        this.name = name;
        this.age = age;
    }
}

const person1 = new Person("Alice");
const person2 = new Person("Bob", 25);

console.log(person1.age); // 输出: 18
console.log(person2.age); // 输出: 25
```

在这个例子中，`age` 参数的默认值为 `18`。如果创建 `Person` 实例时没有提供 `age` 参数，则 `age` 属性将默认为 `18`。

## 构造函数的重载

在TypeScript中，构造函数可以重载。构造函数重载允许你定义多个构造函数签名，但只能有一个实现。

### 示例

```typescript
class Person {
    name: string;
    age: number;

    constructor(name: string, age: number);
    constructor(name: string);
    constructor(name: string, age?: number) {
        this.name = name;
        this.age = age ?? 18;
    }
}

const person1 = new Person("Alice");
const person2 = new Person("Bob", 25);

console.log(person1.age); // 输出: 18
console.log(person2.age); // 输出: 25
```

在这个例子中，`Person` 类有两个构造函数签名：一个接受 `name` 和 `age` 参数，另一个只接受 `name` 参数。实际的构造函数实现处理了这两种情况。

## 实际应用场景

构造函数在实际开发中有广泛的应用。例如，在构建一个用户管理系统时，你可能需要创建一个 `User` 类来表示系统中的用户。

```typescript
class User {
    id: number;
    username: string;
    email: string;
    isActive: boolean;

    constructor(id: number, username: string, email: string, isActive: boolean = true) {
        this.id = id;
        this.username = username;
        this.email = email;
        this.isActive = isActive;
    }
}

const user1 = new User(1, "alice", "alice@example.com");
const user2 = new User(2, "bob", "bob@example.com", false);

console.log(user1.isActive); // 输出: true
console.log(user2.isActive); // 输出: false
```

在这个例子中，`User` 类表示系统中的用户。构造函数用于初始化用户的 `id`、`username`、`email` 和 `isActive` 属性。`isActive` 参数有一个默认值 `true`，表示用户默认是激活状态。

## 总结

构造函数是TypeScript中面向对象编程的核心概念之一。它用于在创建对象时初始化对象的属性。通过构造函数，你可以确保对象在创建时具有有效的初始状态。

- 构造函数使用 `constructor` 关键字定义。
- 构造函数可以接受可选参数和默认参数。
- 构造函数可以重载，允许你定义多个构造函数签名。

## 附加资源与练习

为了巩固你对TypeScript构造函数的理解，建议你尝试以下练习：

1. 创建一个 `Car` 类，包含 `make`、`model` 和 `year` 属性，并使用构造函数初始化这些属性。
2. 修改 `Car` 类，使 `year` 参数成为可选参数，并为其设置默认值。
3. 尝试为 `Car` 类实现构造函数重载，使其可以接受不同的参数组合。

通过这些练习，你将更好地掌握TypeScript构造函数的使用方法。

:::tip
如果你对TypeScript的面向对象编程感兴趣，可以继续学习类的继承、访问修饰符等高级主题。
:::