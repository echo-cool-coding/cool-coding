---
title: TypeScript 封装
description: 了解TypeScript中的封装概念，掌握如何使用访问修饰符控制类成员的可见性，并通过实际案例展示封装的实际应用。
---

# TypeScript 封装

在面向对象编程（OOP）中，**封装**是一个核心概念。它允许我们将数据（属性）和行为（方法）捆绑在一起，并控制外部代码对这些数据和行为的访问。TypeScript通过访问修饰符（如 `public`、`private` 和 `protected`）来实现封装。

## 什么是封装？

封装的主要目的是隐藏对象的内部实现细节，只暴露必要的接口供外部使用。这样可以提高代码的可维护性和安全性，防止外部代码直接修改对象的内部状态。

在TypeScript中，封装通过**访问修饰符**来实现。这些修饰符决定了类成员（属性和方法）的可见性。

## 访问修饰符

TypeScript提供了三种访问修饰符：

1. **`public`**：默认的访问修饰符。`public` 成员可以在类的内部和外部访问。
2. **`private`**：`private` 成员只能在类的内部访问，外部代码无法直接访问或修改。
3. **`protected`**：`protected` 成员可以在类的内部和子类中访问，但外部代码无法访问。

### 代码示例

```typescript
class Person {
    public name: string;
    private age: number;
    protected email: string;

    constructor(name: string, age: number, email: string) {
        this.name = name;
        this.age = age;
        this.email = email;
    }

    public getAge(): number {
        return this.age; // 可以在类内部访问 private 成员
    }
}

const person = new Person("Alice", 30, "alice@example.com");

console.log(person.name); // 输出: Alice
// console.log(person.age); // 错误: 无法访问 private 成员
// console.log(person.email); // 错误: 无法访问 protected 成员
console.log(person.getAge()); // 输出: 30
```

:::note
在上面的例子中，`name` 是 `public` 的，因此可以直接访问。`age` 是 `private` 的，只能在 `Person` 类内部访问。`email` 是 `protected` 的，只能在 `Person` 类及其子类中访问。
:::

## 封装的实际应用

封装在实际开发中非常有用，尤其是在构建大型应用程序时。通过封装，我们可以确保对象的内部状态不会被意外修改，从而提高代码的健壮性。

### 案例：银行账户

假设我们正在开发一个银行账户管理系统。我们希望确保账户余额不能被外部代码直接修改，只能通过特定的方法（如存款和取款）来操作。

```typescript
class BankAccount {
    private balance: number;

    constructor(initialBalance: number) {
        this.balance = initialBalance;
    }

    public deposit(amount: number): void {
        if (amount > 0) {
            this.balance += amount;
        }
    }

    public withdraw(amount: number): void {
        if (amount > 0 && amount <= this.balance) {
            this.balance -= amount;
        }
    }

    public getBalance(): number {
        return this.balance;
    }
}

const account = new BankAccount(1000);

account.deposit(500);
console.log(account.getBalance()); // 输出: 1500

account.withdraw(200);
console.log(account.getBalance()); // 输出: 1300

// account.balance = 10000; // 错误: 无法直接访问 private 成员
```

:::tip
在这个例子中，`balance` 是 `private` 的，因此外部代码无法直接修改它。我们通过 `deposit` 和 `withdraw` 方法来控制余额的变化，从而确保了账户的安全性。
:::

## 总结

封装是面向对象编程中的一个重要概念，它帮助我们隐藏对象的内部实现细节，只暴露必要的接口。TypeScript通过访问修饰符（`public`、`private` 和 `protected`）来实现封装，从而提高了代码的可维护性和安全性。

在实际开发中，封装可以帮助我们构建更加健壮和安全的应用程序。通过合理地使用访问修饰符，我们可以确保对象的内部状态不会被意外修改。

## 附加资源与练习

- **练习**：尝试创建一个 `Car` 类，其中包含 `private` 的 `fuelLevel` 属性和 `public` 的 `refuel` 方法。确保 `fuelLevel` 只能通过 `refuel` 方法修改。
- **资源**：阅读TypeScript官方文档中关于[类与访问修饰符](https://www.typescriptlang.org/docs/handbook/classes.html)的部分，深入了解封装的更多细节。

通过不断练习和应用，你将能够更好地掌握TypeScript中的封装概念，并在实际项目中灵活运用。