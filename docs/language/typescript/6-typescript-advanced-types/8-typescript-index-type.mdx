---
title: TypeScript 索引类型
description: 了解TypeScript中的索引类型，掌握如何通过索引访问对象属性类型，并应用于实际开发场景。
---

# TypeScript 索引类型

TypeScript的索引类型（Index Types）是一种强大的工具，它允许我们通过索引访问对象属性的类型。通过索引类型，我们可以动态地获取对象的属性类型，从而实现更灵活的类型操作。本文将详细介绍索引类型的概念、语法以及实际应用场景。

## 什么是索引类型？

在TypeScript中，索引类型允许我们通过键（key）来访问对象属性的类型。它通常与`keyof`操作符和泛型一起使用，用于动态获取对象的属性类型。索引类型的核心思想是：**通过键来访问值的类型**。

### 基本语法

索引类型的基本语法如下：

```typescript
type IndexType<T, K extends keyof T> = T[K];
```

- `T` 是一个对象类型。
- `K` 是 `T` 的键类型（即 `keyof T`）。
- `T[K]` 表示通过键 `K` 访问 `T` 中对应属性的类型。

### 示例：获取对象属性的类型

假设我们有一个对象类型 `Person`：

```typescript
type Person = {
  name: string;
  age: number;
  isStudent: boolean;
};
```

我们可以使用索引类型来获取 `Person` 中某个属性的类型：

```typescript
type NameType = Person['name']; // string
type AgeType = Person['age'];   // number
```

在这个例子中，`Person['name']` 返回 `string` 类型，`Person['age']` 返回 `number` 类型。

## 索引类型的实际应用

索引类型在实际开发中有许多应用场景，例如动态获取对象属性的类型、实现类型安全的属性访问等。

### 场景1：动态获取对象属性的类型

假设我们有一个函数，需要根据传入的键动态获取对象属性的类型：

```typescript
function getProperty<T, K extends keyof T>(obj: T, key: K): T[K] {
  return obj[key];
}

const person: Person = {
  name: 'Alice',
  age: 25,
  isStudent: false,
};

const name = getProperty(person, 'name'); // string
const age = getProperty(person, 'age');   // number
```

在这个例子中，`getProperty` 函数通过索引类型 `T[K]` 动态获取了 `person` 对象中 `name` 和 `age` 属性的类型。

### 场景2：类型安全的属性访问

索引类型还可以用于实现类型安全的属性访问。例如，我们可以创建一个类型安全的 `pick` 函数，从对象中选择指定的属性：

```typescript
function pick<T, K extends keyof T>(obj: T, keys: K[]): Pick<T, K> {
  const result = {} as Pick<T, K>;
  keys.forEach(key => {
    result[key] = obj[key];
  });
  return result;
}

const person: Person = {
  name: 'Alice',
  age: 25,
  isStudent: false,
};

const selected = pick(person, ['name', 'age']); // { name: string; age: number }
```

在这个例子中，`pick` 函数通过索引类型和 `Pick` 工具类型，实现了类型安全的属性选择。

## 索引类型与 `keyof` 操作符

`keyof` 操作符是索引类型的重要伙伴。它用于获取对象类型的所有键的联合类型。例如：

```typescript
type PersonKeys = keyof Person; // "name" | "age" | "isStudent"
```

通过 `keyof`，我们可以动态地获取对象的所有键，并将其用于索引类型中。

### 示例：遍历对象属性

我们可以结合 `keyof` 和索引类型，遍历对象的所有属性：

```typescript
function printProperties<T>(obj: T) {
  const keys = Object.keys(obj) as Array<keyof T>;
  keys.forEach(key => {
    console.log(`${key}: ${obj[key]}`);
  });
}

const person: Person = {
  name: 'Alice',
  age: 25,
  isStudent: false,
};

printProperties(person);
// 输出:
// name: Alice
// age: 25
// isStudent: false
```

在这个例子中，`printProperties` 函数通过 `keyof` 和索引类型，动态地遍历了 `person` 对象的所有属性。

## 总结

TypeScript的索引类型是一种强大的工具，它允许我们通过键来访问对象属性的类型。通过结合 `keyof` 操作符和泛型，我们可以实现动态的类型操作，例如动态获取对象属性的类型、实现类型安全的属性访问等。索引类型在实际开发中有广泛的应用场景，掌握它将使你的TypeScript代码更加灵活和类型安全。

### 附加资源

- [TypeScript官方文档 - 索引类型](https://www.typescriptlang.org/docs/handbook/advanced-types.html#index-types)
- [TypeScript Deep Dive - 索引类型](https://basarat.gitbook.io/typescript/type-system/index-types)

### 练习

1. 创建一个函数 `getValue`，它接受一个对象和一个键，并返回该键对应的值。使用索引类型确保类型安全。
2. 实现一个 `mapObject` 函数，它接受一个对象和一个映射函数，并返回一个新的对象，其中每个属性的值都经过映射函数的处理。使用索引类型和 `keyof` 操作符。

:::tip
在练习中，尝试使用索引类型和 `keyof` 操作符来实现类型安全的操作。这将帮助你更好地理解这些概念。
:::