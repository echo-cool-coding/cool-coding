---
title: TypeScript 函数重载
description: 了解TypeScript中的函数重载，掌握如何通过重载实现更灵活的函数定义和调用。
---

# TypeScript 函数重载

在TypeScript中，函数重载（Function Overloading）是一种允许你为同一个函数定义多个签名的特性。通过函数重载，你可以根据不同的参数类型或数量，定义不同的函数行为。这使得函数在使用时更加灵活，同时也能提供更好的类型安全性。

## 什么是函数重载？

函数重载允许你为一个函数定义多个签名，每个签名可以有不同的参数类型或数量。TypeScript会根据调用时传入的参数类型或数量，自动选择最合适的函数签名。

:::note
函数重载并不是真正的“重载”，而是通过多个函数签名来模拟重载的效果。最终，TypeScript会将这些签名合并到一个函数实现中。
:::

## 函数重载的基本语法

函数重载的语法包括两个部分：函数签名和函数实现。

1. **函数签名**：定义函数的参数类型和返回值类型。
2. **函数实现**：实际的函数逻辑，参数类型通常为 `any` 或联合类型。

```typescript
// 函数签名
function greet(name: string): string;
function greet(age: number): string;

// 函数实现
function greet(value: string | number): string {
    if (typeof value === "string") {
        return `Hello, ${value}`;
    } else {
        return `You are ${value} years old.`;
    }
}
```

在上面的例子中，我们定义了两个函数签名，分别接受 `string` 和 `number` 类型的参数。然后，我们实现了一个函数，根据传入的参数类型返回不同的结果。

## 函数重载的实际应用

函数重载在实际开发中非常有用，尤其是在处理多种输入类型时。以下是一个更复杂的例子，展示了如何通过函数重载来处理不同的参数组合。

```typescript
// 函数签名
function createDate(timestamp: number): Date;
function createDate(year: number, month: number, day: number): Date;

// 函数实现
function createDate(yearOrTimestamp: number, month?: number, day?: number): Date {
    if (month !== undefined && day !== undefined) {
        return new Date(yearOrTimestamp, month - 1, day);
    } else {
        return new Date(yearOrTimestamp);
    }
}

const date1 = createDate(1640995200000); // 2022-01-01
const date2 = createDate(2022, 1, 1);    // 2022-01-01
```

在这个例子中，`createDate` 函数可以根据传入的参数数量来决定是创建一个基于时间戳的日期对象，还是基于年、月、日的日期对象。

## 函数重载的注意事项

1. **函数实现必须兼容所有签名**：函数实现的参数类型必须能够覆盖所有函数签名的参数类型。通常，这需要使用联合类型或 `any` 类型。

2. **函数签名不能直接调用**：函数签名只是用来帮助TypeScript进行类型检查的，不能直接调用。只有函数实现可以被调用。

3. **函数重载的顺序很重要**：TypeScript会从上到下依次匹配函数签名，因此更具体的签名应该放在前面。

## 实际案例：处理不同类型的输入

假设我们正在开发一个处理用户输入的函数，用户可能输入字符串、数字或对象。我们可以使用函数重载来处理这些不同的输入类型。

```typescript
// 函数签名
function processInput(input: string): string;
function processInput(input: number): number;
function processInput(input: { name: string; age: number }): string;

// 函数实现
function processInput(input: string | number | { name: string; age: number }): string | number {
    if (typeof input === "string") {
        return `Input is a string: ${input}`;
    } else if (typeof input === "number") {
        return input * 2; // 返回输入的两倍
    } else {
        return `Input is an object: ${input.name}, ${input.age}`;
    }
}

console.log(processInput("Hello")); // 输出: Input is a string: Hello
console.log(processInput(42));      // 输出: 84
console.log(processInput({ name: "Alice", age: 30 })); // 输出: Input is an object: Alice, 30
```

在这个例子中，`processInput` 函数根据输入的类型返回不同的结果。通过函数重载，我们可以确保函数在处理不同类型的输入时，都能得到正确的类型提示。

## 总结

函数重载是TypeScript中一个强大的特性，它允许你为同一个函数定义多个签名，从而处理不同类型的输入。通过函数重载，你可以编写出更加灵活和类型安全的代码。

在实际开发中，函数重载常用于处理多种输入类型的场景，例如处理用户输入、日期创建等。掌握函数重载的使用方法，可以帮助你编写出更加健壮和可维护的代码。

## 附加资源与练习

- **练习**：尝试为 `processInput` 函数添加一个新的签名，使其能够处理布尔类型的输入。
- **资源**：阅读TypeScript官方文档中关于[函数重载](https://www.typescriptlang.org/docs/handbook/2/functions.html#function-overloads)的部分，了解更多高级用法。

通过不断练习和探索，你将能够更好地理解和应用TypeScript中的函数重载。