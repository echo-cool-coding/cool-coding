---
title: TypeScript 与JavaScript混合项目
description: 了解如何在同一个项目中同时使用TypeScript和JavaScript，并掌握它们的互操作技巧。
---

# TypeScript 与JavaScript混合项目

在现代Web开发中，TypeScript和JavaScript常常需要共存于同一个项目中。TypeScript是JavaScript的超集，它为JavaScript添加了静态类型检查和其他高级功能。然而，许多现有的项目可能仍然使用JavaScript编写，或者你可能需要在TypeScript项目中引入一些JavaScript库。本文将详细介绍如何在混合项目中同时使用TypeScript和JavaScript，并展示它们的互操作技巧。

## 1. 什么是TypeScript与JavaScript混合项目？

TypeScript与JavaScript混合项目是指在一个项目中同时包含TypeScript（`.ts`或`.tsx`文件）和JavaScript（`.js`或`.jsx`文件）代码的项目。这种混合使用的方式在以下场景中非常常见：

- 逐步将现有的JavaScript项目迁移到TypeScript。
- 在TypeScript项目中使用第三方JavaScript库。
- 在团队中同时使用TypeScript和JavaScript进行开发。

## 2. 配置TypeScript以支持JavaScript文件

为了让TypeScript能够正确处理JavaScript文件，你需要在`tsconfig.json`中进行一些配置。以下是一个基本的配置示例：

```json
{
  "compilerOptions": {
    "allowJs": true, // 允许编译JavaScript文件
    "checkJs": true, // 对JavaScript文件进行类型检查
    "outDir": "./dist", // 输出目录
    "rootDir": "./src" // 源代码目录
  },
  "include": ["src/**/*"]
}
```

- `allowJs: true`：允许TypeScript编译JavaScript文件。
- `checkJs: true`：对JavaScript文件进行类型检查。这对于在混合项目中捕获潜在的错误非常有用。

## 3. 在TypeScript中使用JavaScript代码

假设你有一个JavaScript文件`math.js`，其中定义了一个简单的加法函数：

```javascript
// math.js
function add(a, b) {
  return a + b;
}

module.exports = { add };
```

你可以在TypeScript文件中直接导入并使用这个JavaScript模块：

```typescript
// main.ts
import { add } from './math';

const result = add(2, 3);
console.log(result); // 输出: 5
```

TypeScript会自动推断出`add`函数的类型，并允许你在TypeScript代码中使用它。

## 4. 在JavaScript中使用TypeScript代码

如果你有一个TypeScript文件`math.ts`，其中定义了一个加法函数：

```typescript
// math.ts
export function add(a: number, b: number): number {
  return a + b;
}
```

你可以在JavaScript文件中导入并使用这个TypeScript模块：

```javascript
// main.js
const { add } = require('./math');

const result = add(2, 3);
console.log(result); // 输出: 5
```

TypeScript编译器会将`math.ts`编译为JavaScript文件，然后你可以在JavaScript代码中正常使用它。

## 5. 使用JSDoc注释增强JavaScript的类型检查

在混合项目中，你可以使用JSDoc注释来为JavaScript代码添加类型信息，从而增强TypeScript的类型检查能力。例如：

```javascript
// math.js
/**
 * @param {number} a
 * @param {number} b
 * @returns {number}
 */
function add(a, b) {
  return a + b;
}

module.exports = { add };
```

通过添加JSDoc注释，TypeScript可以更好地理解`add`函数的参数和返回值类型，从而提供更准确的类型检查。

## 6. 实际案例：逐步迁移JavaScript项目到TypeScript

假设你有一个现有的JavaScript项目，你希望逐步将其迁移到TypeScript。以下是一个简单的迁移步骤：

1. **配置TypeScript**：在项目中添加`tsconfig.json`文件，并启用`allowJs`和`checkJs`选项。
2. **重命名文件**：将部分JavaScript文件重命名为`.ts`文件，并逐步添加类型注解。
3. **使用JSDoc**：在尚未迁移的JavaScript文件中使用JSDoc注释，以增强类型检查。
4. **逐步迁移**：随着时间的推移，逐步将所有JavaScript文件迁移到TypeScript。

## 7. 总结

在TypeScript与JavaScript混合项目中，你可以充分利用两者的优势。TypeScript提供了强大的类型检查和现代JavaScript特性，而JavaScript则保持了灵活性和广泛的生态系统支持。通过合理的配置和逐步迁移，你可以在不中断现有开发流程的情况下，逐步将项目迁移到TypeScript。

## 8. 附加资源与练习

- **TypeScript官方文档**：[TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
- **JSDoc文档**：[JSDoc](https://jsdoc.app/)
- **练习**：尝试在一个现有的JavaScript项目中引入TypeScript，并使用JSDoc注释增强类型检查。

通过本文的学习，你应该能够在混合项目中自如地使用TypeScript和JavaScript，并掌握它们的互操作技巧。继续探索和实践，你将能够更好地利用这两种语言的优势。