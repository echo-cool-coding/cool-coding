---
title: TypeScript 可选属性
description: 了解 TypeScript 中的可选属性，掌握如何定义和使用它们来增强代码的灵活性。
---

# TypeScript 可选属性

在 TypeScript 中，接口（Interfaces）和类型别名（Type Aliases）是定义对象结构的重要工具。有时，我们希望在定义对象时，某些属性是可选的，而不是必须的。这就是 **可选属性** 的用武之地。

## 什么是可选属性？

可选属性是指在定义对象结构时，某些属性可以存在，也可以不存在。这意味着在使用该对象时，这些属性不是强制要求的。通过使用 `?` 符号，我们可以将一个属性标记为可选的。

### 基本语法

在 TypeScript 中，可选属性的语法非常简单。你只需要在属性名后面加上一个 `?` 符号即可。例如：

```typescript
interface User {
  name: string;
  age?: number; // age 是一个可选属性
}
```

在这个例子中，`User` 接口定义了一个 `name` 属性（必须存在）和一个 `age` 属性（可选存在）。这意味着你可以创建一个 `User` 对象，而不必提供 `age` 属性。

### 代码示例

让我们通过一个简单的例子来理解可选属性的使用：

```typescript
interface User {
  name: string;
  age?: number;
}

const user1: User = {
  name: "Alice",
  age: 25,
};

const user2: User = {
  name: "Bob",
};

console.log(user1); // 输出: { name: 'Alice', age: 25 }
console.log(user2); // 输出: { name: 'Bob' }
```

在这个例子中，`user1` 包含了 `age` 属性，而 `user2` 没有。由于 `age` 是可选的，TypeScript 不会报错。

## 可选属性的实际应用

可选属性在实际开发中非常有用，尤其是在处理复杂对象或 API 响应时。以下是一些常见的应用场景：

### 1. 处理 API 响应

假设你正在处理一个返回用户信息的 API。API 可能会返回用户的详细信息，但某些字段（如 `email` 或 `phone`）可能是可选的。你可以使用可选属性来定义这样的接口：

```typescript
interface ApiResponse {
  id: number;
  username: string;
  email?: string;
  phone?: string;
}

const response1: ApiResponse = {
  id: 1,
  username: "alice123",
  email: "alice@example.com",
};

const response2: ApiResponse = {
  id: 2,
  username: "bob456",
};

console.log(response1); // 输出: { id: 1, username: 'alice123', email: 'alice@example.com' }
console.log(response2); // 输出: { id: 2, username: 'bob456' }
```

### 2. 配置对象

在编写函数或类时，通常需要传递配置对象。某些配置项可能是可选的。例如：

```typescript
interface Config {
  host: string;
  port: number;
  timeout?: number;
}

function connect(config: Config) {
  console.log(`Connecting to ${config.host}:${config.port}`);
  if (config.timeout) {
    console.log(`Timeout set to ${config.timeout}ms`);
  }
}

connect({ host: "localhost", port: 8080 }); // 输出: Connecting to localhost:8080
connect({ host: "example.com", port: 80, timeout: 5000 }); // 输出: Connecting to example.com:80, Timeout set to 5000ms
```

在这个例子中，`timeout` 是一个可选属性，允许调用者根据需要提供超时时间。

## 可选属性与默认值

有时，你可能希望为可选属性提供一个默认值。这可以通过解构赋值来实现：

```typescript
interface Config {
  host: string;
  port: number;
  timeout?: number;
}

function connect({ host, port, timeout = 1000 }: Config) {
  console.log(`Connecting to ${host}:${port}`);
  console.log(`Timeout set to ${timeout}ms`);
}

connect({ host: "localhost", port: 8080 }); // 输出: Connecting to localhost:8080, Timeout set to 1000ms
connect({ host: "example.com", port: 80, timeout: 5000 }); // 输出: Connecting to example.com:80, Timeout set to 5000ms
```

在这个例子中，如果 `timeout` 未提供，它将默认为 `1000`。

:::tip
使用默认值可以避免在代码中频繁检查可选属性是否存在，从而提高代码的可读性和简洁性。
:::

## 总结

可选属性是 TypeScript 中一个非常有用的特性，它允许我们在定义对象结构时，指定某些属性是可选的。通过使用 `?` 符号，我们可以轻松地定义可选属性，并在实际开发中灵活应用。

### 附加资源

- [TypeScript 官方文档 - 接口](https://www.typescriptlang.org/docs/handbook/interfaces.html)
- [TypeScript 官方文档 - 类型别名](https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases)

### 练习

1. 定义一个 `Book` 接口，包含 `title`（必须）、`author`（必须）和 `year`（可选）属性。
2. 创建一个函数 `printBookInfo`，接受一个 `Book` 对象作为参数，并打印出书籍的详细信息。如果 `year` 存在，则打印出版年份。

通过练习，你将更好地掌握可选属性的使用。