---
title: C 语言字符串格式化
description: 了解C语言中字符串格式化的基本概念、使用方法以及实际应用场景，适合初学者学习。
---

## 介绍

在C语言中，字符串格式化是一种将数据转换为特定格式的字符串的技术。它通常用于将变量、数字或其他数据类型转换为可读的字符串形式，以便输出或存储。C语言提供了强大的格式化功能，主要通过 `printf` 和 `sprintf` 等函数来实现。

字符串格式化不仅可以帮助我们更好地展示数据，还可以在调试和日志记录中发挥重要作用。本文将详细介绍C语言中字符串格式化的基本用法、常见格式化符号以及实际应用场景。

## 基本用法

C语言中最常用的字符串格式化函数是 `printf` 和 `sprintf`。`printf` 用于将格式化后的字符串输出到标准输出（通常是屏幕），而 `sprintf` 则将格式化后的字符串存储到一个字符数组中。

### `printf` 函数

`printf` 函数的原型如下：

```c
int printf(const char *format, ...);
```

其中，`format` 是一个字符串，包含普通字符和格式化占位符。格式化占位符以 `%` 开头，后面跟着一个或多个字符，用于指定要格式化的数据类型。

#### 示例

```c
#include <stdio.h>

int main() {
    int age = 25;
    float height = 1.75;
    printf("年龄: %d, 身高: %.2f 米\n", age, height);
    return 0;
}
```

**输出：**

```
年龄: 25, 身高: 1.75 米
```

在这个例子中，`%d` 用于格式化整数，`%.2f` 用于格式化浮点数并保留两位小数。

### `sprintf` 函数

`sprintf` 函数的原型如下：

```c
int sprintf(char *str, const char *format, ...);
```

`sprintf` 将格式化后的字符串存储到 `str` 指向的字符数组中。

#### 示例

```c
#include <stdio.h>

int main() {
    char buffer[50];
    int age = 25;
    float height = 1.75;
    sprintf(buffer, "年龄: %d, 身高: %.2f 米", age, height);
    printf("%s\n", buffer);
    return 0;
}
```

**输出：**

```
年龄: 25, 身高: 1.75 米
```

在这个例子中，`sprintf` 将格式化后的字符串存储到 `buffer` 中，然后通过 `printf` 输出。

## 常见格式化符号

C语言提供了多种格式化符号，用于处理不同类型的数据。以下是一些常见的格式化符号：

- `%d` 或 `%i`：用于格式化整数。
- `%f`：用于格式化浮点数。
- `%c`：用于格式化字符。
- `%s`：用于格式化字符串。
- `%x` 或 `%X`：用于格式化十六进制数。
- `%p`：用于格式化指针地址。
- `%%`：用于输出百分号 `%`。

### 格式化符号的修饰符

格式化符号可以包含修饰符，用于控制输出的宽度、精度等。以下是一些常见的修饰符：

- `%5d`：输出至少5个字符宽的整数，不足部分用空格填充。
- `%.2f`：输出浮点数并保留两位小数。
- `%-10s`：输出至少10个字符宽的字符串，左对齐。

#### 示例

```c
#include <stdio.h>

int main() {
    int num = 123;
    float pi = 3.14159;
    char name[] = "Alice";
    printf("数字: %5d\n", num);
    printf("圆周率: %.2f\n", pi);
    printf("名字: %-10s\n", name);
    return 0;
}
```

**输出：**

```
数字:   123
圆周率: 3.14
名字: Alice     
```

## 实际应用场景

### 1. 日志记录

在开发过程中，日志记录是非常重要的。通过字符串格式化，我们可以将变量、错误信息等格式化为可读的字符串，并输出到日志文件中。

```c
#include <stdio.h>

void log_error(const char *message, int error_code) {
    char buffer[100];
    sprintf(buffer, "错误: %s, 错误代码: %d", message, error_code);
    printf("%s\n", buffer);
}

int main() {
    log_error("文件未找到", 404);
    return 0;
}
```

**输出：**

```
错误: 文件未找到, 错误代码: 404
```

### 2. 数据展示

在用户界面或命令行工具中，我们经常需要将数据以特定的格式展示给用户。字符串格式化可以帮助我们实现这一点。

```c
#include <stdio.h>

int main() {
    int score = 95;
    char grade = 'A';
    printf("成绩: %d, 等级: %c\n", score, grade);
    return 0;
}
```

**输出：**

```
成绩: 95, 等级: A
```

## 总结

C语言中的字符串格式化是一种强大的工具，可以帮助我们将数据转换为特定格式的字符串。通过 `printf` 和 `sprintf` 等函数，我们可以轻松地格式化整数、浮点数、字符和字符串等数据类型。掌握字符串格式化的基本用法和常见格式化符号，对于编写清晰、易读的代码非常重要。

## 附加资源与练习

- **练习1**：编写一个程序，使用 `sprintf` 将多个变量格式化为一个字符串，并输出该字符串。
- **练习2**：尝试使用不同的格式化修饰符，控制输出的宽度、精度和对齐方式。

:::tip
如果你想进一步学习C语言的字符串处理，可以查阅C标准库中关于 `printf` 和 `sprintf` 的文档，了解更多高级用法和细节。
:::