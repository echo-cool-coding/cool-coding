---
title: C 语言字符串转换
description: 了解如何在C语言中进行字符串转换，包括字符串与数字之间的转换、大小写转换等。适合初学者学习。
---

# C 语言字符串转换

在C语言中，字符串是以字符数组的形式存储的。字符串转换是指将字符串从一种形式转换为另一种形式的过程。常见的字符串转换包括将字符串转换为数字、将数字转换为字符串、以及字符串的大小写转换等。本文将详细介绍这些转换方法，并提供代码示例和实际应用场景。

## 1. 字符串与数字的转换

### 1.1 字符串转换为数字

在C语言中，可以使用标准库函数将字符串转换为数字。常用的函数有 `atoi`、`atof` 和 `strtol` 等。

#### 1.1.1 `atoi` 函数

`atoi` 函数将字符串转换为整数。如果字符串中包含非数字字符，`atoi` 会忽略这些字符并返回已转换的部分。

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    char str[] = "12345";
    int num = atoi(str);
    printf("转换后的整数: %d\n", num);
    return 0;
}
```

**输出:**
```
转换后的整数: 12345
```

#### 1.1.2 `atof` 函数

`atof` 函数将字符串转换为浮点数。

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    char str[] = "123.45";
    double num = atof(str);
    printf("转换后的浮点数: %f\n", num);
    return 0;
}
```

**输出:**
```
转换后的浮点数: 123.450000
```

#### 1.1.3 `strtol` 函数

`strtol` 函数将字符串转换为长整型，并且可以指定进制。

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    char str[] = "1010";
    long num = strtol(str, NULL, 2); // 二进制转换
    printf("转换后的长整型: %ld\n", num);
    return 0;
}
```

**输出:**
```
转换后的长整型: 10
```

### 1.2 数字转换为字符串

将数字转换为字符串可以使用 `sprintf` 函数。

```c
#include <stdio.h>

int main() {
    int num = 12345;
    char str[20];
    sprintf(str, "%d", num);
    printf("转换后的字符串: %s\n", str);
    return 0;
}
```

**输出:**
```
转换后的字符串: 12345
```

## 2. 字符串的大小写转换

### 2.1 转换为小写

可以使用 `tolower` 函数将字符串中的字符转换为小写。

```c
#include <stdio.h>
#include <ctype.h>

int main() {
    char str[] = "Hello World!";
    for (int i = 0; str[i]; i++) {
        str[i] = tolower(str[i]);
    }
    printf("转换为小写: %s\n", str);
    return 0;
}
```

**输出:**
```
转换为小写: hello world!
```

### 2.2 转换为大写

可以使用 `toupper` 函数将字符串中的字符转换为大写。

```c
#include <stdio.h>
#include <ctype.h>

int main() {
    char str[] = "Hello World!";
    for (int i = 0; str[i]; i++) {
        str[i] = toupper(str[i]);
    }
    printf("转换为大写: %s\n", str);
    return 0;
}
```

**输出:**
```
转换为大写: HELLO WORLD!
```

## 3. 实际应用场景

### 3.1 用户输入验证

在处理用户输入时，通常需要将输入的字符串转换为数字进行验证。例如，用户输入一个年龄，程序需要将其转换为整数并进行范围检查。

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    char input[10];
    printf("请输入你的年龄: ");
    scanf("%s", input);
    int age = atoi(input);
    if (age < 0 || age > 120) {
        printf("无效的年龄输入\n");
    } else {
        printf("你的年龄是: %d\n", age);
    }
    return 0;
}
```

### 3.2 文件处理

在处理文件时，可能需要将文件中的字符串数据转换为数字进行计算或存储。

```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    FILE *file = fopen("data.txt", "r");
    if (file == NULL) {
        printf("无法打开文件\n");
        return 1;
    }
    char buffer[100];
    fgets(buffer, 100, file);
    int num = atoi(buffer);
    printf("文件中的数字是: %d\n", num);
    fclose(file);
    return 0;
}
```

## 4. 总结

本文介绍了C语言中常见的字符串转换操作，包括字符串与数字之间的转换、字符串的大小写转换等。通过这些转换，可以方便地处理用户输入、文件数据等场景。掌握这些转换方法对于C语言编程非常重要。

## 5. 附加资源与练习

- **练习1:** 编写一个程序，将用户输入的字符串转换为整数，并判断该整数是否为素数。
- **练习2:** 编写一个程序，将文件中的所有字符串转换为大写并输出到另一个文件中。

:::tip
建议初学者多动手实践，尝试编写不同的字符串转换程序，以加深对C语言字符串处理的理解。
:::