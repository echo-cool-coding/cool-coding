---
title: Go 文本处理
description: "学习如何在 Go 中处理文本数据，包括字符串操作、格式化、正则表达式等。本文适合初学者，包含代码示例和实际应用场景。"
---

# Go 文本处理

在 Go 编程中，文本处理是一个非常重要的部分。无论是处理用户输入、解析文件内容，还是生成动态文本，掌握文本处理技巧都是必不可少的。本文将带你逐步了解 Go 中的文本处理，包括字符串操作、格式化、正则表达式等。

## 1. 字符串基础

在 Go 中，字符串是不可变的字节序列。字符串可以用双引号 `"` 或反引号 `` ` `` 来定义。双引号用于定义可转义的字符串，而反引号用于定义原始字符串（不进行转义）。

```go
package main

import "fmt"

func main() {
    str1 := "Hello, World!"
    str2 := `This is a raw string \n`
    fmt.Println(str1)
    fmt.Println(str2)
}
```

**输出：**
```
Hello, World!
This is a raw string \n
```

:::note
反引号定义的字符串可以跨越多行，并且不会对特殊字符进行转义。
:::

## 2. 字符串操作

Go 提供了丰富的字符串操作函数，以下是一些常用的操作：

### 2.1 字符串连接

可以使用 `+` 运算符或 `fmt.Sprintf` 来连接字符串。

```go
package main

import "fmt"

func main() {
    str1 := "Hello"
    str2 := "World"
    result := str1 + ", " + str2 + "!"
    fmt.Println(result)

    result2 := fmt.Sprintf("%s, %s!", str1, str2)
    fmt.Println(result2)
}
```

**输出：**
```
Hello, World!
Hello, World!
```

### 2.2 字符串长度

使用 `len` 函数可以获取字符串的字节长度。如果需要获取字符数（如处理 Unicode 字符），可以使用 `utf8.RuneCountInString`。

```go
package main

import (
    "fmt"
    "unicode/utf8"
)

func main() {
    str := "Hello, 世界"
    fmt.Println("字节长度:", len(str))
    fmt.Println("字符长度:", utf8.RuneCountInString(str))
}
```

**输出：**
```
字节长度: 13
字符长度: 9
```

### 2.3 字符串切片

字符串可以通过切片操作来获取子字符串。

```go
package main

import "fmt"

func main() {
    str := "Hello, World!"
    subStr := str[7:12]
    fmt.Println(subStr)
}
```

**输出：**
```
World
```

:::caution
字符串切片操作是基于字节的，因此在处理多字节字符（如 Unicode）时需要小心。
:::

## 3. 字符串格式化

Go 提供了强大的格式化功能，主要通过 `fmt` 包实现。常用的格式化动词包括 `%s`（字符串）、`%d`（整数）、`%f`（浮点数）等。

```go
package main

import "fmt"

func main() {
    name := "Alice"
    age := 30
    height := 1.65
    fmt.Printf("Name: %s, Age: %d, Height: %.2f\n", name, age, height)
}
```

**输出：**
```
Name: Alice, Age: 30, Height: 1.65
```

:::tip
`fmt.Printf` 用于格式化输出，而 `fmt.Sprintf` 用于返回格式化后的字符串。
:::

## 4. 正则表达式

Go 的 `regexp` 包提供了正则表达式的支持。正则表达式可以用于复杂的字符串匹配和替换操作。

```go
package main

import (
    "fmt"
    "regexp"
)

func main() {
    re := regexp.MustCompile(`\d+`)
    str := "There are 3 apples and 5 oranges."
    matches := re.FindAllString(str, -1)
    fmt.Println(matches)
}
```

**输出：**
```
[3 5]
```

:::warning
正则表达式的性能可能不如简单的字符串操作，因此在性能敏感的场景中应谨慎使用。
:::

## 5. 实际案例：解析 CSV 文件

假设我们需要解析一个简单的 CSV 文件，并提取其中的数据。以下是一个示例：

```go
package main

import (
    "encoding/csv"
    "fmt"
    "strings"
)

func main() {
    csvData := `name,age,city
Alice,30,New York
Bob,25,Los Angeles`
    reader := csv.NewReader(strings.NewReader(csvData))
    records, err := reader.ReadAll()
    if err != nil {
        fmt.Println("Error reading CSV:", err)
        return
    }
    for _, record := range records {
        fmt.Println(record)
    }
}
```

**输出：**
```
[name age city]
[Alice 30 New York]
[Bob 25 Los Angeles]
```

## 6. 总结

本文介绍了 Go 中的文本处理，包括字符串操作、格式化、正则表达式等。通过这些工具，你可以轻松处理各种文本数据。希望这些内容能帮助你在 Go 编程中更加得心应手。

## 7. 附加资源与练习

- **练习 1**：编写一个程序，将用户输入的字符串反转并输出。
- **练习 2**：使用正则表达式提取一个字符串中的所有电子邮件地址。
- **附加资源**：
  - [Go 官方文档 - 字符串](https://golang.org/pkg/strings/)
  - [Go 官方文档 - 正则表达式](https://golang.org/pkg/regexp/)

继续练习和探索，你将掌握更多 Go 文本处理的技巧！