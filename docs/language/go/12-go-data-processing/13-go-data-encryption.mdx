---
title: Go 数据加密
description: 了解如何在Go中实现数据加密，包括对称加密和非对称加密的基本概念、代码示例以及实际应用场景。
---

# Go 数据加密

在现代软件开发中，数据加密是保护敏感信息的关键技术。无论是存储用户密码、传输敏感数据，还是确保数据的完整性，加密都扮演着重要角色。本文将介绍如何在Go语言中实现数据加密，涵盖对称加密和非对称加密的基本概念，并提供代码示例和实际应用场景。

## 什么是数据加密？

数据加密是将原始数据（明文）转换为不可读的形式（密文）的过程。只有拥有正确密钥的人才能将密文解密回明文。加密技术主要分为两类：

1. **对称加密**：使用相同的密钥进行加密和解密。
2. **非对称加密**：使用一对密钥，公钥用于加密，私钥用于解密。

## 对称加密

对称加密是最常见的加密方式之一。它使用相同的密钥进行加密和解密。常见的对称加密算法包括AES（高级加密标准）和DES（数据加密标准）。

### AES加密示例

以下是一个使用AES加密的Go代码示例：

```go
package main

import (
    "crypto/aes"
    "crypto/cipher"
    "crypto/rand"
    "encoding/base64"
    "fmt"
    "io"
)

func encrypt(plainText []byte, key []byte) (string, error) {
    block, err := aes.NewCipher(key)
    if err != nil {
        return "", err
    }

    cipherText := make([]byte, aes.BlockSize+len(plainText))
    iv := cipherText[:aes.BlockSize]
    if _, err := io.ReadFull(rand.Reader, iv); err != nil {
        return "", err
    }

    stream := cipher.NewCFBEncrypter(block, iv)
    stream.XORKeyStream(cipherText[aes.BlockSize:], plainText)

    return base64.URLEncoding.EncodeToString(cipherText), nil
}

func main() {
    key := []byte("this-is-a-32-byte-key-1234567890123456")
    plainText := []byte("Hello, World!")

    encrypted, err := encrypt(plainText, key)
    if err != nil {
        fmt.Println("Encryption error:", err)
        return
    }

    fmt.Println("Encrypted:", encrypted)
}
```

**输入**：`Hello, World!`  
**输出**：`Encrypted: <base64编码的密文>`

:::note
在实际应用中，密钥管理非常重要。密钥应安全存储，避免硬编码在代码中。
:::

## 非对称加密

非对称加密使用一对密钥：公钥和私钥。公钥用于加密数据，私钥用于解密。常见的非对称加密算法包括RSA和ECC。

### RSA加密示例

以下是一个使用RSA加密的Go代码示例：

```go
package main

import (
    "crypto/rand"
    "crypto/rsa"
    "crypto/x509"
    "encoding/base64"
    "encoding/pem"
    "fmt"
)

func encrypt(plainText []byte, publicKey *rsa.PublicKey) (string, error) {
    cipherText, err := rsa.EncryptPKCS1v15(rand.Reader, publicKey, plainText)
    if err != nil {
        return "", err
    }

    return base64.URLEncoding.EncodeToString(cipherText), nil
}

func main() {
    privateKey, err := rsa.GenerateKey(rand.Reader, 2048)
    if err != nil {
        fmt.Println("Key generation error:", err)
        return
    }

    publicKey := &privateKey.PublicKey
    plainText := []byte("Hello, World!")

    encrypted, err := encrypt(plainText, publicKey)
    if err != nil {
        fmt.Println("Encryption error:", err)
        return
    }

    fmt.Println("Encrypted:", encrypted)
}
```

**输入**：`Hello, World!`  
**输出**：`Encrypted: <base64编码的密文>`

:::tip
非对称加密通常用于加密小量数据，如加密对称加密的密钥。
:::

## 实际应用场景

### 1. 用户密码存储

在存储用户密码时，通常使用哈希函数（如bcrypt）而不是直接加密。哈希函数是单向的，无法解密，因此即使数据库泄露，攻击者也无法轻易获取用户密码。

### 2. 数据传输加密

在传输敏感数据时，通常使用TLS（传输层安全）协议，它结合了对称加密和非对称加密的优点，确保数据在传输过程中的安全性。

### 3. 数字签名

非对称加密还可用于数字签名，确保数据的完整性和来源的真实性。发送方使用私钥对数据进行签名，接收方使用公钥验证签名。

## 总结

数据加密是保护敏感信息的重要手段。本文介绍了对称加密和非对称加密的基本概念，并提供了Go语言中的代码示例。通过理解这些概念，你可以在实际项目中应用加密技术，确保数据的安全性。

## 附加资源

- [Go加密包文档](https://pkg.go.dev/crypto)
- [AES加密算法详解](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)
- [RSA加密算法详解](https://en.wikipedia.org/wiki/RSA_(cryptosystem))

## 练习

1. 修改AES加密示例，使其支持解密功能。
2. 使用RSA加密一个文件，并尝试解密。
3. 研究并实现一个简单的数字签名系统。

通过完成这些练习，你将更深入地理解Go中的数据加密技术。