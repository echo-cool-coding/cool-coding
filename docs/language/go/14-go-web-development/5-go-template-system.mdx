---
title: Go 模板系统
description: 了解Go语言中的模板系统，学习如何使用Go的模板引擎生成动态内容。
---

# Go 模板系统

Go语言提供了一个强大的模板引擎，用于生成动态内容。无论是生成HTML页面、配置文件，还是其他文本格式，Go的模板系统都能轻松应对。本文将带你从基础到实际应用，全面了解Go模板系统。

## 什么是Go模板系统？

Go模板系统是Go标准库中的一部分，主要用于生成文本输出。它通过将数据与模板结合，生成最终的文本内容。模板系统支持条件判断、循环、变量替换等功能，非常适合用于生成动态内容。

## 基本语法

Go模板系统使用双大括号 `{{ }}` 来包裹模板动作（actions）。以下是一些基本的模板语法：

- **变量替换**：`{{ .VariableName }}`
- **条件判断**：`{{ if .Condition }} ... {{ end }}`
- **循环**：`{{ range .Items }} ... {{ end }}`
- **函数调用**：`{{ .FunctionName .Argument }}`

### 示例：变量替换

```go
package main

import (
    "os"
    "text/template"
)

func main() {
    const tmpl = `Hello, {{ .Name }}!`
    t := template.Must(template.New("example").Parse(tmpl))
    t.Execute(os.Stdout, map[string]string{"Name": "World"})
}
```

**输出**：
```
Hello, World!
```

在这个示例中，我们定义了一个简单的模板 `Hello, {{ .Name }}!`，并通过 `Execute` 方法将数据 `{"Name": "World"}` 传递给模板，最终生成了 `Hello, World!`。

## 条件判断

Go模板系统支持条件判断，可以根据数据的不同生成不同的内容。

### 示例：条件判断

```go
package main

import (
    "os"
    "text/template"
)

func main() {
    const tmpl = `{{ if .IsAdmin }}Welcome, Admin!{{ else }}Welcome, User!{{ end }}`
    t := template.Must(template.New("example").Parse(tmpl))
    t.Execute(os.Stdout, map[string]bool{"IsAdmin": true})
}
```

**输出**：
```
Welcome, Admin!
```

在这个示例中，我们根据 `IsAdmin` 的值来决定输出内容。如果 `IsAdmin` 为 `true`，则输出 `Welcome, Admin!`，否则输出 `Welcome, User!`。

## 循环

Go模板系统还支持循环，可以遍历数组、切片或映射。

### 示例：循环

```go
package main

import (
    "os"
    "text/template"
)

func main() {
    const tmpl = `{{ range .Items }}{{ . }}{{ end }}`
    t := template.Must(template.New("example").Parse(tmpl))
    t.Execute(os.Stdout, map[string][]string{"Items": {"A", "B", "C"}})
}
```

**输出**：
```
ABC
```

在这个示例中，我们遍历了 `Items` 切片，并将每个元素输出到结果中。

## 实际应用场景

Go模板系统在实际开发中有广泛的应用场景。以下是一个生成HTML页面的示例。

### 示例：生成HTML页面

```go
package main

import (
    "html/template"
    "os"
)

type User struct {
    Name  string
    Email string
}

func main() {
    const tmpl = `
    <html>
    <head><title>User Info</title></head>
    <body>
        <h1>User Info</h1>
        <p>Name: {{ .Name }}</p>
        <p>Email: {{ .Email }}</p>
    </body>
    </html>
    `
    t := template.Must(template.New("example").Parse(tmpl))
    user := User{Name: "John Doe", Email: "john@example.com"}
    t.Execute(os.Stdout, user)
}
```

**输出**：
```html
<html>
<head><title>User Info</title></head>
<body>
    <h1>User Info</h1>
    <p>Name: John Doe</p>
    <p>Email: john@example.com</p>
</body>
</html>
```

在这个示例中，我们使用Go模板系统生成了一个简单的HTML页面，展示了用户的基本信息。

## 总结

Go模板系统是一个功能强大且灵活的工具，适用于生成各种文本内容。通过本文的学习，你应该已经掌握了Go模板系统的基本语法和常见用法。希望你能在实际项目中灵活运用这些知识，生成动态内容。

## 附加资源与练习

- **官方文档**：[Go模板系统文档](https://golang.org/pkg/text/template/)
- **练习**：尝试使用Go模板系统生成一个包含多个用户信息的HTML页面，并使用循环和条件判断来动态生成内容。

:::tip
在编写模板时，建议使用 `html/template` 包来生成HTML内容，因为它会自动转义特殊字符，防止XSS攻击。
:::