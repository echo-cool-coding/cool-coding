---
title: Go 结构体
description: 了解 Go 语言中的结构体（struct），掌握如何定义、初始化和使用结构体来组织和管理数据。
---

## 介绍

在 Go 语言中，结构体（struct）是一种用户定义的数据类型，用于将不同类型的数据组合在一起。结构体类似于其他编程语言中的“类”或“对象”，但它更轻量级，且不支持继承。结构体是 Go 语言中组织和管理数据的核心工具之一。

结构体非常适合用于表示现实世界中的实体，例如用户、订单或产品。通过将相关的数据字段组合在一起，结构体可以帮助你编写更清晰、更易维护的代码。

## 定义结构体

在 Go 中，使用 `type` 关键字和 `struct` 关键字来定义结构体。以下是一个简单的结构体定义示例：

```go
type Person struct {
    Name string
    Age  int
}
```

在这个例子中，我们定义了一个名为 `Person` 的结构体，它包含两个字段：`Name`（字符串类型）和 `Age`（整数类型）。

## 初始化结构体

定义结构体后，可以通过多种方式初始化结构体实例。

### 1. 使用字段名初始化

```go
p := Person{
    Name: "Alice",
    Age:  30,
}
```

### 2. 按顺序初始化（不推荐）

如果你按字段定义的顺序初始化结构体，可以省略字段名。但这种方式不推荐，因为代码的可读性较差。

```go
p := Person{"Alice", 30}
```

### 3. 使用 `new` 函数

`new` 函数会返回一个指向结构体的指针。

```go
p := new(Person)
p.Name = "Bob"
p.Age = 25
```

## 访问结构体字段

你可以使用点号（`.`）来访问结构体的字段。

```go
fmt.Println(p.Name) // 输出: Alice
fmt.Println(p.Age)  // 输出: 30
```

## 结构体的嵌套

结构体可以嵌套其他结构体，从而创建更复杂的数据结构。

```go
type Address struct {
    City  string
    State string
}

type User struct {
    Name    string
    Age     int
    Address Address
}

u := User{
    Name: "Charlie",
    Age:  28,
    Address: Address{
        City:  "New York",
        State: "NY",
    },
}

fmt.Println(u.Address.City) // 输出: New York
```

## 结构体的方法

在 Go 中，你可以为结构体定义方法。方法是与特定类型关联的函数。

```go
func (p Person) Greet() string {
    return "Hello, my name is " + p.Name
}

p := Person{Name: "Alice", Age: 30}
fmt.Println(p.Greet()) // 输出: Hello, my name is Alice
```

## 实际应用场景

### 1. 用户管理系统

假设你正在开发一个用户管理系统，可以使用结构体来表示用户信息。

```go
type User struct {
    ID       int
    Username string
    Email    string
    IsActive bool
}

func (u User) DisplayInfo() {
    fmt.Printf("User ID: %d\nUsername: %s\nEmail: %s\nActive: %v\n", u.ID, u.Username, u.Email, u.IsActive)
}

user := User{
    ID:       1,
    Username: "john_doe",
    Email:    "john@example.com",
    IsActive: true,
}

user.DisplayInfo()
```

### 2. 订单管理系统

在订单管理系统中，结构体可以用于表示订单和订单项。

```go
type OrderItem struct {
    ProductName string
    Quantity    int
    Price       float64
}

type Order struct {
    ID      int
    UserID  int
    Items   []OrderItem
    Total   float64
}

func (o Order) CalculateTotal() float64 {
    total := 0.0
    for _, item := range o.Items {
        total += item.Price * float64(item.Quantity)
    }
    return total
}

order := Order{
    ID:     101,
    UserID: 1,
    Items: []OrderItem{
        {ProductName: "Laptop", Quantity: 1, Price: 1200.0},
        {ProductName: "Mouse", Quantity: 2, Price: 25.0},
    },
}

order.Total = order.CalculateTotal()
fmt.Printf("Order Total: $%.2f\n", order.Total) // 输出: Order Total: $1250.00
```

## 总结

结构体是 Go 语言中用于组织和管理数据的重要工具。通过结构体，你可以将相关的数据字段组合在一起，并为其定义方法，从而编写更清晰、更易维护的代码。

:::tip
- 结构体是值类型，传递结构体时会复制整个结构体。
- 如果需要修改结构体，可以传递结构体指针。
:::

## 附加资源与练习

1. **练习**：定义一个 `Book` 结构体，包含书名、作者和出版年份字段。然后创建一个 `Book` 实例并打印其信息。
2. **扩展阅读**：了解 Go 语言中的接口（interface），并尝试为结构体实现接口。

通过不断练习和探索，你将更好地掌握 Go 语言中的结构体及其应用场景。