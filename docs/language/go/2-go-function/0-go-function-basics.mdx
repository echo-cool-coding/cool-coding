---
title: Go 函数基础
description: 了解Go语言中函数的基本概念、语法和实际应用场景。适合初学者学习如何定义、调用和使用函数。
---

# Go 函数基础

函数是编程语言中的基本构建块之一。在Go语言中，函数用于封装代码逻辑，使其可以重复使用。本文将介绍Go函数的基础知识，包括如何定义、调用函数，以及函数的实际应用场景。

## 什么是函数？

函数是一段可以重复调用的代码块，它接受输入参数并返回输出结果。通过使用函数，我们可以将复杂的逻辑分解为更小、更易管理的部分。

在Go语言中，函数使用关键字 `func` 来定义。一个基本的函数定义如下：

```go
func 函数名(参数列表) 返回值类型 {
    // 函数体
}
```

### 示例：简单的加法函数

让我们从一个简单的例子开始，定义一个加法函数：

```go
func add(a int, b int) int {
    return a + b
}
```

在这个例子中，`add` 是函数名，`a` 和 `b` 是参数，`int` 是返回值类型。函数体中的 `return` 语句用于返回计算结果。

### 调用函数

定义函数后，我们可以通过函数名和参数列表来调用它：

```go
result := add(3, 5)
fmt.Println(result) // 输出: 8
```

## 函数的参数和返回值

### 多返回值

Go语言的一个独特特性是支持多返回值。这在处理错误或需要返回多个结果时非常有用。

```go
func divide(a int, b int) (int, error) {
    if b == 0 {
        return 0, fmt.Errorf("除数不能为零")
    }
    return a / b, nil
}
```

在这个例子中，`divide` 函数返回两个值：商和一个错误。如果除数为零，函数会返回一个错误。

### 命名返回值

Go语言还支持命名返回值。命名返回值可以在函数体中直接使用，并且在 `return` 语句中可以省略返回值。

```go
func sumAndProduct(a int, b int) (sum int, product int) {
    sum = a + b
    product = a * b
    return
}
```

在这个例子中，`sum` 和 `product` 是命名返回值。函数体中对它们进行赋值后，`return` 语句会自动返回这两个值。

## 匿名函数和闭包

### 匿名函数

Go语言支持匿名函数，即没有名字的函数。匿名函数通常用于需要临时定义函数的场景。

```go
func main() {
    add := func(a int, b int) int {
        return a + b
    }
    result := add(3, 5)
    fmt.Println(result) // 输出: 8
}
```

### 闭包

闭包是一种特殊的匿名函数，它可以捕获并保存其外部作用域中的变量。闭包在需要保持状态时非常有用。

```go
func main() {
    counter := func() func() int {
        count := 0
        return func() int {
            count++
            return count
        }
    }()

    fmt.Println(counter()) // 输出: 1
    fmt.Println(counter()) // 输出: 2
}
```

在这个例子中，`counter` 是一个闭包，它捕获了 `count` 变量，并在每次调用时递增。

## 实际应用场景

### 案例：计算器

让我们通过一个简单的计算器案例来展示函数的实际应用。我们将定义四个函数：`add`、`subtract`、`multiply` 和 `divide`，并在主函数中调用它们。

```go
package main

import (
    "fmt"
)

func add(a int, b int) int {
    return a + b
}

func subtract(a int, b int) int {
    return a - b
}

func multiply(a int, b int) int {
    return a * b
}

func divide(a int, b int) (int, error) {
    if b == 0 {
        return 0, fmt.Errorf("除数不能为零")
    }
    return a / b, nil
}

func main() {
    a := 10
    b := 5

    fmt.Println("加法:", add(a, b))
    fmt.Println("减法:", subtract(a, b))
    fmt.Println("乘法:", multiply(a, b))

    result, err := divide(a, b)
    if err != nil {
        fmt.Println("除法错误:", err)
    } else {
        fmt.Println("除法:", result)
    }
}
```

在这个案例中，我们定义了四个函数来执行基本的数学运算，并在主函数中调用它们。如果除数为零，`divide` 函数会返回一个错误。

## 总结

函数是Go语言中的核心概念之一。通过本文，我们学习了如何定义和调用函数，如何处理多返回值和命名返回值，以及如何使用匿名函数和闭包。我们还通过一个简单的计算器案例展示了函数的实际应用。

:::tip 提示
- 函数是代码复用的基本单元，合理使用函数可以提高代码的可读性和可维护性。
- 多返回值和命名返回值是Go语言的独特特性，合理使用它们可以使代码更加简洁。
:::

## 附加资源

- [Go语言官方文档](https://golang.org/doc/)
- [Go by Example](https://gobyexample.com/)

## 练习

1. 定义一个函数 `max`，接受两个整数参数并返回较大的那个。
2. 修改 `divide` 函数，使其返回浮点数结果而不是整数。
3. 创建一个闭包，用于生成斐波那契数列。

通过完成这些练习，你将更深入地理解Go函数的使用。