---
title: Go 全局变量与局部变量
description: 了解Go语言中全局变量与局部变量的定义、作用域及其在实际编程中的应用。
---

在Go语言中，变量的作用域决定了它在程序中的可见性和生命周期。全局变量和局部变量是两种常见的变量类型，它们在作用域和使用方式上有显著的区别。本文将详细介绍这两种变量，并通过代码示例和实际案例帮助你更好地理解它们。

## 什么是全局变量与局部变量？

### 全局变量
全局变量是在函数外部声明的变量，它的作用域是整个包（package）。这意味着在同一个包中的任何函数都可以访问和修改全局变量。全局变量的生命周期从程序启动开始，直到程序结束。

### 局部变量
局部变量是在函数内部声明的变量，它的作用域仅限于该函数内部。局部变量的生命周期从函数调用开始，到函数返回时结束。局部变量在函数外部是不可见的。

## 全局变量与局部变量的声明与使用

### 全局变量的声明与使用
全局变量通常在包的最外层声明，使用 `var` 关键字。以下是一个全局变量的声明示例：

```go
package main

import "fmt"

// 全局变量
var globalVar int = 10

func main() {
    fmt.Println("全局变量的值:", globalVar) // 输出: 全局变量的值: 10
    modifyGlobalVar()
    fmt.Println("修改后的全局变量值:", globalVar) // 输出: 修改后的全局变量值: 20
}

func modifyGlobalVar() {
    globalVar = 20
}
```

在上面的代码中，`globalVar` 是一个全局变量，它在 `main` 函数和 `modifyGlobalVar` 函数中都可以被访问和修改。

### 局部变量的声明与使用
局部变量通常在函数内部声明，使用 `:=` 或 `var` 关键字。以下是一个局部变量的声明示例：

```go
package main

import "fmt"

func main() {
    // 局部变量
    localVar := 5
    fmt.Println("局部变量的值:", localVar) // 输出: 局部变量的值: 5

    modifyLocalVar()
}

func modifyLocalVar() {
    localVar := 10
    fmt.Println("修改后的局部变量值:", localVar) // 输出: 修改后的局部变量值: 10
}
```

在上面的代码中，`localVar` 是一个局部变量，它在 `main` 函数和 `modifyLocalVar` 函数中分别声明，彼此之间互不影响。

## 全局变量与局部变量的作用域

### 全局变量的作用域
全局变量的作用域是整个包，因此在同一个包中的任何函数都可以访问和修改它。全局变量的生命周期从程序启动开始，直到程序结束。

### 局部变量的作用域
局部变量的作用域仅限于声明它的函数内部。局部变量的生命周期从函数调用开始，到函数返回时结束。局部变量在函数外部是不可见的。

## 实际案例

### 案例1：使用全局变量存储配置信息
在实际开发中，全局变量常用于存储程序的配置信息。例如，数据库的连接信息、API密钥等。

```go
package main

import "fmt"

// 全局变量存储数据库配置
var dbConfig = struct {
    host     string
    port     int
    username string
    password string
}{
    host:     "localhost",
    port:     3306,
    username: "root",
    password: "password",
}

func main() {
    fmt.Println("数据库配置:", dbConfig)
}
```

### 案例2：使用局部变量进行临时计算
局部变量通常用于函数内部的临时计算或存储中间结果。例如，计算两个数的和：

```go
package main

import "fmt"

func main() {
    a := 10
    b := 20
    sum := add(a, b)
    fmt.Println("两数之和:", sum) // 输出: 两数之和: 30
}

func add(x, y int) int {
    // 局部变量用于存储计算结果
    result := x + y
    return result
}
```

## 总结

全局变量和局部变量在Go语言中有着不同的作用域和生命周期。全局变量在整个包中可见，适合存储全局配置或共享数据；局部变量仅在函数内部可见，适合用于临时计算或存储中间结果。理解这两种变量的区别和使用场景，对于编写清晰、可维护的代码至关重要。

## 附加资源与练习

- **练习1**：尝试在同一个包中声明多个全局变量，并在不同的函数中修改它们的值。
- **练习2**：编写一个函数，使用局部变量计算斐波那契数列的前10项。
- **资源**：阅读Go语言官方文档中关于[变量声明](https://golang.org/ref/spec#Variable_declarations)的部分，深入了解变量的声明和作用域规则。

通过本文的学习，你应该已经掌握了Go语言中全局变量与局部变量的基本概念和使用方法。继续练习和探索，你将能够更加熟练地运用这些知识。