---
title: JavaScript Chart.js基础
description: 初学者学习使用Chart.js创建交互式数据可视化的完整指南
---

# JavaScript Chart.js基础

## 什么是Chart.js？

Chart.js是一个开源的JavaScript库，它允许开发者在网页上创建美观、响应式的图表和数据可视化。无论是简单的折线图还是复杂的混合图表，Chart.js都提供了一种简单的方式来可视化数据，且具有良好的交互性和自定义能力。

:::tip 为什么选择Chart.js
- 轻量级：压缩后仅约11KB
- 响应式：图表会随着页面大小自动调整
- 8种图表类型：线形图、柱状图、饼图等
- 丰富的自定义选项
- 良好的动画效果
:::

## 安装和设置Chart.js

有几种方法可以在你的项目中添加Chart.js:

### 使用CDN

```html
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
```

### 使用npm

```bash
npm install chart.js
```

然后在你的JavaScript文件中导入：

```javascript
import Chart from 'chart.js/auto';
```

## 创建你的第一个图表

要创建一个图表，我们需要：

1. 在HTML中添加一个canvas元素
2. 使用JavaScript创建图表实例

### 基础设置

首先，在HTML中添加canvas元素：

```html
<div style="width: 600px;">
  <canvas id="myChart"></canvas>
</div>
```

然后，使用JavaScript创建图表：

```javascript
// 获取canvas元素的上下文
const ctx = document.getElementById('myChart').getContext('2d');

// 创建新的图表实例
const myChart = new Chart(ctx, {
  type: 'bar', // 图表类型
  data: {
    labels: ['红色', '蓝色', '黄色', '绿色', '紫色', '橙色'],
    datasets: [{
      label: '颜色偏好',
      data: [12, 19, 3, 5, 2, 3],
      backgroundColor: [
        'rgba(255, 99, 132, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(153, 102, 255, 0.2)',
        'rgba(255, 159, 64, 0.2)'
      ],
      borderColor: [
        'rgba(255, 99, 132, 1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(153, 102, 255, 1)',
        'rgba(255, 159, 64, 1)'
      ],
      borderWidth: 1
    }]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
```

这段代码将创建一个基本的柱状图，显示不同颜色的偏好数据。

## 图表类型

Chart.js支持多种图表类型，以下是一些主要类型：

### 线形图 (Line)

适用于显示随时间变化的连续数据。

```javascript
const lineChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: ['一月', '二月', '三月', '四月', '五月', '六月'],
    datasets: [{
      label: '月度销售额',
      data: [65, 59, 80, 81, 56, 55],
      fill: false,
      borderColor: 'rgb(75, 192, 192)',
      tension: 0.1
    }]
  }
});
```

### 柱状图 (Bar)

适用于比较不同类别的数量。

```javascript
const barChart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ['周一', '周二', '周三', '周四', '周五'],
    datasets: [{
      label: '每日工作时长',
      data: [7, 8, 6, 9, 5],
      backgroundColor: 'rgba(75, 192, 192, 0.2)',
      borderColor: 'rgba(75, 192, 192, 1)',
      borderWidth: 1
    }]
  }
});
```

### 饼图 (Pie)

适用于显示部分与整体的关系。

```javascript
const pieChart = new Chart(ctx, {
  type: 'pie',
  data: {
    labels: ['足球', '篮球', '网球', '排球', '乒乓球'],
    datasets: [{
      label: '体育爱好',
      data: [30, 20, 15, 25, 10],
      backgroundColor: [
        'rgba(255, 99, 132, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(255, 206, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(153, 102, 255, 0.2)'
      ],
      borderColor: [
        'rgba(255, 99, 132, 1)',
        'rgba(54, 162, 235, 1)',
        'rgba(255, 206, 86, 1)',
        'rgba(75, 192, 192, 1)',
        'rgba(153, 102, 255, 1)'
      ],
      borderWidth: 1
    }]
  }
});
```

### 雷达图 (Radar)

适用于比较多个维度数据。

```javascript
const radarChart = new Chart(ctx, {
  type: 'radar',
  data: {
    labels: ['吃饭', '睡觉', '工作', '娱乐', '运动', '社交'],
    datasets: [{
      label: '时间分配',
      data: [8, 7, 9, 2, 1, 3],
      backgroundColor: 'rgba(255, 99, 132, 0.2)',
      borderColor: 'rgba(255, 99, 132, 1)',
      borderWidth: 1
    }]
  }
});
```

## 图表配置选项

Chart.js提供了丰富的配置选项来自定义图表：

### 标题设置

```javascript
options: {
  plugins: {
    title: {
      display: true,
      text: '我的第一个图表',
      font: {
        size: 16
      }
    }
  }
}
```

### 图例设置

```javascript
options: {
  plugins: {
    legend: {
      position: 'top',
      labels: {
        font: {
          size: 14
        }
      }
    }
  }
}
```

### 轴线设置

```javascript
options: {
  scales: {
    y: {
      beginAtZero: true,
      title: {
        display: true,
        text: 'Y轴标题'
      }
    },
    x: {
      title: {
        display: true,
        text: 'X轴标题'
      }
    }
  }
}
```

### 提示框设置

```javascript
options: {
  plugins: {
    tooltip: {
      callbacks: {
        label: function(context) {
          return `${context.dataset.label}: ${context.parsed.y}`;
        }
      }
    }
  }
}
```

## 响应式图表

Chart.js的图表默认是响应式的，当浏览器窗口大小改变时，图表会自动调整大小。如果需要禁用这一功能，可以设置：

```javascript
options: {
  responsive: false
}
```

若要保持图表的宽高比，可以使用：

```javascript
options: {
  maintainAspectRatio: true,
  aspectRatio: 2 // 宽高比为2:1
}
```

## 图表交互性

Chart.js支持多种交互效果：

### 点击事件

```javascript
const myChart = new Chart(ctx, {
  // ... 图表配置
});

// 添加点击事件监听
ctx.canvas.addEventListener('click', function(evt) {
  const points = myChart.getElementsAtEventForMode(evt, 'nearest', { intersect: true }, true);
  if (points.length) {
    const firstPoint = points[0];
    const label = myChart.data.labels[firstPoint.index];
    const value = myChart.data.datasets[firstPoint.datasetIndex].data[firstPoint.index];
    alert(`点击了: ${label} - 数值: ${value}`);
  }
});
```

### 动画设置

```javascript
options: {
  animation: {
    duration: 2000, // 动画持续2秒
    easing: 'easeOutBounce'
  }
}
```

## 实际案例：销售数据仪表板

让我们创建一个简单的销售数据仪表板，包含月度销售趋势和产品销售分布：

```html
<div style="display: flex; flex-wrap: wrap; justify-content: center;">
  <div style="width: 600px; margin: 20px;">
    <canvas id="salesTrend"></canvas>
  </div>
  <div style="width: 400px; margin: 20px;">
    <canvas id="productDistribution"></canvas>
  </div>
</div>

<script>
// 月度销售趋势 - 折线图
const trendCtx = document.getElementById('salesTrend').getContext('2d');
const salesTrendChart = new Chart(trendCtx, {
  type: 'line',
  data: {
    labels: ['一月', '二月', '三月', '四月', '五月', '六月'],
    datasets: [{
      label: '2022年销售额',
      data: [18500, 19200, 21500, 22000, 23100, 24500],
      borderColor: 'rgb(75, 192, 192)',
      backgroundColor: 'rgba(75, 192, 192, 0.1)',
      fill: true,
      tension: 0.3
    }, {
      label: '2023年销售额',
      data: [20000, 21000, 26500, 28000, 29400, 32000],
      borderColor: 'rgb(255, 99, 132)',
      backgroundColor: 'rgba(255, 99, 132, 0.1)',
      fill: true,
      tension: 0.3
    }]
  },
  options: {
    plugins: {
      title: {
        display: true,
        text: '月度销售趋势对比',
        font: {
          size: 18
        }
      }
    },
    scales: {
      y: {
        beginAtZero: false,
        title: {
          display: true,
          text: '销售额 (元)'
        }
      }
    }
  }
});

// 产品销售分布 - 饼图
const distCtx = document.getElementById('productDistribution').getContext('2d');
const productDistChart = new Chart(distCtx, {
  type: 'pie',
  data: {
    labels: ['电子产品', '服装', '食品', '家居', '书籍'],
    datasets: [{
      data: [35, 25, 20, 15, 5],
      backgroundColor: [
        'rgba(255, 99, 132, 0.7)',
        'rgba(54, 162, 235, 0.7)',
        'rgba(255, 206, 86, 0.7)',
        'rgba(75, 192, 192, 0.7)',
        'rgba(153, 102, 255, 0.7)'
      ],
      borderWidth: 1
    }]
  },
  options: {
    plugins: {
      title: {
        display: true,
        text: '产品类别销售分布',
        font: {
          size: 18
        }
      },
      tooltip: {
        callbacks: {
          label: function(context) {
            const value = context.parsed;
            return `${context.label}: ${value}%`;
          }
        }
      }
    }
  }
});
</script>
```

这个例子创建了两个图表：
1. 一个折线图，展示了两年间的月度销售额比较
2. 一个饼图，展示了不同产品类别的销售分布

## 数据更新与动态图表

Chart.js允许你动态更新图表数据：

```javascript
// 添加新数据
myChart.data.labels.push('七月');
myChart.data.datasets[0].data.push(85);

// 更新图表
myChart.update();
```

也可以删除数据：

```javascript
// 删除第一个数据点
myChart.data.labels.shift();
myChart.data.datasets[0].data.shift();

// 更新图表
myChart.update();
```

## 使用插件扩展功能

Chart.js的功能可以通过插件扩展：

```javascript
// 使用图表渐变背景插件
const myChart = new Chart(ctx, {
  type: 'line',
  plugins: [{
    id: 'customCanvasBackgroundColor',
    beforeDraw: (chart) => {
      const ctx = chart.canvas.getContext('2d');
      ctx.save();
      ctx.globalCompositeOperation = 'destination-over';
      ctx.fillStyle = 'lightGreen';
      ctx.fillRect(0, 0, chart.width, chart.height);
      ctx.restore();
    }
  }],
  // ... 其他配置
});
```

## 总结

Chart.js是一个功能强大且易于使用的JavaScript图表库，适合初学者快速创建专业级数据可视化。通过本教程，你学习了：

- Chart.js的基本设置和使用
- 创建各种类型的图表（线形图、柱状图、饼图等）
- 图表配置和自定义选项
- 响应式设计和交互性
- 实际应用案例

现在，你已经具备了使用Chart.js创建基础数据可视化的能力。通过实践和进一步学习，你可以创建更复杂、更交互化的数据可视化项目。

## 练习

1. 创建一个显示过去7天温度变化的线形图
2. 创建一个比较不同部门预算分配的饼图
3. 尝试创建一个组合图表，同时显示销售额（柱状图）和利润率（线形图）

## 额外资源

- [Chart.js官方文档](https://www.chartjs.org/docs/latest/)
- [Chart.js GitHub仓库](https://github.com/chartjs/Chart.js)
- [Chart.js样例集合](https://www.chartjs.org/samples/latest/)

:::caution
请记住，数据可视化不仅仅是创建漂亮的图表，更重要的是以清晰、准确的方式传达信息。在选择图表类型时，始终考虑你想要传达的信息类型。
:::