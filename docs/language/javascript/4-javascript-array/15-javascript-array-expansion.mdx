---
title: JavaScript 数组展开
description: 学习如何使用扩展运算符(...) 展开数组，以及数组展开的各种应用场景和技巧
---

# JavaScript 数组展开

在JavaScript的世界里，数组展开（Array spreading）是一种强大而灵活的技术，让我们能够以简洁优雅的方式操作数组。本文将详细介绍数组展开的概念、语法和实际应用，帮助你掌握这一现代JavaScript的重要特性。

## 什么是数组展开？

数组展开是通过扩展运算符（spread operator）`...` 实现的，它可以将一个数组"展开"成单独的元素。这个操作看似简单，却能大大简化我们的代码，提高开发效率。

:::note
扩展运算符（`...`）是ES6(ECMAScript 2015)引入的新特性，它不仅可以用于数组，还可以用于对象和函数参数。
:::

## 基本语法

扩展运算符的基本语法非常简单：在数组前面添加三个点（`...`）即可。

```javascript
const arr = [1, 2, 3];
console.log(...arr); // 输出: 1 2 3
```

在上面的例子中，`...arr` 将数组 `[1, 2, 3]` 展开为三个独立的元素 `1, 2, 3`。

## 数组展开的常见应用

### 1. 合并数组

在ES6之前，合并数组通常使用 `concat()` 方法：

```javascript
// 传统方式
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const combined = arr1.concat(arr2);
console.log(combined); // 输出: [1, 2, 3, 4, 5, 6]
```

使用扩展运算符，我们可以更简洁地实现相同的功能：

```javascript
// 使用展开语法
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const combined = [...arr1, ...arr2];
console.log(combined); // 输出: [1, 2, 3, 4, 5, 6]
```

甚至可以在合并时添加新元素：

```javascript
const arr1 = [1, 2, 3];
const arr2 = [6, 7, 8];
const combined = [...arr1, 4, 5, ...arr2];
console.log(combined); // 输出: [1, 2, 3, 4, 5, 6, 7, 8]
```

### 2. 创建数组副本

展开运算符提供了一种创建数组浅拷贝的简单方法：

```javascript
const original = [1, 2, 3];
const copy = [...original];

// 修改副本不会影响原数组
copy.push(4);
console.log(original); // 输出: [1, 2, 3]
console.log(copy);     // 输出: [1, 2, 3, 4]
```

:::caution
请注意，这是浅拷贝！如果数组包含对象或嵌套数组，内部引用仍会被共享。
:::

### 3. 将类数组对象转换为数组

JavaScript中有许多类数组对象（如函数参数 `arguments`、DOM节点列表等），它们看起来像数组但没有数组的所有方法。扩展运算符可以将它们转换为真正的数组：

```javascript
function convertArgsToArray() {
  const args = [...arguments];
  return args;
}

const result = convertArgsToArray(1, 2, 3);
console.log(result); // 输出: [1, 2, 3]
console.log(Array.isArray(result)); // 输出: true
```

### 4. 在函数调用中展开数组

扩展运算符可以将数组元素作为单独的参数传递给函数：

```javascript
function sum(a, b, c) {
  return a + b + c;
}

const numbers = [1, 2, 3];
const result = sum(...numbers);
console.log(result); // 输出: 6
```

这比传统方法要简洁得多：

```javascript
// 传统方式
const result = sum.apply(null, numbers);
```

### 5. 解构赋值中使用展开运算符

展开运算符在数组解构赋值中特别有用，可以轻松获取剩余元素：

```javascript
const [first, second, ...rest] = [1, 2, 3, 4, 5];
console.log(first);  // 输出: 1
console.log(second); // 输出: 2
console.log(rest);   // 输出: [3, 4, 5]
```

## 实际应用场景

### 场景1: 数据处理

假设我们从API获取了一些商品数据，需要合并多个来源的数据并添加一些新商品：

```javascript
const productsFromAPI1 = [
  { id: 1, name: "Laptop" },
  { id: 2, name: "Phone" }
];

const productsFromAPI2 = [
  { id: 3, name: "Tablet" },
  { id: 4, name: "Camera" }
];

const newProducts = [
  { id: 5, name: "Headphones" }
];

// 合并所有产品数据
const allProducts = [...productsFromAPI1, ...productsFromAPI2, ...newProducts];
console.log(allProducts);
// 输出: [
//   { id: 1, name: "Laptop" },
//   { id: 2, name: "Phone" },
//   { id: 3, name: "Tablet" },
//   { id: 4, name: "Camera" },
//   { id: 5, name: "Headphones" }
// ]
```

### 场景2: 不改变原数组的操作

当我们需要在不修改原始数组的情况下对数组进行操作时，展开运算符非常有用：

```javascript
const originalTasks = ["Study JS", "Do exercises", "Review code"];

// 在数组开头添加新任务
const morningTasks = ["Check emails", ...originalTasks];
console.log(morningTasks);
// 输出: ["Check emails", "Study JS", "Do exercises", "Review code"]

// 在数组中间插入任务
const updatedTasks = [
  ...originalTasks.slice(0, 1), 
  "Have lunch", 
  ...originalTasks.slice(1)
];
console.log(updatedTasks);
// 输出: ["Study JS", "Have lunch", "Do exercises", "Review code"]
```

### 场景3: 数组去重

结合 `Set` 对象，可以轻松实现数组去重：

```javascript
const numbersWithDuplicates = [1, 2, 2, 3, 4, 4, 5];
const uniqueNumbers = [...new Set(numbersWithDuplicates)];
console.log(uniqueNumbers); // 输出: [1, 2, 3, 4, 5]
```

## 数组展开的注意事项

1. **性能考虑**：对于非常大的数组，展开操作可能会影响性能，因为它会创建一个新的数组并复制所有元素。

2. **浅拷贝的限制**：展开运算符只创建一级深度的副本，对于嵌套结构，内部引用仍然是共享的。

```javascript
const nestedArray = [[1], [2]];
const copy = [...nestedArray];

// 修改副本中嵌套数组的内容
copy[0].push(3);

console.log(nestedArray); // 输出: [[1, 3], [2]]
console.log(copy);        // 输出: [[1, 3], [2]]
```

3. **与 `arguments` 和箭头函数的交互**：箭头函数没有自己的 `arguments` 对象，所以在箭头函数中使用 `...arguments` 会导致错误。

## 扩展运算符 vs 其他方法

下面是扩展运算符与其他常用方法的比较：

```mermaid
graph TD
    A[数组操作] --> B[合并数组]
    A --> C[创建副本]
    A --> D[添加元素]
    
    B --> B1[展开运算符: [...arr1, ...arr2]]
    B --> B2[concat(): arr1.concat(arr2)]
    
    C --> C1[展开运算符: [...arr]]
    C --> C2[slice(): arr.slice()]
    
    D --> D1[展开运算符: [...arr, newItem]]
    D --> D2[push/splice: 修改原数组]
```

## 总结

JavaScript数组展开是现代JavaScript中一个极其强大的特性，通过扩展运算符（`...`）可以简化很多数组操作，让代码更加简洁和易读。主要应用包括：

- 合并数组
- 创建数组副本
- 将类数组对象转换为数组
- 函数调用中展开数组元素
- 结合解构赋值使用

掌握数组展开技术将大大提高你的JavaScript编程效率，帮助你写出更加简洁优雅的代码。

## 练习题

1. 使用展开运算符合并三个数组 `[1, 2]`、`[3, 4]` 和 `[5, 6]`。
2. 使用展开运算符创建数组 `[1, 2, 3]` 的副本，并在副本的开头和结尾分别添加元素 0 和 4。
3. 编写一个函数，接收任意数量的数字参数，并返回它们的平均值。使用展开运算符处理参数。

## 附加资源

- [MDN Web Docs: 展开语法](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Spread_syntax)
- [JavaScript.info: 扩展运算符](https://javascript.info/rest-parameters-spread)

继续练习和探索，你会发现数组展开在日常JavaScript编程中的更多应用！