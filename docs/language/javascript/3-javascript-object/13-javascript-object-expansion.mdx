---
title: JavaScript 对象展开
description: 深入探讨JavaScript中的对象展开语法，学习如何使用展开运算符来复制、合并对象以及在函数参数中的应用。
---

# JavaScript 对象展开

JavaScript中的对象展开是ES6（ECMAScript 2018）引入的一个强大功能，它使用展开运算符（`...`）来快速复制对象属性或合并多个对象。这个语法极大地简化了对象操作，让代码更加简洁易读。

## 展开运算符简介

展开运算符由三个点（`...`）组成，最初用于数组，后来扩展到了对象。它允许我们将对象中的属性"展开"到另一个对象中。

:::note 语法要点
展开运算符用三个连续的点表示：`...`
:::

## 基本用法

### 对象复制（克隆）

我们可以使用展开运算符来创建对象的浅拷贝：

```javascript
const person = {
  name: '张三',
  age: 28,
  city: '北京'
};

// 创建person对象的副本
const personCopy = { ...person };

console.log(personCopy); 
// 输出: { name: '张三', age: 28, city: '北京' }

// 证明这是两个不同的对象
console.log(person === personCopy); 
// 输出: false
```

### 合并对象

展开运算符可以非常方便地合并多个对象：

```javascript
const personalInfo = {
  name: '李四',
  age: 30
};

const contactInfo = {
  email: 'lisi@example.com',
  phone: '123456789'
};

// 合并两个对象
const person = { ...personalInfo, ...contactInfo };

console.log(person);
// 输出: { name: '李四', age: 30, email: 'lisi@example.com', phone: '123456789' }
```

### 添加新属性时使用展开

创建新对象时添加额外属性：

```javascript
const person = {
  name: '王五',
  age: 25
};

// 创建新对象，包含person的所有属性，并添加新属性
const detailedPerson = { 
  ...person, 
  occupation: '工程师', 
  location: '上海' 
};

console.log(detailedPerson);
// 输出: { name: '王五', age: 25, occupation: '工程师', location: '上海' }
```

## 属性覆盖规则

当合并对象时，如果存在相同的属性名，后面的对象属性会覆盖前面的：

```javascript
const defaultSettings = {
  theme: 'light',
  fontSize: 12,
  showNotifications: true
};

const userSettings = {
  theme: 'dark',
  fontSize: 16
};

// 合并设置，用户设置会覆盖默认设置
const finalSettings = { ...defaultSettings, ...userSettings };

console.log(finalSettings);
// 输出: { theme: 'dark', fontSize: 16, showNotifications: true }
```

你也可以手动指定某些属性的值来覆盖展开后的属性：

```javascript
const product = {
  name: '笔记本电脑',
  price: 5999,
  inStock: true
};

// 创建特价版产品
const discountedProduct = { 
  ...product, 
  price: 4999,  // 覆盖原价格
  isOnSale: true  // 添加新属性
};

console.log(discountedProduct);
// 输出: { name: '笔记本电脑', price: 4999, inStock: true, isOnSale: true }
```

## 展开运算符的局限性

:::caution 注意
展开运算符只能进行浅拷贝，不适用于嵌套对象的深层复制。
:::

看下面的例子：

```javascript
const person = {
  name: '赵六',
  details: {
    age: 35,
    address: {
      city: '广州',
      street: '人民路'
    }
  }
};

const personCopy = { ...person };

// 修改嵌套对象
personCopy.details.age = 36;

console.log(person.details.age);
// 输出: 36 (原对象也被修改了，因为嵌套对象是引用复制)
```

## 实际应用场景

### 1. Redux中的状态更新

在Redux等状态管理库中，我们经常需要创建不可变的状态更新：

```javascript
// 更新状态
function reducer(state, action) {
  switch (action.type) {
    case 'UPDATE_USER':
      return {
        ...state,
        user: {
          ...state.user,
          ...action.payload
        }
      };
    default:
      return state;
  }
}
```

### 2. React组件属性传递

在React中传递所有props给子组件：

```jsx
function ParentComponent(props) {
  const { specialProp, ...restProps } = props;
  
  // specialProp自己使用，其余传给子组件
  return (
    <div>
      <p>Special value: {specialProp}</p>
      <ChildComponent {...restProps} />
    </div>
  );
}
```

### 3. 函数参数默认值

与默认参数结合使用：

```javascript
function createUser(userInfo, defaultValues = { role: 'user', active: true }) {
  return {
    ...defaultValues,
    ...userInfo,
    createdAt: new Date()
  };
}

const user = createUser({ name: '小明', email: 'xiaoming@example.com' });
console.log(user);
// 输出: { role: 'user', active: true, name: '小明', email: 'xiaoming@example.com', createdAt: [当前日期] }
```

### 4. 配置对象合并

合并配置选项：

```javascript
const defaultConfig = {
  port: 3000,
  host: 'localhost',
  timeout: 5000,
  debug: false
};

function startServer(userConfig = {}) {
  const finalConfig = { ...defaultConfig, ...userConfig };
  console.log(`服务器配置：${JSON.stringify(finalConfig)}`);
  // 启动服务器...
}

startServer({ port: 8080, debug: true });
// 输出: 服务器配置：{"port":8080,"host":"localhost","timeout":5000,"debug":true}
```

## 结合解构赋值使用

展开运算符经常与解构赋值结合使用：

```javascript
const person = {
  name: '张三',
  age: 28,
  city: '北京',
  occupation: '程序员',
  hobbies: ['读书', '旅行', '摄影']
};

// 提取特定属性，其余放入rest对象
const { name, age, ...rest } = person;

console.log(name); // 输出: 张三
console.log(age);  // 输出: 28
console.log(rest); // 输出: { city: '北京', occupation: '程序员', hobbies: ['读书', '旅行', '摄影'] }
```

## 总结

JavaScript对象展开是一个非常实用的特性，它可以帮助我们：

1. 创建对象的浅拷贝
2. 合并多个对象
3. 在不修改原对象的情况下添加或覆盖属性
4. 简化函数参数处理
5. 与解构赋值结合使用提取部分属性

掌握对象展开语法可以让你的代码更加简洁、可读性更强，并且在处理复杂数据结构时特别有用。

:::tip 最佳实践
- 使用展开运算符替代`Object.assign()`进行对象合并
- 记住展开只是浅拷贝，处理嵌套对象时需要额外注意
- 利用后面对象覆盖前面对象的特性进行有目的的属性覆盖
:::

## 练习

1. 创建一个函数，接收一个用户对象，返回一个新对象，包含原对象的所有属性，但将`age`增加1年。
2. 实现一个函数，合并两个配置对象，但确保某些关键属性不被覆盖。
3. 使用展开运算符和解构赋值从一个大对象中提取部分属性到新变量，其余属性保留在一个新对象中。

## 进一步学习资源

- MDN文档：[展开语法](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Spread_syntax)
- ECMAScript 规范：[对象展开提案](https://github.com/tc39/proposal-object-rest-spread)

掌握JavaScript对象展开语法将帮助你写出更简洁、更现代的JavaScript代码，是进阶JavaScript开发的重要一步！