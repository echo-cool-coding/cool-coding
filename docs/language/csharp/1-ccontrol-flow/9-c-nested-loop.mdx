---
title: C# 嵌套循环
description: 了解C#中的嵌套循环，掌握如何在循环中嵌套另一个循环，并通过实际案例理解其应用场景。
---

# C# 嵌套循环

在编程中，循环是一种重复执行代码块的结构。C#提供了多种循环结构，例如 `for`、`while` 和 `do-while`。当我们需要在一个循环中执行另一个循环时，就会用到**嵌套循环**。嵌套循环是指在一个循环的代码块中嵌入另一个循环的结构。

## 什么是嵌套循环？

嵌套循环是指在一个循环的内部再放置另一个循环。外层循环每执行一次，内层循环就会完整地执行一遍。这种结构常用于处理多维数据，例如二维数组、矩阵或需要多重迭代的场景。

### 基本语法

以下是一个简单的嵌套 `for` 循环的语法：

```csharp
for (int i = 0; i < 3; i++) // 外层循环
{
    for (int j = 0; j < 2; j++) // 内层循环
    {
        Console.WriteLine($"i = {i}, j = {j}");
    }
}
```

**输出：**
```
i = 0, j = 0
i = 0, j = 1
i = 1, j = 0
i = 1, j = 1
i = 2, j = 0
i = 2, j = 1
```

在这个例子中，外层循环 `i` 从 0 到 2 执行，每次外层循环执行时，内层循环 `j` 都会完整地从 0 到 1 执行一遍。

:::note
嵌套循环的层数没有限制，但过多的嵌套会使代码难以阅读和维护。通常建议嵌套层数不要超过 3 层。
:::

## 嵌套循环的实际应用

嵌套循环在编程中有广泛的应用场景，尤其是在处理多维数据或需要多重迭代的情况下。以下是一些常见的应用场景：

### 1. 打印乘法表

嵌套循环可以用来打印乘法表。例如，打印 1 到 9 的乘法表：

```csharp
for (int i = 1; i <= 9; i++) // 外层循环控制行
{
    for (int j = 1; j <= i; j++) // 内层循环控制列
    {
        Console.Write($"{j} * {i} = {i * j}\t");
    }
    Console.WriteLine(); // 换行
}
```

**输出：**
```
1 * 1 = 1
1 * 2 = 2   2 * 2 = 4
1 * 3 = 3   2 * 3 = 6   3 * 3 = 9
...
```

### 2. 遍历二维数组

嵌套循环非常适合遍历二维数组。例如，遍历一个 3x3 的二维数组并打印每个元素：

```csharp
int[,] matrix = {
    {1, 2, 3},
    {4, 5, 6},
    {7, 8, 9}
};

for (int i = 0; i < 3; i++) // 外层循环遍历行
{
    for (int j = 0; j < 3; j++) // 内层循环遍历列
    {
        Console.Write(matrix[i, j] + " ");
    }
    Console.WriteLine(); // 换行
}
```

**输出：**
```
1 2 3
4 5 6
7 8 9
```

### 3. 生成图形

嵌套循环还可以用来生成图形。例如，打印一个由 `*` 组成的三角形：

```csharp
int rows = 5;
for (int i = 1; i <= rows; i++) // 外层循环控制行数
{
    for (int j = 1; j <= i; j++) // 内层循环控制每行的星号数量
    {
        Console.Write("* ");
    }
    Console.WriteLine(); // 换行
}
```

**输出：**
```
*
* *
* * *
* * * *
* * * * *
```

## 嵌套循环的性能考虑

虽然嵌套循环非常强大，但在某些情况下可能会导致性能问题，尤其是在处理大量数据时。例如，如果一个嵌套循环的外层循环执行 1000 次，内层循环也执行 1000 次，那么内层循环的代码将执行 1,000,000 次。

:::caution
在使用嵌套循环时，务必注意循环的次数，避免不必要的性能开销。
:::

## 总结

嵌套循环是C#中一种强大的工具，允许我们在一个循环中嵌入另一个循环。它非常适合处理多维数据、生成图形或执行多重迭代的任务。然而，嵌套循环的使用需要谨慎，尤其是在处理大量数据时，以避免性能问题。

### 附加练习

1. 编写一个嵌套循环，打印一个 5x5 的棋盘图案（交替使用 `X` 和 `O`）。
2. 使用嵌套循环遍历一个 4x4 的二维数组，并计算所有元素的总和。
3. 修改乘法表的代码，使其能够打印 1 到 12 的乘法表。

通过练习这些例子，你将更好地掌握嵌套循环的使用方法，并能够在实际项目中灵活应用。