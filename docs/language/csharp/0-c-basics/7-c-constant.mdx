---
title: C# 常量
description: 了解C#中的常量，学习如何定义和使用常量，以及常量在实际开发中的应用场景。
---

# C# 常量

在C#编程中，常量（Constants）是指在程序运行期间其值不会改变的变量。常量通常用于存储那些在程序执行过程中不会发生变化的值，例如数学常数、配置值或其他固定的数据。使用常量可以提高代码的可读性和可维护性，同时避免在代码中硬编码重复的值。

## 常量的定义

在C#中，常量使用 `const` 关键字来定义。常量的值必须在声明时赋值，并且一旦赋值后就不能再修改。

```csharp
const double Pi = 3.14159;
const int MaxUsers = 100;
```

在上面的例子中，`Pi` 和 `MaxUsers` 都是常量，它们的值在程序运行期间不会改变。

### 常量的命名规范

常量的命名通常使用大写字母，单词之间用下划线分隔。这是为了与普通变量区分开来，使代码更具可读性。

```csharp
const int MAX_RETRY_COUNT = 3;
const string DEFAULT_LANGUAGE = "en-US";
```

## 常量的类型

C#中的常量可以是以下类型之一：

- 数值类型（如 `int`, `double`, `decimal` 等）
- 字符串类型（`string`）
- 布尔类型（`bool`）
- 枚举类型（`enum`）

:::note
常量不能是引用类型（如类、数组等），因为引用类型的值在运行时可能会发生变化。
:::

## 常量的作用域

常量的作用域与普通变量相同。如果常量在方法内部定义，则它只能在该方法内部使用。如果常量在类级别定义，则它可以在整个类中使用。

```csharp
class Program
{
    const string AppName = "MyApp";

    static void Main()
    {
        const int MaxAttempts = 5;
        Console.WriteLine(AppName); // 输出: MyApp
        Console.WriteLine(MaxAttempts); // 输出: 5
    }
}
```

## 常量的实际应用场景

### 1. 数学常数

在数学计算中，常常需要使用一些固定的常数，例如圆周率 `π`。使用常量可以避免在代码中重复输入这些值。

```csharp
const double Pi = 3.14159;

double CalculateCircleArea(double radius)
{
    return Pi * radius * radius;
}
```

### 2. 配置值

在应用程序中，某些配置值（如最大用户数、默认语言等）通常是固定的。使用常量可以确保这些值在程序运行期间不会被意外修改。

```csharp
const int MaxUsers = 100;
const string DefaultLanguage = "en-US";

void InitializeApplication()
{
    Console.WriteLine($"Max Users: {MaxUsers}");
    Console.WriteLine($"Default Language: {DefaultLanguage}");
}
```

### 3. 枚举常量

枚举类型通常用于表示一组相关的常量值。枚举常量可以提高代码的可读性，并减少错误。

```csharp
enum Status
{
    Active,
    Inactive,
    Pending
}

void CheckStatus(Status status)
{
    if (status == Status.Active)
    {
        Console.WriteLine("User is active.");
    }
}
```

## 常量与只读字段的区别

在C#中，除了常量之外，还可以使用 `readonly` 关键字定义只读字段。只读字段与常量类似，但有一些关键区别：

- 常量必须在声明时赋值，而只读字段可以在声明时或构造函数中赋值。
- 常量的值在编译时确定，而只读字段的值在运行时确定。

```csharp
class Program
{
    const int MaxUsers = 100; // 常量
    readonly int MaxConnections; // 只读字段

    public Program(int maxConnections)
    {
        MaxConnections = maxConnections;
    }
}
```

:::tip
如果你需要在运行时确定一个值，并且希望它在初始化后保持不变，那么使用 `readonly` 字段是一个更好的选择。
:::

## 总结

C#中的常量是一种非常有用的工具，可以帮助你定义在程序运行期间不会改变的值。通过使用常量，你可以提高代码的可读性、可维护性，并减少错误。在实际开发中，常量常用于存储数学常数、配置值或枚举类型。

### 附加资源

- [C# 官方文档 - 常量](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/const)
- [C# 编程指南 - 常量和只读字段](https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/constants)

### 练习

1. 定义一个常量 `Gravity`，表示地球的重力加速度（9.8 m/s²），并使用它计算一个物体的重量。
2. 创建一个枚举类型 `DaysOfWeek`，表示一周的七天，并在程序中使用它输出当前是星期几。
3. 比较 `const` 和 `readonly` 的区别，并解释在什么情况下应该使用它们。

通过完成这些练习，你将更好地理解C#中常量的使用方法和应用场景。