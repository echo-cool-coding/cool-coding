---
title: C# 类型转换
description: "了解 C# 中的类型转换，包括隐式转换、显式转换以及使用 Convert 类和 Parse 方法进行转换。通过代码示例和实际案例，掌握类型转换的核心概念。"
---

## 介绍

在 C# 编程中，类型转换是将一个数据类型转换为另一个数据类型的过程。类型转换在编程中非常常见，尤其是在处理不同数据类型之间的交互时。C# 提供了多种方式来实现类型转换，包括隐式转换、显式转换以及使用 `Convert` 类和 `Parse` 方法。

本文将详细介绍这些方法，并通过代码示例和实际案例帮助你理解类型转换的核心概念。

## 隐式类型转换

隐式类型转换是指在不丢失数据的情况下，自动将一个数据类型转换为另一个数据类型。这种转换通常发生在较小的数据类型向较大的数据类型转换时。

### 示例

```csharp
int myInt = 10;
double myDouble = myInt; // 隐式转换 int 到 double

Console.WriteLine(myDouble); // 输出: 10
```

在这个例子中，`int` 类型的变量 `myInt` 被隐式转换为 `double` 类型，并赋值给 `myDouble`。由于 `double` 可以容纳 `int` 的所有值，因此这种转换是安全的。

:::note
隐式转换不需要显式的类型转换操作符，编译器会自动完成。
:::

## 显式类型转换

显式类型转换是指需要程序员明确指定转换操作的类型转换。这种转换通常发生在较大的数据类型向较小的数据类型转换时，可能会导致数据丢失或溢出。

### 示例

```csharp
double myDouble = 10.5;
int myInt = (int)myDouble; // 显式转换 double 到 int

Console.WriteLine(myInt); // 输出: 10
```

在这个例子中，`double` 类型的变量 `myDouble` 被显式转换为 `int` 类型，并赋值给 `myInt`。由于 `int` 不能容纳小数部分，因此小数部分被截断。

:::caution
显式转换可能会导致数据丢失或溢出，因此在使用时需要谨慎。
:::

## 使用 `Convert` 类进行类型转换

`Convert` 类提供了一系列静态方法，用于将一个数据类型转换为另一个数据类型。与显式转换不同，`Convert` 类的方法可以处理更多的数据类型，并且在转换失败时会抛出异常。

### 示例

```csharp
string myString = "123";
int myInt = Convert.ToInt32(myString); // 使用 Convert 类将 string 转换为 int

Console.WriteLine(myInt); // 输出: 123
```

在这个例子中，`string` 类型的变量 `myString` 被转换为 `int` 类型，并赋值给 `myInt`。如果 `myString` 包含非数字字符，`Convert.ToInt32` 方法将抛出 `FormatException` 异常。

:::tip
`Convert` 类的方法可以处理更多的数据类型，并且在转换失败时会抛出异常，因此适合用于需要严格类型检查的场景。
:::

## 使用 `Parse` 方法进行类型转换

`Parse` 方法是将字符串转换为其他数据类型的一种常用方法。与 `Convert` 类类似，`Parse` 方法在转换失败时也会抛出异常。

### 示例

```csharp
string myString = "456";
int myInt = int.Parse(myString); // 使用 Parse 方法将 string 转换为 int

Console.WriteLine(myInt); // 输出: 456
```

在这个例子中，`string` 类型的变量 `myString` 被转换为 `int` 类型，并赋值给 `myInt`。如果 `myString` 包含非数字字符，`int.Parse` 方法将抛出 `FormatException` 异常。

:::warning
`Parse` 方法在转换失败时会抛出异常，因此在使用时需要确保输入字符串的格式正确。
:::

## 实际案例

假设你正在开发一个简单的计算器应用程序，用户输入两个数字并选择操作符。你需要将用户输入的字符串转换为数字类型，然后执行相应的计算。

```csharp
string input1 = "10";
string input2 = "20";
string operation = "+";

int num1 = int.Parse(input1);
int num2 = int.Parse(input2);

int result = 0;

switch (operation)
{
    case "+":
        result = num1 + num2;
        break;
    case "-":
        result = num1 - num2;
        break;
    case "*":
        result = num1 * num2;
        break;
    case "/":
        result = num1 / num2;
        break;
    default:
        Console.WriteLine("无效的操作符");
        break;
}

Console.WriteLine($"结果: {result}"); // 输出: 结果: 30
```

在这个案例中，用户输入的字符串被转换为 `int` 类型，然后根据操作符执行相应的计算。这个例子展示了类型转换在实际应用中的重要性。

## 总结

类型转换是 C# 编程中的一个重要概念，它允许你在不同的数据类型之间进行转换。本文介绍了隐式转换、显式转换、`Convert` 类和 `Parse` 方法，并通过代码示例和实际案例帮助你理解这些概念。

:::tip
在实际编程中，选择合适的类型转换方法非常重要。隐式转换适用于安全的转换，而显式转换、`Convert` 类和 `Parse` 方法适用于需要严格类型检查的场景。
:::

## 附加资源与练习

1. **练习**: 尝试编写一个程序，将用户输入的字符串转换为 `double` 类型，并计算其平方根。
2. **资源**: 查阅 [C# 官方文档](https://docs.microsoft.com/zh-cn/dotnet/csharp/) 了解更多关于类型转换的详细信息。

通过不断练习和探索，你将能够熟练掌握 C# 中的类型转换，并在实际项目中灵活运用。