---
title: C# 自动属性
description: 了解 C# 中的自动属性，简化属性定义并提高代码可读性。本文适合初学者，包含代码示例和实际应用场景。
---

## 介绍

在 C# 中，属性（Property）是类或结构体中的成员，用于封装字段并提供对它们的访问。传统上，属性需要显式定义私有字段（backing field）以及 `get` 和 `set` 访问器。然而，C# 引入了**自动属性**（Auto-Implemented Properties），使得定义属性变得更加简洁和高效。

自动属性允许你定义一个属性，而无需显式声明私有字段。编译器会自动为你生成一个隐藏的私有字段，并实现 `get` 和 `set` 访问器。这不仅减少了代码量，还提高了代码的可读性和可维护性。

## 自动属性的基本语法

自动属性的语法非常简单。以下是一个基本的自动属性示例：

```csharp
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
}
```

在这个例子中，`Name` 和 `Age` 是自动属性。编译器会自动生成两个私有字段来存储这些属性的值，并实现 `get` 和 `set` 访问器。

:::note
自动属性只能在 `get` 和 `set` 访问器中没有额外逻辑时使用。如果你需要在访问器中添加自定义逻辑，则需要使用传统属性定义方式。
:::

## 自动属性的工作原理

当你定义一个自动属性时，编译器会生成一个隐藏的私有字段来存储属性的值。例如，以下代码：

```csharp
public string Name { get; set; }
```

实际上会被编译器转换为类似以下的代码：

```csharp
private string _name;
public string Name
{
    get { return _name; }
    set { _name = value; }
}
```

这种转换是自动完成的，你无需手动编写这些代码。

## 只读自动属性

在某些情况下，你可能希望属性是只读的，即只能在构造函数中初始化，而不能在外部修改。C# 允许你定义只读自动属性：

```csharp
public class Person
{
    public string Name { get; }
    public int Age { get; }

    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
}
```

在这个例子中，`Name` 和 `Age` 是只读自动属性。它们只能在构造函数中初始化，之后无法修改。

:::tip
只读自动属性非常适合用于不可变对象（immutable objects），即对象一旦创建后其状态就不能改变。
:::

## 自动属性的默认值

自动属性的默认值取决于其类型。例如，`int` 类型的自动属性默认值为 `0`，`string` 类型的自动属性默认值为 `null`。你可以在定义自动属性时为其指定初始值：

```csharp
public class Person
{
    public string Name { get; set; } = "Unknown";
    public int Age { get; set; } = 18;
}
```

在这个例子中，`Name` 的默认值为 `"Unknown"`，`Age` 的默认值为 `18`。

## 实际应用场景

自动属性在实际开发中非常常见，尤其是在定义数据模型时。以下是一个简单的实际应用场景：

```csharp
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
}

public class ShoppingCart
{
    public List<Product> Products { get; set; } = new List<Product>();

    public decimal TotalPrice
    {
        get { return Products.Sum(p => p.Price); }
    }
}
```

在这个例子中，`Product` 类使用自动属性来定义产品的属性，而 `ShoppingCart` 类使用自动属性来存储购物车中的产品列表，并计算总价。

:::caution
虽然自动属性非常方便，但在某些情况下，你可能需要在 `get` 或 `set` 访问器中添加额外的逻辑。这时，自动属性就不再适用，你需要使用传统属性定义方式。
:::

## 总结

C# 自动属性是一种简化属性定义的强大工具，特别适合在不需要额外逻辑的情况下使用。它们减少了代码量，提高了代码的可读性和可维护性。通过本文，你应该已经掌握了自动属性的基本语法、工作原理以及实际应用场景。

## 附加资源与练习

- **练习 1**：创建一个 `Student` 类，使用自动属性定义学生的姓名、年龄和成绩。
- **练习 2**：修改 `Student` 类，使其成绩属性为只读，并在构造函数中初始化。
- **附加资源**：查阅 [C# 官方文档](https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/auto-implemented-properties) 以了解更多关于自动属性的高级用法。

希望本文对你理解 C# 自动属性有所帮助！继续学习，你将掌握更多 C# 的强大功能。