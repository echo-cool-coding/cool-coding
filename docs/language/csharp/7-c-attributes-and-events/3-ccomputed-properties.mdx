---
title: C# 计算属性
description: 了解 C# 中的计算属性，掌握如何通过属性封装逻辑并动态计算值。本文适合初学者，包含代码示例和实际应用场景。
---

## 介绍

在 C# 中，属性（Property）是一种用于封装字段的机制，允许我们控制对类中数据的访问。计算属性（Computed Property）是一种特殊类型的属性，它不直接存储值，而是通过逻辑计算返回结果。计算属性通常用于根据其他字段或属性的值动态生成结果。

计算属性的主要优点是它们可以隐藏复杂的逻辑，同时提供简洁的访问方式。例如，你可以通过计算属性返回一个对象的面积、总和或其他派生值。

## 计算属性的基本语法

在 C# 中，计算属性通常使用 `get` 访问器来定义。`get` 访问器包含计算逻辑，并在每次访问属性时执行。以下是一个简单的示例：

```csharp
public class Rectangle
{
    public double Width { get; set; }
    public double Height { get; set; }

    // 计算属性：返回矩形的面积
    public double Area
    {
        get { return Width * Height; }
    }
}
```

在上面的代码中，`Area` 是一个计算属性，它通过 `Width` 和 `Height` 的值动态计算矩形的面积。

## 使用计算属性

让我们通过一个完整的示例来展示如何使用计算属性：

```csharp
using System;

public class Rectangle
{
    public double Width { get; set; }
    public double Height { get; set; }

    // 计算属性：返回矩形的面积
    public double Area
    {
        get { return Width * Height; }
    }
}

class Program
{
    static void Main()
    {
        Rectangle rect = new Rectangle();
        rect.Width = 5;
        rect.Height = 10;

        Console.WriteLine("矩形的面积是: " + rect.Area);
    }
}
```

**输出：**
```
矩形的面积是: 50
```

在这个示例中，`Area` 属性根据 `Width` 和 `Height` 的值动态计算矩形的面积。每次访问 `Area` 时，都会执行 `get` 访问器中的逻辑。

:::tip
计算属性非常适合用于需要根据其他属性或字段动态生成值的场景。它们可以帮助你保持代码的简洁性和可维护性。
:::

## 实际应用场景

计算属性在实际开发中有许多应用场景。以下是一些常见的例子：

1. **计算总和或平均值**  
   例如，在一个学生成绩管理系统中，你可以使用计算属性来计算学生的总分或平均分。

2. **格式化数据**  
   你可以使用计算属性来格式化数据，例如将日期转换为特定格式的字符串。

3. **派生属性**  
   例如，在一个电子商务系统中，订单的总价可以通过计算属性根据商品价格和数量动态计算。

以下是一个学生成绩管理系统的示例：

```csharp
public class Student
{
    public string Name { get; set; }
    public int[] Grades { get; set; }

    // 计算属性：返回学生的平均分
    public double AverageGrade
    {
        get
        {
            if (Grades == null || Grades.Length == 0)
                return 0;

            double sum = 0;
            foreach (int grade in Grades)
            {
                sum += grade;
            }
            return sum / Grades.Length;
        }
    }
}

class Program
{
    static void Main()
    {
        Student student = new Student
        {
            Name = "Alice",
            Grades = new int[] { 85, 90, 78, 92 }
        };

        Console.WriteLine($"{student.Name} 的平均分是: {student.AverageGrade}");
    }
}
```

**输出：**
```
Alice 的平均分是: 86.25
```

在这个示例中，`AverageGrade` 是一个计算属性，它根据学生的成绩数组动态计算平均分。

## 总结

计算属性是 C# 中一种强大的工具，允许你通过逻辑动态生成值。它们可以帮助你封装复杂的逻辑，同时提供简洁的访问方式。通过本文的学习，你应该已经掌握了计算属性的基本语法和实际应用场景。

:::note
**附加练习：**
1. 创建一个 `Circle` 类，包含一个 `Radius` 属性，并添加一个计算属性 `Circumference` 来计算圆的周长。
2. 在一个 `Employee` 类中，添加一个计算属性 `FullName`，将 `FirstName` 和 `LastName` 组合成完整的姓名。
:::

希望本文对你理解 C# 计算属性有所帮助！继续练习并探索更多高级用法吧！