---
title: C# 访问修饰符
description: "了解C#中的访问修饰符，掌握如何使用它们来控制类、方法和字段的可见性和访问权限。"
---

# C# 访问修饰符

在C#编程中，访问修饰符（Access Modifiers）用于控制类、方法、字段和其他成员的可见性和访问权限。它们是面向对象编程中的重要概念，帮助开发者实现封装和信息隐藏。通过合理使用访问修饰符，可以确保代码的安全性和可维护性。

## 什么是访问修饰符？

访问修饰符是C#中的关键字，用于定义类、方法、字段等成员的访问级别。它们决定了哪些代码可以访问这些成员。C#提供了以下几种访问修饰符：

- `public`：成员可以从任何地方访问。
- `private`：成员只能在定义它的类内部访问。
- `protected`：成员可以在定义它的类及其派生类中访问。
- `internal`：成员可以在同一程序集（assembly）中访问。
- `protected internal`：成员可以在同一程序集或派生类中访问。
- `private protected`：成员只能在定义它的类及其派生类中访问，且这些派生类必须位于同一程序集中。

## 访问修饰符的详细说明

### 1. `public`

`public` 是最开放的访问修饰符。标记为 `public` 的成员可以从任何地方访问，包括其他类和程序集。

```csharp
public class MyClass
{
    public int MyPublicField = 10;

    public void MyPublicMethod()
    {
        Console.WriteLine("This is a public method.");
    }
}
```

**示例：**

```csharp
MyClass myObject = new MyClass();
Console.WriteLine(myObject.MyPublicField); // 输出: 10
myObject.MyPublicMethod(); // 输出: This is a public method.
```

### 2. `private`

`private` 是最严格的访问修饰符。标记为 `private` 的成员只能在定义它的类内部访问。

```csharp
public class MyClass
{
    private int MyPrivateField = 20;

    private void MyPrivateMethod()
    {
        Console.WriteLine("This is a private method.");
    }

    public void AccessPrivateMembers()
    {
        Console.WriteLine(MyPrivateField); // 可以在类内部访问
        MyPrivateMethod(); // 可以在类内部访问
    }
}
```

**示例：**

```csharp
MyClass myObject = new MyClass();
// Console.WriteLine(myObject.MyPrivateField); // 错误：无法访问私有字段
// myObject.MyPrivateMethod(); // 错误：无法访问私有方法
myObject.AccessPrivateMembers(); // 输出: 20 和 This is a private method.
```

### 3. `protected`

`protected` 成员可以在定义它的类及其派生类中访问。

```csharp
public class BaseClass
{
    protected int MyProtectedField = 30;

    protected void MyProtectedMethod()
    {
        Console.WriteLine("This is a protected method.");
    }
}

public class DerivedClass : BaseClass
{
    public void AccessProtectedMembers()
    {
        Console.WriteLine(MyProtectedField); // 可以在派生类中访问
        MyProtectedMethod(); // 可以在派生类中访问
    }
}
```

**示例：**

```csharp
DerivedClass myObject = new DerivedClass();
myObject.AccessProtectedMembers(); // 输出: 30 和 This is a protected method.
```

### 4. `internal`

`internal` 成员可以在同一程序集中访问。程序集是一个编译单元，通常是一个DLL或EXE文件。

```csharp
internal class MyInternalClass
{
    internal int MyInternalField = 40;

    internal void MyInternalMethod()
    {
        Console.WriteLine("This is an internal method.");
    }
}
```

**示例：**

```csharp
MyInternalClass myObject = new MyInternalClass();
Console.WriteLine(myObject.MyInternalField); // 输出: 40
myObject.MyInternalMethod(); // 输出: This is an internal method.
```

### 5. `protected internal`

`protected internal` 成员可以在同一程序集或派生类中访问。

```csharp
public class BaseClass
{
    protected internal int MyProtectedInternalField = 50;

    protected internal void MyProtectedInternalMethod()
    {
        Console.WriteLine("This is a protected internal method.");
    }
}

public class DerivedClass : BaseClass
{
    public void AccessProtectedInternalMembers()
    {
        Console.WriteLine(MyProtectedInternalField); // 可以在派生类中访问
        MyProtectedInternalMethod(); // 可以在派生类中访问
    }
}
```

**示例：**

```csharp
DerivedClass myObject = new DerivedClass();
myObject.AccessProtectedInternalMembers(); // 输出: 50 和 This is a protected internal method.
```

### 6. `private protected`

`private protected` 成员只能在定义它的类及其派生类中访问，且这些派生类必须位于同一程序集中。

```csharp
public class BaseClass
{
    private protected int MyPrivateProtectedField = 60;

    private protected void MyPrivateProtectedMethod()
    {
        Console.WriteLine("This is a private protected method.");
    }

    public void AccessPrivateProtectedMembers()
    {
        Console.WriteLine(MyPrivateProtectedField); // 可以在类内部访问
        MyPrivateProtectedMethod(); // 可以在类内部访问
    }
}

public class DerivedClass : BaseClass
{
    public void AccessPrivateProtectedMembers()
    {
        Console.WriteLine(MyPrivateProtectedField); // 可以在派生类中访问
        MyPrivateProtectedMethod(); // 可以在派生类中访问
    }
}
```

**示例：**

```csharp
DerivedClass myObject = new DerivedClass();
myObject.AccessPrivateProtectedMembers(); // 输出: 60 和 This is a private protected method.
```

## 实际应用场景

访问修饰符在实际开发中非常重要。以下是一些常见的应用场景：

1. **封装数据**：通过将字段标记为 `private`，可以防止外部代码直接修改数据，确保数据的完整性。
2. **控制访问**：通过使用 `protected` 和 `internal`，可以限制某些成员的访问范围，确保只有特定的代码可以访问这些成员。
3. **模块化设计**：通过使用 `internal`，可以将某些类或成员限制在同一程序集中，从而实现模块化设计。

## 总结

访问修饰符是C#中控制类、方法和字段访问权限的重要工具。通过合理使用这些修饰符，可以实现代码的封装、信息隐藏和模块化设计。以下是C#中常见的访问修饰符及其作用：

- `public`：完全开放访问。
- `private`：仅在类内部访问。
- `protected`：在类及其派生类中访问。
- `internal`：在同一程序集中访问。
- `protected internal`：在同一程序集或派生类中访问。
- `private protected`：在类及其派生类中访问，且派生类必须位于同一程序集中。

## 附加资源与练习

为了巩固你对C#访问修饰符的理解，建议你尝试以下练习：

1. 创建一个包含 `public`、`private`、`protected` 和 `internal` 成员的类，并尝试在不同上下文中访问这些成员。
2. 设计一个类层次结构，使用 `protected` 和 `private protected` 修饰符，观察它们的访问限制。
3. 尝试在一个程序集中定义 `internal` 成员，并在另一个程序集中访问它们，观察会发生什么。

通过这些练习，你将更好地理解访问修饰符的作用和使用场景。

:::tip
记住，合理使用访问修饰符是编写高质量、可维护代码的关键。始终根据实际需求选择最合适的访问级别。
:::