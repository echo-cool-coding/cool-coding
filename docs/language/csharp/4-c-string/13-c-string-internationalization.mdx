---
title: C# 字符串国际化
description: 学习如何在C#中实现字符串的国际化，以便应用程序能够支持多语言环境。本文将从基础概念讲起，逐步深入，并提供实际案例和代码示例。
---

# C# 字符串国际化

在现代软件开发中，应用程序通常需要支持多种语言，以满足全球用户的需求。C#提供了强大的工具和库来实现字符串的国际化（Internationalization，简称i18n）。本文将带你了解如何在C#中实现字符串的国际化，并通过实际案例展示其应用。

## 什么是字符串国际化？

字符串国际化是指将应用程序中的字符串内容设计为能够支持多种语言的过程。通过国际化，开发者可以将应用程序的文本内容与代码分离，使得应用程序能够根据用户的语言偏好动态加载相应的文本资源。

## 基本概念

### 资源文件（Resource Files）

在C#中，资源文件（`.resx`文件）是用于存储字符串、图像等资源的文件。每个资源文件可以对应一种语言，例如：

- `Resources.resx`：默认资源文件（通常是英语）。
- `Resources.fr.resx`：法语资源文件。
- `Resources.es.resx`：西班牙语资源文件。

### 文化信息（CultureInfo）

`CultureInfo`类用于表示特定的语言和区域设置。通过设置当前线程的`CultureInfo`，应用程序可以根据用户的语言偏好加载相应的资源文件。

## 实现步骤

### 1. 创建资源文件

首先，创建一个默认的资源文件`Resources.resx`，并添加一些字符串资源：

```xml
<data name="Greeting" xml:space="preserve">
  <value>Hello, World!</value>
</data>
```

接下来，创建法语资源文件`Resources.fr.resx`，并添加相应的翻译：

```xml
<data name="Greeting" xml:space="preserve">
  <value>Bonjour, le monde!</value>
</data>
```

### 2. 加载资源文件

在代码中，可以使用`ResourceManager`类来加载资源文件中的字符串。以下是一个简单的示例：

```csharp
using System;
using System.Globalization;
using System.Resources;

class Program
{
    static void Main()
    {
        ResourceManager resourceManager = new ResourceManager("YourNamespace.Resources", typeof(Program).Assembly);

        // 设置当前线程的文化信息为法语
        CultureInfo frenchCulture = new CultureInfo("fr-FR");
        CultureInfo.CurrentUICulture = frenchCulture;

        // 获取并显示法语问候语
        string greeting = resourceManager.GetString("Greeting");
        Console.WriteLine(greeting); // 输出: Bonjour, le monde!
    }
}
```

### 3. 动态切换语言

在实际应用中，用户可能需要在运行时切换语言。可以通过更改当前线程的`CultureInfo`来实现这一点：

```csharp
using System;
using System.Globalization;
using System.Resources;

class Program
{
    static void Main()
    {
        ResourceManager resourceManager = new ResourceManager("YourNamespace.Resources", typeof(Program).Assembly);

        // 用户选择语言
        Console.WriteLine("Select language (en/fr): ");
        string language = Console.ReadLine();

        CultureInfo culture = language == "fr" ? new CultureInfo("fr-FR") : new CultureInfo("en-US");
        CultureInfo.CurrentUICulture = culture;

        // 获取并显示问候语
        string greeting = resourceManager.GetString("Greeting");
        Console.WriteLine(greeting);
    }
}
```

## 实际案例

假设你正在开发一个多语言的桌面应用程序，用户可以在设置中选择语言。通过使用资源文件和`CultureInfo`，你可以轻松实现这一功能。

```csharp
using System;
using System.Globalization;
using System.Resources;

class Program
{
    static void Main()
    {
        ResourceManager resourceManager = new ResourceManager("YourNamespace.Resources", typeof(Program).Assembly);

        // 模拟用户选择语言
        Console.WriteLine("Select language (en/fr/es): ");
        string language = Console.ReadLine();

        CultureInfo culture = language switch
        {
            "fr" => new CultureInfo("fr-FR"),
            "es" => new CultureInfo("es-ES"),
            _ => new CultureInfo("en-US")
        };

        CultureInfo.CurrentUICulture = culture;

        // 获取并显示问候语
        string greeting = resourceManager.GetString("Greeting");
        Console.WriteLine(greeting);
    }
}
```

## 总结

通过使用资源文件和`CultureInfo`，C#开发者可以轻松实现字符串的国际化，使应用程序能够支持多语言环境。本文介绍了如何创建资源文件、加载资源以及动态切换语言，并通过实际案例展示了这些概念的应用。

## 附加资源与练习

- **练习1**：创建一个支持英语、法语和西班牙语的简单控制台应用程序，并根据用户输入显示相应的问候语。
- **练习2**：扩展上述应用程序，使其支持更多语言，如德语、中文等。
- **附加资源**：
  - [Microsoft Docs: Globalization and localization in .NET](https://docs.microsoft.com/en-us/dotnet/standard/globalization-localization/)
  - [Resource Files in C#](https://docs.microsoft.com/en-us/dotnet/framework/resources/)

通过不断练习和探索，你将能够掌握C#字符串国际化的技巧，并应用于实际项目中。