---
title: C# 数据库编程概述
description: 本文介绍了C#数据库编程的基础知识，包括数据库连接、数据操作和实际应用场景，适合初学者学习。
---

# C# 数据库编程概述

在现代软件开发中，数据库是不可或缺的一部分。C#作为一种强大的编程语言，提供了丰富的工具和库来与数据库进行交互。本文将带你了解C#数据库编程的基础知识，帮助你掌握如何通过C#连接和操作数据库。

## 什么是C#数据库编程？

C#数据库编程是指使用C#语言与数据库进行交互的过程。这包括连接数据库、执行查询、插入、更新和删除数据等操作。C#通过ADO.NET和Entity Framework等框架提供了强大的数据库操作能力。

## 数据库连接

在C#中，连接数据库通常使用`SqlConnection`类。以下是一个简单的示例，展示了如何连接到SQL Server数据库：

```csharp
using System;
using System.Data.SqlClient;

class Program
{
    static void Main()
    {
        string connectionString = "Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            Console.WriteLine("Connection opened successfully!");
        }
    }
}
```

在这个示例中，我们首先定义了一个连接字符串，然后使用`SqlConnection`类创建了一个数据库连接。`using`语句确保连接在使用后会被正确关闭。

## 数据操作

一旦连接到数据库，我们就可以执行各种数据操作。以下是一个简单的示例，展示了如何从数据库中查询数据：

```csharp
using System;
using System.Data.SqlClient;

class Program
{
    static void Main()
    {
        string connectionString = "Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            string query = "SELECT * FROM Customers";
            using (SqlCommand command = new SqlCommand(query, connection))
            {
                using (SqlDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        Console.WriteLine(reader["CustomerName"].ToString());
                    }
                }
            }
        }
    }
}
```

在这个示例中，我们使用`SqlCommand`类执行了一个SQL查询，并使用`SqlDataReader`类读取查询结果。

## 实际应用场景

C#数据库编程在实际应用中有广泛的应用场景。例如，在一个电子商务网站中，你可能需要从数据库中检索产品信息、更新库存、处理订单等。以下是一个简单的示例，展示了如何更新数据库中的库存信息：

```csharp
using System;
using System.Data.SqlClient;

class Program
{
    static void Main()
    {
        string connectionString = "Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword;";
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();
            string updateQuery = "UPDATE Products SET Stock = Stock - 1 WHERE ProductId = @ProductId";
            using (SqlCommand command = new SqlCommand(updateQuery, connection))
            {
                command.Parameters.AddWithValue("@ProductId", 1);
                int rowsAffected = command.ExecuteNonQuery();
                Console.WriteLine($"{rowsAffected} row(s) updated.");
            }
        }
    }
}
```

在这个示例中，我们使用`SqlCommand`类执行了一个更新操作，减少了某个产品的库存。

## 总结

C#数据库编程是开发数据库驱动应用程序的重要技能。通过本文，你已经了解了如何连接数据库、执行查询和更新数据。希望这些知识能帮助你在实际项目中更好地应用C#数据库编程。

## 附加资源

- [ADO.NET 文档](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/)
- [Entity Framework 文档](https://docs.microsoft.com/en-us/ef/)
- [SQL Server 文档](https://docs.microsoft.com/en-us/sql/sql-server/)

## 练习

1. 尝试修改上面的代码示例，使其能够插入一条新的客户记录到数据库中。
2. 编写一个程序，从数据库中删除一条记录，并输出删除的记录数。

:::tip
在编写数据库操作代码时，务必注意SQL注入问题。使用参数化查询可以有效防止SQL注入攻击。
:::