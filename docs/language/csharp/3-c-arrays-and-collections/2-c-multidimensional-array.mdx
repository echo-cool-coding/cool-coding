---
title: C# 多维数组
description: 了解 C# 中的多维数组，包括二维数组和三维数组的定义、初始化、访问和实际应用场景。
---

## 介绍

在 C# 中，数组是一种用于存储相同类型数据的集合。除了常见的一维数组，C# 还支持多维数组。多维数组可以看作是一个表格或矩阵，其中每个元素通过多个索引来访问。最常见的多维数组是二维数组（类似于表格）和三维数组（类似于立方体）。

本文将详细介绍 C# 中的多维数组，包括如何定义、初始化、访问以及在实际开发中的应用。

## 二维数组

### 定义与初始化

二维数组是最常见的多维数组形式。它可以看作是一个由行和列组成的表格。在 C# 中，二维数组的定义和初始化如下：

```csharp
int[,] matrix = new int[3, 3];
```

上面的代码定义了一个 3 行 3 列的二维数组。我们可以通过以下方式初始化数组：

```csharp
int[,] matrix = {
    {1, 2, 3},
    {4, 5, 6},
    {7, 8, 9}
};
```

### 访问二维数组元素

要访问二维数组中的元素，需要使用两个索引：第一个索引表示行，第二个索引表示列。例如：

```csharp
int value = matrix[1, 2]; // 访问第二行第三列的元素，值为 6
```

### 遍历二维数组

我们可以使用嵌套的 `for` 循环来遍历二维数组中的所有元素：

```csharp
for (int i = 0; i < matrix.GetLength(0); i++)
{
    for (int j = 0; j < matrix.GetLength(1); j++)
    {
        Console.Write(matrix[i, j] + " ");
    }
    Console.WriteLine();
}
```

输出结果为：

```
1 2 3 
4 5 6 
7 8 9 
```

:::note
`GetLength(0)` 返回数组的第一维（行数），`GetLength(1)` 返回数组的第二维（列数）。
:::

## 三维数组

### 定义与初始化

三维数组可以看作是一个由多个二维数组组成的立方体。在 C# 中，三维数组的定义和初始化如下：

```csharp
int[,,] cube = new int[2, 3, 4];
```

上面的代码定义了一个 2 层、3 行、4 列的三维数组。我们可以通过以下方式初始化数组：

```csharp
int[,,] cube = {
    {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    },
    {
        {13, 14, 15, 16},
        {17, 18, 19, 20},
        {21, 22, 23, 24}
    }
};
```

### 访问三维数组元素

要访问三维数组中的元素，需要使用三个索引：第一个索引表示层，第二个索引表示行，第三个索引表示列。例如：

```csharp
int value = cube[1, 2, 3]; // 访问第二层第三行第四列的元素，值为 24
```

### 遍历三维数组

我们可以使用三层嵌套的 `for` 循环来遍历三维数组中的所有元素：

```csharp
for (int i = 0; i < cube.GetLength(0); i++)
{
    for (int j = 0; j < cube.GetLength(1); j++)
    {
        for (int k = 0; k < cube.GetLength(2); k++)
        {
            Console.Write(cube[i, j, k] + " ");
        }
        Console.WriteLine();
    }
    Console.WriteLine();
}
```

输出结果为：

```
1 2 3 4 
5 6 7 8 
9 10 11 12 

13 14 15 16 
17 18 19 20 
21 22 23 24 
```

:::tip
`GetLength(0)` 返回数组的第一维（层数），`GetLength(1)` 返回数组的第二维（行数），`GetLength(2)` 返回数组的第三维（列数）。
:::

## 实际应用场景

### 图像处理

在图像处理中，二维数组常用于表示图像的像素矩阵。每个元素代表一个像素的颜色值。例如，处理灰度图像时，可以使用二维数组来存储每个像素的灰度值。

```csharp
int[,] image = new int[256, 256]; // 256x256 的灰度图像
```

### 游戏开发

在游戏开发中，三维数组可以用于表示游戏世界中的三维空间。例如，一个简单的 3D 迷宫游戏可以使用三维数组来表示迷宫的结构。

```csharp
int[,,] maze = new int[10, 10, 10]; // 10x10x10 的迷宫
```

## 总结

C# 中的多维数组是一种强大的数据结构，适用于处理表格、矩阵、图像、游戏世界等复杂数据。通过本文，你已经学会了如何定义、初始化、访问和遍历二维数组和三维数组，并了解了它们在实际开发中的应用。

## 附加资源与练习

- **练习 1**：创建一个 4x4 的二维数组，并编写代码计算其对角线元素的和。
- **练习 2**：创建一个 3x3x3 的三维数组，并编写代码查找其中的最大值。
- **附加资源**：阅读 [C# 官方文档](https://learn.microsoft.com/en-us/dotnet/csharp/programming-guide/arrays/multidimensional-arrays) 以了解更多关于多维数组的详细信息。

希望本文对你理解 C# 多维数组有所帮助！继续练习，你将能够熟练地使用多维数组解决实际问题。