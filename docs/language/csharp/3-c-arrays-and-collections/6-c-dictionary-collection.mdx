---
title: C# 字典集合
description: "了解C#中的字典集合（Dictionary），掌握其基本用法、实际应用场景以及如何高效地使用它来存储和检索键值对数据。"
---

## 介绍

在C#中，字典集合（`Dictionary<TKey, TValue>`）是一种非常常用的数据结构，用于存储键值对（key-value pairs）。字典集合允许你通过键（key）快速查找对应的值（value），这使得它在处理需要快速检索数据的场景中非常有用。

字典集合的特点包括：
- **键的唯一性**：字典中的每个键必须是唯一的，不能重复。
- **高效的查找**：字典集合基于哈希表实现，查找操作的时间复杂度接近O(1)。
- **动态大小**：字典的大小可以根据需要动态调整。

## 基本用法

### 创建字典

要创建一个字典，你需要指定键和值的类型。以下是一个简单的示例：

```csharp
Dictionary<string, int> ages = new Dictionary<string, int>();
```

在这个例子中，我们创建了一个键为`string`类型、值为`int`类型的字典。这个字典可以用来存储人名和对应的年龄。

### 添加元素

你可以使用`Add`方法向字典中添加元素：

```csharp
ages.Add("Alice", 25);
ages.Add("Bob", 30);
```

### 访问元素

通过键可以访问字典中的值：

```csharp
int aliceAge = ages["Alice"];
Console.WriteLine(aliceAge); // 输出: 25
```

### 检查键是否存在

在访问字典中的值之前，最好先检查键是否存在，以避免抛出`KeyNotFoundException`异常：

```csharp
if (ages.ContainsKey("Alice"))
{
    Console.WriteLine(ages["Alice"]);
}
```

### 删除元素

你可以使用`Remove`方法从字典中删除元素：

```csharp
ages.Remove("Bob");
```

### 遍历字典

你可以使用`foreach`循环遍历字典中的所有键值对：

```csharp
foreach (var kvp in ages)
{
    Console.WriteLine($"Key: {kvp.Key}, Value: {kvp.Value}");
}
```

## 实际应用场景

### 案例1：统计单词频率

假设你需要统计一段文本中每个单词出现的频率。字典集合非常适合这种场景：

```csharp
string text = "hello world hello";
string[] words = text.Split(' ');

Dictionary<string, int> wordCounts = new Dictionary<string, int>();

foreach (string word in words)
{
    if (wordCounts.ContainsKey(word))
    {
        wordCounts[word]++;
    }
    else
    {
        wordCounts.Add(word, 1);
    }
}

foreach (var kvp in wordCounts)
{
    Console.WriteLine($"Word: {kvp.Key}, Count: {kvp.Value}");
}
```

**输出：**
```
Word: hello, Count: 2
Word: world, Count: 1
```

### 案例2：缓存数据

字典集合也可以用于实现简单的缓存机制。例如，你可以将计算结果存储在字典中，以避免重复计算：

```csharp
Dictionary<int, long> factorialCache = new Dictionary<int, long>();

long Factorial(int n)
{
    if (factorialCache.ContainsKey(n))
    {
        return factorialCache[n];
    }

    long result = 1;
    for (int i = 2; i <= n; i++)
    {
        result *= i;
    }

    factorialCache.Add(n, result);
    return result;
}

Console.WriteLine(Factorial(5)); // 输出: 120
Console.WriteLine(Factorial(5)); // 从缓存中获取，输出: 120
```

## 总结

C#中的字典集合（`Dictionary<TKey, TValue>`）是一种非常强大的数据结构，适用于需要快速查找和存储键值对的场景。通过本文的学习，你应该已经掌握了字典的基本用法，并了解了它在实际应用中的一些常见场景。

:::tip
在使用字典时，务必注意键的唯一性。如果尝试添加重复的键，将会抛出`ArgumentException`异常。
:::

## 附加资源与练习

1. **练习**：尝试编写一个程序，使用字典集合来存储学生的姓名和成绩，并实现以下功能：
   - 添加学生成绩
   - 查找学生成绩
   - 删除学生成绩
   - 统计班级平均成绩

2. **进一步学习**：
   - 了解`SortedDictionary`和`ConcurrentDictionary`的区别与使用场景。
   - 探索C#中的其他集合类型，如`List<T>`、`HashSet<T>`等。

通过不断练习和探索，你将能够更加熟练地使用C#中的字典集合，并在实际项目中发挥其强大的功能。