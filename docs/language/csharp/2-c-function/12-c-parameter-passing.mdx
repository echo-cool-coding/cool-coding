---
title: C# 参数传递
description: 了解 C# 中参数传递的基本概念，包括值传递、引用传递和输出参数。通过代码示例和实际案例，掌握如何在函数中正确使用参数传递。
---

## 介绍

在 C# 中，参数传递是函数调用的核心概念之一。理解参数传递的方式对于编写高效、可维护的代码至关重要。C# 支持多种参数传递方式，包括**值传递**、**引用传递**和**输出参数**。本文将详细介绍这些概念，并通过代码示例帮助你更好地理解。

## 值传递

值传递是 C# 中最常见的参数传递方式。在值传递中，函数接收的是参数的**副本**，而不是原始变量本身。因此，函数内部对参数的修改不会影响原始变量。

### 示例代码

```csharp
void ModifyValue(int x)
{
    x = x + 10;
    Console.WriteLine("函数内部的值: " + x);
}

int number = 5;
ModifyValue(number);
Console.WriteLine("函数外部的值: " + number);
```

### 输出

```
函数内部的值: 15
函数外部的值: 5
```

### 解释

在上面的代码中，`number` 变量的值被传递给 `ModifyValue` 函数。函数内部对 `x` 的修改不会影响 `number` 的值，因为 `x` 只是 `number` 的一个副本。

## 引用传递

引用传递允许函数直接操作原始变量，而不是其副本。在 C# 中，可以通过使用 `ref` 关键字来实现引用传递。

### 示例代码

```csharp
void ModifyReference(ref int x)
{
    x = x + 10;
    Console.WriteLine("函数内部的值: " + x);
}

int number = 5;
ModifyReference(ref number);
Console.WriteLine("函数外部的值: " + number);
```

### 输出

```
函数内部的值: 15
函数外部的值: 15
```

### 解释

在这个例子中，`number` 变量通过 `ref` 关键字传递给 `ModifyReference` 函数。函数内部对 `x` 的修改会直接影响 `number` 的值，因为 `x` 是 `number` 的引用。

:::tip
使用 `ref` 关键字时，调用函数时必须显式地使用 `ref` 关键字。
:::

## 输出参数

输出参数允许函数返回多个值。与引用参数类似，输出参数也是通过引用传递的，但它们不需要在传递之前初始化。在 C# 中，可以使用 `out` 关键字来定义输出参数。

### 示例代码

```csharp
void GetValues(out int x, out int y)
{
    x = 10;
    y = 20;
}

int a, b;
GetValues(out a, out b);
Console.WriteLine("a 的值: " + a);
Console.WriteLine("b 的值: " + b);
```

### 输出

```
a 的值: 10
b 的值: 20
```

### 解释

在这个例子中，`GetValues` 函数通过 `out` 关键字返回了两个值。调用函数时，`a` 和 `b` 不需要初始化，函数内部会为它们赋值。

:::caution
输出参数必须在函数内部赋值，否则会导致编译错误。
:::

## 实际案例

假设你正在编写一个程序，需要计算一个数组中的最大值和最小值。你可以使用输出参数来返回这两个值。

### 示例代码

```csharp
void FindMinMax(int[] numbers, out int min, out int max)
{
    min = numbers[0];
    max = numbers[0];
    foreach (int number in numbers)
    {
        if (number < min) min = number;
        if (number > max) max = number;
    }
}

int[] numbers = { 3, 7, 2, 9, 5 };
int min, max;
FindMinMax(numbers, out min, out max);
Console.WriteLine("最小值: " + min);
Console.WriteLine("最大值: " + max);
```

### 输出

```
最小值: 2
最大值: 9
```

### 解释

在这个例子中，`FindMinMax` 函数通过 `out` 参数返回了数组中的最小值和最大值。这种方式使得函数可以返回多个值，而不需要使用额外的数据结构。

## 总结

C# 中的参数传递方式包括值传递、引用传递和输出参数。每种方式都有其特定的用途和适用场景。理解这些概念对于编写高效、可维护的代码至关重要。

- **值传递**：传递参数的副本，函数内部修改不会影响原始变量。
- **引用传递**：传递参数的引用，函数内部修改会影响原始变量。
- **输出参数**：允许函数返回多个值，适用于需要返回多个结果的场景。

## 附加资源与练习

- **练习 1**：编写一个函数，使用引用传递来交换两个变量的值。
- **练习 2**：编写一个函数，使用输出参数返回一个数组的平均值和总和。

通过练习这些概念，你将更好地掌握 C# 中的参数传递机制。