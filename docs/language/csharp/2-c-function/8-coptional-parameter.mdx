---
title: C# 可选参数
description: 了解C#中的可选参数，掌握如何在函数中使用它们以简化代码并提高灵活性。
---

# C# 可选参数

在C#编程中，可选参数是一种允许你在调用函数时省略某些参数的特性。这些参数在函数定义时被赋予默认值，如果调用者没有提供这些参数的值，函数将使用默认值。可选参数使得函数调用更加灵活，同时减少了需要重载函数的情况。

## 什么是可选参数？

可选参数是指在函数定义中为某些参数指定了默认值的参数。这些参数在调用函数时可以省略，此时函数将使用默认值。可选参数通常用于那些在大多数情况下具有固定值的参数。

### 语法

在C#中，可选参数的语法非常简单。你只需要在函数定义时为参数指定一个默认值即可：

```csharp
void MyFunction(int requiredParam, int optionalParam = 10)
{
    Console.WriteLine($"Required: {requiredParam}, Optional: {optionalParam}");
}
```

在这个例子中，`optionalParam` 是一个可选参数，其默认值为 `10`。如果你在调用 `MyFunction` 时没有提供 `optionalParam` 的值，函数将使用默认值 `10`。

## 如何使用可选参数？

### 基本用法

让我们通过一个简单的例子来理解可选参数的基本用法：

```csharp
void PrintMessage(string message, bool isUpperCase = false)
{
    if (isUpperCase)
    {
        Console.WriteLine(message.ToUpper());
    }
    else
    {
        Console.WriteLine(message);
    }
}
```

在这个例子中，`isUpperCase` 是一个可选参数，默认值为 `false`。你可以这样调用这个函数：

```csharp
PrintMessage("Hello, World!"); // 输出: Hello, World!
PrintMessage("Hello, World!", true); // 输出: HELLO, WORLD!
```

### 多个可选参数

你可以在一个函数中定义多个可选参数。例如：

```csharp
void ConfigureSettings(int timeout = 30, bool enableLogging = true, string logLevel = "Info")
{
    Console.WriteLine($"Timeout: {timeout}, Enable Logging: {enableLogging}, Log Level: {logLevel}");
}
```

你可以这样调用这个函数：

```csharp
ConfigureSettings(); // 输出: Timeout: 30, Enable Logging: True, Log Level: Info
ConfigureSettings(60); // 输出: Timeout: 60, Enable Logging: True, Log Level: Info
ConfigureSettings(60, false); // 输出: Timeout: 60, Enable Logging: False, Log Level: Info
ConfigureSettings(60, false, "Debug"); // 输出: Timeout: 60, Enable Logging: False, Log Level: Debug
```

### 命名参数

C#还支持命名参数，这使得你可以只传递某些可选参数，而不必按照参数定义的顺序传递所有参数。例如：

```csharp
ConfigureSettings(logLevel: "Debug"); // 输出: Timeout: 30, Enable Logging: True, Log Level: Debug
```

在这个例子中，我们只传递了 `logLevel` 参数，而其他参数使用了默认值。

## 实际应用场景

### 配置函数

可选参数在配置函数中非常有用。例如，假设你有一个函数用于配置数据库连接：

```csharp
void ConfigureDatabase(string server, string database, int port = 1433, bool useSSL = false)
{
    Console.WriteLine($"Server: {server}, Database: {database}, Port: {port}, Use SSL: {useSSL}");
}
```

你可以这样调用这个函数：

```csharp
ConfigureDatabase("localhost", "MyDatabase"); // 输出: Server: localhost, Database: MyDatabase, Port: 1433, Use SSL: False
ConfigureDatabase("localhost", "MyDatabase", 3306); // 输出: Server: localhost, Database: MyDatabase, Port: 3306, Use SSL: False
ConfigureDatabase("localhost", "MyDatabase", useSSL: true); // 输出: Server: localhost, Database: MyDatabase, Port: 1433, Use SSL: True
```

### 日志记录

在日志记录函数中，可选参数可以用来控制日志的详细程度：

```csharp
void Log(string message, string level = "Info", bool includeTimestamp = true)
{
    if (includeTimestamp)
    {
        Console.WriteLine($"[{DateTime.Now}] [{level}] {message}");
    }
    else
    {
        Console.WriteLine($"[{level}] {message}");
    }
}
```

你可以这样调用这个函数：

```csharp
Log("Application started"); // 输出: [2023-10-01 12:00:00] [Info] Application started
Log("Error occurred", "Error"); // 输出: [2023-10-01 12:00:00] [Error] Error occurred
Log("Debug information", "Debug", false); // 输出: [Debug] Debug information
```

## 总结

可选参数是C#中一个非常有用的特性，它允许你在调用函数时省略某些参数，从而简化代码并提高灵活性。通过为参数指定默认值，你可以减少函数重载的需求，并使代码更易于维护。

在实际应用中，可选参数常用于配置函数、日志记录等场景。通过结合命名参数，你可以更灵活地调用函数，只传递需要的参数。

## 附加资源与练习

- **练习1**：创建一个函数 `CalculateArea`，计算矩形的面积。函数应包含两个可选参数 `width` 和 `height`，默认值分别为 `10` 和 `5`。调用函数时，尝试省略一个或两个参数，观察输出结果。
- **练习2**：修改 `Log` 函数，使其支持更多的日志级别（如 `Warning`、`Critical` 等），并为每个级别指定不同的颜色输出。

通过练习这些例子，你将更好地掌握C#中的可选参数，并能够在实际项目中灵活运用它们。