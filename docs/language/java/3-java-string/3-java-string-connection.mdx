---
title: Java 字符串连接
description: 本教程详细讲解Java中字符串连接的各种方法，包括+运算符、concat()方法、StringBuilder、StringBuffer以及Java 8+中的String.join()方法，帮助初学者理解和掌握字符串连接技术。
---

# Java 字符串连接

在Java编程中，字符串连接（String Concatenation）是一项基础且常用的操作。作为初学者，理解不同的字符串连接方法及其适用场景至关重要。本教程将详细介绍Java中进行字符串连接的多种方式，并帮助你在实际编程中做出最佳选择。

## 什么是字符串连接？

字符串连接是指将两个或多个字符串合并成一个新的字符串。在Java中，这是一个非常常见的操作，比如当你需要构建动态消息、生成报告或处理用户输入时。

## 使用+运算符连接字符串

最简单直观的字符串连接方式是使用`+`运算符。这也是Java初学者最先接触的方法。

```java
String firstName = "John";
String lastName = "Doe";
String fullName = firstName + " " + lastName;
System.out.println(fullName); // 输出: John Doe
```

当使用`+`运算符连接字符串和其他数据类型时，Java会自动将其他数据类型转换为字符串：

```java
int age = 25;
String message = "My age is " + age + " years old.";
System.out.println(message); // 输出: My age is 25 years old.
```

:::caution
虽然使用`+`运算符进行字符串连接非常直观，但在循环中大量使用可能导致性能问题，因为每次连接操作都会创建一个新的String对象。
:::

## 使用String.concat()方法

Java的String类提供了`concat()`方法，专门用于字符串连接：

```java
String str1 = "Hello";
String str2 = "World";
String result = str1.concat(" ").concat(str2);
System.out.println(result); // 输出: Hello World
```

`concat()`方法只接受字符串参数，如果需要连接其他数据类型，需要先将其转换为字符串：

```java
int number = 100;
String text = "The number is: ";
String result = text.concat(String.valueOf(number));
System.out.println(result); // 输出: The number is: 100
```

## 使用StringBuilder进行高效连接

当需要进行大量字符串连接操作时，`StringBuilder`是最佳选择，它比`+`运算符和`concat()`方法更加高效：

```java
StringBuilder builder = new StringBuilder();
builder.append("Hello");
builder.append(" ");
builder.append("World");
builder.append("! Java version: ");
builder.append(System.getProperty("java.version"));
String result = builder.toString();
System.out.println(result); // 输出: Hello World! Java version: x.x.x
```

### StringBuilder vs StringBuffer

`StringBuilder`是Java 5引入的，它与早期的`StringBuffer`类似，但不是线程安全的，因此性能更好。如果你需要在多线程环境中进行字符串连接，应该使用`StringBuffer`：

```java
StringBuffer buffer = new StringBuffer();
buffer.append("Hello");
buffer.append(" ");
buffer.append("World");
String result = buffer.toString();
System.out.println(result); // 输出: Hello World
```

:::tip
一般来说，如果不需要线程安全性，优先使用`StringBuilder`；需要线程安全时，使用`StringBuffer`。
:::

## Java 8+中的String.join()方法

从Java 8开始，提供了`String.join()`方法，可以更优雅地连接多个字符串并添加分隔符：

```java
String joined = String.join(", ", "Apple", "Banana", "Cherry");
System.out.println(joined); // 输出: Apple, Banana, Cherry

// 使用集合
List<String> fruits = Arrays.asList("Apple", "Banana", "Cherry");
String joinedFromList = String.join(" - ", fruits);
System.out.println(joinedFromList); // 输出: Apple - Banana - Cherry
```

## 各种连接方式的性能比较

不同的字符串连接方法在性能上有明显差异。以下是一个简单的比较：

```mermaid
graph LR
    A[性能从高到低] --> B[StringBuilder]
    B --> C[StringBuffer]
    C --> D[String.join()]
    D --> E[concat()]
    E --> F[+运算符]
```

## 实际应用场景

### 1. 构建用户显示信息

```java
public String getUserDisplayInfo(User user) {
    StringBuilder info = new StringBuilder();
    info.append("Name: ").append(user.getFirstName())
        .append(" ").append(user.getLastName())
        .append("\nEmail: ").append(user.getEmail())
        .append("\nAge: ").append(user.getAge());
    return info.toString();
}
```

### 2. 构建CSV数据

```java
public String createCsvRow(String[] data) {
    return String.join(",", data);
}
```

### 3. 构建SQL查询语句

```java
public String buildQueryWithParameters(List<String> conditions) {
    StringBuilder query = new StringBuilder("SELECT * FROM users WHERE ");
    for (int i = 0; i < conditions.size(); i++) {
        query.append(conditions.get(i));
        if (i < conditions.size() - 1) {
            query.append(" AND ");
        }
    }
    return query.toString();
}
```

### 4. 日志信息拼接

```java
public void logUserAction(String userId, String action, String timestamp) {
    String logMessage = "User " + userId + " performed " + action + " at " + timestamp;
    logger.info(logMessage);
}
```

## 最佳实践

1. **少量连接操作**：使用`+`运算符或`concat()`方法，简单直观。
2. **大量连接操作**：使用`StringBuilder`，避免创建过多的中间字符串对象。
3. **多线程环境**：使用`StringBuffer`确保线程安全。
4. **连接集合元素**：使用`String.join()`方法提高代码可读性。
5. **在循环中**：避免使用`+`运算符，而是使用`StringBuilder`。

## 总结

Java提供了多种字符串连接的方法，每种方法都有其适用场景：

- `+`运算符：简单直观，适合少量连接
- `String.concat()`：专用于字符串连接，用法清晰
- `StringBuilder`：高效，适用于大量连接操作
- `StringBuffer`：线程安全版本的StringBuilder
- `String.join()`：Java 8+引入，优雅地处理带分隔符的连接

作为初学者，了解这些不同的方法以及它们的优缺点，将帮助你在编程实践中做出更合理的选择，写出更高效的代码。

## 练习题

1. 编写一个方法，使用三种不同的字符串连接方式将一个字符串数组的所有元素连接成一个字符串。
2. 比较使用`+`运算符和`StringBuilder`在循环中连接1000个字符串的性能差异。
3. 实现一个生成HTML表格的方法，根据提供的数据使用字符串连接技术构建表格。

:::note
记住，选择合适的字符串连接方法不仅关乎代码的清晰度，还会影响程序的性能。在实际应用中，应根据具体情况做出明智的选择。
:::