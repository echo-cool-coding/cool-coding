---
title: PHP MySQL 连接
description: "学习如何使用 PHP 连接 MySQL 数据库，掌握基本的数据库操作，为构建动态网站打下基础。"
---

## 介绍

在开发动态网站时，PHP 和 MySQL 是最常用的技术组合之一。PHP 是一种服务器端脚本语言，而 MySQL 是一个流行的关系型数据库管理系统。通过 PHP 连接 MySQL 数据库，您可以执行查询、插入、更新和删除数据等操作，从而为网站提供动态内容。

在本教程中，我们将逐步讲解如何使用 PHP 连接 MySQL 数据库，并通过实际案例展示其应用。

## 1. 准备工作

在开始之前，请确保您已经安装了以下软件：
- PHP（版本 7.0 或更高）
- MySQL（版本 5.6 或更高）
- Web 服务器（如 Apache 或 Nginx）

:::tip
如果您使用的是 XAMPP 或 WAMP 等集成开发环境，这些软件已经预装并配置好了。
:::

## 2. 创建 MySQL 数据库

首先，我们需要创建一个 MySQL 数据库和表，以便后续操作。假设我们要创建一个名为 `my_database` 的数据库，并在其中创建一个 `users` 表。

```sql
CREATE DATABASE my_database;

USE my_database;

CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL
);
```

## 3. 使用 PHP 连接 MySQL

PHP 提供了多种方式连接 MySQL 数据库，最常用的是使用 `mysqli` 扩展。以下是连接 MySQL 数据库的基本步骤：

### 3.1 创建连接

使用 `mysqli_connect()` 函数创建与 MySQL 数据库的连接。该函数需要四个参数：主机名、用户名、密码和数据库名。

```php
<?php
$host = "localhost";
$username = "root";
$password = "";
$database = "my_database";

// 创建连接
$conn = mysqli_connect($host, $username, $password, $database);

// 检查连接是否成功
if (!$conn) {
    die("连接失败: " . mysqli_connect_error());
}
echo "连接成功";
?>
```

### 3.2 执行查询

连接成功后，您可以执行 SQL 查询。以下是一个简单的示例，向 `users` 表中插入一条记录：

```php
<?php
$sql = "INSERT INTO users (username, email) VALUES ('john_doe', 'john@example.com')";

if (mysqli_query($conn, $sql)) {
    echo "新记录插入成功";
} else {
    echo "错误: " . $sql . "<br>" . mysqli_error($conn);
}
?>
```

### 3.3 关闭连接

完成数据库操作后，记得关闭连接以释放资源。

```php
<?php
mysqli_close($conn);
?>
```

## 4. 实际案例：用户注册系统

让我们通过一个简单的用户注册系统来展示 PHP 连接 MySQL 的实际应用。

### 4.1 创建注册表单

首先，创建一个 HTML 表单，允许用户输入用户名和电子邮件。

```html
<form action="register.php" method="post">
    <label for="username">用户名:</label>
    <input type="text" id="username" name="username" required><br />

    <label for="email">电子邮件:</label>
    <input type="email" id="email" name="email" required><br />

    <input type="submit" value="注册">
</form>
```

### 4.2 处理表单数据

在 `register.php` 文件中，处理表单数据并将其插入到数据库中。

```php
<?php
$host = "localhost";
$username = "root";
$password = "";
$database = "my_database";

$conn = mysqli_connect($host, $username, $password, $database);

if (!$conn) {
    die("连接失败: " . mysqli_connect_error());
}

$username = $_POST['username'];
$email = $_POST['email'];

$sql = "INSERT INTO users (username, email) VALUES ('$username', '$email')";

if (mysqli_query($conn, $sql)) {
    echo "注册成功";
} else {
    echo "错误: " . $sql . "<br>" . mysqli_error($conn);
}

mysqli_close($conn);
?>
```

## 5. 总结

通过本教程，您已经学会了如何使用 PHP 连接 MySQL 数据库，并执行基本的数据库操作。我们还通过一个简单的用户注册系统展示了这些概念的实际应用。

:::caution
在实际开发中，请务必注意 SQL 注入等安全问题。建议使用预处理语句或 ORM 工具来提高代码的安全性。
:::

## 6. 附加资源与练习

- **练习 1**: 修改用户注册系统，使其在插入数据之前检查用户名是否已存在。
- **练习 2**: 创建一个登录系统，允许用户使用用户名和密码登录。
- **资源**: [PHP 官方文档](https://www.php.net/manual/en/book.mysqli.php) 和 [MySQL 官方文档](https://dev.mysql.com/doc/) 是学习更多高级功能的好资源。

希望本教程对您的 PHP 学习之旅有所帮助！继续探索和实践，您将很快掌握 PHP 和 MySQL 的强大功能。