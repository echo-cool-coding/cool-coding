---
title: PHP 命令行模式
description: 了解如何在命令行模式下运行PHP脚本，掌握PHP CLI的基本用法和实际应用场景。
---

# PHP 命令行模式

PHP不仅可以在Web服务器中运行，还可以在命令行模式下执行脚本。这种模式被称为PHP CLI（Command Line Interface）。通过命令行模式，开发者可以直接在终端中运行PHP脚本，而无需依赖Web服务器。这对于自动化任务、脚本开发和调试非常有用。

## 什么是PHP命令行模式？

PHP命令行模式允许你在终端或命令提示符中直接运行PHP脚本。与Web服务器环境不同，命令行模式没有HTTP请求和响应的概念，因此更适合执行后台任务、批处理脚本或开发工具。

## 如何运行PHP脚本

要在命令行模式下运行PHP脚本，首先需要确保PHP已正确安装并配置了环境变量。你可以通过以下命令检查PHP是否已安装：

```bash
php -v
```

如果PHP已安装，你将看到PHP的版本信息。接下来，创建一个简单的PHP脚本文件 `hello.php`：

```php
<?php
echo "Hello, World!\n";
?>
```

在命令行中运行该脚本：

```bash
php hello.php
```

输出结果为：

```
Hello, World!
```

## 命令行参数

PHP命令行模式支持传递参数给脚本。这些参数可以通过 `$argv` 数组访问。`$argc` 变量表示传递给脚本的参数数量。

例如，创建一个 `greet.php` 脚本：

```php
<?php
if ($argc > 1) {
    echo "Hello, " . $argv[1] . "!\n";
} else {
    echo "Hello, World!\n";
}
?>
```

运行脚本并传递参数：

```bash
php greet.php Alice
```

输出结果为：

```
Hello, Alice!
```

## 实际应用场景

### 1. 自动化任务

PHP命令行模式非常适合执行自动化任务，例如备份数据库、生成报告或处理大量数据。以下是一个简单的数据库备份脚本示例：

```php
<?php
$backupFile = 'backup-' . date("Y-m-d-H-i-s") . '.sql';
$command = "mysqldump -u username -ppassword database_name > $backupFile";
exec($command);
echo "Database backup completed: $backupFile\n";
?>
```

### 2. 开发工具

PHP命令行模式可以用于开发工具，例如代码生成器、测试工具或构建工具。以下是一个简单的代码生成器示例：

```php
<?php
if ($argc < 2) {
    echo "Usage: php generate.php <class_name>\n";
    exit(1);
}

$className = $argv[1];
$code = "<?php\n\nclass $className {\n    // Your code here\n}\n";
file_put_contents("$className.php", $code);
echo "Class $className generated successfully.\n";
?>
```

运行脚本生成一个类文件：

```bash
php generate.php MyClass
```

这将生成一个 `MyClass.php` 文件，内容如下：

```php
<?php

class MyClass {
    // Your code here
}
```

## 总结

PHP命令行模式为开发者提供了一个强大的工具，可以在终端中直接运行PHP脚本。通过命令行模式，你可以执行自动化任务、开发工具和调试脚本。掌握PHP CLI的基本用法将极大地提高你的开发效率。

## 附加资源

- [PHP官方文档 - 命令行模式](https://www.php.net/manual/en/features.commandline.php)
- [PHP命令行参数处理](https://www.php.net/manual/en/reserved.variables.argv.php)

## 练习

1. 编写一个PHP脚本，接受两个数字作为参数并输出它们的和。
2. 创建一个PHP脚本，读取一个CSV文件并输出其内容。
3. 编写一个PHP脚本，定期备份指定目录中的所有文件。

通过完成这些练习，你将更好地理解PHP命令行模式的实际应用。