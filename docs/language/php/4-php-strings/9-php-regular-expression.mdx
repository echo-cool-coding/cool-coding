---
title: PHP 正则表达式
description: 学习如何在PHP中使用正则表达式来处理和匹配字符串。本文将从基础概念讲起，逐步深入，并提供实际案例和代码示例。
---

# PHP 正则表达式

正则表达式（Regular Expression，简称Regex）是一种强大的工具，用于在字符串中查找、匹配和替换特定模式的文本。在PHP中，正则表达式广泛应用于表单验证、数据提取、字符串替换等场景。本文将带你从基础开始，逐步掌握PHP中的正则表达式。

## 什么是正则表达式？

正则表达式是一种描述字符串模式的语法。它由一系列字符和特殊符号组成，用于定义搜索模式。通过正则表达式，你可以快速检查一个字符串是否符合某种格式，或者从字符串中提取特定的部分。

### 基本语法

正则表达式的基本语法包括普通字符和元字符。普通字符（如字母、数字）直接匹配它们自己，而元字符则具有特殊含义。以下是一些常见的元字符：

- `.`：匹配任意单个字符（除了换行符）。
- `^`：匹配字符串的开头。
- `$`：匹配字符串的结尾。
- `*`：匹配前面的字符零次或多次。
- `+`：匹配前面的字符一次或多次。
- `?`：匹配前面的字符零次或一次。
- `\d`：匹配任意数字（等价于 `[0-9]`）。
- `\w`：匹配任意字母、数字或下划线（等价于 `[a-zA-Z0-9_]`）。
- `\s`：匹配任意空白字符（包括空格、制表符、换行符等）。

## PHP 中的正则表达式函数

PHP提供了多个函数来处理正则表达式，其中最常用的是 `preg_match()`、`preg_replace()` 和 `preg_split()`。

### 1. `preg_match()`

`preg_match()` 函数用于在字符串中查找匹配的模式。如果找到匹配项，则返回 `1`，否则返回 `0`。

```php
$pattern = '/\d+/'; // 匹配一个或多个数字
$string = 'There are 123 apples.';
if (preg_match($pattern, $string, $matches)) {
    echo "Match found: " . $matches[0];
} else {
    echo "No match found.";
}
```

**输出：**
```
Match found: 123
```

### 2. `preg_replace()`

`preg_replace()` 函数用于在字符串中查找匹配的模式，并将其替换为指定的内容。

```php
$pattern = '/\d+/'; // 匹配一个或多个数字
$replacement = 'X';
$string = 'There are 123 apples.';
$newString = preg_replace($pattern, $replacement, $string);
echo $newString;
```

**输出：**
```
There are X apples.
```

### 3. `preg_split()`

`preg_split()` 函数用于根据正则表达式将字符串分割成数组。

```php
$pattern = '/\s+/'; // 匹配一个或多个空白字符
$string = 'Split this string by spaces';
$parts = preg_split($pattern, $string);
print_r($parts);
```

**输出：**
```
Array
(
    [0] => Split
    [1] => this
    [2] => string
    [3] => by
    [4] => spaces
)
```

## 实际案例

### 案例1：验证电子邮件地址

正则表达式常用于验证用户输入的电子邮件地址是否符合标准格式。

```php
$pattern = '/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/';
$email = 'example@example.com';
if (preg_match($pattern, $email)) {
    echo "Valid email address.";
} else {
    echo "Invalid email address.";
}
```

**输出：**
```
Valid email address.
```

### 案例2：提取URL中的域名

你可以使用正则表达式从URL中提取域名部分。

```php
$pattern = '/https?:\/\/([a-zA-Z0-9.-]+)\//';
$url = 'https://www.example.com/page';
if (preg_match($pattern, $url, $matches)) {
    echo "Domain: " . $matches[1];
} else {
    echo "No domain found.";
}
```

**输出：**
```
Domain: www.example.com
```

## 总结

正则表达式是处理字符串的强大工具，尤其在PHP中，它可以帮助你轻松完成复杂的字符串操作。通过本文的学习，你应该已经掌握了正则表达式的基本语法和PHP中的常用函数。接下来，你可以尝试在实际项目中应用这些知识，例如表单验证、数据提取等。

:::tip 提示
正则表达式虽然强大，但也容易变得复杂。建议在编写复杂的正则表达式时，使用在线工具（如 [regex101.com](https://regex101.com)）进行测试和调试。
:::

## 附加资源与练习

1. **练习1**：编写一个正则表达式，匹配所有以 `.php` 结尾的文件名。
2. **练习2**：使用 `preg_replace()` 函数，将字符串中的所有数字替换为 `#`。
3. **练习3**：编写一个正则表达式，验证一个字符串是否为有效的手机号码（假设手机号码为11位数字）。

通过不断练习，你将更加熟练地掌握正则表达式的使用。祝你学习愉快！