---
title: PHP 模式匹配
description: 了解PHP中的模式匹配，包括正则表达式的基本语法、常见函数以及实际应用场景。适合初学者掌握字符串处理的核心技能。
---

## 介绍

在PHP中，模式匹配是一种强大的工具，用于在字符串中查找、替换或验证特定的模式。最常见的模式匹配工具是**正则表达式**（Regular Expressions，简称Regex）。正则表达式是一种描述字符串模式的语法，可以用来匹配复杂的文本模式。

PHP提供了多种函数来处理正则表达式，例如 `preg_match()`、`preg_replace()` 和 `preg_split()`。通过学习这些函数，你可以轻松地处理字符串中的复杂模式。

---

## 正则表达式基础

正则表达式由一系列字符和特殊符号组成，用于定义搜索模式。以下是一些常见的正则表达式元字符：

- `.`：匹配任意单个字符（除了换行符）。
- `*`：匹配前面的字符零次或多次。
- `+`：匹配前面的字符一次或多次。
- `?`：匹配前面的字符零次或一次。
- `\d`：匹配任意数字（等价于 `[0-9]`）。
- `\w`：匹配任意字母、数字或下划线（等价于 `[a-zA-Z0-9_]`）。
- `[]`：匹配括号内的任意一个字符。
- `^`：匹配字符串的开头。
- `$`：匹配字符串的结尾。

:::tip
正则表达式是区分大小写的。如果需要忽略大小写，可以使用 `i` 修饰符。
:::

---

## PHP 中的正则表达式函数

PHP提供了多个函数来处理正则表达式。以下是三个最常用的函数：

### 1. `preg_match()`

`preg_match()` 用于在字符串中查找匹配的模式。如果找到匹配项，返回 `1`，否则返回 `0`。

```php
$pattern = '/\d+/'; // 匹配一个或多个数字
$string = 'There are 123 apples.';
if (preg_match($pattern, $string, $matches)) {
    echo "Match found: " . $matches[0];
} else {
    echo "No match found.";
}
```

**输出：**
```
Match found: 123
```

### 2. `preg_replace()`

`preg_replace()` 用于替换字符串中匹配的模式。

```php
$pattern = '/\d+/'; // 匹配一个或多个数字
$replacement = 'X';
$string = 'There are 123 apples.';
$result = preg_replace($pattern, $replacement, $string);
echo $result;
```

**输出：**
```
There are X apples.
```

### 3. `preg_split()`

`preg_split()` 用于根据模式将字符串拆分为数组。

```php
$pattern = '/\s+/'; // 匹配一个或多个空白字符
$string = 'Split this string into words';
$result = preg_split($pattern, $string);
print_r($result);
```

**输出：**
```
Array
(
    [0] => Split
    [1] => this
    [2] => string
    [3] => into
    [4] => words
)
```

---

## 实际应用场景

### 1. 验证电子邮件地址

正则表达式常用于验证用户输入的格式，例如电子邮件地址。

```php
$pattern = '/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/';
$email = 'user@example.com';
if (preg_match($pattern, $email)) {
    echo "Valid email address.";
} else {
    echo "Invalid email address.";
}
```

**输出：**
```
Valid email address.
```

### 2. 提取URL中的域名

你可以使用正则表达式从URL中提取域名。

```php
$pattern = '/https?:\/\/([a-zA-Z0-9.-]+)\//';
$url = 'https://www.example.com/page';
if (preg_match($pattern, $url, $matches)) {
    echo "Domain: " . $matches[1];
}
```

**输出：**
```
Domain: www.example.com
```

---

## 总结

PHP中的模式匹配是处理字符串的强大工具，尤其是正则表达式。通过学习 `preg_match()`、`preg_replace()` 和 `preg_split()` 等函数，你可以轻松地查找、替换和拆分字符串中的模式。

:::caution
正则表达式虽然强大，但也可能变得复杂。建议从简单的模式开始，逐步掌握更复杂的语法。
:::

---

## 附加资源与练习

1. **练习：**
   - 编写一个正则表达式，匹配所有以 `.php` 结尾的文件名。
   - 使用 `preg_replace()` 将字符串中的所有空格替换为下划线。

2. **推荐资源：**
   - [PHP官方文档 - 正则表达式](https://www.php.net/manual/en/book.pcre.php)
   - [Regex101](https://regex101.com/)：一个在线正则表达式测试工具。

通过不断练习和探索，你将能够熟练地使用PHP中的模式匹配功能！