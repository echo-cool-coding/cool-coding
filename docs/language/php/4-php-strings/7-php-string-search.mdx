---
title: PHP 字符串查找
description: 学习如何在PHP中查找字符串，掌握常用的字符串查找函数及其实际应用场景。
---

# PHP 字符串查找

在PHP中，字符串查找是一项常见的操作。无论是验证用户输入、解析数据，还是处理文本内容，字符串查找都扮演着重要的角色。本文将详细介绍PHP中常用的字符串查找方法，并通过实际案例帮助你更好地理解和应用这些技术。

## 什么是字符串查找？

字符串查找是指在给定的字符串中搜索特定的子字符串或字符。PHP提供了多种内置函数来实现这一功能，例如 `strpos()`、`strstr()`、`stripos()` 和 `stristr()` 等。这些函数可以帮助你快速定位目标字符串的位置或判断其是否存在。

## 常用字符串查找函数

### 1. `strpos()` 函数

`strpos()` 函数用于查找子字符串在字符串中首次出现的位置。如果找到子字符串，则返回其起始位置（从0开始计数）；如果未找到，则返回 `false`。

**语法：**
```php
strpos(string $haystack, string $needle, int $offset = 0): int|false
```

- `$haystack`：要在其中查找的字符串。
- `$needle`：要查找的子字符串。
- `$offset`（可选）：从字符串的哪个位置开始查找，默认为0。

**示例：**
```php
$text = "Hello, welcome to the world of PHP!";
$position = strpos($text, "welcome");

if ($position !== false) {
    echo "子字符串 'welcome' 在位置 $position 处找到。";
} else {
    echo "未找到子字符串 'welcome'。";
}
```

**输出：**
```
子字符串 'welcome' 在位置 7 处找到。
```

:::note
`strpos()` 是区分大小写的。如果你需要不区分大小写的查找，可以使用 `stripos()` 函数。
:::

### 2. `strstr()` 函数

`strstr()` 函数用于查找子字符串在字符串中首次出现的位置，并返回从该位置到字符串末尾的部分。如果未找到子字符串，则返回 `false`。

**语法：**
```php
strstr(string $haystack, string $needle, bool $before_needle = false): string|false
```

- `$haystack`：要在其中查找的字符串。
- `$needle`：要查找的子字符串。
- `$before_needle`（可选）：如果为 `true`，则返回子字符串之前的部分。

**示例：**
```php
$text = "Hello, welcome to the world of PHP!";
$result = strstr($text, "welcome");

if ($result !== false) {
    echo "找到子字符串：$result";
} else {
    echo "未找到子字符串。";
}
```

**输出：**
```
找到子字符串：welcome to the world of PHP!
```

:::tip
`strstr()` 也是区分大小写的。如果你需要不区分大小写的查找，可以使用 `stristr()` 函数。
:::

### 3. `stripos()` 和 `stristr()` 函数

`stripos()` 和 `stristr()` 是 `strpos()` 和 `strstr()` 的不区分大小写版本。它们的用法与区分大小写的版本相同，但在查找时会忽略大小写。

**示例：**
```php
$text = "Hello, Welcome to the world of PHP!";
$position = stripos($text, "welcome");

if ($position !== false) {
    echo "子字符串 'welcome' 在位置 $position 处找到。";
} else {
    echo "未找到子字符串 'welcome'。";
}
```

**输出：**
```
子字符串 'welcome' 在位置 7 处找到。
```

## 实际应用场景

### 1. 验证电子邮件地址

在用户注册或登录时，通常需要验证电子邮件地址的格式是否正确。我们可以使用 `strpos()` 函数来检查电子邮件地址中是否包含 `@` 符号。

**示例：**
```php
$email = "user@example.com";

if (strpos($email, "@") !== false) {
    echo "电子邮件地址格式正确。";
} else {
    echo "电子邮件地址格式不正确。";
}
```

**输出：**
```
电子邮件地址格式正确。
```

### 2. 提取域名

假设你有一个URL字符串，并希望从中提取域名部分。可以使用 `strstr()` 函数来实现。

**示例：**
```php
$url = "https://www.example.com/path/to/page";
$domain = strstr($url, "www.example.com", true);

echo "域名是：$domain";
```

**输出：**
```
域名是：https://www.example.com
```

## 总结

在PHP中，字符串查找是一项基础但非常重要的操作。通过掌握 `strpos()`、`strstr()`、`stripos()` 和 `stristr()` 等函数，你可以轻松地在字符串中查找特定的子字符串或字符。这些函数在实际开发中有着广泛的应用，例如验证用户输入、解析数据等。

## 附加资源与练习

- **练习1**：编写一个PHP脚本，检查用户输入的字符串中是否包含特定的关键词。
- **练习2**：使用 `strstr()` 函数从一个URL中提取协议部分（如 `http` 或 `https`）。
- **进一步学习**：查阅PHP官方文档，了解更多关于字符串处理的函数，如 `substr()`、`str_replace()` 等。

通过不断练习和探索，你将能够更加熟练地运用PHP中的字符串查找功能，为你的编程之旅打下坚实的基础。