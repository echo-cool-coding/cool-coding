---
title: PHP 方法重写
description: 了解PHP中的方法重写，掌握如何在子类中重写父类方法以实现多态性。本文将通过代码示例和实际案例，帮助初学者深入理解这一概念。
---

# PHP 方法重写

在面向对象编程（OOP）中，**方法重写**是一个重要的概念，它允许子类重新定义父类中已经存在的方法。通过方法重写，子类可以根据自己的需求修改或扩展父类的行为，从而实现多态性。本文将详细介绍PHP中的方法重写，并通过代码示例和实际案例帮助你更好地理解这一概念。

## 什么是方法重写？

方法重写（Method Overriding）是指子类定义一个与父类中同名的方法，从而覆盖父类中的方法实现。当子类对象调用该方法时，将执行子类中的方法，而不是父类中的方法。

:::note
方法重写是实现多态性的一种方式。多态性允许不同的对象对同一消息做出不同的响应。
:::

## 方法重写的基本语法

在PHP中，方法重写的语法非常简单。只需在子类中定义一个与父类方法同名的方法即可。以下是一个简单的示例：

```php
class Animal {
    public function makeSound() {
        echo "Animal sound\n";
    }
}

class Dog extends Animal {
    public function makeSound() {
        echo "Bark\n";
    }
}

$dog = new Dog();
$dog->makeSound(); // 输出: Bark
```

在这个示例中，`Dog` 类重写了 `Animal` 类中的 `makeSound` 方法。当我们调用 `$dog->makeSound()` 时，输出的是 `Bark`，而不是 `Animal sound`。

## 方法重写的规则

在PHP中，方法重写需要遵循以下规则：

1. **方法名必须相同**：子类中的方法名必须与父类中的方法名完全相同。
2. **参数列表必须相同**：子类方法的参数列表必须与父类方法的参数列表一致。
3. **访问修饰符不能更严格**：子类方法的访问修饰符不能比父类方法的访问修饰符更严格。例如，如果父类方法是 `public`，子类方法不能是 `protected` 或 `private`。

:::caution
如果子类方法的访问修饰符比父类方法更严格，PHP会抛出一个致命错误。
:::

## 实际案例：计算不同形状的面积

让我们通过一个实际案例来展示方法重写的应用。假设我们有一个 `Shape` 类，它有一个 `calculateArea` 方法。我们可以通过继承 `Shape` 类并重写 `calculateArea` 方法来计算不同形状的面积。

```php
class Shape {
    public function calculateArea() {
        echo "Area calculation for generic shape\n";
    }
}

class Circle extends Shape {
    private $radius;

    public function __construct($radius) {
        $this->radius = $radius;
    }

    public function calculateArea() {
        $area = 3.14 * $this->radius * $this->radius;
        echo "Area of the circle: $area\n";
    }
}

class Rectangle extends Shape {
    private $width;
    private $height;

    public function __construct($width, $height) {
        $this->width = $width;
        $this->height = $height;
    }

    public function calculateArea() {
        $area = $this->width * $this->height;
        echo "Area of the rectangle: $area\n";
    }
}

$circle = new Circle(5);
$rectangle = new Rectangle(4, 6);

$circle->calculateArea(); // 输出: Area of the circle: 78.5
$rectangle->calculateArea(); // 输出: Area of the rectangle: 24
```

在这个案例中，`Circle` 和 `Rectangle` 类都重写了 `Shape` 类中的 `calculateArea` 方法，分别实现了计算圆形和矩形面积的逻辑。

## 总结

方法重写是PHP面向对象编程中的一个重要概念，它允许子类重新定义父类中的方法，从而实现多态性。通过方法重写，我们可以根据子类的需求修改或扩展父类的行为。

:::tip
在实际开发中，方法重写常用于实现接口或抽象类的具体行为，或者为特定子类提供定制化的功能。
:::

## 附加资源与练习

为了巩固你对方法重写的理解，建议你尝试以下练习：

1. 创建一个 `Vehicle` 类，包含一个 `startEngine` 方法。然后创建 `Car` 和 `Motorcycle` 子类，分别重写 `startEngine` 方法，输出不同的启动信息。
2. 尝试在子类中重写父类的 `__construct` 方法，并观察构造函数的行为变化。

通过实践，你将更好地掌握方法重写的概念及其在实际开发中的应用。