---
title: PHP 属性重写
description: 了解PHP中属性重写的概念及其在继承与多态中的应用。本文将通过代码示例和实际案例，帮助初学者掌握属性重写的基本原理和使用方法。
---

## 介绍

在PHP中，继承是面向对象编程（OOP）的核心概念之一。通过继承，子类可以继承父类的属性和方法。然而，在某些情况下，子类可能需要修改或扩展父类的属性。这就是**属性重写**的用武之地。

属性重写允许子类重新定义父类中已存在的属性，从而改变其默认值或行为。理解属性重写对于掌握PHP的继承与多态至关重要。

## 属性重写的基本概念

在PHP中，子类可以通过重新定义父类的属性来实现属性重写。重写后的属性将覆盖父类中的同名属性。需要注意的是，PHP中的属性重写仅限于**可见性**和**默认值**的修改，而不能改变属性的类型。

### 代码示例

以下是一个简单的示例，展示了如何在子类中重写父类的属性：

```php
class ParentClass {
    public $property = "Parent Property";
}

class ChildClass extends ParentClass {
    public $property = "Child Property";
}

$parent = new ParentClass();
$child = new ChildClass();

echo $parent->property; // 输出: Parent Property
echo $child->property;  // 输出: Child Property
```

在这个示例中，`ChildClass` 重写了 `ParentClass` 中的 `$property` 属性，将其值从 `"Parent Property"` 修改为 `"Child Property"`。

## 属性重写的规则

1. **可见性**：子类中重写的属性必须与父类中的属性具有相同或更宽松的可见性。例如，如果父类中的属性是 `protected`，子类中的重写属性可以是 `protected` 或 `public`，但不能是 `private`。

2. **默认值**：子类可以修改父类属性的默认值，但不能改变其类型。

3. **静态属性**：静态属性也可以被重写，但重写后的静态属性将独立于父类的静态属性。

### 代码示例：可见性规则

```php
class ParentClass {
    protected $property = "Parent Property";
}

class ChildClass extends ParentClass {
    public $property = "Child Property"; // 允许，可见性更宽松
}

$child = new ChildClass();
echo $child->property; // 输出: Child Property
```

在这个示例中，`ChildClass` 将 `$property` 的可见性从 `protected` 修改为 `public`，这是允许的。

## 实际应用场景

属性重写在许多实际场景中非常有用。例如，假设你正在开发一个电子商务系统，其中有一个 `Product` 类表示商品，而 `DiscountedProduct` 类表示打折商品。你可以在 `DiscountedProduct` 类中重写 `Product` 类的价格属性，以反映打折后的价格。

### 代码示例：电子商务系统

```php
class Product {
    public $price = 100;
}

class DiscountedProduct extends Product {
    public $price = 80; // 重写价格属性
}

$product = new Product();
$discountedProduct = new DiscountedProduct();

echo "Original Price: " . $product->price . "\n"; // 输出: Original Price: 100
echo "Discounted Price: " . $discountedProduct->price . "\n"; // 输出: Discounted Price: 80
```

在这个示例中，`DiscountedProduct` 类重写了 `Product` 类的 `$price` 属性，以反映打折后的价格。

## 总结

属性重写是PHP继承与多态中的一个重要概念。通过重写属性，子类可以修改或扩展父类的行为，从而满足特定的需求。理解属性重写的规则和应用场景，将帮助你更好地设计和使用PHP中的类与对象。

## 附加资源与练习

- **练习**：尝试创建一个 `Vehicle` 类和一个 `Car` 类，并在 `Car` 类中重写 `Vehicle` 类的 `$speed` 属性。
- **进一步阅读**：查阅PHP官方文档，了解更多关于继承与多态的高级特性。

:::tip
记住，属性重写不仅仅是修改值，它还涉及到可见性和静态属性的处理。确保在重写属性时遵循PHP的规则。
:::