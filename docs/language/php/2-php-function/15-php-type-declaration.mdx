---
title: PHP 类型声明
description: 了解 PHP 中的类型声明，包括如何使用它们来定义函数参数和返回值的类型，以及它们如何帮助提高代码的可读性和健壮性。
---

## 介绍

在 PHP 中，类型声明（Type Declarations）是一种用于指定函数参数和返回值类型的功能。通过类型声明，你可以明确地告诉 PHP 某个变量或返回值应该是什么类型，从而减少错误并提高代码的可读性。

PHP 支持多种类型声明，包括标量类型（如 `int`、`float`、`string`、`bool`）、复合类型（如 `array`、`object`）以及特殊类型（如 `callable` 和 `iterable`）。此外，PHP 7.0 引入了返回类型声明，允许你指定函数的返回值类型。

## 基本语法

### 参数类型声明

在 PHP 中，你可以在函数定义时为参数指定类型。例如：

```php
function add(int $a, int $b): int {
    return $a + $b;
}
```

在这个例子中，`add` 函数的两个参数 `$a` 和 `$b` 都被声明为 `int` 类型，返回值也被声明为 `int` 类型。

### 返回类型声明

返回类型声明使用 `: type` 语法，放在函数定义的末尾。例如：

```php
function multiply(float $a, float $b): float {
    return $a * $b;
}
```

在这个例子中，`multiply` 函数的返回值被声明为 `float` 类型。

## 类型声明的类型

PHP 支持多种类型声明，以下是常见的类型：

- **标量类型**：
  - `int`：整数
  - `float`：浮点数
  - `string`：字符串
  - `bool`：布尔值

- **复合类型**：
  - `array`：数组
  - `object`：对象

- **特殊类型**：
  - `callable`：可调用类型（如函数或方法）
  - `iterable`：可迭代类型（如数组或实现了 `Traversable` 接口的对象）

## 严格类型模式

PHP 7.0 引入了严格类型模式，可以通过在文件顶部添加 `declare(strict_types=1);` 来启用。在严格类型模式下，PHP 会对类型声明进行更严格的检查。

```php
declare(strict_types=1);

function divide(int $a, int $b): float {
    return $a / $b;
}

echo divide(10, 3); // 输出 3.3333333333333
```

:::note
在严格类型模式下，如果传递的参数类型与声明的类型不匹配，PHP 会抛出一个 `TypeError` 异常。
:::

## 实际应用场景

### 场景 1：确保函数参数类型

假设你正在编写一个处理用户输入的函数，你希望确保传入的参数是整数：

```php
function processUserAge(int $age): string {
    return "User age is: " . $age;
}

echo processUserAge(25); // 输出 "User age is: 25"
```

### 场景 2：确保函数返回值类型

假设你正在编写一个计算平均值的函数，你希望确保返回值是浮点数：

```php
function calculateAverage(array $numbers): float {
    $sum = array_sum($numbers);
    $count = count($numbers);
    return $sum / $count;
}

echo calculateAverage([1, 2, 3, 4, 5]); // 输出 3.0
```

## 总结

PHP 类型声明是一种强大的工具，可以帮助你编写更健壮、更可读的代码。通过明确指定函数参数和返回值的类型，你可以减少错误并提高代码的可维护性。

:::tip
在实际开发中，建议尽可能使用类型声明，尤其是在处理用户输入或外部数据时。这可以帮助你尽早发现潜在的错误。
:::

## 附加资源

- [PHP 官方文档：类型声明](https://www.php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration)
- [PHP 官方文档：严格类型模式](https://www.php.net/manual/en/language.types.declarations.php#language.types.declarations.strict)

## 练习

1. 编写一个函数 `isEven`，接受一个整数参数并返回一个布尔值，表示该整数是否为偶数。
2. 编写一个函数 `concatStrings`，接受两个字符串参数并返回它们的连接结果。
3. 启用严格类型模式，并尝试传递错误类型的参数，观察 PHP 的行为。