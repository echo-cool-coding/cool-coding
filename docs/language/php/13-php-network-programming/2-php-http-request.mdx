---
title: PHP HTTP请求
description: 学习如何使用PHP进行HTTP请求，包括GET和POST请求，以及如何处理响应数据。适合初学者掌握网络编程的基础知识。
---

## 介绍

在Web开发中，HTTP请求是客户端与服务器之间通信的基础。PHP作为一种广泛使用的服务器端脚本语言，提供了多种方式来处理HTTP请求。本文将详细介绍如何使用PHP发送HTTP请求，并处理服务器返回的响应数据。

## HTTP请求基础

HTTP（超文本传输协议）是Web上数据交换的基础。最常见的HTTP请求方法包括GET和POST：

- **GET请求**：用于从服务器获取数据。数据通过URL传递。
- **POST请求**：用于向服务器发送数据。数据通过请求体传递。

## 使用PHP发送GET请求

PHP提供了多种方式来发送HTTP请求，其中最常用的是使用`file_get_contents`函数和`cURL`库。

### 使用`file_get_contents`发送GET请求

`file_get_contents`函数可以用于读取文件内容，也可以用于发送简单的GET请求。

```php
<?php
$url = "https://api.example.com/data";
$response = file_get_contents($url);
echo $response;
?>
```

**输入：**
- `$url`：目标API的URL。

**输出：**
- `$response`：服务器返回的响应数据。

### 使用`cURL`发送GET请求

`cURL`是一个功能强大的库，支持多种协议，包括HTTP、HTTPS等。

```php
<?php
$url = "https://api.example.com/data";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);
echo $response;
?>
```

**输入：**
- `$url`：目标API的URL。

**输出：**
- `$response`：服务器返回的响应数据。

## 使用PHP发送POST请求

POST请求通常用于提交表单数据或上传文件。与GET请求不同，POST请求的数据通过请求体发送。

### 使用`cURL`发送POST请求

```php
<?php
$url = "https://api.example.com/submit";
$data = array('name' => 'John', 'email' => 'john@example.com');

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);
echo $response;
?>
```

**输入：**
- `$url`：目标API的URL。
- `$data`：要发送的数据数组。

**输出：**
- `$response`：服务器返回的响应数据。

## 处理HTTP响应

发送HTTP请求后，服务器会返回响应数据。通常，响应数据是JSON格式的字符串，可以使用`json_decode`函数将其转换为PHP数组或对象。

```php
<?php
$response = '{"name": "John", "email": "john@example.com"}';
$data = json_decode($response, true);
print_r($data);
?>
```

**输出：**
```php
Array
(
    [name] => John
    [email] => john@example.com
)
```

## 实际案例：获取天气数据

假设我们需要从一个天气API获取当前天气数据。我们可以使用GET请求来获取数据，并解析JSON响应。

```php
<?php
$apiKey = "your_api_key";
$city = "London";
$url = "https://api.weatherapi.com/v1/current.json?key=$apiKey&q=$city";

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$response = curl_exec($ch);
curl_close($ch);

$weatherData = json_decode($response, true);
echo "Current temperature in $city is " . $weatherData['current']['temp_c'] . "°C";
?>
```

**输出：**
```
Current temperature in London is 15°C
```

## 总结

通过本文，我们学习了如何使用PHP发送HTTP请求，包括GET和POST请求，并处理服务器返回的响应数据。掌握这些基础知识对于进行Web开发和API集成至关重要。

## 附加资源

- [PHP官方文档](https://www.php.net/manual/en/)
- [cURL官方文档](https://curl.se/libcurl/)
- [JSON格式介绍](https://www.json.org/json-en.html)

## 练习

1. 使用`file_get_contents`函数从一个公开的API获取数据，并解析JSON响应。
2. 使用`cURL`库发送一个POST请求，提交表单数据，并处理服务器返回的响应。
3. 尝试从一个天气API获取多个城市的天气数据，并将结果显示在一个表格中。
