---
title: PHP 面向对象基础
description: 本教程将带你了解PHP面向对象编程的基础知识，包括类、对象、属性和方法的概念，并通过实际案例帮助你掌握这些核心概念。
---

## 介绍

面向对象编程（Object-Oriented Programming，简称OOP）是一种编程范式，它将数据和操作数据的方法封装在一起，形成一个“对象”。PHP从版本5开始全面支持面向对象编程，这使得开发者能够以更模块化、可维护和可扩展的方式编写代码。

在面向对象编程中，**类（Class）**是对象的蓝图或模板，而**对象（Object）**是类的实例。类定义了对象的属性（数据）和方法（行为）。通过面向对象编程，你可以更好地组织代码，减少重复，并提高代码的可读性和可维护性。

## 类与对象

### 类的定义

在PHP中，类通过 `class` 关键字定义。类可以包含属性和方法。以下是一个简单的类定义示例：

```php
class Car {
    // 属性
    public $brand;
    public $model;

    // 方法
    public function startEngine() {
        return "Engine started!";
    }
}
```

在这个例子中，`Car` 类有两个属性：`$brand` 和 `$model`，以及一个方法 `startEngine()`。

### 创建对象

要使用类，你需要创建该类的对象。对象是类的实例，可以通过 `new` 关键字创建：

```php
$myCar = new Car();
$myCar->brand = "Toyota";
$myCar->model = "Corolla";

echo $myCar->startEngine(); // 输出: Engine started!
```

在这个例子中，`$myCar` 是 `Car` 类的一个对象。我们可以通过 `->` 操作符访问对象的属性和方法。

## 属性与方法

### 属性

属性是类中的变量，用于存储对象的状态。属性可以是公共的（`public`）、私有的（`private`）或受保护的（`protected`）。公共属性可以在类的外部直接访问，而私有属性只能在类的内部访问。

```php
class Person {
    public $name;
    private $age;

    public function setAge($age) {
        $this->age = $age;
    }

    public function getAge() {
        return $this->age;
    }
}

$person = new Person();
$person->name = "Alice";
$person->setAge(30);

echo $person->name; // 输出: Alice
echo $person->getAge(); // 输出: 30
```

在这个例子中，`$name` 是公共属性，可以直接访问，而 `$age` 是私有属性，只能通过 `setAge()` 和 `getAge()` 方法访问。

### 方法

方法是类中的函数，用于定义对象的行为。方法可以是公共的、私有的或受保护的。公共方法可以在类的外部调用，而私有方法只能在类的内部调用。

```php
class Calculator {
    public function add($a, $b) {
        return $a + $b;
    }

    private function subtract($a, $b) {
        return $a - $b;
    }

    public function calculate($a, $b) {
        return $this->subtract($a, $b);
    }
}

$calc = new Calculator();
echo $calc->add(5, 3); // 输出: 8
echo $calc->calculate(5, 3); // 输出: 2
```

在这个例子中，`add()` 是公共方法，可以直接调用，而 `subtract()` 是私有方法，只能通过 `calculate()` 方法调用。

## 构造函数与析构函数

### 构造函数

构造函数是一个特殊的方法，当创建对象时自动调用。它通常用于初始化对象的属性。在PHP中，构造函数通过 `__construct()` 方法定义。

```php
class Dog {
    public $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function bark() {
        return "Woof! My name is " . $this->name;
    }
}

$dog = new Dog("Buddy");
echo $dog->bark(); // 输出: Woof! My name is Buddy
```

在这个例子中，`__construct()` 方法在创建 `Dog` 对象时自动调用，并将 `$name` 属性初始化为 "Buddy"。

### 析构函数

析构函数是另一个特殊的方法，当对象被销毁时自动调用。它通常用于释放资源或执行清理操作。在PHP中，析构函数通过 `__destruct()` 方法定义。

```php
class FileHandler {
    private $file;

    public function __construct($filename) {
        $this->file = fopen($filename, "w");
    }

    public function write($text) {
        fwrite($this->file, $text);
    }

    public function __destruct() {
        fclose($this->file);
        echo "File closed.";
    }
}

$fileHandler = new FileHandler("example.txt");
$fileHandler->write("Hello, World!");
// 输出: File closed.
```

在这个例子中，`__destruct()` 方法在 `FileHandler` 对象被销毁时自动调用，并关闭文件。

## 继承

继承是面向对象编程中的一个重要概念，它允许一个类继承另一个类的属性和方法。通过继承，你可以创建一个新的类，并重用现有类的代码。

```php
class Animal {
    public $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function speak() {
        return "Animal sound!";
    }
}

class Cat extends Animal {
    public function speak() {
        return "Meow!";
    }
}

$cat = new Cat("Whiskers");
echo $cat->speak(); // 输出: Meow!
```

在这个例子中，`Cat` 类继承了 `Animal` 类的属性和方法，并重写了 `speak()` 方法。

## 实际案例：用户管理系统

让我们通过一个实际案例来展示PHP面向对象编程的应用。假设我们要创建一个简单的用户管理系统，用户可以注册、登录和查看个人信息。

```php
class User {
    private $username;
    private $password;

    public function __construct($username, $password) {
        $this->username = $username;
        $this->password = $password;
    }

    public function login($inputPassword) {
        if ($inputPassword === $this->password) {
            return "Login successful! Welcome, " . $this->username;
        } else {
            return "Login failed!";
        }
    }

    public function getProfile() {
        return "Username: " . $this->username;
    }
}

$user = new User("alice", "password123");
echo $user->login("password123"); // 输出: Login successful! Welcome, alice
echo $user->getProfile(); // 输出: Username: alice
```

在这个例子中，`User` 类封装了用户的登录和查看个人信息的功能。通过面向对象编程，我们可以轻松地扩展这个系统，例如添加更多的用户管理功能。

## 总结

在本教程中，我们介绍了PHP面向对象编程的基础知识，包括类、对象、属性、方法、构造函数、析构函数和继承。通过这些概念，你可以编写更模块化、可维护和可扩展的PHP代码。

:::tip 提示
如果你想深入学习PHP面向对象编程，可以尝试以下练习：
1. 创建一个 `BankAccount` 类，包含存款、取款和查看余额的功能。
2. 扩展 `User` 类，添加用户角色（如管理员、普通用户）和权限管理功能。
:::

## 附加资源

- [PHP官方文档 - 面向对象编程](https://www.php.net/manual/zh/language.oop5.php)
- [PHP面向对象编程教程](https://www.w3schools.com/php/php_oop.asp)
- [PHP设计模式](https://refactoring.guru/design-patterns/php)

希望本教程对你有所帮助，祝你编程愉快！