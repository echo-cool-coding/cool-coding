---
title: PHP 数组合并
description: 学习如何在PHP中合并数组，了解数组合并的不同方法及其实际应用场景。
---

# PHP 数组合并

在PHP中，数组是一种非常强大的数据结构，用于存储多个值。有时，我们需要将两个或多个数组合并成一个数组。PHP提供了多种方法来实现数组合并，本文将详细介绍这些方法及其使用场景。

## 什么是数组合并？

数组合并是指将两个或多个数组的元素组合成一个新的数组。合并后的数组包含所有原始数组的元素。PHP提供了多种函数来实现数组合并，包括 `array_merge()`、`array_merge_recursive()` 和 `+` 运算符。

## 使用 `array_merge()` 合并数组

`array_merge()` 是PHP中最常用的数组合并函数。它将一个或多个数组合并成一个新数组。如果输入数组中有相同的字符串键名，后面的值将覆盖前面的值。

### 示例

```php
$array1 = array("color" => "red", 2, 4);
$array2 = array("a", "b", "color" => "green", "shape" => "trapezoid", 4);
$result = array_merge($array1, $array2);
print_r($result);
```

**输出：**

```php
Array
(
    [color] => green
    [0] => 2
    [1] => 4
    [2] => a
    [3] => b
    [shape] => trapezoid
    [4] => 4
)
```

:::note
注意：如果数组中有相同的数字键名，`array_merge()` 会重新索引这些键名，从0开始。
:::

## 使用 `array_merge_recursive()` 合并数组

`array_merge_recursive()` 函数与 `array_merge()` 类似，但它会递归地合并数组。如果输入数组中有相同的键名，且这些键名对应的值也是数组，那么这些值会被合并成一个数组。

### 示例

```php
$array1 = array("color" => array("favorite" => "red"), 5);
$array2 = array(10, "color" => array("favorite" => "green", "blue"));
$result = array_merge_recursive($array1, $array2);
print_r($result);
```

**输出：**

```php
Array
(
    [color] => Array
        (
            [favorite] => Array
                (
                    [0] => red
                    [1] => green
                )

            [0] => blue
        )

    [0] => 5
    [1] => 10
)
```

:::tip
提示：`array_merge_recursive()` 适用于需要合并多维数组的场景。
:::

## 使用 `+` 运算符合并数组

PHP中的 `+` 运算符也可以用于合并数组。与 `array_merge()` 不同，`+` 运算符不会覆盖相同键名的值。如果两个数组中有相同的键名，第一个数组的值将保留。

### 示例

```php
$array1 = array("color" => "red", 2, 4);
$array2 = array("a", "b", "color" => "green", "shape" => "trapezoid", 4);
$result = $array1 + $array2;
print_r($result);
```

**输出：**

```php
Array
(
    [color] => red
    [0] => 2
    [1] => 4
    [shape] => trapezoid
)
```

:::caution
注意：`+` 运算符不会重新索引数字键名，因此可能会导致键名冲突。
:::

## 实际应用场景

### 场景1：合并配置数组

在开发Web应用程序时，通常会有多个配置文件。我们可以使用 `array_merge()` 将这些配置文件合并成一个最终的配置数组。

```php
$defaultConfig = array("debug" => false, "logLevel" => "info");
$userConfig = array("debug" => true, "timeout" => 30);
$finalConfig = array_merge($defaultConfig, $userConfig);
print_r($finalConfig);
```

**输出：**

```php
Array
(
    [debug] => true
    [logLevel] => info
    [timeout] => 30
)
```

### 场景2：合并多维数组

在处理多维数组时，`array_merge_recursive()` 非常有用。例如，合并多个用户的偏好设置。

```php
$user1Prefs = array("color" => array("favorite" => "red"), "fontSize" => 12);
$user2Prefs = array("color" => array("favorite" => "blue"), "fontSize" => 14);
$combinedPrefs = array_merge_recursive($user1Prefs, $user2Prefs);
print_r($combinedPrefs);
```

**输出：**

```php
Array
(
    [color] => Array
        (
            [favorite] => Array
                (
                    [0] => red
                    [1] => blue
                )
        )

    [fontSize] => 14
)
```

## 总结

在PHP中，数组合并是一个常见的操作，可以通过 `array_merge()`、`array_merge_recursive()` 和 `+` 运算符来实现。每种方法都有其特定的使用场景：

- 使用 `array_merge()` 合并数组并覆盖相同键名的值。
- 使用 `array_merge_recursive()` 递归合并多维数组。
- 使用 `+` 运算符合并数组并保留第一个数组的值。

## 附加资源与练习

- **练习1**：创建一个包含多个数组的PHP脚本，并使用 `array_merge()` 将它们合并。观察合并后的数组结构。
- **练习2**：尝试使用 `array_merge_recursive()` 合并两个多维数组，并分析结果。
- **练习3**：比较 `array_merge()` 和 `+` 运算符在合并数组时的区别。

通过实践这些练习，您将更好地理解PHP中的数组合并操作。