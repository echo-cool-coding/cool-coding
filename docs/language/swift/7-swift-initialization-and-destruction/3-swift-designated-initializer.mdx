---
title: Swift 指定初始化器
description: 了解Swift中的指定初始化器，掌握如何通过指定初始化器为类或结构体设置初始状态。
---

# Swift 指定初始化器

在Swift中，**指定初始化器**（Designated Initializer）是类或结构体的主要初始化方法。它负责确保类的所有属性在对象创建时都被正确初始化。指定初始化器是初始化过程的起点，通常用于设置类的核心属性。

## 什么是指定初始化器？

指定初始化器是类或结构体中**最主要的初始化方法**。它负责初始化类的所有存储属性，并确保类的实例在创建时处于有效状态。每个类至少有一个指定初始化器，而结构体则默认会生成一个成员初始化器（Memberwise Initializer），除非你显式定义了自己的初始化器。

:::note
指定初始化器通常以 `init` 关键字开头，并且不返回任何值。它的主要任务是确保所有属性都被正确初始化。
:::

## 指定初始化器的基本语法

指定初始化器的语法非常简单，以下是一个基本的示例：

```swift
class Person {
    var name: String
    var age: Int

    // 指定初始化器
    init(name: String, age: Int) {
        self.name = name
        self.age = age
    }
}
```

在这个例子中，`init(name: String, age: Int)` 是指定初始化器。它接收两个参数 `name` 和 `age`，并将它们分别赋值给类的属性 `self.name` 和 `self.age`。

## 指定初始化器的作用

指定初始化器的主要作用是确保类的所有属性在对象创建时都被正确初始化。如果没有指定初始化器，类的属性将无法被正确设置，从而导致编译错误。

:::caution
如果类中有未初始化的属性，Swift编译器会报错。因此，指定初始化器必须确保所有属性都被初始化。
:::

## 指定初始化器的实际应用

让我们通过一个实际案例来理解指定初始化器的应用场景。

### 案例：创建一个简单的银行账户类

假设我们要创建一个表示银行账户的类 `BankAccount`，它包含账户持有人的姓名和账户余额。我们需要确保在创建账户时，这两个属性都被正确初始化。

```swift
class BankAccount {
    var accountHolder: String
    var balance: Double

    // 指定初始化器
    init(accountHolder: String, initialBalance: Double) {
        self.accountHolder = accountHolder
        self.balance = initialBalance
    }
}

// 使用指定初始化器创建实例
let account = BankAccount(accountHolder: "John Doe", initialBalance: 1000.0)
print("Account Holder: \(account.accountHolder), Balance: \(account.balance)")
```

**输出：**
```
Account Holder: John Doe, Balance: 1000.0
```

在这个例子中，`init(accountHolder: String, initialBalance: Double)` 是指定初始化器。它确保在创建 `BankAccount` 实例时，`accountHolder` 和 `balance` 属性都被正确初始化。

## 指定初始化器与便利初始化器的关系

在Swift中，类可以有多个初始化器，其中一个是**指定初始化器**，其他是**便利初始化器**（Convenience Initializer）。便利初始化器必须调用同一个类中的指定初始化器来完成初始化过程。

:::tip
便利初始化器通常用于提供更简单的初始化方式，但它们最终必须调用指定初始化器来完成初始化。
:::

以下是一个包含便利初始化器的示例：

```swift
class BankAccount {
    var accountHolder: String
    var balance: Double

    // 指定初始化器
    init(accountHolder: String, initialBalance: Double) {
        self.accountHolder = accountHolder
        self.balance = initialBalance
    }

    // 便利初始化器
    convenience init(accountHolder: String) {
        self.init(accountHolder: accountHolder, initialBalance: 0.0)
    }
}

// 使用便利初始化器创建实例
let account = BankAccount(accountHolder: "Jane Doe")
print("Account Holder: \(account.accountHolder), Balance: \(account.balance)")
```

**输出：**
```
Account Holder: Jane Doe, Balance: 0.0
```

在这个例子中，`convenience init(accountHolder: String)` 是便利初始化器。它调用了指定初始化器 `init(accountHolder: String, initialBalance: Double)`，并将 `initialBalance` 设置为 `0.0`。

## 总结

指定初始化器是Swift中类或结构体的主要初始化方法。它负责确保类的所有属性在对象创建时都被正确初始化。每个类至少有一个指定初始化器，而结构体则默认会生成一个成员初始化器。

在实际开发中，指定初始化器通常用于设置类的核心属性，而便利初始化器则用于提供更简单的初始化方式。理解指定初始化器的工作原理对于编写健壮的Swift代码至关重要。

## 附加资源与练习

- **练习1**：创建一个表示汽车的类 `Car`，包含属性 `make`、`model` 和 `year`，并为其编写一个指定初始化器。
- **练习2**：在 `Car` 类中添加一个便利初始化器，允许用户只提供 `make` 和 `model`，并将 `year` 设置为当前年份。

:::tip
尝试在练习中使用 `Date` 类来获取当前年份，并将其赋值给 `year` 属性。
:::

通过练习，你将更好地理解指定初始化器和便利初始化器的使用场景和区别。