---
title: Swift LLDB 命令
description: 学习如何使用 LLDB 调试工具来调试 Swift 代码。本文涵盖了常用的 LLDB 命令及其实际应用场景，帮助初学者掌握调试技巧。
---

## 介绍

LLDB（Low-Level Debugger）是 Xcode 默认的调试工具，用于调试 Swift 和 Objective-C 代码。它提供了强大的命令行界面，允许开发者在程序运行时检查变量、设置断点、执行代码等。对于 Swift 开发者来说，掌握 LLDB 命令是调试和优化代码的关键技能。

本文将逐步介绍常用的 LLDB 命令，并通过实际案例展示如何在实际开发中使用这些命令。

## 基本 LLDB 命令

### 1. 启动 LLDB

在 Xcode 中，当你运行程序并遇到断点时，LLDB 会自动启动。你也可以在终端中手动启动 LLDB 来调试可执行文件：

```bash
lldb <可执行文件路径>
```

### 2. 设置断点

断点是调试过程中最常用的工具之一。你可以使用 `breakpoint set` 命令在特定位置设置断点：

```bash
(lldb) breakpoint set --file main.swift --line 10
```

这会在 `main.swift` 文件的第 10 行设置一个断点。

### 3. 查看断点

使用 `breakpoint list` 命令可以查看当前设置的所有断点：

```bash
(lldb) breakpoint list
```

### 4. 继续执行

当程序在断点处暂停时，你可以使用 `continue` 命令继续执行程序：

```bash
(lldb) continue
```

### 5. 单步执行

`step` 命令允许你逐行执行代码：

```bash
(lldb) step
```

### 6. 打印变量

使用 `print` 命令可以打印变量的值：

```bash
(lldb) print myVariable
```

### 7. 修改变量

你可以使用 `expression` 命令修改变量的值：

```bash
(lldb) expression myVariable = 42
```

### 8. 查看调用栈

`bt` 命令可以显示当前的调用栈：

```bash
(lldb) bt
```

## 实际案例

假设我们有以下 Swift 代码：

```swift
func calculateSum(_ a: Int, _ b: Int) -> Int {
    return a + b
}

func main() {
    let x = 10
    let y = 20
    let sum = calculateSum(x, y)
    print("Sum is \(sum)")
}

main()
```

### 1. 设置断点

我们可以在 `calculateSum` 函数中设置一个断点：

```bash
(lldb) breakpoint set --file main.swift --line 2
```

### 2. 运行程序

运行程序后，程序会在 `calculateSum` 函数的第一行暂停。

### 3. 打印变量

在断点处，我们可以打印 `a` 和 `b` 的值：

```bash
(lldb) print a
(lldb) print b
```

### 4. 修改变量

我们可以修改 `a` 的值并继续执行程序：

```bash
(lldb) expression a = 100
(lldb) continue
```

### 5. 查看结果

程序继续执行后，会打印出修改后的 `sum` 值：

```bash
Sum is 120
```

## 总结

LLDB 是一个功能强大的调试工具，掌握其基本命令可以大大提高调试效率。本文介绍了常用的 LLDB 命令，并通过实际案例展示了如何在实际开发中使用这些命令。

## 附加资源

- [LLDB 官方文档](https://lldb.llvm.org/)
- [Xcode 调试指南](https://developer.apple.com/documentation/xcode/debugging)

## 练习

1. 在 Xcode 中创建一个简单的 Swift 项目，并尝试使用 LLDB 设置断点、打印变量和修改变量。
2. 使用 `bt` 命令查看调用栈，并理解程序的执行流程。
