---
title: Swift Filter函数
description: 了解如何使用Swift中的filter函数进行函数式编程，筛选集合中的元素。
---

# Swift Filter函数

在Swift中，`filter`函数是函数式编程的核心工具之一。它允许你从一个集合中筛选出符合特定条件的元素，并返回一个新的集合。`filter`函数非常适合处理数组、集合等数据结构，帮助你以声明式的方式编写简洁且易读的代码。

## 什么是Filter函数？

`filter`函数是Swift标准库中的一个高阶函数，它接受一个闭包作为参数。这个闭包定义了筛选条件，`filter`函数会遍历集合中的每个元素，并根据闭包的返回值（`true`或`false`）决定是否将该元素包含在结果集合中。

### 基本语法

```swift
let newArray = originalArray.filter { element in
    // 返回true或false
}
```

- `originalArray`：原始集合（如数组）。
- `element`：集合中的每个元素。
- 闭包返回`true`时，元素会被包含在结果集合中；返回`false`时，元素会被排除。

## 代码示例

让我们从一个简单的例子开始。假设我们有一个整数数组，想要筛选出所有大于10的数字：

```swift
let numbers = [5, 12, 8, 15, 3, 20]
let filteredNumbers = numbers.filter { $0 > 10 }
print(filteredNumbers) // 输出: [12, 15, 20]
```

在这个例子中：
- `numbers`是原始数组。
- `filter`函数遍历数组中的每个元素。
- 闭包`{ $0 > 10 }`检查元素是否大于10。
- 最终，`filteredNumbers`包含了所有大于10的数字。

:::tip
你可以使用`$0`作为闭包的默认参数，表示当前遍历的元素。
:::

## 逐步讲解

### 1. 理解闭包的作用

闭包是`filter`函数的核心。它定义了筛选条件，并决定了哪些元素会被保留。闭包的返回值必须是`Bool`类型。

例如，以下闭包筛选出所有偶数：

```swift
let numbers = [1, 2, 3, 4, 5, 6]
let evenNumbers = numbers.filter { $0 % 2 == 0 }
print(evenNumbers) // 输出: [2, 4, 6]
```

### 2. 处理复杂条件

`filter`函数不仅适用于简单的条件，还可以处理更复杂的逻辑。例如，筛选出数组中所有长度大于3的字符串：

```swift
let names = ["Alice", "Bob", "Charlie", "Dave"]
let longNames = names.filter { $0.count > 3 }
print(longNames) // 输出: ["Alice", "Charlie"]
```

### 3. 链式调用

`filter`函数可以与其他高阶函数（如`map`、`reduce`）结合使用，形成链式调用。例如，筛选出所有大于10的数字，并将它们加倍：

```swift
let numbers = [5, 12, 8, 15, 3, 20]
let result = numbers.filter { $0 > 10 }.map { $0 * 2 }
print(result) // 输出: [24, 30, 40]
```

## 实际应用场景

### 1. 筛选用户数据

假设你有一个用户数组，每个用户都有一个`age`属性。你可以使用`filter`函数筛选出所有年龄大于18岁的用户：

```swift
struct User {
    let name: String
    let age: Int
}

let users = [
    User(name: "Alice", age: 25),
    User(name: "Bob", age: 17),
    User(name: "Charlie", age: 30)
]

let adults = users.filter { $0.age > 18 }
print(adults) // 输出: [User(name: "Alice", age: 25), User(name: "Charlie", age: 30)]
```

### 2. 过滤无效数据

在处理数据时，`filter`函数可以帮助你过滤掉无效或不符合要求的数据。例如，筛选出所有非空字符串：

```swift
let strings = ["Hello", "", "World", "", "Swift"]
let nonEmptyStrings = strings.filter { !$0.isEmpty }
print(nonEmptyStrings) // 输出: ["Hello", "World", "Swift"]
```

## 总结

`filter`函数是Swift中一个强大的工具，能够帮助你以声明式的方式筛选集合中的元素。通过结合闭包，你可以轻松实现复杂的筛选逻辑，并将其与其他高阶函数结合使用，编写出简洁且高效的代码。

:::note
**关键点总结：**
- `filter`函数用于筛选集合中符合特定条件的元素。
- 闭包定义了筛选条件，返回`true`或`false`。
- `filter`函数可以与其他高阶函数（如`map`、`reduce`）结合使用。
:::

## 附加资源与练习

### 练习
1. 给定一个字符串数组，筛选出所有以字母"A"开头的字符串。
2. 给定一个整数数组，筛选出所有能被3整除的数字。
3. 结合`map`和`filter`，筛选出所有大于10的数字并将它们转换为字符串。

### 进一步学习
- 阅读Swift官方文档中关于[高阶函数](https://developer.apple.com/documentation/swift/sequence)的部分。
- 尝试使用`filter`函数处理更复杂的数据结构，如嵌套数组或字典。

通过不断练习，你将更加熟练地掌握`filter`函数，并能够在实际项目中灵活运用它。