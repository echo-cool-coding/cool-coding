---
title: Swift 集合映射
description: 了解如何使用Swift中的集合映射功能，将集合中的元素转换为另一种形式。本文适合初学者，包含代码示例和实际应用场景。
---

# Swift 集合映射

在Swift编程中，集合类型（如数组、字典和集合）是非常常用的数据结构。集合映射（Mapping）是一种强大的操作，它允许我们将集合中的每个元素转换为另一种形式。通过映射，我们可以轻松地对集合中的元素进行转换、过滤或计算，从而生成一个新的集合。

## 什么是集合映射？

集合映射是指将一个集合中的每个元素通过某种规则或函数转换为另一个元素的过程。在Swift中，我们可以使用 `map` 方法来实现这一功能。`map` 方法会遍历集合中的每个元素，并将其传递给一个闭包（closure），闭包返回的结果将组成一个新的集合。

### 基本语法

```swift
let newCollection = originalCollection.map { element in
    // 转换逻辑
    return transformedElement
}
```

- `originalCollection`：原始集合。
- `element`：集合中的每个元素。
- `transformedElement`：转换后的元素。
- `newCollection`：包含转换后元素的新集合。

## 代码示例

让我们通过一个简单的例子来理解集合映射的工作原理。

```swift
let numbers = [1, 2, 3, 4, 5]
let squaredNumbers = numbers.map { $0 * $0 }
print(squaredNumbers) // 输出: [1, 4, 9, 16, 25]
```

在这个例子中，我们有一个包含整数的数组 `numbers`。我们使用 `map` 方法将数组中的每个元素平方，生成一个新的数组 `squaredNumbers`。

### 输入和输出

- **输入**: `[1, 2, 3, 4, 5]`
- **输出**: `[1, 4, 9, 16, 25]`

## 逐步讲解

1. **遍历集合**：`map` 方法会遍历 `numbers` 数组中的每个元素。
2. **应用转换**：对于每个元素，闭包 `{ $0 * $0 }` 会将其平方。
3. **生成新集合**：转换后的元素会被收集到一个新的数组 `squaredNumbers` 中。

## 实际应用场景

集合映射在实际开发中有很多应用场景。以下是一些常见的例子：

### 1. 字符串转换

假设我们有一个包含用户名的数组，我们希望将所有用户名转换为大写。

```swift
let usernames = ["alice", "bob", "charlie"]
let uppercaseUsernames = usernames.map { $0.uppercased() }
print(uppercaseUsernames) // 输出: ["ALICE", "BOB", "CHARLIE"]
```

### 2. 数据格式化

假设我们有一个包含价格的数组，我们希望将每个价格格式化为带有货币符号的字符串。

```swift
let prices = [19.99, 29.99, 39.99]
let formattedPrices = prices.map { String(format: "$%.2f", $0) }
print(formattedPrices) // 输出: ["$19.99", "$29.99", "$39.99"]
```

### 3. 对象属性提取

假设我们有一个包含用户对象的数组，我们希望提取每个用户的姓名。

```swift
struct User {
    let name: String
    let age: Int
}

let users = [
    User(name: "Alice", age: 25),
    User(name: "Bob", age: 30),
    User(name: "Charlie", age: 35)
]

let names = users.map { $0.name }
print(names) // 输出: ["Alice", "Bob", "Charlie"]
```

## 总结

集合映射是Swift中非常强大的功能，它允许我们轻松地对集合中的元素进行转换。通过 `map` 方法，我们可以将复杂的转换逻辑封装在闭包中，从而生成一个新的集合。无论是简单的数学运算，还是复杂的对象属性提取，集合映射都能帮助我们高效地完成任务。

## 附加资源与练习

- **练习1**：给定一个包含整数的数组 `[10, 20, 30, 40, 50]`，使用 `map` 方法将每个元素乘以2，并输出结果。
- **练习2**：给定一个包含字符串的数组 `["apple", "banana", "cherry"]`，使用 `map` 方法将每个字符串的首字母大写，并输出结果。
- **练习3**：给定一个包含用户对象的数组，每个用户对象包含 `firstName` 和 `lastName` 属性，使用 `map` 方法将每个用户的全名（`firstName + " " + lastName`）提取出来，并输出结果。

通过练习，你将更好地掌握集合映射的概念和应用。继续探索Swift的集合类型，你会发现更多强大的功能和技巧！