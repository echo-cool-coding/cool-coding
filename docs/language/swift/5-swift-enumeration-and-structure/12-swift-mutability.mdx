---
title: Swift 可变性
description: 了解Swift中枚举和结构体的可变性，掌握如何通过可变性修改实例属性。
---

# Swift 可变性

在Swift中，可变性（Mutability）是指一个实例的属性是否可以在其生命周期内被修改。理解可变性对于编写高效且安全的代码至关重要。本文将详细介绍Swift中枚举和结构体的可变性，并通过示例帮助你掌握这一概念。

## 什么是可变性？

在Swift中，可变性主要分为两种：
1. **可变实例**：实例的属性可以在其生命周期内被修改。
2. **不可变实例**：实例的属性在其生命周期内不能被修改。

Swift通过`let`和`var`关键字来控制实例的可变性。使用`let`声明的实例是不可变的，而使用`var`声明的实例是可变的。

## 枚举的可变性

枚举在Swift中是值类型，因此它们的可变性取决于实例的声明方式。让我们通过一个简单的例子来理解：

```swift
enum CompassDirection {
    case north, south, east, west
}

var direction = CompassDirection.north
direction = .east // 可以修改，因为direction是用var声明的
```

在上面的例子中，`direction`是用`var`声明的，因此它是一个可变实例，可以修改其值。

:::note
如果使用`let`声明枚举实例，则该实例是不可变的，无法修改其值。
:::

## 结构体的可变性

结构体也是值类型，因此它们的可变性同样取决于实例的声明方式。让我们看一个结构体的例子：

```swift
struct Point {
    var x: Int
    var y: Int
}

var point = Point(x: 0, y: 0)
point.x = 10 // 可以修改，因为point是用var声明的
```

在这个例子中，`point`是用`var`声明的，因此它是一个可变实例，可以修改其属性。

:::caution
如果使用`let`声明结构体实例，则该实例是不可变的，无法修改其属性。
:::

## 实际应用场景

### 1. 游戏中的角色位置

假设你正在开发一个游戏，角色的位置可以用结构体表示。如果角色需要移动，你可以使用可变实例来更新其位置：

```swift
struct Position {
    var x: Int
    var y: Int
}

var playerPosition = Position(x: 0, y: 0)
playerPosition.x = 5 // 角色向右移动
playerPosition.y = 10 // 角色向下移动
```

### 2. 状态机的状态切换

在状态机中，枚举常用于表示不同的状态。如果状态需要切换，你可以使用可变实例来更新状态：

```swift
enum TrafficLight {
    case red, yellow, green
}

var currentLight = TrafficLight.red
currentLight = .green // 切换到绿灯
```

## 总结

在Swift中，可变性是一个重要的概念，它决定了实例的属性是否可以在其生命周期内被修改。通过`let`和`var`关键字，你可以控制实例的可变性。枚举和结构体作为值类型，其可变性取决于实例的声明方式。

:::tip
- 使用`var`声明实例时，实例是可变的，可以修改其属性。
- 使用`let`声明实例时，实例是不可变的，无法修改其属性。
:::

## 附加资源与练习

### 练习
1. 创建一个表示矩形的结构体`Rectangle`，包含`width`和`height`属性。尝试用`let`和`var`分别声明实例，并观察是否可以修改属性。
2. 创建一个表示天气的枚举`Weather`，包含`sunny`, `cloudy`, `rainy`等case。尝试用`let`和`var`分别声明实例，并观察是否可以修改其值。

### 附加资源
- [Swift官方文档 - 枚举](https://docs.swift.org/swift-book/LanguageGuide/Enumerations.html)
- [Swift官方文档 - 结构体](https://docs.swift.org/swift-book/LanguageGuide/ClassesAndStructures.html)