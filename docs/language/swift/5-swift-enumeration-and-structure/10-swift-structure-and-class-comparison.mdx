---
title: Swift 结构体与类比较
description: 了解Swift中结构体与类的区别，掌握它们的使用场景和特性，帮助初学者更好地选择合适的数据类型。
---

# Swift 结构体与类比较

在Swift中，结构体（`struct`）和类（`class`）是两种重要的数据类型，它们都可以用来定义自定义的数据结构。尽管它们在许多方面非常相似，但它们之间也存在一些关键的区别。理解这些区别对于编写高效、可维护的Swift代码至关重要。

## 介绍

### 什么是结构体？

结构体是值类型（value type），用于封装一组相关的属性和方法。它们通常用于表示简单的数据结构，如点、矩形或颜色。结构体的实例在传递时会被复制，而不是通过引用传递。

### 什么是类？

类是引用类型（reference type），用于定义更复杂的数据结构。类可以继承其他类的属性和方法，这使得它们非常适合用于构建复杂的对象层次结构。类的实例在传递时是通过引用传递的，这意味着多个变量可以指向同一个实例。

## 结构体与类的区别

### 1. 值类型 vs 引用类型

结构体是值类型，而类是引用类型。这意味着当你将一个结构体实例赋值给另一个变量时，实际上是创建了一个新的副本。而对于类，赋值操作只是复制了引用，两个变量指向同一个实例。

```swift
struct Point {
    var x: Int
    var y: Int
}

class Person {
    var name: String
    init(name: String) {
        self.name = name
    }
}

var point1 = Point(x: 10, y: 20)
var point2 = point1
point2.x = 30
print(point1.x) // 输出: 10

var person1 = Person(name: "Alice")
var person2 = person1
person2.name = "Bob"
print(person1.name) // 输出: Bob
```

:::note
在上面的例子中，`point2` 是 `point1` 的副本，修改 `point2` 不会影响 `point1`。而 `person2` 和 `person1` 指向同一个实例，修改 `person2` 会影响 `person1`。
:::

### 2. 继承

类支持继承，而结构体不支持。继承允许一个类继承另一个类的属性和方法，从而可以创建更复杂的类层次结构。

```swift
class Animal {
    var name: String
    init(name: String) {
        self.name = name
    }
    func makeSound() {
        print("Some generic sound")
    }
}

class Dog: Animal {
    override func makeSound() {
        print("Woof!")
    }
}

let dog = Dog(name: "Rex")
dog.makeSound() // 输出: Woof!
```

:::tip
如果你需要继承特性，那么类是你的不二选择。结构体更适合用于不需要继承的场景。
:::

### 3. 内存管理

类是引用类型，因此它们的内存管理是通过引用计数（reference counting）来处理的。这意味着当多个变量指向同一个实例时，Swift会自动管理内存，直到最后一个引用被释放。

结构体是值类型，它们的生命周期与包含它们的变量相同。当变量超出作用域时，结构体实例会自动被销毁。

### 4. 可变性

结构体的实例默认是不可变的，除非你明确地将它们声明为变量（`var`）。即使你将结构体实例声明为变量，修改它的属性也不会影响其他副本。

类的实例默认是可变的，即使你将它们声明为常量（`let`），你仍然可以修改它们的属性。

```swift
struct Rectangle {
    var width: Int
    var height: Int
}

let rect = Rectangle(width: 10, height: 20)
// rect.width = 30 // 这行代码会报错，因为 rect 是常量

class Car {
    var speed: Int = 0
}

let myCar = Car()
myCar.speed = 100 // 这行代码不会报错，即使 myCar 是常量
```

:::caution
如果你希望数据在传递时保持不变，结构体是一个更好的选择。如果你需要频繁修改数据，类可能更适合。
:::

## 实际应用场景

### 结构体的应用场景

- **简单的数据结构**：如点、矩形、颜色等。
- **不可变数据**：当你希望数据在传递时保持不变时。
- **性能优化**：由于结构体是值类型，它们在栈上分配内存，通常比类更高效。

### 类的应用场景

- **复杂的对象模型**：如用户、订单、产品等。
- **继承**：当你需要继承其他类的属性和方法时。
- **共享数据**：当你希望多个变量指向同一个实例时。

## 总结

结构体和类在Swift中各有其独特的用途和优势。结构体适合用于简单的、不可变的数据结构，而类则更适合用于复杂的、可变的对象模型。理解它们的区别和适用场景，可以帮助你编写更高效、更可维护的Swift代码。

## 附加资源与练习

- **练习1**：创建一个结构体 `Circle`，包含属性 `radius` 和方法 `area()`，计算并返回圆的面积。
- **练习2**：创建一个类 `Vehicle`，包含属性 `speed` 和方法 `drive()`，然后创建一个子类 `Car`，重写 `drive()` 方法。

:::tip
如果你想深入了解Swift中的结构体和类，可以参考[Swift官方文档](https://docs.swift.org/swift-book/LanguageGuide/ClassesAndStructures.html)。
:::