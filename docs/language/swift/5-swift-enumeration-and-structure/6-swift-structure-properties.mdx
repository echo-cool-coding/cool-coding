---
title: Swift 结构体属性
description: 了解Swift中结构体的属性，包括存储属性、计算属性以及属性观察器。通过代码示例和实际案例，掌握如何定义和使用结构体属性。
---

# Swift 结构体属性

在Swift中，结构体（`struct`）是一种用于封装相关数据和行为的自定义数据类型。结构体中的属性是用于存储和访问数据的变量或常量。理解结构体属性是掌握Swift编程的重要一步。本文将详细介绍Swift结构体的属性类型及其使用方法。

## 1. 存储属性

存储属性是结构体中最基本的属性类型，用于存储特定类型的值。存储属性可以是常量（`let`）或变量（`var`）。

### 示例：定义存储属性

```swift
struct Person {
    var name: String
    let age: Int
}

var person = Person(name: "Alice", age: 25)
print(person.name) // 输出: Alice
print(person.age)  // 输出: 25
```

在上面的示例中，`name` 是一个变量存储属性，而 `age` 是一个常量存储属性。我们可以通过点语法访问这些属性。

:::note
注意：常量存储属性一旦初始化后就不能再修改。
:::

## 2. 计算属性

计算属性不直接存储值，而是通过其他属性计算得出。计算属性必须定义为变量（`var`），并且需要显式指定类型。

### 示例：定义计算属性

```swift
struct Rectangle {
    var width: Double
    var height: Double
    
    var area: Double {
        return width * height
    }
}

let rect = Rectangle(width: 10.0, height: 5.0)
print(rect.area) // 输出: 50.0
```

在上面的示例中，`area` 是一个计算属性，它通过 `width` 和 `height` 计算得出矩形的面积。

:::tip
提示：计算属性可以只有 `getter`，也可以同时有 `getter` 和 `setter`。
:::

### 示例：带有 `getter` 和 `setter` 的计算属性

```swift
struct Square {
    var sideLength: Double
    
    var area: Double {
        get {
            return sideLength * sideLength
        }
        set {
            sideLength = sqrt(newValue)
        }
    }
}

var square = Square(sideLength: 4.0)
print(square.area) // 输出: 16.0

square.area = 25.0
print(square.sideLength) // 输出: 5.0
```

在这个示例中，`area` 属性不仅可以通过 `sideLength` 计算得出，还可以通过设置 `area` 来反向修改 `sideLength`。

## 3. 属性观察器

属性观察器用于监控属性值的变化，并在属性值即将改变或已经改变时执行特定的代码。属性观察器可以用于存储属性，但不能用于计算属性。

### 示例：使用属性观察器

```swift
struct Temperature {
    var celsius: Double {
        willSet {
            print("即将将温度从 \(celsius)°C 更改为 \(newValue)°C")
        }
        didSet {
            print("已将温度从 \(oldValue)°C 更改为 \(celsius)°C")
        }
    }
}

var temp = Temperature(celsius: 20.0)
temp.celsius = 25.0
// 输出:
// 即将将温度从 20.0°C 更改为 25.0°C
// 已将温度从 20.0°C 更改为 25.0°C
```

在上面的示例中，`celsius` 属性使用了 `willSet` 和 `didSet` 观察器，分别在属性值即将改变和已经改变时打印信息。

:::caution
注意：属性观察器不能用于常量存储属性，因为常量的值在初始化后不能改变。
:::

## 4. 实际应用案例

### 案例：银行账户管理

假设我们需要管理一个银行账户，账户有余额和利率两个属性。我们可以使用结构体来封装这些属性，并通过计算属性计算利息。

```swift
struct BankAccount {
    var balance: Double
    let interestRate: Double
    
    var interest: Double {
        return balance * interestRate
    }
}

var account = BankAccount(balance: 1000.0, interestRate: 0.05)
print("利息: \(account.interest)") // 输出: 利息: 50.0
```

在这个案例中，`interest` 是一个计算属性，它根据 `balance` 和 `interestRate` 计算利息。

## 5. 总结

Swift结构体属性是封装数据的重要工具。通过存储属性、计算属性和属性观察器，我们可以灵活地管理和操作结构体中的数据。掌握这些概念将帮助你编写更高效、更易维护的Swift代码。

## 6. 附加资源与练习

- **练习1**：创建一个结构体 `Circle`，包含半径 `radius` 属性，并添加一个计算属性 `circumference` 来计算圆的周长。
- **练习2**：创建一个结构体 `Car`，包含速度 `speed` 属性，并使用属性观察器在速度变化时打印信息。

通过练习，你将更深入地理解Swift结构体属性的使用。继续探索和实践，你将逐步掌握Swift编程的精髓！