---
title: Swift 属性重写
description: 了解如何在Swift中重写属性，掌握子类如何自定义父类的属性行为。
---

# Swift 属性重写

在Swift中，属性重写是面向对象编程中的一个重要概念。它允许子类重新定义父类中的属性，从而改变属性的行为或实现。通过属性重写，子类可以根据需要自定义属性的存储方式、计算逻辑或访问控制。

## 什么是属性重写？

属性重写是指子类对父类中已定义的属性进行重新实现。重写属性时，子类可以改变属性的存储方式（从存储属性变为计算属性，或反之），也可以修改属性的getter和setter方法。

:::note
属性重写只能应用于类的属性，不能应用于结构体或枚举中的属性。
:::

## 如何重写属性？

在Swift中，重写属性需要使用关键字 `override`。以下是重写属性的基本语法：

```swift
class Vehicle {
    var currentSpeed: Double = 0.0
    var description: String {
        return "traveling at \(currentSpeed) miles per hour"
    }
}

class Car: Vehicle {
    override var description: String {
        return super.description + " in a car"
    }
}
```

在上面的例子中，`Car` 类重写了 `Vehicle` 类中的 `description` 属性。通过 `override` 关键字，`Car` 类可以自定义 `description` 属性的行为。

### 重写存储属性

在Swift中，存储属性本身不能被直接重写。但是，可以通过重写存储属性的getter和setter方法来实现类似的效果。例如：

```swift
class Vehicle {
    var currentSpeed: Double = 0.0
}

class Car: Vehicle {
    override var currentSpeed: Double {
        didSet {
            print("The car's speed is now \(currentSpeed)")
        }
    }
}
```

在这个例子中，`Car` 类重写了 `currentSpeed` 属性的 `didSet` 观察器，以便在速度变化时打印一条消息。

### 重写计算属性

计算属性可以被完全重写，包括其getter和setter方法。例如：

```swift
class Vehicle {
    var currentSpeed: Double = 0.0
    var description: String {
        return "traveling at \(currentSpeed) miles per hour"
    }
}

class Car: Vehicle {
    override var description: String {
        return super.description + " in a car"
    }
}
```

在这个例子中，`Car` 类重写了 `description` 计算属性，并调用了父类的 `description` 属性来构建新的描述字符串。

## 实际应用场景

属性重写在许多实际场景中非常有用。例如，假设你正在开发一个游戏，其中有一个基类 `Character`，它有一个 `health` 属性。你可以创建一个子类 `Hero`，并重写 `health` 属性，以便在 `health` 变化时触发一些特殊效果。

```swift
class Character {
    var health: Int = 100
}

class Hero: Character {
    override var health: Int {
        didSet {
            if health < 20 {
                print("Warning: Health is critically low!")
            }
        }
    }
}
```

在这个例子中，`Hero` 类重写了 `health` 属性，并在 `health` 低于20时打印一条警告消息。

## 总结

属性重写是Swift中一个强大的特性，它允许子类自定义父类属性的行为。通过重写属性，你可以改变属性的存储方式、计算逻辑或访问控制，从而更好地满足子类的需求。

:::tip
在重写属性时，记得使用 `override` 关键字，并确保你理解父类属性的行为，以避免意外的副作用。
:::

## 附加资源与练习

- **练习**：尝试创建一个基类 `Animal`，其中包含一个 `sound` 属性。然后创建一个子类 `Dog`，并重写 `sound` 属性，使其返回 "Woof!"。
- **进一步阅读**：查阅Swift官方文档中关于[属性重写](https://docs.swift.org/swift-book/LanguageGuide/Inheritance.html)的部分，了解更多高级用法和注意事项。

通过不断练习和探索，你将能够熟练掌握Swift中的属性重写，并在实际开发中灵活运用这一特性。