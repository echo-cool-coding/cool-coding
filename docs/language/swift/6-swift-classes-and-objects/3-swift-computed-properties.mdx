---
title: Swift 计算属性
description: 了解Swift中的计算属性，掌握如何通过计算属性动态获取和设置值，并探索其在实际开发中的应用场景。
---

# Swift 计算属性

在Swift中，属性是类、结构体或枚举的一部分，用于存储值或提供对值的访问。除了存储属性（Stored Properties），Swift还提供了**计算属性**（Computed Properties）。计算属性不直接存储值，而是通过计算来获取或设置值。本文将详细介绍计算属性的概念、语法以及实际应用。

## 什么是计算属性？

计算属性是一种不直接存储值的属性，而是通过其他属性或逻辑来动态计算其值。计算属性可以用于读取值（getter）或设置值（setter），但通常用于读取值。

### 计算属性的语法

计算属性的定义如下：

```swift
var propertyName: PropertyType {
    get {
        // 返回计算后的值
    }
    set(newValue) {
        // 使用newValue进行某些操作
    }
}
```

- `get`：用于获取计算属性的值。
- `set`：用于设置计算属性的值。`newValue`是默认的参数名，表示传入的新值。

:::note
如果计算属性只有`get`方法，没有`set`方法，则可以省略`get`关键字，直接使用简写形式。
:::

### 示例：简单的计算属性

以下是一个简单的计算属性示例，用于计算矩形的面积：

```swift
struct Rectangle {
    var width: Double
    var height: Double
    
    var area: Double {
        return width * height
    }
}

let rect = Rectangle(width: 10.0, height: 5.0)
print("矩形的面积是：\(rect.area)") // 输出：矩形的面积是：50.0
```

在这个例子中，`area`是一个计算属性，它通过`width`和`height`来计算矩形的面积。每次访问`area`时，都会重新计算其值。

### 带setter的计算属性

计算属性也可以包含`setter`，用于设置其他属性的值。以下是一个带有`setter`的计算属性示例：

```swift
struct Circle {
    var radius: Double
    
    var diameter: Double {
        get {
            return radius * 2
        }
        set {
            radius = newValue / 2
        }
    }
}

var circle = Circle(radius: 5.0)
print("圆的直径是：\(circle.diameter)") // 输出：圆的直径是：10.0

circle.diameter = 14.0
print("圆的半径是：\(circle.radius)") // 输出：圆的半径是：7.0
```

在这个例子中，`diameter`是一个计算属性，它通过`radius`来计算直径，并且可以通过设置`diameter`来更新`radius`的值。

## 计算属性的实际应用

计算属性在实际开发中有很多应用场景，以下是一些常见的例子：

### 1. 数据格式化

计算属性可以用于格式化数据。例如，将日期格式化为字符串：

```swift
struct Event {
    var date: Date
    
    var formattedDate: String {
        let formatter = DateFormatter()
        formatter.dateStyle = .medium
        return formatter.string(from: date)
    }
}

let event = Event(date: Date())
print("事件日期：\(event.formattedDate)") // 输出：事件日期：2023年10月5日
```

### 2. 动态计算值

计算属性可以用于动态计算值。例如，计算一个人的BMI（身体质量指数）：

```swift
struct Person {
    var weight: Double // 体重（千克）
    var height: Double // 身高（米）
    
    var bmi: Double {
        return weight / (height * height)
    }
}

let person = Person(weight: 70.0, height: 1.75)
print("BMI指数：\(person.bmi)") // 输出：BMI指数：22.857142857142858
```

### 3. 依赖其他属性的值

计算属性可以依赖于其他属性的值。例如，计算一个订单的总价：

```swift
struct Order {
    var pricePerItem: Double
    var quantity: Int
    
    var totalPrice: Double {
        return pricePerItem * Double(quantity)
    }
}

let order = Order(pricePerItem: 9.99, quantity: 3)
print("订单总价：\(order.totalPrice)") // 输出：订单总价：29.97
```

## 总结

计算属性是Swift中非常强大的特性，它允许我们通过计算来动态获取或设置值，而不需要直接存储值。计算属性可以用于数据格式化、动态计算值、依赖其他属性等多种场景。通过合理使用计算属性，可以使代码更加简洁和高效。

:::tip
练习：尝试创建一个结构体`Temperature`，包含一个`celsius`属性，并添加一个计算属性`fahrenheit`，用于将摄氏温度转换为华氏温度。
:::

## 附加资源

- [Swift官方文档 - 属性](https://docs.swift.org/swift-book/LanguageGuide/Properties.html)
- [Swift编程语言指南](https://swift.org/documentation/)

通过本文的学习，你应该已经掌握了Swift中计算属性的基本概念和应用。继续练习和探索，你将能够更好地理解和运用这一特性。