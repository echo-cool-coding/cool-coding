---
title: Swift 方法重写
description: 了解如何在Swift中重写方法，掌握子类如何继承并修改父类方法的行为。
---

# Swift 方法重写

在面向对象编程中，**方法重写**是一个重要的概念。它允许子类继承父类的方法，并根据需要修改其行为。Swift作为一门现代编程语言，提供了强大的方法重写机制，使得开发者可以灵活地扩展和定制类的功能。

## 什么是方法重写？

方法重写是指子类重新定义父类中已经存在的方法。通过重写，子类可以改变方法的实现逻辑，从而满足特定的需求。在Swift中，方法重写需要使用关键字 `override` 来明确表示。

:::note
**注意**：只有被标记为 `class` 或 `open` 的方法才能被重写。被标记为 `final` 的方法无法被重写。
:::

## 方法重写的基本语法

在Swift中，重写方法的语法非常简单。以下是一个基本的示例：

```swift
class Animal {
    func makeSound() {
        print("Some generic sound")
    }
}

class Dog: Animal {
    override func makeSound() {
        print("Woof!")
    }
}

let myDog = Dog()
myDog.makeSound() // 输出: Woof!
```

在这个例子中，`Dog` 类继承了 `Animal` 类，并重写了 `makeSound()` 方法。当调用 `myDog.makeSound()` 时，执行的是 `Dog` 类中的实现，而不是 `Animal` 类中的实现。

## 调用父类的方法

在某些情况下，你可能希望在重写方法时仍然保留父类的行为。这时，可以使用 `super` 关键字来调用父类的方法。

```swift
class Cat: Animal {
    override func makeSound() {
        super.makeSound() // 调用父类的 makeSound 方法
        print("Meow!")
    }
}

let myCat = Cat()
myCat.makeSound()
// 输出:
// Some generic sound
// Meow!
```

在这个例子中，`Cat` 类重写了 `makeSound()` 方法，并在其中调用了父类的 `makeSound()` 方法。这样，父类和子类的行为都会被执行。

## 重写属性的Getter和Setter

除了方法，Swift还允许重写属性的 `getter` 和 `setter`。以下是一个示例：

```swift
class Vehicle {
    var speed: Int = 0
}

class Car: Vehicle {
    override var speed: Int {
        get {
            return super.speed
        }
        set {
            super.speed = newValue * 2
        }
    }
}

let myCar = Car()
myCar.speed = 50
print(myCar.speed) // 输出: 100
```

在这个例子中，`Car` 类重写了 `speed` 属性的 `getter` 和 `setter`，使得设置速度时实际存储的值是输入值的两倍。

## 实际应用场景

方法重写在许多实际场景中都非常有用。例如，假设你正在开发一个游戏，其中有一个基类 `Character`，它有一个 `attack()` 方法。不同的角色（如 `Warrior` 和 `Mage`）可以继承 `Character` 并重写 `attack()` 方法，以实现不同的攻击逻辑。

```swift
class Character {
    func attack() {
        print("Character attacks!")
    }
}

class Warrior: Character {
    override func attack() {
        print("Warrior swings a sword!")
    }
}

class Mage: Character {
    override func attack() {
        print("Mage casts a fireball!")
    }
}

let warrior = Warrior()
let mage = Mage()

warrior.attack() // 输出: Warrior swings a sword!
mage.attack()    // 输出: Mage casts a fireball!
```

通过方法重写，你可以轻松地为不同的角色定制行为，而无需修改基类的代码。

## 总结

方法重写是Swift中面向对象编程的核心概念之一。它允许子类继承并修改父类的方法，从而实现更灵活和可扩展的代码设计。通过使用 `override` 关键字，你可以明确表示你正在重写一个方法，并通过 `super` 关键字调用父类的实现。

:::tip
**提示**：在重写方法时，确保你理解父类方法的预期行为，以避免引入意外的错误。
:::

## 附加资源与练习

- **练习1**：创建一个基类 `Shape`，并定义一个 `draw()` 方法。然后创建子类 `Circle` 和 `Rectangle`，分别重写 `draw()` 方法以绘制不同的形状。
- **练习2**：尝试重写一个属性的 `didSet` 观察器，观察其行为变化。

通过不断练习，你将更加熟练地掌握Swift中的方法重写技巧，并能够在实际项目中灵活运用。