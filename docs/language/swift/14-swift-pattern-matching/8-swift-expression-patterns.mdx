---
title: Swift 表达式模式
description: 了解Swift中的表达式模式，掌握如何使用表达式模式进行模式匹配，提升代码的可读性和灵活性。
---

# Swift 表达式模式

在Swift中，**表达式模式**是一种强大的模式匹配工具，允许你使用表达式来匹配值。表达式模式可以用于`switch`语句、`if`语句、`guard`语句以及`for-in`循环中，帮助你更灵活地处理数据。

## 什么是表达式模式？

表达式模式允许你使用表达式来匹配值。与简单的值匹配不同，表达式模式可以包含运算符、函数调用等复杂逻辑。这使得模式匹配更加灵活和强大。

### 基本语法

在Swift中，表达式模式的基本语法如下：

```swift
case expression:
```

其中，`expression`可以是任何合法的Swift表达式。当`expression`的值与匹配的值相等时，模式匹配成功。

## 代码示例

让我们通过一个简单的例子来理解表达式模式：

```swift
let number = 5

switch number {
case 1...10:
    print("Number is between 1 and 10")
case 11...20:
    print("Number is between 11 and 20")
default:
    print("Number is outside the range")
}
```

在这个例子中，`1...10`和`11...20`都是表达式模式。当`number`的值落在这些范围内时，相应的`case`语句会被执行。

### 输入与输出

假设`number`的值为`5`，输出将是：

```
Number is between 1 and 10
```

## 逐步讲解

### 1. 使用范围表达式

范围表达式是表达式模式的一种常见形式。你可以使用`...`（闭区间）或`..<`（半开区间）来定义一个范围。

```swift
let age = 25

switch age {
case 0..<18:
    print("You are a minor")
case 18..<65:
    print("You are an adult")
default:
    print("You are a senior")
}
```

### 2. 使用运算符

你还可以在表达式模式中使用运算符，例如`==`、`!=`、`>`、`<`等。

```swift
let score = 85

switch score {
case 0..<60:
    print("Fail")
case 60..<80:
    print("Pass")
case 80...100:
    print("Excellent")
default:
    print("Invalid score")
}
```

### 3. 使用函数调用

表达式模式甚至可以包含函数调用。这使得模式匹配更加灵活。

```swift
func isEven(_ number: Int) -> Bool {
    return number % 2 == 0
}

let value = 4

switch value {
case let x where isEven(x):
    print("\(x) is even")
default:
    print("\(value) is odd")
}
```

在这个例子中，`isEven`函数被用于表达式模式中，以判断`value`是否为偶数。

## 实际案例

### 1. 处理用户输入

假设你正在开发一个命令行工具，需要根据用户的输入执行不同的操作。你可以使用表达式模式来处理不同的输入。

```swift
let userInput = "start"

switch userInput {
case "start":
    print("Starting the process...")
case "stop":
    print("Stopping the process...")
case "restart":
    print("Restarting the process...")
default:
    print("Unknown command")
}
```

### 2. 验证表单数据

在处理表单数据时，你可以使用表达式模式来验证用户输入是否符合预期。

```swift
let email = "user@example.com"

switch email {
case let e where e.contains("@"):
    print("Valid email")
default:
    print("Invalid email")
}
```

## 总结

表达式模式是Swift中一种强大的模式匹配工具，允许你使用表达式来匹配值。通过使用范围、运算符和函数调用，你可以编写出更加灵活和可读的代码。

## 附加资源与练习

### 练习

1. 编写一个`switch`语句，使用表达式模式来判断一个整数是否为质数。
2. 使用表达式模式处理一个字符串数组，打印出所有长度大于5的字符串。

### 进一步阅读

- [Swift官方文档 - 模式](https://docs.swift.org/swift-book/ReferenceManual/Patterns.html)
- [Swift编程语言指南](https://docs.swift.org/swift-book/LanguageGuide/TheBasics.html)

:::tip
表达式模式是Swift中模式匹配的重要组成部分。掌握它可以帮助你编写出更加简洁和高效的代码。
:::