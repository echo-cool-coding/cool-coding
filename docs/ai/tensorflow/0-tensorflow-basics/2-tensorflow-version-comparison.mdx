---
title: TensorFlow 版本对比
description: 了解TensorFlow不同版本之间的主要区别，帮助初学者选择适合的版本进行学习和开发。
---

# TensorFlow 版本对比

TensorFlow 是一个广泛使用的开源机器学习框架，由 Google 开发和维护。自 2015 年发布以来，TensorFlow 经历了多次重大更新，每个版本都带来了新的功能和改进。对于初学者来说，了解不同版本之间的区别非常重要，因为这有助于选择适合的版本进行学习和开发。

## TensorFlow 1.x 与 TensorFlow 2.x

TensorFlow 1.x 和 TensorFlow 2.x 是两个主要的版本分支，它们之间存在显著的区别。以下是它们的主要差异：

### 1. 计算图与即时执行

- **TensorFlow 1.x**：使用静态计算图（Static Computation Graph）。用户需要先定义计算图，然后通过会话（Session）来执行图。这种方式虽然高效，但对于初学者来说较为复杂。
  
  ```python
  import tensorflow as tf

  # 定义计算图
  a = tf.constant(2)
  b = tf.constant(3)
  c = tf.add(a, b)

  # 创建会话并执行计算图
  with tf.Session() as sess:
      result = sess.run(c)
      print(result)  # 输出: 5
  ```

- **TensorFlow 2.x**：引入了即时执行（Eager Execution），允许用户像编写普通 Python 代码一样编写 TensorFlow 代码。这种方式更加直观，适合初学者。

  ```python
  import tensorflow as tf

  # 即时执行
  a = tf.constant(2)
  b = tf.constant(3)
  c = a + b
  print(c.numpy())  # 输出: 5
  ```

### 2. API 简化

- **TensorFlow 1.x**：API 较为复杂，许多功能需要通过不同的模块和函数来实现。
  
- **TensorFlow 2.x**：API 进行了大幅简化，许多常用功能被整合到 `tf.keras` 中，使得代码更加简洁易读。

  ```python
  import tensorflow as tf

  # 使用 tf.keras 构建模型
  model = tf.keras.Sequential([
      tf.keras.layers.Dense(10, activation='relu'),
      tf.keras.layers.Dense(1)
  ])

  model.compile(optimizer='adam', loss='mse')
  ```

### 3. 默认行为

- **TensorFlow 1.x**：默认情况下，计算图是静态的，需要手动管理会话。
  
- **TensorFlow 2.x**：默认启用即时执行，计算图是动态的，更加符合 Python 的编程习惯。

## TensorFlow 2.x 的子版本

TensorFlow 2.x 也有多个子版本，每个子版本都包含了一些新功能和改进。以下是几个重要的子版本：

### 1. TensorFlow 2.0

- **主要变化**：引入了即时执行、简化了 API、整合了 Keras 作为高级 API。
  
- **适用场景**：适合初学者和需要快速原型开发的用户。

### 2. TensorFlow 2.1

- **主要变化**：增加了对分布式训练的支持，改进了 TensorBoard 的功能。
  
- **适用场景**：适合需要进行大规模训练的用户。

### 3. TensorFlow 2.4

- **主要变化**：引入了新的混合精度训练功能，提升了训练速度。
  
- **适用场景**：适合需要高效训练模型的用户。

## 实际案例

假设你正在开发一个图像分类模型，以下是使用 TensorFlow 2.x 的代码示例：

```python
import tensorflow as tf
from tensorflow.keras import layers, models

# 构建模型
model = models.Sequential([
    layers.Conv2D(32, (3, 3), activation='relu', input_shape=(28, 28, 1)),
    layers.MaxPooling2D((2, 2)),
    layers.Flatten(),
    layers.Dense(64, activation='relu'),
    layers.Dense(10, activation='softmax')
])

# 编译模型
model.compile(optimizer='adam',
              loss='sparse_categorical_crossentropy',
              metrics=['accuracy'])

# 训练模型
model.fit(train_images, train_labels, epochs=5)

# 评估模型
test_loss, test_acc = model.evaluate(test_images, test_labels)
print(f'Test accuracy: {test_acc}')
```

## 总结

TensorFlow 的不同版本在功能和易用性上存在显著差异。对于初学者来说，TensorFlow 2.x 是一个更好的选择，因为它提供了更加直观的 API 和即时执行功能。随着你对 TensorFlow 的深入了解，你可以根据需要选择更高级的版本或功能。

## 附加资源

- [TensorFlow 官方文档](https://www.tensorflow.org/)
- [TensorFlow 2.x 教程](https://www.tensorflow.org/tutorials)
- [Keras 官方文档](https://keras.io/)

## 练习

1. 尝试在 TensorFlow 2.x 中实现一个简单的线性回归模型。
2. 比较 TensorFlow 1.x 和 TensorFlow 2.x 在相同任务上的代码复杂度。
3. 探索 TensorFlow 2.x 中的新功能，如混合精度训练，并尝试在实际项目中使用。
