---
title: CSS 矩阵变换
description: 了解如何使用 CSS 矩阵变换来实现复杂的 2D 和 3D 变换效果。本文将从基础概念入手，逐步讲解矩阵变换的原理和应用，并提供实际案例和代码示例。
---

## 介绍

CSS 矩阵变换（Matrix Transform）是一种强大的工具，允许开发者通过数学矩阵来定义元素的 2D 和 3D 变换。与简单的 `translate`、`rotate` 和 `scale` 不同，矩阵变换提供了更高的灵活性，能够实现更复杂的视觉效果。

在 CSS 中，矩阵变换通过 `matrix()` 和 `matrix3d()` 函数来实现。理解矩阵变换的关键在于掌握矩阵的数学原理，但不用担心，本文将从基础开始，逐步引导你掌握这一概念。

## 什么是矩阵变换？

矩阵变换是一种数学工具，用于描述和实现几何变换。在 CSS 中，矩阵变换可以用来表示平移、旋转、缩放和倾斜等操作。每个变换都可以表示为一个矩阵，多个变换可以通过矩阵乘法组合在一起。

### 2D 矩阵变换

在 2D 空间中，矩阵变换通常使用一个 3x3 的矩阵来表示。CSS 中的 `matrix()` 函数接受 6 个参数，分别对应矩阵的前两行：

```css
transform: matrix(a, b, c, d, e, f);
```

这个矩阵对应的数学形式如下：

```
| a c e |
| b d f |
| 0 0 1 |
```

其中：
- `a` 和 `d` 控制缩放。
- `b` 和 `c` 控制倾斜。
- `e` 和 `f` 控制平移。

### 3D 矩阵变换

在 3D 空间中，矩阵变换使用一个 4x4 的矩阵来表示。CSS 中的 `matrix3d()` 函数接受 16 个参数，分别对应矩阵的每一行：

```css
transform: matrix3d(a1, b1, c1, d1, a2, b2, c2, d2, a3, b3, c3, d3, a4, b4, c4, d4);
```

这个矩阵对应的数学形式如下：

```
| a1 b1 c1 d1 |
| a2 b2 c2 d2 |
| a3 b3 c3 d3 |
| a4 b4 c4 d4 |
```

## 矩阵变换的基本操作

### 平移（Translate）

平移是将元素从一个位置移动到另一个位置。在 2D 空间中，平移可以通过以下矩阵表示：

```
| 1 0 tx |
| 0 1 ty |
| 0 0 1  |
```

对应的 CSS 代码为：

```css
transform: matrix(1, 0, 0, 1, tx, ty);
```

### 缩放（Scale）

缩放是改变元素的大小。在 2D 空间中，缩放可以通过以下矩阵表示：

```
| sx 0  0 |
| 0  sy 0 |
| 0  0  1 |
```

对应的 CSS 代码为：

```css
transform: matrix(sx, 0, 0, sy, 0, 0);
```

### 旋转（Rotate）

旋转是围绕一个点旋转元素。在 2D 空间中，旋转可以通过以下矩阵表示：

```
| cos(θ) -sin(θ) 0 |
| sin(θ)  cos(θ) 0 |
| 0       0      1 |
```

对应的 CSS 代码为：

```css
transform: matrix(cos(θ), sin(θ), -sin(θ), cos(θ), 0, 0);
```

### 倾斜（Skew）

倾斜是使元素在水平或垂直方向上倾斜。在 2D 空间中，倾斜可以通过以下矩阵表示：

```
| 1  tan(θx) 0 |
| tan(θy) 1   0 |
| 0       0   1 |
```

对应的 CSS 代码为：

```css
transform: matrix(1, tan(θy), tan(θx), 1, 0, 0);
```

## 实际案例

### 案例 1：组合变换

假设我们想要对一个元素进行平移、旋转和缩放，可以使用矩阵变换将这些操作组合在一起。例如：

```css
transform: matrix(1.5, 0.5, -0.5, 1.5, 100, 50);
```

这个变换将元素缩放 1.5 倍，旋转 30 度，并向右平移 100px，向下平移 50px。

### 案例 2：3D 变换

在 3D 空间中，我们可以使用 `matrix3d()` 来实现更复杂的变换。例如：

```css
transform: matrix3d(
  1, 0, 0, 0,
  0, 1, 0, 0,
  0, 0, 1, 0,
  100, 50, 0, 1
);
```

这个变换将元素在 3D 空间中平移 100px 向右，50px 向下。

## 总结

CSS 矩阵变换是一种强大的工具，允许开发者通过数学矩阵来实现复杂的 2D 和 3D 变换。虽然矩阵变换的数学原理可能看起来复杂，但通过逐步学习和实践，你可以掌握这一技术，并在实际项目中应用它。

## 附加资源

- [MDN Web Docs: CSS transform](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)
- [CSS-Tricks: Understanding the CSS Transforms Matrix](https://css-tricks.com/understanding-the-css-transforms-matrix/)

## 练习

1. 使用 `matrix()` 函数实现一个元素的平移和旋转组合变换。
2. 尝试使用 `matrix3d()` 函数创建一个 3D 旋转效果。
3. 探索如何通过矩阵变换实现复杂的动画效果。

:::tip
练习时，可以使用浏览器的开发者工具实时查看和调整变换效果，这将帮助你更好地理解矩阵变换的工作原理。
:::