---
title: CSS 层叠顺序
description: 了解CSS层叠顺序（Stacking Context）的概念及其在网页布局中的应用。通过清晰的解释、代码示例和实际案例，掌握如何控制元素的层叠顺序。
---

# CSS 层叠顺序

在网页开发中，CSS层叠顺序（Stacking Context）是一个重要的概念，它决定了元素在页面上的显示顺序。理解层叠顺序有助于我们更好地控制元素的堆叠效果，尤其是在处理重叠元素时。

## 什么是层叠顺序？

层叠顺序是指当多个元素在页面上重叠时，浏览器如何决定哪个元素显示在上层，哪个元素显示在下层。CSS通过层叠上下文（Stacking Context）来管理这些元素的堆叠顺序。

:::note
层叠上下文是一个三维概念，它决定了元素在Z轴上的排列顺序。
:::

## 层叠顺序的规则

层叠顺序的规则基于以下几个因素：

1. **层叠上下文的创建**：某些CSS属性会创建一个新的层叠上下文，例如 `position: absolute`、`position: relative` 并且 `z-index` 不为 `auto`、`opacity` 小于 1 等。
2. **z-index**：`z-index` 属性用于控制元素在层叠上下文中的堆叠顺序。`z-index` 值越大，元素越靠上。
3. **元素在DOM中的顺序**：如果两个元素的 `z-index` 相同，那么它们在DOM中的顺序决定了它们的层叠顺序，后出现的元素会覆盖前面的元素。

## 代码示例

以下是一个简单的代码示例，展示了如何使用 `z-index` 控制元素的层叠顺序：

```html
<div style="position: relative; z-index: 1; background-color: red; width: 100px; height: 100px;"></div>
<div style="position: relative; z-index: 2; background-color: blue; width: 100px; height: 100px; margin-top: -50px;"></div>
```

在这个例子中，蓝色的 `div` 会覆盖红色的 `div`，因为它的 `z-index` 值更大。

## 层叠上下文的创建

某些CSS属性会创建一个新的层叠上下文。以下是一些常见的属性：

- `position: absolute` 或 `position: relative` 并且 `z-index` 不为 `auto`
- `position: fixed`
- `opacity` 小于 1
- `transform` 不为 `none`
- `filter` 不为 `none`

以下是一个创建新层叠上下文的示例：

```html
<div style="position: relative; z-index: 1; background-color: green; width: 150px; height: 150px;">
  <div style="position: absolute; z-index: 2; background-color: yellow; width: 100px; height: 100px; top: 50px; left: 50px;"></div>
</div>
<div style="position: relative; z-index: 3; background-color: purple; width: 100px; height: 100px; margin-top: -50px;"></div>
```

在这个例子中，黄色的 `div` 位于绿色的 `div` 内部，但由于绿色的 `div` 创建了一个新的层叠上下文，黄色的 `div` 不会覆盖紫色的 `div`。

## 实际应用场景

层叠顺序在实际开发中有很多应用场景，例如：

1. **模态框（Modal）**：模态框通常需要覆盖页面上的其他内容，因此需要设置较高的 `z-index` 值。
2. **下拉菜单**：下拉菜单需要覆盖页面上的其他元素，以确保用户可以正常操作。
3. **固定头部或侧边栏**：固定头部或侧边栏通常需要设置 `z-index` 以确保它们始终显示在页面顶部。

## 总结

CSS层叠顺序是控制元素堆叠效果的重要机制。通过理解层叠上下文的创建规则和 `z-index` 的使用，我们可以更好地控制页面元素的显示顺序。在实际开发中，合理使用层叠顺序可以提升用户体验，避免元素重叠带来的问题。

## 附加资源与练习

- **练习**：尝试创建一个包含多个层叠上下文的页面，并调整 `z-index` 值，观察元素的堆叠效果。
- **资源**：MDN Web Docs 上的 [CSS层叠上下文](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context) 文档提供了更详细的解释和示例。

通过不断练习和探索，你将能够熟练掌握CSS层叠顺序的使用，并在实际项目中灵活应用。