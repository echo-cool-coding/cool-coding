---
title: CSS 动画与JavaScript
description: "了解如何使用CSS动画与JavaScript结合，创建动态且交互性强的网页效果。本文适合初学者，包含代码示例和实际案例。"
---

## 介绍

CSS动画是一种强大的工具，可以让你在不使用JavaScript的情况下创建平滑的动画效果。然而，当我们需要更复杂的交互或动态控制动画时，JavaScript就变得不可或缺。通过结合CSS动画和JavaScript，你可以创建出更加灵活和动态的用户体验。

本文将带你了解如何将CSS动画与JavaScript结合使用，并通过实际案例展示其应用场景。

## CSS 动画基础

在深入探讨如何结合JavaScript之前，我们先回顾一下CSS动画的基础知识。

### 关键帧动画

CSS动画的核心是`@keyframes`规则，它定义了动画的各个阶段。例如：

```css
@keyframes slideIn {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}
```

这个动画将一个元素从左侧滑入页面。

### 应用动画

定义好关键帧后，你可以通过`animation`属性将其应用到元素上：

```css
.element {
  animation: slideIn 1s ease-in-out;
}
```

这会使`.element`元素在1秒内从左侧滑入页面。

## 结合JavaScript控制CSS动画

虽然CSS动画本身非常强大，但有时我们需要通过JavaScript来动态控制动画的播放、暂停、重启等操作。以下是一些常见的场景。

### 动态添加动画

你可以通过JavaScript动态地为元素添加或移除CSS类，从而触发动画。例如：

```html
<div id="box" class="box"></div>
<button id="animateButton">Animate</button>
```

```css
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.fade-in {
  animation: fadeIn 1s ease-in-out;
}
```

```javascript
document.getElementById('animateButton').addEventListener('click', () => {
  const box = document.getElementById('box');
  box.classList.add('fade-in');
});
```

点击按钮后，`#box`元素将触发`fadeIn`动画。

### 控制动画播放状态

你可以使用JavaScript来控制动画的播放状态。CSS提供了`animation-play-state`属性，可以设置为`running`或`paused`。

```javascript
const box = document.getElementById('box');

// 暂停动画
box.style.animationPlayState = 'paused';

// 继续播放动画
box.style.animationPlayState = 'running';
```

### 监听动画事件

JavaScript还可以监听CSS动画的开始、结束等事件。例如：

```javascript
box.addEventListener('animationstart', () => {
  console.log('Animation started');
});

box.addEventListener('animationend', () => {
  console.log('Animation ended');
});
```

这些事件可以帮助你在动画的不同阶段执行特定的操作。

## 实际案例

### 动态加载指示器

假设你正在开发一个网页，需要在数据加载时显示一个旋转的加载指示器。你可以使用CSS动画来实现旋转效果，并通过JavaScript控制其显示和隐藏。

```css
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.loader {
  width: 50px;
  height: 50px;
  border: 5px solid #f3f3f3;
  border-top: 5px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
```

```html
<div id="loader" class="loader" style="display: none;"></div>
<button id="loadData">Load Data</button>
```

```javascript
document.getElementById('loadData').addEventListener('click', () => {
  const loader = document.getElementById('loader');
  loader.style.display = 'block';

  // 模拟数据加载
  setTimeout(() => {
    loader.style.display = 'none';
    alert('Data loaded!');
  }, 3000);
});
```

点击“Load Data”按钮后，加载指示器将显示并旋转，直到数据加载完成。

## 总结

通过结合CSS动画和JavaScript，你可以创建出更加动态和交互性强的网页效果。CSS动画提供了简单而强大的动画效果，而JavaScript则允许你动态控制这些动画的播放状态、触发条件等。

希望本文能帮助你更好地理解如何将CSS动画与JavaScript结合使用。如果你有任何问题或需要进一步的帮助，请参考以下资源：

- [MDN Web Docs: CSS Animations](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations)
- [MDN Web Docs: Using CSS Animations](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations/Using_CSS_animations)
- [JavaScript Event Listeners](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)

## 练习

1. 创建一个按钮，点击后使一个元素从页面顶部滑入。
2. 使用JavaScript监听动画的结束事件，并在动画结束后显示一条消息。
3. 尝试使用`animation-play-state`属性来控制动画的暂停和继续播放。

通过这些练习，你将更深入地理解CSS动画与JavaScript的结合使用。