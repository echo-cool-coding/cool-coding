---
title: HTML 本地存储
description: 了解如何使用HTML5的本地存储功能，在浏览器中存储数据，实现持久化的客户端数据管理。
---

## 介绍

在现代Web开发中，HTML5引入了一种强大的功能——**本地存储**（Local Storage）。它允许开发者在用户的浏览器中存储数据，即使页面刷新或浏览器关闭，数据也不会丢失。与传统的Cookie相比，本地存储提供了更大的存储空间（通常为5MB）和更简单的API。

本地存储特别适用于需要在客户端保存用户偏好、表单数据或其他临时信息的场景。本文将详细介绍如何使用HTML本地存储，并通过实际案例展示其应用。

## 本地存储的基本概念

HTML本地存储是通过`localStorage`对象实现的。它是一个键值对存储系统，数据以字符串形式存储。与`sessionStorage`不同，`localStorage`中的数据在页面关闭后仍然保留，直到用户手动清除或通过代码删除。

### 存储数据

要将数据存储到`localStorage`中，可以使用`setItem`方法：

```javascript
localStorage.setItem('username', 'Alice');
```

这行代码将键`'username'`与值`'Alice'`关联起来，并将其存储在本地存储中。

### 读取数据

要从`localStorage`中读取数据，可以使用`getItem`方法：

```javascript
let username = localStorage.getItem('username');
console.log(username); // 输出: Alice
```

如果指定的键不存在，`getItem`将返回`null`。

### 删除数据

要删除某个键值对，可以使用`removeItem`方法：

```javascript
localStorage.removeItem('username');
```

执行这行代码后，`'username'`键及其对应的值将从本地存储中移除。

### 清空所有数据

如果你想清空整个本地存储，可以使用`clear`方法：

```javascript
localStorage.clear();
```

这将删除所有存储在`localStorage`中的数据。

## 实际案例：保存用户偏好

假设你正在开发一个网站，允许用户选择主题（如“深色模式”或“浅色模式”）。你可以使用`localStorage`来保存用户的选择，以便在用户下次访问时自动应用。

### 示例代码

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主题选择器</title>
    <style>
        body.dark-mode {
            background-color: black;
            color: white;
        }
    </style>
</head>
<body>
    <h1>选择主题</h1>
    <button id="light-mode">浅色模式</button>
    <button id="dark-mode">深色模式</button>

    <script>
        // 检查本地存储中是否有保存的主题
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.body.classList.add(savedTheme);
        }

        // 为按钮添加事件监听器
        document.getElementById('light-mode').addEventListener('click', () => {
            document.body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light-mode');
        });

        document.getElementById('dark-mode').addEventListener('click', () => {
            document.body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark-mode');
        });
    </script>
</body>
</html>
```

### 代码解释

1. **保存主题**：当用户点击“深色模式”或“浅色模式”按钮时，选择的主题会被保存到`localStorage`中。
2. **加载主题**：页面加载时，脚本会检查`localStorage`中是否有保存的主题，并根据结果应用相应的样式。

:::tip
你可以通过浏览器的开发者工具（通常按F12打开）查看`localStorage`中的数据。在“Application”或“Storage”选项卡中，找到“Local Storage”部分，即可看到存储的键值对。
:::

## 总结

HTML本地存储是一个简单而强大的工具，适用于需要在客户端持久化存储数据的场景。通过`localStorage`对象，你可以轻松地存储、读取和删除数据。本文介绍了本地存储的基本用法，并通过一个实际案例展示了如何保存用户偏好。

## 附加资源与练习

- **练习1**：尝试扩展上述主题选择器的功能，使其支持更多主题（如“蓝色模式”、“绿色模式”等）。
- **练习2**：创建一个简单的待办事项列表应用，使用`localStorage`保存用户的待办事项。
- **进一步阅读**：了解`sessionStorage`与`localStorage`的区别，并尝试在项目中结合使用它们。

:::caution
请注意，`localStorage`只能存储字符串。如果你需要存储复杂的数据结构（如对象或数组），可以使用`JSON.stringify`和`JSON.parse`进行转换。
:::

```javascript
let user = { name: 'Alice', age: 25 };
localStorage.setItem('user', JSON.stringify(user));

let storedUser = JSON.parse(localStorage.getItem('user'));
console.log(storedUser); // 输出: { name: 'Alice', age: 25 }
```

通过本文的学习，你应该已经掌握了HTML本地存储的基本用法。现在，尝试在你的项目中应用这些知识吧！