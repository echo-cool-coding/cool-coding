---
title: HTML Canvas操作
description: "学习如何使用HTML Canvas进行图形绘制和交互操作，掌握Canvas的基础API及其与JavaScript的结合使用。"
---

## 介绍

HTML Canvas 是 HTML5 提供的一个强大的绘图工具，它允许开发者通过 JavaScript 在网页上动态绘制图形、动画和交互式内容。Canvas 是一个矩形区域，你可以通过 JavaScript 控制其每一个像素，从而实现复杂的视觉效果。

在本教程中，我们将逐步介绍如何使用 HTML Canvas 进行基本绘图、添加交互功能，并通过实际案例展示其应用场景。

## 基本用法

### 1. 创建 Canvas 元素

首先，你需要在 HTML 中创建一个 `<canvas>` 元素：

```html
<canvas id="myCanvas" width="500" height="500"></canvas>
```

`<canvas>` 元素有两个重要的属性：`width` 和 `height`，它们定义了画布的大小。如果不设置这些属性，默认大小为 300x150 像素。

### 2. 获取 Canvas 上下文

要在 Canvas 上绘图，你需要获取其上下文（context）。上下文是一个对象，提供了绘图所需的 API。通常我们使用 2D 上下文：

```javascript
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');
```

### 3. 绘制基本图形

#### 绘制矩形

你可以使用 `fillRect()` 和 `strokeRect()` 方法绘制填充矩形和边框矩形：

```javascript
ctx.fillStyle = 'blue'; // 设置填充颜色
ctx.fillRect(50, 50, 100, 100); // 绘制填充矩形

ctx.strokeStyle = 'red'; // 设置边框颜色
ctx.strokeRect(200, 50, 100, 100); // 绘制边框矩形
```

#### 绘制路径

路径是 Canvas 中绘制复杂图形的基础。你可以使用以下方法绘制路径：

```javascript
ctx.beginPath(); // 开始路径
ctx.moveTo(50, 200); // 移动到起点
ctx.lineTo(150, 300); // 画线到终点
ctx.lineTo(250, 200); // 继续画线
ctx.closePath(); // 闭合路径
ctx.stroke(); // 绘制路径
```

#### 绘制圆形

使用 `arc()` 方法可以绘制圆形或圆弧：

```javascript
ctx.beginPath();
ctx.arc(150, 150, 50, 0, Math.PI * 2); // 绘制圆形
ctx.fillStyle = 'green';
ctx.fill();
```

### 4. 添加文本

你可以在 Canvas 上绘制文本：

```javascript
ctx.font = '30px Arial'; // 设置字体
ctx.fillStyle = 'black'; // 设置文本颜色
ctx.fillText('Hello, Canvas!', 50, 400); // 绘制文本
```

## 交互操作

### 1. 鼠标事件

Canvas 本身并不直接支持事件处理，但你可以通过 JavaScript 监听鼠标事件来实现交互。例如，监听鼠标点击事件并在点击位置绘制一个点：

```javascript
canvas.addEventListener('click', function(event) {
    const rect = canvas.getBoundingClientRect();
    const x = event.clientX - rect.left;
    const y = event.clientY - rect.top;

    ctx.beginPath();
    ctx.arc(x, y, 5, 0, Math.PI * 2);
    ctx.fillStyle = 'purple';
    ctx.fill();
});
```

### 2. 动画

通过不断更新 Canvas 内容，你可以创建动画效果。以下是一个简单的动画示例，绘制一个移动的圆形：

```javascript
let x = 50;

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height); // 清除画布
    ctx.beginPath();
    ctx.arc(x, 150, 50, 0, Math.PI * 2);
    ctx.fillStyle = 'orange';
    ctx.fill();

    x += 2; // 更新圆形位置
    if (x > canvas.width + 50) {
        x = -50; // 重置圆形位置
    }

    requestAnimationFrame(draw); // 递归调用以创建动画
}

draw();
```

## 实际应用案例

### 1. 绘制图表

Canvas 非常适合用于绘制动态图表。以下是一个简单的柱状图示例：

```javascript
const data = [30, 80, 120, 60, 150];
const barWidth = 50;
const barSpacing = 20;
let x = 50;

data.forEach(value => {
    ctx.fillStyle = 'teal';
    ctx.fillRect(x, canvas.height - value, barWidth, value);
    x += barWidth + barSpacing;
});
```

### 2. 游戏开发

Canvas 是开发简单网页游戏的理想工具。你可以使用它来绘制游戏角色、背景和交互元素。以下是一个简单的游戏示例，玩家可以通过键盘控制一个矩形移动：

```javascript
let playerX = 250;
let playerY = 250;

function drawPlayer() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'blue';
    ctx.fillRect(playerX, playerY, 50, 50);
}

document.addEventListener('keydown', function(event) {
    if (event.key === 'ArrowLeft') {
        playerX -= 10;
    } else if (event.key === 'ArrowRight') {
        playerX += 10;
    } else if (event.key === 'ArrowUp') {
        playerY -= 10;
    } else if (event.key === 'ArrowDown') {
        playerY += 10;
    }
    drawPlayer();
});

drawPlayer();
```

## 总结

HTML Canvas 是一个功能强大的工具，适用于各种图形绘制和交互场景。通过本教程，你已经学会了如何使用 Canvas 绘制基本图形、添加交互功能以及创建动画效果。希望这些知识能够帮助你在网页开发中实现更多创意和功能。

## 附加资源与练习

- **练习 1**：尝试在 Canvas 上绘制一个简单的笑脸表情。
- **练习 2**：创建一个动画，让一个圆形在 Canvas 上沿对角线移动。
- **附加资源**：
  - [MDN Canvas 文档](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API)
  - [Canvas 教程 - W3Schools](https://www.w3schools.com/graphics/canvas_intro.asp)

继续探索 Canvas 的更多功能，并尝试将其应用到你的项目中！