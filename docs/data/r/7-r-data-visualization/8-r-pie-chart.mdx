---
title: R饼图
description: 学习如何使用R语言创建饼图，掌握饼图的基本概念、代码实现以及实际应用场景。
---

# R饼图

饼图是一种常见的数据可视化工具，用于展示数据中各个类别的比例关系。它通过将一个圆形分割成多个扇形区域，每个区域的大小表示对应类别的占比。在R语言中，饼图的创建非常简单，适合初学者快速上手。

## 饼图的基本概念

饼图的核心思想是将数据的总和视为一个完整的圆，每个数据类别占据圆的一部分。每个扇形的面积与对应类别的数值成正比。饼图适用于展示少量类别（通常不超过5-6个）的比例关系，因为过多的类别会导致扇形过于细小，难以辨认。

## 创建饼图的基本步骤

在R中，可以使用 `pie()` 函数来创建饼图。以下是创建饼图的基本步骤：

1. **准备数据**：将数据存储为一个数值向量。
2. **添加标签**：为每个数据类别添加标签。
3. **调用 `pie()` 函数**：使用 `pie()` 函数绘制饼图。

### 示例代码

以下是一个简单的示例，展示如何创建一个饼图：

```r
# 准备数据
slices <- c(20, 30, 40, 10)
labels <- c("类别A", "类别B", "类别C", "类别D")

# 绘制饼图
pie(slices, labels = labels, main = "简单的饼图示例")
```

:::note
**注意**：`slices` 是一个数值向量，表示每个类别的数值；`labels` 是一个字符向量，表示每个类别的名称。
:::

### 输出结果

运行上述代码后，你将看到一个饼图，其中包含四个扇形区域，分别对应“类别A”、“类别B”、“类别C”和“类别D”。每个扇形的大小与 `slices` 中的数值成正比。

## 自定义饼图

R的 `pie()` 函数提供了多种参数，允许你自定义饼图的外观。以下是一些常用的自定义选项：

- **颜色**：使用 `col` 参数为每个扇形指定颜色。
- **百分比显示**：使用 `labels` 参数显示每个扇形的百分比。
- **起始角度**：使用 `init.angle` 参数设置饼图的起始角度。

### 示例代码：自定义饼图

```r
# 准备数据
slices <- c(20, 30, 40, 10)
labels <- c("类别A", "类别B", "类别C", "类别D")
colors <- c("red", "blue", "green", "yellow")

# 绘制自定义饼图
pie(slices, labels = paste0(labels, " (", round(slices/sum(slices)*100, 1), "%)"), 
    col = colors, init.angle = 90, main = "自定义饼图示例")
```

:::tip
**提示**：`paste0()` 函数用于将标签和百分比拼接在一起，`round()` 函数用于将百分比保留一位小数。
:::

### 输出结果

运行上述代码后，你将看到一个自定义的饼图，其中每个扇形区域的颜色不同，并且显示了每个类别的百分比。

## 实际应用场景

饼图常用于展示以下类型的数据：

1. **市场份额**：展示不同公司在市场中的份额。
2. **调查结果**：展示调查中各选项的选择比例。
3. **预算分配**：展示预算在不同项目中的分配情况。

### 示例：展示市场份额

假设我们有以下市场份额数据：

- 公司A：35%
- 公司B：25%
- 公司C：20%
- 公司D：15%
- 其他：5%

我们可以使用饼图来展示这些数据：

```r
# 准备数据
slices <- c(35, 25, 20, 15, 5)
labels <- c("公司A", "公司B", "公司C", "公司D", "其他")

# 绘制饼图
pie(slices, labels = paste0(labels, " (", slices, "%)"), 
    col = rainbow(length(slices)), main = "市场份额饼图")
```

:::caution
**注意**：当类别过多时，饼图可能变得难以阅读。在这种情况下，建议使用条形图或其他更适合的可视化方式。
:::

## 总结

饼图是一种简单而有效的数据可视化工具，适合展示少量类别的比例关系。通过R的 `pie()` 函数，你可以轻松创建和自定义饼图。在实际应用中，饼图常用于展示市场份额、调查结果和预算分配等场景。

## 附加资源与练习

- **练习1**：使用R内置的 `mtcars` 数据集，创建一个饼图，展示不同气缸数（`cyl`）的汽车占比。
- **练习2**：尝试为饼图添加图例，并使用不同的颜色方案（如 `heat.colors()` 或 `terrain.colors()`）。

:::warning
**警告**：饼图并不适合所有类型的数据。当类别过多或数据差异较小时，饼图可能无法有效传达信息。在这种情况下，建议使用其他类型的图表，如条形图或堆叠条形图。
:::

希望这篇教程能帮助你掌握R中的饼图绘制技巧！继续练习，你将能够更熟练地使用R进行数据可视化。