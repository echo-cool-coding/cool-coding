---
title: Pandas 重命名
description: 学习如何使用Pandas重命名DataFrame的列和行索引，掌握数据清洗和整理的基本技巧。
---

# Pandas 重命名

在数据处理和分析中，重命名列或行索引是一个常见的操作。Pandas提供了简单而强大的工具来帮助我们完成这项任务。本文将详细介绍如何使用Pandas重命名DataFrame中的列和行索引，并通过实际案例展示其应用场景。

## 介绍

在Pandas中，DataFrame是一个二维的表格数据结构，类似于Excel中的表格。每一列都有一个列名，每一行也有一个行索引。有时候，我们需要修改这些列名或行索引，以便更好地理解数据或与其他数据集进行合并。

Pandas提供了`rename()`方法来实现这一功能。通过`rename()`，我们可以轻松地修改列名或行索引，而不需要手动逐个修改。

## 重命名列

### 基本用法

假设我们有一个包含学生信息的DataFrame：

```python
import pandas as pd

data = {
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Age': [24, 27, 22],
    'Grade': ['A', 'B', 'C']
}

df = pd.DataFrame(data)
print(df)
```

输出：

```
      Name  Age Grade
0    Alice   24     A
1      Bob   27     B
2  Charlie   22     C
```

现在，我们想将列名`Name`改为`Full Name`，`Age`改为`Years`，`Grade`改为`Score`。可以使用`rename()`方法：

```python
df_renamed = df.rename(columns={
    'Name': 'Full Name',
    'Age': 'Years',
    'Grade': 'Score'
})
print(df_renamed)
```

输出：

```
  Full Name  Years Score
0     Alice     24     A
1       Bob     27     B
2   Charlie     22     C
```

### 原地修改

默认情况下，`rename()`方法会返回一个新的DataFrame，而不会修改原始DataFrame。如果你想直接在原始DataFrame上进行修改，可以设置`inplace=True`：

```python
df.rename(columns={
    'Name': 'Full Name',
    'Age': 'Years',
    'Grade': 'Score'
}, inplace=True)
print(df)
```

输出：

```
  Full Name  Years Score
0     Alice     24     A
1       Bob     27     B
2   Charlie     22     C
```

## 重命名行索引

### 基本用法

除了重命名列，我们还可以重命名行索引。假设我们有以下DataFrame：

```python
data = {
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Age': [24, 27, 22],
    'Grade': ['A', 'B', 'C']
}

df = pd.DataFrame(data, index=['a', 'b', 'c'])
print(df)
```

输出：

```
      Name  Age Grade
a    Alice   24     A
b      Bob   27     B
c  Charlie   22     C
```

现在，我们想将行索引`a`改为`student1`，`b`改为`student2`，`c`改为`student3`。可以使用`rename()`方法：

```python
df_renamed = df.rename(index={
    'a': 'student1',
    'b': 'student2',
    'c': 'student3'
})
print(df_renamed)
```

输出：

```
           Name  Age Grade
student1  Alice   24     A
student2    Bob   27     B
student3 Charlie   22     C
```

### 同时重命名列和行索引

你还可以同时重命名列和行索引：

```python
df_renamed = df.rename(
    columns={
        'Name': 'Full Name',
        'Age': 'Years',
        'Grade': 'Score'
    },
    index={
        'a': 'student1',
        'b': 'student2',
        'c': 'student3'
    }
)
print(df_renamed)
```

输出：

```
           Full Name  Years Score
student1       Alice     24     A
student2         Bob     27     B
student3     Charlie     22     C
```

## 实际案例

### 数据清洗

在数据清洗过程中，重命名列和行索引是非常常见的操作。例如，假设我们从一个外部数据源导入了一个数据集，列名可能包含空格或特殊字符，这会影响后续的数据处理。我们可以使用`rename()`方法来规范化列名：

```python
data = {
    'First Name': ['Alice', 'Bob', 'Charlie'],
    'Age (years)': [24, 27, 22],
    'Grade Level': ['A', 'B', 'C']
}

df = pd.DataFrame(data)
print(df)
```

输出：

```
  First Name  Age (years) Grade Level
0      Alice           24           A
1        Bob           27           B
2    Charlie           22           C
```

我们可以将列名改为更简洁的形式：

```python
df_renamed = df.rename(columns={
    'First Name': 'Name',
    'Age (years)': 'Age',
    'Grade Level': 'Grade'
})
print(df_renamed)
```

输出：

```
      Name  Age Grade
0    Alice   24     A
1      Bob   27     B
2  Charlie   22     C
```

### 数据合并

在数据合并时，重命名列名可以避免列名冲突。例如，假设我们有两个DataFrame，分别包含学生的成绩和出勤信息：

```python
grades = pd.DataFrame({
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Grade': ['A', 'B', 'C']
})

attendance = pd.DataFrame({
    'Name': ['Alice', 'Bob', 'Charlie'],
    'Days Present': [20, 18, 22]
})
```

如果我们想将这两个DataFrame合并，但保留各自的列名，可以先重命名其中一个DataFrame的列：

```python
attendance_renamed = attendance.rename(columns={
    'Days Present': 'Attendance Days'
})

merged_df = pd.merge(grades, attendance_renamed, on='Name')
print(merged_df)
```

输出：

```
      Name Grade  Attendance Days
0    Alice     A               20
1      Bob     B               18
2  Charlie     C               22
```

## 总结

通过本文，我们学习了如何使用Pandas的`rename()`方法来重命名DataFrame的列和行索引。我们还通过实际案例展示了这一功能在数据清洗和数据合并中的应用。

:::tip
在实际项目中，重命名列和行索引是一个非常有用的技巧，尤其是在处理来自不同数据源的数据时。确保列名和行索引的清晰和一致性，可以大大提高数据处理的效率。
:::

## 附加资源

- [Pandas官方文档 - rename](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rename.html)
- [Pandas数据清洗指南](https://pandas.pydata.org/pandas-docs/stable/user_guide/cleaning.html)

## 练习

1. 创建一个包含5行3列的DataFrame，列名分别为`A`, `B`, `C`。使用`rename()`方法将列名改为`X`, `Y`, `Z`。
2. 创建一个包含学生信息的DataFrame，行索引为`S1`, `S2`, `S3`。使用`rename()`方法将行索引改为`Student1`, `Student2`, `Student3`。
3. 尝试同时重命名列和行索引，并观察结果。

通过完成这些练习，你将更好地掌握Pandas重命名的技巧。