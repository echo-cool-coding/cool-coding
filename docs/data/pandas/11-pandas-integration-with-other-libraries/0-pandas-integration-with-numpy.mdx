---
title: Pandas 与NumPy集成
description: "了解如何将Pandas与NumPy集成，利用两者的优势进行高效的数据处理和分析。"
---

# Pandas 与NumPy集成

Pandas 和 NumPy 是 Python 数据科学生态系统中两个最重要的库。Pandas 提供了强大的数据结构和数据分析工具，而 NumPy 则专注于高效的数值计算。两者之间的紧密集成使得数据科学家能够轻松地在数据分析和数值计算之间切换，从而更高效地处理数据。

## 为什么需要集成Pandas与NumPy？

Pandas 的 `DataFrame` 和 `Series` 是建立在 NumPy 的 `ndarray` 之上的。这意味着 Pandas 的数据结构可以直接与 NumPy 的函数和操作进行交互。通过集成 Pandas 和 NumPy，你可以：

- 利用 NumPy 的高效数值计算能力来处理 Pandas 数据。
- 将 Pandas 数据转换为 NumPy 数组，以便使用 NumPy 的数学函数。
- 将 NumPy 数组转换为 Pandas 数据结构，以便进行更高级的数据分析。

## 从Pandas到NumPy

Pandas 的 `DataFrame` 和 `Series` 对象都有一个 `.values` 属性，它返回一个 NumPy 数组。这使得你可以轻松地将 Pandas 数据转换为 NumPy 数组。

```python
import pandas as pd
import numpy as np

# 创建一个简单的DataFrame
df = pd.DataFrame({
    'A': [1, 2, 3],
    'B': [4, 5, 6]
})

# 将DataFrame转换为NumPy数组
numpy_array = df.values
print(numpy_array)
```

**输出：**
```
[[1 4]
 [2 5]
 [3 6]]
```

:::note
从 Pandas 1.0.0 版本开始，推荐使用 `.to_numpy()` 方法而不是 `.values` 属性来将 Pandas 数据转换为 NumPy 数组。
:::

```python
numpy_array = df.to_numpy()
print(numpy_array)
```

**输出：**
```
[[1 4]
 [2 5]
 [3 6]]
```

## 从NumPy到Pandas

你也可以将 NumPy 数组转换为 Pandas 的 `DataFrame` 或 `Series`。这在处理数值计算后需要进一步分析数据时非常有用。

```python
# 创建一个NumPy数组
numpy_array = np.array([[1, 2], [3, 4]])

# 将NumPy数组转换为DataFrame
df = pd.DataFrame(numpy_array, columns=['A', 'B'])
print(df)
```

**输出：**
```
   A  B
0  1  2
1  3  4
```

## 实际应用场景

假设你有一个包含学生考试成绩的 Pandas `DataFrame`，你想要计算每个学生的平均分数，并使用 NumPy 的 `mean` 函数来完成这个任务。

```python
# 创建一个包含学生考试成绩的DataFrame
df = pd.DataFrame({
    'Math': [85, 90, 78],
    'Science': [88, 92, 85],
    'History': [75, 80, 82]
})

# 使用NumPy计算每行的平均分数
df['Average'] = np.mean(df.to_numpy(), axis=1)
print(df)
```

**输出：**
```
   Math  Science  History  Average
0    85       88       75     82.666667
1    90       92       80     87.333333
2    78       85       82     81.666667
```

在这个例子中，我们首先将 `DataFrame` 转换为 NumPy 数组，然后使用 NumPy 的 `mean` 函数计算每行的平均分数，最后将结果添加回 `DataFrame` 中。

## 总结

Pandas 和 NumPy 的集成使得数据科学家能够在数据分析和数值计算之间无缝切换。通过将 Pandas 数据转换为 NumPy 数组，你可以利用 NumPy 的高效数值计算能力；而将 NumPy 数组转换为 Pandas 数据结构，则可以进行更高级的数据分析。

## 附加资源与练习

- **练习 1**：创建一个包含随机数的 NumPy 数组，并将其转换为 Pandas `DataFrame`。然后使用 Pandas 的 `.describe()` 方法生成数据的统计摘要。
- **练习 2**：使用 Pandas 读取一个 CSV 文件，将其转换为 NumPy 数组，然后使用 NumPy 的 `std` 函数计算每列的标准差。

通过实践这些练习，你将更好地理解 Pandas 和 NumPy 之间的集成，并能够在实际项目中灵活运用它们。