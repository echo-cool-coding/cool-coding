---
title: Pandas 左连接
description: 学习如何使用Pandas的左连接（Left Join）操作合并数据，适合初学者。
---

# Pandas 左连接

在数据处理和分析中，数据合并是一个常见的操作。Pandas库提供了多种合并数据的方法，其中**左连接（Left Join）**是最常用的之一。本文将详细介绍左连接的概念、使用方法以及实际应用场景。

## 什么是左连接？

左连接是一种基于键（key）的合并操作，它将两个数据集按照指定的键进行匹配，并保留左侧数据集的所有行，即使右侧数据集中没有匹配的行。如果右侧数据集中没有匹配的行，则结果中对应的列将填充为缺失值（NaN）。

### 左连接的语法

在Pandas中，左连接可以通过 `merge()` 函数实现，语法如下：

```python
pd.merge(left, right, how='left', on='key')
```

- `left`：左侧数据集（DataFrame）。
- `right`：右侧数据集（DataFrame）。
- `how`：指定连接方式，这里设置为 `'left'`。
- `on`：指定用于连接的键（列名）。

## 左连接的示例

让我们通过一个简单的例子来理解左连接的工作原理。

### 示例数据

假设我们有两个数据集：

- `df1` 包含员工的基本信息：
  ```python
  import pandas as pd

  df1 = pd.DataFrame({
      '员工ID': [1, 2, 3, 4],
      '姓名': ['张三', '李四', '王五', '赵六']
  })
  ```

- `df2` 包含员工的部门信息：
  ```python
  df2 = pd.DataFrame({
      '员工ID': [1, 2, 4, 5],
      '部门': ['销售', '财务', '人事', '市场']
  })
  ```

### 执行左连接

我们可以使用左连接将这两个数据集合并：

```python
result = pd.merge(df1, df2, how='left', on='员工ID')
print(result)
```

### 输出结果

```plaintext
   员工ID  姓名   部门
0     1  张三   销售
1     2  李四   财务
2     3  王五   NaN
3     4  赵六   人事
```

:::note
注意：`df1` 中的员工ID为3的员工在 `df2` 中没有对应的部门信息，因此在合并结果中，该员工的部门列显示为 `NaN`。
:::

## 实际应用场景

左连接在实际应用中非常有用，尤其是在处理不完整数据时。以下是一个实际场景：

### 场景描述

假设你有一个包含所有员工信息的表格，但只有部分员工有部门信息。你需要生成一个包含所有员工的列表，并尽可能填充他们的部门信息。

### 解决方案

使用左连接可以轻松实现这一需求：

```python
# 假设 df1 是所有员工的列表，df2 是部分员工的部门信息
result = pd.merge(df1, df2, how='left', on='员工ID')
```

这样，你就可以得到一个包含所有员工的列表，并且有部门信息的员工会被正确填充，没有部门信息的员工则显示为 `NaN`。

## 总结

左连接是Pandas中一种非常强大的数据合并工具，特别适合处理不完整的数据集。通过左连接，你可以保留左侧数据集的所有行，并从右侧数据集中获取匹配的信息。如果右侧数据集中没有匹配的行，结果中对应的列将填充为缺失值。

:::tip
提示：在实际应用中，左连接常用于数据清洗和预处理阶段，以确保数据的完整性。
:::

## 附加资源与练习

为了巩固你对左连接的理解，建议你尝试以下练习：

1. 创建两个不同的数据集，并使用左连接将它们合并。
2. 尝试在不同的列上进行左连接，观察结果的变化。
3. 使用 `fillna()` 方法处理合并结果中的缺失值。

通过这些练习，你将更深入地理解左连接的工作原理，并能够在实际项目中灵活运用。

:::caution
注意：在进行数据合并时，务必确保用于连接的键（列）在两个数据集中具有一致的数据类型，否则可能会导致合并失败或结果不准确。
:::