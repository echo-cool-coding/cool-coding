---
title: Apache Drill 命令行界面
description: 了解如何使用Apache Drill的命令行界面（CLI）进行数据查询和操作。本文适合初学者，包含详细的步骤、代码示例和实际应用场景。
---

## 介绍

Apache Drill 是一个开源的分布式 SQL 查询引擎，能够对多种数据源（如文件、NoSQL 数据库、云存储等）进行快速查询。Drill 提供了一个命令行界面（CLI），允许用户通过终端直接与 Drill 进行交互，执行 SQL 查询并查看结果。

本文将详细介绍如何使用 Apache Drill 的命令行界面，包括如何启动 CLI、执行查询、查看结果以及一些实际应用场景。

## 启动 Apache Drill CLI

要使用 Apache Drill 的命令行界面，首先需要确保你已经安装并启动了 Apache Drill。假设你已经完成了这些步骤，接下来可以通过以下命令启动 CLI：

```bash
$ drill-embedded
```

启动后，你会看到一个类似于 SQL 提示符的界面，表示你已经成功进入了 Drill 的 CLI 环境。

:::note
如果你使用的是分布式模式，启动命令可能会有所不同。请参考 Apache Drill 的官方文档以获取更多信息。
:::

## 基本命令

在 Drill CLI 中，你可以执行标准的 SQL 查询。以下是一些基本的命令示例：

### 查看可用数据库

```sql
SHOW DATABASES;
```

**输出示例：**

```plaintext
+---------------------+
|     SCHEMA_NAME     |
+---------------------+
| INFORMATION_SCHEMA  |
| cp.default          |
| dfs.default         |
| sys                 |
+---------------------+
```

### 切换数据库

```sql
USE dfs.default;
```

**输出示例：**

```plaintext
+-------+---------------------------------------+
|  ok   |                summary                |
+-------+---------------------------------------+
| true  | Default schema changed to [dfs.default] |
+-------+---------------------------------------+
```

### 查询数据

假设你有一个 CSV 文件 `employees.csv`，你可以使用以下命令查询数据：

```sql
SELECT * FROM dfs.`/path/to/employees.csv`;
```

**输出示例：**

```plaintext
+--------+----------+-----------+
|  name  |   age    |  salary   |
+--------+----------+-----------+
| Alice  |    30    |   50000   |
| Bob    |    25    |   45000   |
| Carol  |    35    |   60000   |
+--------+----------+-----------+
```

## 实际应用场景

### 场景 1：查询 JSON 文件

假设你有一个 JSON 文件 `data.json`，内容如下：

```json
[
  {"name": "Alice", "age": 30, "salary": 50000},
  {"name": "Bob", "age": 25, "salary": 45000},
  {"name": "Carol", "age": 35, "salary": 60000}
]
```

你可以使用以下命令查询该文件：

```sql
SELECT * FROM dfs.`/path/to/data.json`;
```

**输出示例：**

```plaintext
+--------+----------+-----------+
|  name  |   age    |  salary   |
+--------+----------+-----------+
| Alice  |    30    |   50000   |
| Bob    |    25    |   45000   |
| Carol  |    35    |   60000   |
+--------+----------+-----------+
```

### 场景 2：查询嵌套 JSON

假设你有一个嵌套的 JSON 文件 `nested_data.json`，内容如下：

```json
[
  {"name": "Alice", "details": {"age": 30, "salary": 50000}},
  {"name": "Bob", "details": {"age": 25, "salary": 45000}},
  {"name": "Carol", "details": {"age": 35, "salary": 60000}}
]
```

你可以使用以下命令查询嵌套字段：

```sql
SELECT name, details.age, details.salary FROM dfs.`/path/to/nested_data.json`;
```

**输出示例：**

```plaintext
+--------+----------+-----------+
|  name  |   age    |  salary   |
+--------+----------+-----------+
| Alice  |    30    |   50000   |
| Bob    |    25    |   45000   |
| Carol  |    35    |   60000   |
+--------+----------+-----------+
```

## 总结

Apache Drill 的命令行界面（CLI）是一个强大的工具，允许你通过终端直接与 Drill 进行交互，执行 SQL 查询并查看结果。本文介绍了如何启动 CLI、执行基本命令以及一些实际应用场景。

通过掌握这些基本操作，你可以开始使用 Apache Drill 进行更复杂的数据查询和分析。

## 附加资源

- [Apache Drill 官方文档](https://drill.apache.org/docs/)
- [Drill CLI 命令参考](https://drill.apache.org/docs/command-line-interface-cli/)

## 练习

1. 尝试使用 Drill CLI 查询一个 CSV 文件，并筛选出年龄大于 30 岁的员工。
2. 使用 Drill CLI 查询一个嵌套的 JSON 文件，并尝试提取嵌套字段。

通过完成这些练习，你将更深入地理解 Apache Drill CLI 的使用方法。