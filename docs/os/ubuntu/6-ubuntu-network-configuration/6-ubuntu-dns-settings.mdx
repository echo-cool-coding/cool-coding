---
title: Ubuntu DNS 设置
description: 学习如何在 Ubuntu 系统中配置 DNS 设置，确保网络连接的高效性和可靠性。
---

# Ubuntu DNS 设置

在 Ubuntu 系统中，DNS（Domain Name System）设置是网络配置的重要组成部分。DNS 负责将人类可读的域名（如 `www.example.com`）转换为机器可读的 IP 地址（如 `192.0.2.1`）。正确配置 DNS 可以确保你的系统能够快速、可靠地访问互联网资源。

## 什么是 DNS？

DNS 是互联网的电话簿。当你访问一个网站时，你的计算机需要知道该网站的 IP 地址才能连接到它。DNS 服务器负责将域名解析为 IP 地址。如果没有正确配置 DNS，你的系统可能无法访问某些网站或服务。

## 检查当前的 DNS 设置

在开始配置之前，我们可以先检查当前的 DNS 设置。打开终端并输入以下命令：

```bash
nmcli dev show | grep DNS
```

输出可能类似于：

```plaintext
IP4.DNS[1]: 8.8.8.8
IP4.DNS[2]: 8.8.4.4
```

这表示当前系统使用的 DNS 服务器是 `8.8.8.8` 和 `8.8.4.4`（Google 的公共 DNS 服务器）。

## 配置 DNS 服务器

在 Ubuntu 中，有几种方法可以配置 DNS 服务器。我们将介绍两种常见的方法：通过 `NetworkManager` 和手动编辑配置文件。

### 方法 1：使用 NetworkManager 配置 DNS

1. 打开终端并输入以下命令以打开网络连接设置：

   ```bash
   nm-connection-editor
   ```

2. 选择你想要配置的网络连接，然后点击“编辑”。

3. 在“IPv4 设置”或“IPv6 设置”选项卡中，找到“DNS 服务器”字段。

4. 输入你想要使用的 DNS 服务器地址，例如 `1.1.1.1`（Cloudflare 的公共 DNS 服务器）和 `8.8.8.8`（Google 的公共 DNS 服务器）。

5. 点击“保存”并关闭窗口。

6. 重启网络连接以使更改生效：

   ```bash
   sudo systemctl restart NetworkManager
   ```

### 方法 2：手动编辑配置文件

1. 打开终端并编辑网络接口配置文件。例如，编辑 `eth0` 接口的配置文件：

   ```bash
   sudo nano /etc/network/interfaces
   ```

2. 找到与你的网络接口相关的部分，并添加或修改 `dns-nameservers` 行：

   ```plaintext
   iface eth0 inet dhcp
       dns-nameservers 1.1.1.1 8.8.8.8
   ```

3. 保存并退出编辑器。

4. 重启网络服务以使更改生效：

   ```bash
   sudo systemctl restart networking
   ```

## 实际案例

假设你正在开发一个需要访问特定域名的应用程序，但发现该域名无法解析。通过检查 DNS 设置，你发现当前使用的 DNS 服务器无法解析该域名。你可以通过切换到另一个公共 DNS 服务器（如 Cloudflare 的 `1.1.1.1`）来解决这个问题。

## 总结

正确配置 DNS 设置对于确保系统的网络连接至关重要。通过使用 `NetworkManager` 或手动编辑配置文件，你可以轻松地更改 Ubuntu 系统中的 DNS 服务器。希望本文能帮助你更好地理解和配置 Ubuntu 中的 DNS 设置。

## 附加资源

- [Google 公共 DNS](https://developers.google.com/speed/public-dns)
- [Cloudflare 公共 DNS](https://1.1.1.1/dns/)
- [Ubuntu 网络配置官方文档](https://ubuntu.com/server/docs/network-configuration)

## 练习

1. 检查你当前系统的 DNS 设置，并记录下使用的 DNS 服务器。
2. 尝试将 DNS 服务器更改为 `1.1.1.1` 和 `8.8.8.8`，并测试网络连接是否正常。
3. 手动编辑网络接口配置文件，添加自定义的 DNS 服务器，并验证配置是否生效。
