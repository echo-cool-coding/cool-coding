---
title: Ubuntu IP配置
description: 学习如何在Ubuntu系统中配置IP地址，包括静态IP和动态IP的设置方法，以及相关的网络工具使用。
---

# Ubuntu IP配置

在Ubuntu系统中，IP配置是网络管理的基础。无论是静态IP还是动态IP，正确的配置都能确保你的设备能够顺利连接到网络。本文将详细介绍如何在Ubuntu中配置IP地址，并通过实际案例帮助你理解这些概念。

## 1. 什么是IP地址？

IP地址（Internet Protocol Address）是分配给网络中每个设备的唯一标识符。它允许设备在网络中相互通信。IP地址可以是静态的（固定不变）或动态的（由DHCP服务器自动分配）。

## 2. 静态IP配置

静态IP配置意味着手动设置设备的IP地址、子网掩码、网关和DNS服务器。这种方法适用于需要固定IP地址的设备，如服务器或网络打印机。

### 2.1 使用`netplan`配置静态IP

Ubuntu 18.04及更高版本使用`netplan`来管理网络配置。以下是一个配置静态IP的示例：

1. 打开`netplan`配置文件：

   ```bash
   sudo nano /etc/netplan/01-netcfg.yaml
   ```

2. 编辑配置文件，添加以下内容：

   ```yaml
   network:
     version: 2
     renderer: networkd
     ethernets:
       eth0:
         dhcp4: no
         addresses:
           - 192.168.1.100/24
         gateway4: 192.168.1.1
         nameservers:
           addresses:
             - 8.8.8.8
             - 8.8.4.4
   ```

3. 应用配置：

   ```bash
   sudo netplan apply
   ```

### 2.2 验证配置

使用以下命令验证IP配置是否生效：

```bash
ip addr show eth0
```

输出应显示你配置的IP地址：

```plaintext
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    inet 192.168.1.100/24 brd 192.168.1.255 scope global eth0
       valid_lft forever preferred_lft forever
```

## 3. 动态IP配置

动态IP配置通过DHCP（Dynamic Host Configuration Protocol）自动分配IP地址。这种方法适用于大多数桌面和移动设备。

### 3.1 使用`netplan`配置动态IP

1. 打开`netplan`配置文件：

   ```bash
   sudo nano /etc/netplan/01-netcfg.yaml
   ```

2. 编辑配置文件，添加以下内容：

   ```yaml
   network:
     version: 2
     renderer: networkd
     ethernets:
       eth0:
         dhcp4: yes
   ```

3. 应用配置：

   ```bash
   sudo netplan apply
   ```

### 3.2 验证配置

使用以下命令验证IP配置是否生效：

```bash
ip addr show eth0
```

输出应显示由DHCP分配的IP地址：

```plaintext
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
    inet 192.168.1.101/24 brd 192.168.1.255 scope global dynamic eth0
       valid_lft 86399sec preferred_lft 86399sec
```

## 4. 实际案例

假设你正在设置一个家庭服务器，需要为它分配一个静态IP地址，以便其他设备可以始终通过该IP地址访问它。你可以按照上述静态IP配置步骤进行操作。

## 5. 总结

在Ubuntu中配置IP地址是一个基础但重要的技能。无论是静态IP还是动态IP，正确的配置都能确保你的设备能够顺利连接到网络。通过本文的学习，你应该能够熟练地在Ubuntu中配置IP地址。

## 6. 附加资源

- [Ubuntu官方文档](https://ubuntu.com/server/docs/network-configuration)
- [Netplan官方文档](https://netplan.io/)

## 7. 练习

1. 尝试在你的Ubuntu系统中配置一个静态IP地址，并验证配置是否生效。
2. 使用`netplan`配置动态IP，并观察DHCP分配的IP地址。

:::tip
如果你在配置过程中遇到问题，可以查看系统日志以获取更多信息：

```bash
journalctl -xe
```
:::