---
title: Ubuntu 用户组
description: 了解Ubuntu中的用户组概念，学习如何创建、管理和使用用户组来控制文件权限和系统访问。
---

# Ubuntu 用户组

在Ubuntu中，用户组是管理用户权限和访问控制的重要工具。用户组允许你将多个用户归类到一个组中，从而简化权限管理。通过用户组，你可以轻松地为多个用户分配相同的权限，而不必逐个用户进行设置。

## 什么是用户组？

用户组是Ubuntu系统中用于组织用户的一种方式。每个用户都属于至少一个用户组，称为**主组**。用户还可以属于多个**附加组**。用户组的主要作用是简化权限管理，特别是在需要为多个用户分配相同权限时。

例如，假设你有一个开发团队，团队成员需要访问同一个项目目录。你可以创建一个名为`developers`的用户组，并将所有开发人员添加到该组中。然后，你可以为该目录设置权限，使`developers`组的所有成员都能读写该目录。

## 创建用户组

在Ubuntu中，你可以使用`groupadd`命令来创建一个新的用户组。以下是创建用户组的语法：

```bash
sudo groupadd <group_name>
```

例如，创建一个名为`developers`的用户组：

```bash
sudo groupadd developers
```

### 查看用户组

要查看系统中现有的用户组，可以使用`getent`命令：

```bash
getent group
```

这将列出系统中所有的用户组及其成员。

## 将用户添加到用户组

创建用户组后，你可以将用户添加到该组中。使用`usermod`命令可以将用户添加到指定的用户组：

```bash
sudo usermod -aG <group_name> <username>
```

例如，将用户`john`添加到`developers`组：

```bash
sudo usermod -aG developers john
```

:::note
使用`-aG`选项时，`-a`表示追加（append），`-G`表示附加组（supplementary group）。如果不使用`-a`选项，用户将从所有其他附加组中移除。
:::

### 查看用户的组成员身份

要查看某个用户属于哪些组，可以使用`groups`命令：

```bash
groups <username>
```

例如，查看用户`john`的组成员身份：

```bash
groups john
```

输出可能如下：

```bash
john : john developers
```

这表示用户`john`属于`john`（主组）和`developers`（附加组）。

## 删除用户组

如果你不再需要某个用户组，可以使用`groupdel`命令将其删除：

```bash
sudo groupdel <group_name>
```

例如，删除`developers`组：

```bash
sudo groupdel developers
```

:::caution
删除用户组时，请确保没有用户依赖于该组。删除组后，属于该组的用户将失去与该组相关的权限。
:::

## 用户组的实际应用

### 案例1：共享目录权限

假设你有一个目录`/var/www/project`，你希望开发团队的成员能够读写该目录。你可以按照以下步骤操作：

1. 创建`developers`组：

   ```bash
   sudo groupadd developers
   ```

2. 将开发团队成员添加到`developers`组：

   ```bash
   sudo usermod -aG developers john
   sudo usermod -aG developers jane
   ```

3. 更改目录的所有者和组：

   ```bash
   sudo chown -R :developers /var/www/project
   ```

4. 设置目录权限，使组成员可以读写：

   ```bash
   sudo chmod -R 770 /var/www/project
   ```

现在，`developers`组的所有成员都可以读写`/var/www/project`目录。

### 案例2：限制访问

假设你有一个目录`/var/secret`，你希望只有`admins`组的成员可以访问。你可以按照以下步骤操作：

1. 创建`admins`组：

   ```bash
   sudo groupadd admins
   ```

2. 将管理员用户添加到`admins`组：

   ```bash
   sudo usermod -aG admins admin1
   sudo usermod -aG admins admin2
   ```

3. 更改目录的所有者和组：

   ```bash
   sudo chown -R :admins /var/secret
   ```

4. 设置目录权限，使只有所有者和管理员组可以访问：

   ```bash
   sudo chmod -R 750 /var/secret
   ```

现在，只有`admins`组的成员可以访问`/var/secret`目录。

## 总结

用户组是Ubuntu中管理用户权限的强大工具。通过创建和管理用户组，你可以轻松地为多个用户分配相同的权限，从而简化系统管理。在实际应用中，用户组常用于共享目录权限和限制访问。

### 附加资源

- [Ubuntu官方文档](https://ubuntu.com/server/docs)
- [Linux用户和用户组管理](https://www.linux.com/training-tutorials/users-and-groups-linux/)

### 练习

1. 创建一个名为`testers`的用户组，并将两个用户添加到该组中。
2. 创建一个目录`/var/test`，并设置权限，使`testers`组的成员可以读写该目录。
3. 删除`testers`组，并观察对用户和目录权限的影响。
