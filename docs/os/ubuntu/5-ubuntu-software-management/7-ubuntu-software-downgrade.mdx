---
title: Ubuntu 软件降级
description: 学习如何在Ubuntu中降级软件包，以解决兼容性问题或恢复到更稳定的版本。
---

# Ubuntu 软件降级

在Ubuntu中，软件包通常会随着系统的更新而升级到最新版本。然而，有时最新版本可能会引入不兼容的问题或错误，导致某些功能无法正常工作。在这种情况下，降级软件包到之前的版本可能是一个有效的解决方案。本文将详细介绍如何在Ubuntu中降级软件包，并提供实际案例来帮助您理解这一过程。

## 什么是软件降级？

软件降级是指将已安装的软件包从当前版本回退到之前的某个版本。这在以下情况下非常有用：

- 最新版本引入了不兼容的更改。
- 最新版本存在已知的错误或问题。
- 您需要恢复到更稳定的版本以确保系统的正常运行。

## 如何降级软件包

在Ubuntu中，降级软件包通常涉及以下几个步骤：

1. **查找可用的旧版本**：首先，您需要确定软件包的可用旧版本。
2. **安装旧版本**：然后，您可以选择并安装所需的旧版本。
3. **锁定软件包版本**（可选）：为了防止软件包在未来的系统更新中被自动升级，您可以锁定其版本。

### 1. 查找可用的旧版本

要查找软件包的可用旧版本，您可以使用以下命令：

```bash
apt list --all-versions <package-name>
```

例如，如果您想查找 `firefox` 的可用版本，可以运行：

```bash
apt list --all-versions firefox
```

输出可能类似于：

```plaintext
firefox/stable 100.0+build2-0ubuntu0.22.04.1 amd64
firefox/stable 99.0+build2-0ubuntu0.22.04.1 amd64
firefox/stable 98.0+build2-0ubuntu0.22.04.1 amd64
```

### 2. 安装旧版本

一旦确定了要降级的版本，您可以使用以下命令安装特定的旧版本：

```bash
sudo apt install <package-name>=<version>
```

例如，要将 `firefox` 降级到版本 `99.0+build2-0ubuntu0.22.04.1`，可以运行：

```bash
sudo apt install firefox=99.0+build2-0ubuntu0.22.04.1
```

### 3. 锁定软件包版本（可选）

为了防止软件包在未来的系统更新中被自动升级，您可以使用以下命令锁定其版本：

```bash
sudo apt-mark hold <package-name>
```

例如，要锁定 `firefox` 的当前版本，可以运行：

```bash
sudo apt-mark hold firefox
```

要解锁软件包，可以使用以下命令：

```bash
sudo apt-mark unhold <package-name>
```

## 实际案例

假设您正在使用 `libreoffice`，并且最新版本引入了一个导致文档格式错乱的问题。您决定降级到之前的版本以解决这个问题。

1. 首先，查找 `libreoffice` 的可用版本：

   ```bash
   apt list --all-versions libreoffice
   ```

   输出可能类似于：

   ```plaintext
   libreoffice/stable 1:7.3.5-0ubuntu0.22.04.1 amd64
   libreoffice/stable 1:7.2.5-0ubuntu0.22.04.1 amd64
   libreoffice/stable 1:7.1.5-0ubuntu0.22.04.1 amd64
   ```

2. 选择并安装旧版本，例如 `1:7.2.5-0ubuntu0.22.04.1`：

   ```bash
   sudo apt install libreoffice=1:7.2.5-0ubuntu0.22.04.1
   ```

3. （可选）锁定 `libreoffice` 的版本以防止自动升级：

   ```bash
   sudo apt-mark hold libreoffice
   ```

## 总结

在Ubuntu中降级软件包是一个相对简单的过程，但在执行时需要谨慎，以确保系统的稳定性。通过查找可用版本、安装旧版本以及锁定软件包版本，您可以有效地管理软件包的版本，避免因最新版本引入的问题而影响系统的正常运行。

## 附加资源

- [Ubuntu 官方文档](https://ubuntu.com/server/docs)
- [APT 用户手册](https://manpages.ubuntu.com/manpages/jammy/en/man8/apt.8.html)

## 练习

1. 尝试查找并降级一个您系统中已安装的软件包。
2. 锁定该软件包的版本，并验证在系统更新后是否仍然保持旧版本。
