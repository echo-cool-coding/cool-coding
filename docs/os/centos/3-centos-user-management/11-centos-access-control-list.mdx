---
title: CentOS 访问控制列表
description: 了解如何在CentOS中使用访问控制列表（ACL）来管理文件和目录的权限，提升系统安全性。
---

# CentOS 访问控制列表

在CentOS中，访问控制列表（ACL）是一种强大的工具，允许你为文件和目录设置更细粒度的权限控制。传统的Linux权限系统（如`chmod`）只能为文件的所有者、组和其他用户设置权限，而ACL则允许你为特定的用户或组设置单独的权限。

## 什么是访问控制列表（ACL）？

访问控制列表（ACL）是Linux文件系统的一个扩展功能，它允许你为文件和目录设置更复杂的权限规则。通过ACL，你可以为单个用户或组分配特定的权限，而不必依赖于传统的所有者、组和其他用户的权限模型。

### 为什么使用ACL？

- **细粒度控制**：ACL允许你为特定用户或组设置权限，而不影响其他用户。
- **灵活性**：你可以为同一个文件或目录设置多个用户或组的权限。
- **兼容性**：ACL与传统的Linux权限系统兼容，可以在现有系统上无缝使用。

## 启用ACL支持

在CentOS中，ACL功能默认是启用的，但你需要确保文件系统支持ACL。你可以通过以下命令检查文件系统是否支持ACL：

```bash
mount | grep acl
```

如果输出中包含`acl`，则表示文件系统已启用ACL支持。如果没有，你可以通过以下命令重新挂载文件系统并启用ACL：

```bash
sudo mount -o remount,acl /
```

## 使用ACL管理权限

### 查看ACL权限

要查看文件或目录的ACL权限，可以使用`getfacl`命令：

```bash
getfacl /path/to/file
```

输出示例：

```bash
# file: /path/to/file
# owner: root
# group: root
user::rw-
user:john:r--
group::r--
mask::r--
other::r--
```

### 设置ACL权限

要为文件或目录设置ACL权限，可以使用`setfacl`命令。以下是一些常见的用法：

1. **为用户设置权限**：

   ```bash
   setfacl -m u:john:rw /path/to/file
   ```

   这将为用户`john`设置读写权限。

2. **为组设置权限**：

   ```bash
   setfacl -m g:developers:r /path/to/file
   ```

   这将为组`developers`设置读权限。

3. **删除ACL权限**：

   ```bash
   setfacl -x u:john /path/to/file
   ```

   这将删除用户`john`的ACL权限。

### 默认ACL

你还可以为目录设置默认ACL，这样在该目录下创建的新文件和目录将继承这些ACL权限：

```bash
setfacl -d -m u:john:rw /path/to/directory
```

## 实际案例

假设你有一个项目目录`/var/www/project`，你需要为开发团队中的不同成员设置不同的权限：

1. **项目负责人**：读写执行权限
2. **开发人员**：读写权限
3. **测试人员**：只读权限

你可以使用以下命令来实现：

```bash
sudo setfacl -m u:manager:rwx /var/www/project
sudo setfacl -m g:developers:rw /var/www/project
sudo setfacl -m g:testers:r /var/www/project
```

## 总结

访问控制列表（ACL）是CentOS中管理文件和目录权限的强大工具。通过ACL，你可以为特定用户或组设置细粒度的权限，从而提升系统的安全性和灵活性。

### 附加资源

- [Linux ACL Documentation](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-acls)
- [setfacl Man Page](https://linux.die.net/man/1/setfacl)

### 练习

1. 创建一个目录并为其设置ACL权限，允许特定用户读写，而其他用户只能读取。
2. 使用`getfacl`命令查看你设置的ACL权限，并验证其是否正确应用。

通过实践这些练习，你将更好地理解如何在CentOS中使用ACL来管理文件和目录的权限。