---
title: CentOS 用户密码管理
description: 学习如何在CentOS中管理用户密码，包括设置、修改和删除密码，以及密码策略的配置。
---

# CentOS 用户密码管理

在CentOS系统中，用户密码管理是系统管理员日常工作中的重要部分。无论是为新用户设置密码，还是修改现有用户的密码，都需要遵循一定的步骤和策略。本文将详细介绍如何在CentOS中进行用户密码管理，并提供实际案例和代码示例。

## 1. 用户密码的基本概念

在CentOS中，每个用户都有一个与之关联的密码。密码用于验证用户身份，确保只有授权用户才能访问系统。密码通常存储在`/etc/shadow`文件中，该文件只有root用户才能访问。

:::note
**注意**：`/etc/shadow`文件中的密码是经过加密的，因此即使你能够查看该文件，也无法直接读取用户的密码。
:::

## 2. 设置用户密码

为新用户设置密码是用户管理的第一步。你可以使用`passwd`命令来设置或修改用户的密码。

### 2.1 设置新用户密码

假设你有一个新用户`john`，你需要为他设置密码。可以使用以下命令：

```bash
sudo passwd john
```

系统会提示你输入新密码，并要求你确认密码。输入密码时，屏幕上不会显示任何字符，这是为了安全起见。

**示例：**

```bash
[sudo] password for admin: 
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully
```

### 2.2 修改现有用户密码

如果你需要修改现有用户的密码，可以使用相同的`passwd`命令。例如，修改用户`john`的密码：

```bash
sudo passwd john
```

系统会提示你输入新密码并确认。

## 3. 删除用户密码

在某些情况下，你可能需要删除用户的密码。例如，当你希望用户通过SSH密钥登录而不需要密码时，可以删除密码。

### 3.1 删除用户密码

要删除用户密码，可以使用以下命令：

```bash
sudo passwd -d john
```

**示例：**

```bash
[sudo] password for admin: 
passwd: password expiry information changed.
```

删除密码后，用户`john`将无法使用密码登录系统。

## 4. 密码策略配置

为了增强系统安全性，CentOS允许你配置密码策略。密码策略可以包括密码复杂性要求、密码有效期等。

### 4.1 修改密码有效期

你可以使用`chage`命令来修改用户的密码有效期。例如，设置用户`john`的密码在90天后过期：

```bash
sudo chage -M 90 john
```

**示例：**

```bash
[sudo] password for admin: 
```

### 4.2 查看密码策略

要查看用户的密码策略，可以使用`chage -l`命令：

```bash
sudo chage -l john
```

**示例输出：**

```bash
Last password change                                    : Oct 01, 2023
Password expires                                        : Dec 30, 2023
Password inactive                                       : never
Account expires                                         : never
Minimum number of days between password change          : 0
Maximum number of days between password change          : 90
Number of days of warning before password expires       : 7
```

## 5. 实际案例

### 5.1 案例：为新员工设置账户

假设你是一家公司的系统管理员，新员工`Alice`加入了公司。你需要为她创建一个账户并设置密码。

1. 首先，创建用户`alice`：

   ```bash
   sudo adduser alice
   ```

2. 然后，为`alice`设置密码：

   ```bash
   sudo passwd alice
   ```

3. 最后，配置密码策略，要求`alice`每60天更改一次密码：

   ```bash
   sudo chage -M 60 alice
   ```

### 5.2 案例：禁用用户密码登录

假设你希望用户`bob`只能通过SSH密钥登录，而不需要密码。

1. 首先，删除`bob`的密码：

   ```bash
   sudo passwd -d bob
   ```

2. 然后，确保`bob`的账户没有密码登录权限：

   ```bash
   sudo usermod -s /sbin/nologin bob
   ```

## 6. 总结

在CentOS中，用户密码管理是系统安全的重要组成部分。通过本文，你学习了如何设置、修改和删除用户密码，以及如何配置密码策略。这些技能对于系统管理员来说至关重要，能够帮助你更好地管理用户账户并确保系统安全。

## 7. 附加资源与练习

- **练习1**：为新用户`charlie`创建一个账户，并设置密码。要求密码每30天更改一次。
- **练习2**：查看用户`alice`的密码策略，并修改为每45天更改一次密码。
- **附加资源**：阅读`man passwd`和`man chage`手册页，了解更多关于密码管理的选项和参数。

通过不断练习和探索，你将更加熟练地掌握CentOS用户密码管理的技巧。