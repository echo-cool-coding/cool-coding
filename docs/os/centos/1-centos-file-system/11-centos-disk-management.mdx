---
title: CentOS 磁盘管理
description: 了解如何在 CentOS 系统中管理磁盘，包括分区、格式化、挂载和监控磁盘使用情况。适合初学者的全面指南。
---

## 介绍

在 CentOS 系统中，磁盘管理是系统管理员和开发人员必须掌握的基本技能之一。磁盘管理涉及对硬盘的分区、格式化、挂载以及监控磁盘使用情况等操作。无论是为系统添加新硬盘，还是优化现有磁盘的使用，掌握这些技能都至关重要。

本文将逐步介绍 CentOS 中的磁盘管理，包括如何查看磁盘信息、创建分区、格式化文件系统、挂载磁盘以及监控磁盘使用情况。我们还将通过实际案例展示这些操作的真实应用场景。

## 查看磁盘信息

在开始管理磁盘之前，首先需要了解系统中已安装的磁盘及其分区情况。可以使用以下命令查看磁盘信息：

```bash
lsblk
```

该命令将列出所有块设备及其分区信息。例如：

```plaintext
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda      8:0    0   100G  0 disk 
├─sda1   8:1    0    50G  0 part /
├─sda2   8:2    0    30G  0 part /home
└─sda3   8:3    0    20G  0 part [SWAP]
sdb      8:16   0   200G  0 disk 
```

从输出中可以看到，系统中有两个磁盘：`sda` 和 `sdb`。`sda` 已经被分区并挂载到 `/` 和 `/home`，而 `sdb` 尚未分区。

:::tip
`lsblk` 命令是一个非常有用的工具，可以快速查看磁盘和分区的层次结构。
:::

## 创建分区

如果系统中有一块未分区的磁盘（如 `sdb`），可以使用 `fdisk` 或 `parted` 工具来创建分区。以下是使用 `fdisk` 创建分区的步骤：

1. 打开 `fdisk` 工具：

   ```bash
   sudo fdisk /dev/sdb
   ```

2. 输入 `n` 创建一个新分区。

3. 选择分区类型（主分区或扩展分区），然后设置分区大小。

4. 输入 `w` 保存并退出。

以下是一个示例会话：

```plaintext
Command (m for help): n
Partition type
   p   primary (0 primary, 0 extended, 4 free)
   e   extended
Select (default p): p
Partition number (1-4, default 1): 1
First sector (2048-41943039, default 2048): 
Last sector, +sectors or +size{K,M,G} (2048-41943039, default 41943039): +50G

Command (m for help): w
```

现在，`/dev/sdb` 上已经创建了一个 50GB 的分区 `/dev/sdb1`。

:::caution
在操作分区时，请务必小心，以免误删重要数据。
:::

## 格式化文件系统

创建分区后，需要将其格式化为特定的文件系统（如 ext4、xfs 等）。以下是使用 `mkfs` 命令格式化分区的示例：

```bash
sudo mkfs.ext4 /dev/sdb1
```

该命令将 `/dev/sdb1` 分区格式化为 ext4 文件系统。格式化完成后，可以使用 `lsblk` 或 `blkid` 命令查看分区的文件系统类型。

```bash
sudo blkid /dev/sdb1
```

输出示例：

```plaintext
/dev/sdb1: UUID="123e4567-e89b-12d3-a456-426614174000" TYPE="ext4"
```

## 挂载磁盘

格式化后的分区需要挂载到文件系统中才能使用。可以使用 `mount` 命令将分区挂载到指定目录。例如，将 `/dev/sdb1` 挂载到 `/mnt/data`：

```bash
sudo mkdir -p /mnt/data
sudo mount /dev/sdb1 /mnt/data
```

挂载后，可以使用 `df -h` 命令查看挂载点及其使用情况：

```bash
df -h /mnt/data
```

输出示例：

```plaintext
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdb1        50G   53M   47G   1% /mnt/data
```

:::note
如果希望分区在系统重启后自动挂载，可以将其添加到 `/etc/fstab` 文件中。
:::

## 监控磁盘使用情况

定期监控磁盘使用情况是系统管理的重要任务之一。可以使用 `df` 和 `du` 命令来查看磁盘使用情况。

- `df` 命令显示文件系统的磁盘使用情况：

  ```bash
  df -h
  ```

- `du` 命令显示目录或文件的磁盘使用情况：

  ```bash
  du -sh /mnt/data
  ```

输出示例：

```plaintext
53M    /mnt/data
```

## 实际案例

假设你正在管理一台 CentOS 服务器，需要为应用程序添加一个新的数据存储目录。以下是具体步骤：

1. 使用 `lsblk` 查看磁盘信息，确认有一块未分区的磁盘 `/dev/sdb`。
2. 使用 `fdisk` 创建分区 `/dev/sdb1`。
3. 使用 `mkfs.ext4` 格式化分区。
4. 创建挂载点 `/mnt/appdata` 并将分区挂载到该目录。
5. 将挂载信息添加到 `/etc/fstab`，以便系统重启后自动挂载。

## 总结

本文介绍了 CentOS 中的磁盘管理，包括查看磁盘信息、创建分区、格式化文件系统、挂载磁盘以及监控磁盘使用情况。这些操作是系统管理的基础，掌握它们将帮助你更好地管理 CentOS 系统。

## 附加资源与练习

- **练习**：尝试在你的 CentOS 系统中添加一块新硬盘，并按照本文的步骤进行分区、格式化和挂载。
- **资源**：
  - [fdisk 手册页](https://linux.die.net/man/8/fdisk)
  - [mkfs 手册页](https://linux.die.net/man/8/mkfs)
  - [mount 手册页](https://linux.die.net/man/8/mount)

通过实践和深入学习，你将能够熟练地管理 CentOS 系统中的磁盘。