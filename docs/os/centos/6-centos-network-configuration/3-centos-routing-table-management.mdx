---
title: CentOS 路由表管理
description: 了解如何在CentOS中管理路由表，掌握路由表的基本概念、配置方法以及实际应用场景。
---

# CentOS 路由表管理

在CentOS中，路由表是网络通信的核心组件之一。它决定了数据包从源地址到目的地址的传输路径。对于初学者来说，理解路由表的管理是掌握网络配置的重要一步。本文将详细介绍CentOS路由表的基本概念、配置方法以及实际应用场景。

## 什么是路由表？

路由表是一个存储在操作系统内核中的数据结构，用于决定数据包的传输路径。每个路由表条目包含以下信息：

- **目标网络**：数据包要到达的网络地址。
- **网关**：数据包需要经过的下一个路由器。
- **接口**：数据包从哪个网络接口发出。
- **度量值**：路由的优先级，数值越小优先级越高。

## 查看路由表

在CentOS中，可以使用 `ip route` 命令查看当前的路由表。以下是一个示例：

```bash
$ ip route
default via 192.168.1.1 dev eth0 
192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100 
```

在这个示例中：

- `default via 192.168.1.1 dev eth0` 表示默认路由，所有未匹配到其他路由的数据包将通过 `eth0` 接口发送到网关 `192.168.1.1`。
- `192.168.1.0/24 dev eth0 proto kernel scope link src 192.168.1.100` 表示本地网络 `192.168.1.0/24` 的数据包将通过 `eth0` 接口发送，源地址为 `192.168.1.100`。

## 添加静态路由

在某些情况下，你可能需要手动添加静态路由。例如，当你有多个网络接口，并且需要指定某些数据包通过特定的接口传输时。

### 添加临时路由

使用 `ip route add` 命令可以添加临时路由，重启后失效：

```bash
$ sudo ip route add 192.168.2.0/24 via 192.168.1.1 dev eth0
```

这条命令表示将目标网络 `192.168.2.0/24` 的数据包通过 `eth0` 接口发送到网关 `192.168.1.1`。

### 添加永久路由

要添加永久路由，需要编辑网络配置文件。在CentOS 7及以上版本中，可以通过编辑 `/etc/sysconfig/network-scripts/route-<interface>` 文件来实现。例如，为 `eth0` 添加永久路由：

```bash
$ sudo vi /etc/sysconfig/network-scripts/route-eth0
```

在文件中添加以下内容：

```bash
192.168.2.0/24 via 192.168.1.1 dev eth0
```

保存并退出后，重启网络服务以使更改生效：

```bash
$ sudo systemctl restart network
```

## 删除路由

如果需要删除某条路由，可以使用 `ip route del` 命令：

```bash
$ sudo ip route del 192.168.2.0/24 via 192.168.1.1 dev eth0
```

## 实际应用场景

### 场景一：多网络接口的路由配置

假设你有一台CentOS服务器，配置了两个网络接口 `eth0` 和 `eth1`，分别连接到两个不同的子网：

- `eth0`：`192.168.1.0/24`
- `eth1`：`192.168.2.0/24`

你需要配置路由表，使得 `192.168.1.0/24` 的数据包通过 `eth0` 发送，`192.168.2.0/24` 的数据包通过 `eth1` 发送。

```bash
$ sudo ip route add 192.168.1.0/24 dev eth0
$ sudo ip route add 192.168.2.0/24 dev eth1
```

### 场景二：默认路由的配置

如果你的服务器需要通过一个特定的网关访问互联网，你可以设置默认路由：

```bash
$ sudo ip route add default via 192.168.1.1 dev eth0
```

## 总结

通过本文，你应该已经掌握了CentOS路由表的基本概念、查看方法、添加和删除路由的步骤，以及一些实际应用场景。路由表管理是网络配置中的重要技能，希望你能通过实践进一步巩固这些知识。

:::tip
**附加资源**：
- [Linux 网络配置指南](https://www.linux.com/training-tutorials/linux-networking-guide/)
- [CentOS 官方文档](https://www.centos.org/docs/)
:::

:::caution
**练习**：
1. 在你的CentOS服务器上查看当前的路由表，并尝试添加一条临时路由。
2. 配置一个永久路由，并验证其是否在重启后仍然有效。
:::