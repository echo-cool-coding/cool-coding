---
title: CentOS 脚本基础
description: 本文介绍了CentOS中Shell脚本的基础知识，包括脚本的创建、执行、变量、条件语句和循环等核心概念，适合初学者快速上手。
---

# CentOS 脚本基础

Shell脚本是自动化任务和系统管理的重要工具。在CentOS中，Shell脚本通常使用Bash（Bourne Again Shell）编写。本文将带你从零开始学习如何编写和执行简单的Shell脚本。

## 什么是Shell脚本？

Shell脚本是一个包含一系列命令的文本文件，这些命令由Shell解释并执行。通过编写Shell脚本，你可以自动化重复的任务，简化复杂的操作流程。

## 创建你的第一个Shell脚本

让我们从一个简单的例子开始。创建一个名为 `hello.sh` 的脚本文件：

```bash
#!/bin/bash
echo "Hello, World!"
```

### 解释
- `#!/bin/bash`：这行称为 **shebang**，它告诉系统使用哪个解释器来执行脚本。在这里，我们使用Bash。
- `echo "Hello, World!"`：`echo` 命令用于输出文本到终端。

### 执行脚本

保存文件后，你需要赋予脚本执行权限：

```bash
chmod +x hello.sh
```

然后，你可以通过以下方式运行脚本：

```bash
./hello.sh
```

### 输出
```
Hello, World!
```

## 变量

变量是存储数据的容器。在Shell脚本中，你可以使用变量来存储字符串、数字等。

```bash
#!/bin/bash
name="Alice"
echo "Hello, $name!"
```

### 输出
```
Hello, Alice!
```

:::note
变量名区分大小写，且不能以数字开头。
:::

## 条件语句

条件语句允许你根据条件执行不同的代码块。常用的条件语句是 `if` 语句。

```bash
#!/bin/bash
age=18
if [ $age -ge 18 ]; then
    echo "You are an adult."
else
    echo "You are a minor."
fi
```

### 输出
```
You are an adult.
```

:::tip
`-ge` 表示“大于或等于”。其他常见的比较运算符包括 `-eq`（等于）、`-ne`（不等于）、`-lt`（小于）、`-le`（小于或等于）等。
:::

## 循环

循环允许你重复执行一段代码。常见的循环有 `for` 和 `while`。

### `for` 循环

```bash
#!/bin/bash
for i in 1 2 3 4 5; do
    echo "Number: $i"
done
```

### 输出
```
Number: 1
Number: 2
Number: 3
Number: 4
Number: 5
```

### `while` 循环

```bash
#!/bin/bash
count=1
while [ $count -le 5 ]; do
    echo "Count: $count"
    count=$((count + 1))
done
```

### 输出
```
Count: 1
Count: 2
Count: 3
Count: 4
Count: 5
```

## 实际案例：备份文件

让我们通过一个实际案例来巩固所学知识。假设你需要每天备份一个目录中的文件。

```bash
#!/bin/bash
backup_dir="/path/to/backup"
source_dir="/path/to/source"
timestamp=$(date +"%Y%m%d%H%M%S")
backup_file="$backup_dir/backup_$timestamp.tar.gz"

tar -czf $backup_file $source_dir
echo "Backup completed: $backup_file"
```

### 解释
- `backup_dir` 和 `source_dir` 分别指定备份目录和源目录。
- `timestamp` 使用 `date` 命令生成当前时间戳。
- `tar -czf` 命令将源目录打包并压缩为 `.tar.gz` 文件。
- 最后，脚本输出备份文件的路径。

## 总结

通过本文，你已经学会了如何创建和执行简单的Shell脚本，使用变量、条件语句和循环，以及如何将这些知识应用到实际任务中。Shell脚本是系统管理和自动化任务的强大工具，掌握它将大大提高你的工作效率。

## 附加资源与练习

- **练习1**：编写一个脚本，检查当前用户是否是root用户，如果是，则输出“You are root”，否则输出“You are not root”。
- **练习2**：编写一个脚本，遍历当前目录下的所有文件，并输出文件名和文件大小。

:::caution
在编写脚本时，务必小心处理文件和目录路径，避免误操作导致数据丢失。
:::

希望本文对你有所帮助，祝你在Shell脚本的学习之旅中取得成功！