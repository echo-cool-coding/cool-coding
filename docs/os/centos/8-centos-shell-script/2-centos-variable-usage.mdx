---
title: CentOS 变量使用
description: 学习如何在 CentOS Shell 脚本中使用变量，包括变量的定义、赋值、引用以及实际应用场景。
---

# CentOS 变量使用

在 Shell 脚本中，变量是存储数据的容器。它们允许我们在脚本中存储和操作数据，从而使脚本更加灵活和可重用。本文将详细介绍如何在 CentOS Shell 脚本中使用变量，并通过实际案例展示其应用。

## 1. 变量的定义与赋值

在 Shell 脚本中，变量可以通过简单的赋值语句来定义。变量名通常由字母、数字和下划线组成，且不能以数字开头。变量赋值时，等号 `=` 两边不能有空格。

```bash
# 定义一个变量并赋值
my_var="Hello, World!"
```

:::note
变量名区分大小写，因此 `my_var` 和 `My_Var` 是两个不同的变量。
:::

## 2. 变量的引用

要引用变量的值，需要在变量名前加上 `$` 符号。例如：

```bash
# 引用变量
echo $my_var
```

输出结果为：

```
Hello, World!
```

:::tip
如果变量名后面紧跟着其他字符，可以使用 `${}` 来明确变量名的边界。例如：

```bash
echo ${my_var}!
```

输出结果为：

```
Hello, World!!
```
:::

## 3. 环境变量

环境变量是系统或用户定义的变量，可以在整个 Shell 会话中使用。常见的环境变量包括 `PATH`、`HOME` 和 `USER` 等。

```bash
# 查看当前用户的主目录
echo $HOME

# 查看当前用户的用户名
echo $USER
```

## 4. 只读变量

有时我们希望变量的值在脚本中不可更改，这时可以将变量声明为只读。

```bash
# 声明只读变量
readonly my_var="This is a read-only variable"

# 尝试修改只读变量
my_var="New value"
```

执行上述代码时，会报错：

```
bash: my_var: readonly variable
```

## 5. 删除变量

可以使用 `unset` 命令删除变量，使其不再可用。

```bash
# 删除变量
unset my_var

# 尝试引用已删除的变量
echo $my_var
```

输出结果为空，因为变量已被删除。

## 6. 实际案例

假设我们需要编写一个脚本来备份指定目录下的所有文件，并将备份文件存储在一个以当前日期命名的目录中。

```bash
# 定义变量
backup_dir="/backup"
source_dir="/data"
current_date=$(date +%Y-%m-%d)

# 创建备份目录
mkdir -p $backup_dir/$current_date

# 备份文件
cp -r $source_dir/* $backup_dir/$current_date

echo "Backup completed on $current_date"
```

在这个脚本中，我们使用了多个变量来存储目录路径和当前日期，从而使脚本更加灵活和易于维护。

## 7. 总结

在 CentOS Shell 脚本中，变量是存储和操作数据的重要工具。通过定义、引用和管理变量，我们可以编写出更加灵活和可重用的脚本。本文介绍了变量的基本用法，并通过实际案例展示了变量的应用场景。

## 8. 附加资源与练习

- **练习 1**: 编写一个脚本，计算两个数的和，并将结果存储在变量中。
- **练习 2**: 修改上述备份脚本，使其在备份完成后输出备份文件的总大小。

:::caution
在编写脚本时，请确保变量名不会与系统环境变量冲突，以免引发意外错误。
:::