---
title: CentOS 文件权限加固
description: 了解如何通过文件权限加固来提升CentOS系统的安全性，适合初学者学习。
---

## 介绍

在CentOS系统中，文件权限是保护系统安全的重要机制之一。通过合理设置文件和目录的权限，可以防止未经授权的用户访问或修改关键文件，从而降低系统被攻击的风险。本文将详细介绍如何通过文件权限加固来提升CentOS系统的安全性。

## 文件权限基础

在Linux系统中，每个文件和目录都有三组权限：所有者（Owner）、所属组（Group）和其他用户（Others）。每组权限包括读取（r）、写入（w）和执行（x）三种操作。

### 查看文件权限

使用 `ls -l` 命令可以查看文件或目录的权限：

```bash
ls -l /path/to/file
```

输出示例：

```bash
-rw-r--r-- 1 root root 4096 Oct  1 12:34 example.txt
```

在这个示例中，`-rw-r--r--` 表示文件的权限。第一个字符 `-` 表示这是一个普通文件，接下来的三个字符 `rw-` 表示所有者有读写权限，`r--` 表示所属组有读权限，最后的 `r--` 表示其他用户有读权限。

### 修改文件权限

使用 `chmod` 命令可以修改文件或目录的权限。例如，将 `example.txt` 的权限设置为所有者可读写，所属组和其他用户只读：

```bash
chmod 644 example.txt
```

这里的 `644` 是权限的数字表示法，分别对应所有者、所属组和其他用户的权限。

## 文件权限加固策略

### 1. 最小权限原则

遵循最小权限原则，即只授予用户完成其任务所需的最小权限。例如，对于配置文件，通常只需要所有者有读写权限，其他用户只需要读权限。

```bash
chmod 644 /path/to/config.conf
```

### 2. 限制可执行文件

对于可执行文件，确保只有必要的用户有执行权限。例如，将 `script.sh` 的权限设置为只有所有者可以执行：

```bash
chmod 700 script.sh
```

### 3. 保护敏感文件

对于包含敏感信息的文件，如密码文件 `/etc/shadow`，应确保只有 root 用户可以访问：

```bash
chmod 600 /etc/shadow
```

### 4. 使用 `umask` 设置默认权限

`umask` 用于设置新创建文件和目录的默认权限。例如，设置 `umask` 为 `027`，新创建的文件权限为 `640`，目录权限为 `750`：

```bash
umask 027
```

## 实际案例

### 案例1：保护Web服务器文件

假设你运行一个Web服务器，网站文件存放在 `/var/www/html` 目录下。为了保护这些文件，你可以设置以下权限：

```bash
chmod 755 /var/www/html
chmod 644 /var/www/html/*
```

这样，Web服务器可以读取和显示文件，但普通用户无法修改这些文件。

### 案例2：保护SSH密钥

SSH密钥文件 `~/.ssh/id_rsa` 是非常敏感的文件，应确保只有所有者可以访问：

```bash
chmod 600 ~/.ssh/id_rsa
```

## 总结

通过合理设置文件权限，可以有效提升CentOS系统的安全性。遵循最小权限原则，限制可执行文件的权限，保护敏感文件，并使用 `umask` 设置默认权限，都是文件权限加固的重要策略。

## 附加资源与练习

- **练习1**：查看系统中 `/etc/passwd` 和 `/etc/shadow` 文件的权限，并解释它们的权限设置。
- **练习2**：创建一个新文件，并使用 `chmod` 命令设置不同的权限，观察权限变化。
- **附加资源**：阅读 `man chmod` 和 `man umask` 了解更多关于文件权限和 `umask` 的详细信息。

通过以上内容的学习和实践，你将能够更好地理解和应用文件权限加固策略，提升CentOS系统的安全性。