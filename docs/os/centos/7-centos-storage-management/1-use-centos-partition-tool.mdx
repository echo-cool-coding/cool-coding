---
title: CentOS 分区工具使用
description: 学习如何在CentOS中使用分区工具管理磁盘空间，包括fdisk、parted等工具的使用方法，以及实际案例和操作步骤。
---

# CentOS 分区工具使用

在CentOS系统中，磁盘分区是存储管理的重要部分。通过合理分区，可以优化磁盘空间的使用，提高系统性能，并确保数据的安全性。本文将介绍如何在CentOS中使用常见的分区工具，包括`fdisk`和`parted`，并通过实际案例帮助初学者掌握这些工具的使用方法。

## 什么是磁盘分区？

磁盘分区是将物理磁盘划分为多个逻辑部分的过程。每个分区可以独立格式化并挂载到文件系统中，用于存储数据。分区的主要目的是：

- **隔离数据**：将操作系统、应用程序和用户数据存储在不同的分区中，避免相互干扰。
- **提高性能**：通过将频繁访问的数据放在单独的分区中，减少磁盘寻道时间。
- **简化管理**：分区可以单独备份、恢复或扩展，便于系统维护。

## 常用分区工具

在CentOS中，常用的分区工具有：

1. **fdisk**：一个命令行工具，适用于MBR（主引导记录）分区表。
2. **parted**：一个更强大的命令行工具，支持MBR和GPT（GUID分区表）。

### 1. 使用 `fdisk` 管理分区

`fdisk` 是一个简单易用的分区工具，适合初学者。以下是使用 `fdisk` 的基本步骤：

#### 步骤 1：列出磁盘信息

首先，使用以下命令查看系统中的磁盘信息：

```bash
fdisk -l
```

输出示例：

```
Disk /dev/sda: 20 GiB, 21474836480 bytes, 41943040 sectors
...
Device     Boot   Start       End   Sectors  Size Id Type
/dev/sda1  *       2048   2099199   2097152    1G 83 Linux
/dev/sda2       2099200  41943039  39843840   19G 8e Linux LVM
```

#### 步骤 2：进入分区编辑模式

选择要分区的磁盘（例如 `/dev/sda`），并进入 `fdisk` 的交互模式：

```bash
fdisk /dev/sda
```

#### 步骤 3：创建新分区

在 `fdisk` 交互模式中，使用以下命令创建新分区：

1. 输入 `n` 创建新分区。
2. 选择分区类型（主分区或扩展分区）。
3. 设置分区大小（例如 `+2G` 表示分配2GB空间）。
4. 输入 `w` 保存并退出。

#### 步骤 4：格式化分区

创建分区后，需要格式化分区以使用它。例如，使用 `ext4` 文件系统格式化：

```bash
mkfs.ext4 /dev/sda3
```

#### 步骤 5：挂载分区

将分区挂载到文件系统中：

```bash
mkdir /mnt/newpartition
mount /dev/sda3 /mnt/newpartition
```

### 2. 使用 `parted` 管理分区

`parted` 是一个功能更强大的分区工具，支持GPT分区表。以下是使用 `parted` 的基本步骤：

#### 步骤 1：启动 `parted`

选择要分区的磁盘（例如 `/dev/sdb`），并启动 `parted`：

```bash
parted /dev/sdb
```

#### 步骤 2：创建分区表

如果磁盘没有分区表，可以使用以下命令创建GPT分区表：

```bash
mklabel gpt
```

#### 步骤 3：创建新分区

使用以下命令创建新分区：

```bash
mkpart primary ext4 0% 50%
```

这将在磁盘的前50%空间创建一个主分区，并使用 `ext4` 文件系统。

#### 步骤 4：查看分区信息

使用以下命令查看分区信息：

```bash
print
```

#### 步骤 5：格式化并挂载分区

与 `fdisk` 类似，创建分区后需要格式化和挂载：

```bash
mkfs.ext4 /dev/sdb1
mkdir /mnt/newpartition
mount /dev/sdb1 /mnt/newpartition
```

## 实际案例：扩展根分区

假设你的根分区空间不足，需要扩展它。以下是具体步骤：

1. 使用 `fdisk` 或 `parted` 创建一个新分区。
2. 将新分区添加到逻辑卷管理（LVM）中。
3. 扩展逻辑卷和文件系统。

```bash
pvcreate /dev/sda3
vgextend centos /dev/sda3
lvextend -l +100%FREE /dev/centos/root
xfs_growfs /dev/centos/root
```

:::tip
在扩展文件系统时，确保文件系统类型支持在线扩展（如 `xfs` 或 `ext4`）。
:::

## 总结

通过本文，你学习了如何在CentOS中使用 `fdisk` 和 `parted` 工具管理磁盘分区。这些工具是系统管理员和开发者的必备技能，掌握它们可以帮助你更好地管理存储资源。

## 附加资源

- [fdisk 官方文档](https://man7.org/linux/man-pages/man8/fdisk.8.html)
- [parted 官方文档](https://www.gnu.org/software/parted/manual/parted.html)
- [LVM 管理指南](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_logical_volumes/index)

## 练习

1. 使用 `fdisk` 在虚拟机上创建一个新分区，并挂载到 `/mnt/data`。
2. 使用 `parted` 创建一个GPT分区表，并分配两个分区。
3. 尝试扩展根分区，并验证文件系统是否成功扩展。

通过实践这些练习，你将更深入地理解CentOS的存储管理机制。