---
title: Debian 防火墙配置
description: 学习如何在 Debian 系统中配置防火墙，保护你的网络和服务免受未经授权的访问。
---

# Debian 防火墙配置

防火墙是保护计算机或网络免受未经授权访问的重要工具。在 Debian 系统中，`iptables` 和 `ufw` 是两种常用的防火墙管理工具。本文将介绍如何使用这些工具来配置和管理防火墙规则，确保你的系统安全。

## 1. 什么是防火墙？

防火墙是一种网络安全系统，它根据预定义的安全规则监控和控制传入和传出的网络流量。防火墙可以是硬件设备，也可以是软件程序。在 Debian 系统中，我们通常使用软件防火墙来保护我们的系统。

## 2. 使用 `iptables` 配置防火墙

`iptables` 是 Linux 系统中最常用的防火墙工具之一。它允许你定义规则来控制网络流量。

### 2.1 安装 `iptables`

在 Debian 系统中，`iptables` 通常已经预装。如果没有安装，可以使用以下命令进行安装：

```bash
sudo apt-get update
sudo apt-get install iptables
```

### 2.2 查看当前规则

你可以使用以下命令查看当前的 `iptables` 规则：

```bash
sudo iptables -L -v -n
```

输出示例：

```plaintext
Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination         

Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)
 pkts bytes target     prot opt in     out     source               destination
```

### 2.3 添加规则

假设你想允许来自特定 IP 地址的 SSH 连接，可以使用以下命令：

```bash
sudo iptables -A INPUT -p tcp --dport 22 -s 192.168.1.100 -j ACCEPT
```

### 2.4 保存规则

为了使规则在系统重启后仍然有效，你需要保存它们。可以使用以下命令：

```bash
sudo iptables-save > /etc/iptables/rules.v4
```

## 3. 使用 `ufw` 配置防火墙

`ufw`（Uncomplicated Firewall）是 `iptables` 的前端工具，它简化了防火墙配置过程。

### 3.1 安装 `ufw`

在 Debian 系统中，可以使用以下命令安装 `ufw`：

```bash
sudo apt-get update
sudo apt-get install ufw
```

### 3.2 启用 `ufw`

安装完成后，可以使用以下命令启用 `ufw`：

```bash
sudo ufw enable
```

### 3.3 允许特定端口

假设你想允许 SSH 连接，可以使用以下命令：

```bash
sudo ufw allow 22/tcp
```

### 3.4 查看状态

你可以使用以下命令查看 `ufw` 的状态：

```bash
sudo ufw status
```

输出示例：

```plaintext
Status: active

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW       Anywhere
22/tcp (v6)                ALLOW       Anywhere (v6)
```

## 4. 实际案例

假设你正在运行一个 Web 服务器，并且希望只允许来自特定 IP 地址的 HTTP 和 HTTPS 流量。你可以使用以下 `ufw` 命令来实现：

```bash
sudo ufw allow from 192.168.1.100 to any port 80
sudo ufw allow from 192.168.1.100 to any port 443
```

## 5. 总结

在本文中，我们介绍了如何在 Debian 系统中使用 `iptables` 和 `ufw` 配置防火墙。通过这些工具，你可以有效地保护你的系统免受未经授权的访问。

## 6. 附加资源

- [iptables 官方文档](https://netfilter.org/projects/iptables/index.html)
- [ufw 官方文档](https://help.ubuntu.com/community/UFW)

## 7. 练习

1. 使用 `iptables` 配置一个规则，允许来自特定 IP 地址的 HTTP 流量。
2. 使用 `ufw` 配置一个规则，允许来自特定 IP 地址的 SSH 连接。
3. 尝试禁用 `ufw` 并重新启用它，观察防火墙状态的变化。

通过完成这些练习，你将更深入地理解如何在 Debian 系统中配置和管理防火墙。