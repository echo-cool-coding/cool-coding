---
title: Jenkins 报表生成
description: 学习如何在Jenkins中生成报表，以便更好地监控和分析构建结果。本文适合初学者，包含详细的步骤、代码示例和实际案例。
---

# Jenkins 报表生成

Jenkins是一个广泛使用的持续集成和持续交付（CI/CD）工具，它可以帮助开发团队自动化构建、测试和部署过程。为了更好地监控和分析构建结果，生成报表是一个非常重要的功能。本文将详细介绍如何在Jenkins中生成报表，并通过实际案例展示其应用场景。

## 什么是Jenkins报表？

Jenkins报表是指在构建过程中生成的用于展示构建结果的文档或数据。这些报表可以帮助开发团队了解构建的状态、测试结果、代码覆盖率等信息。常见的报表类型包括测试报告、代码覆盖率报告、构建日志等。

## 生成Jenkins报表的基本步骤

### 1. 安装必要的插件

在Jenkins中生成报表通常需要安装一些插件。例如，生成测试报告可以使用JUnit插件，生成代码覆盖率报告可以使用JaCoCo插件。

```bash
# 安装JUnit插件
Manage Jenkins -> Manage Plugins -> Available -> 搜索 "JUnit" -> 安装

# 安装JaCoCo插件
Manage Jenkins -> Manage Plugins -> Available -> 搜索 "JaCoCo" -> 安装
```

### 2. 配置构建任务

在Jenkins中，你需要配置构建任务以生成报表。以下是一个简单的配置示例：

```groovy
pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                sh 'mvn clean install'
            }
        }
        stage('Test') {
            steps {
                sh 'mvn test'
                junit '**/target/surefire-reports/*.xml'
            }
        }
        stage('Code Coverage') {
            steps {
                sh 'mvn jacoco:report'
                jacoco(
                    execPattern: '**/target/jacoco.exec',
                    classPattern: '**/target/classes',
                    sourcePattern: '**/src/main/java'
                )
            }
        }
    }
}
```

### 3. 查看生成的报表

构建完成后，你可以在Jenkins的构建页面查看生成的报表。例如，测试报告会显示在“Test Result”部分，代码覆盖率报告会显示在“Coverage Report”部分。

## 实际案例

假设你正在开发一个Java项目，并使用Maven作为构建工具。你希望在每次构建后生成测试报告和代码覆盖率报告。

### 1. 配置Maven项目

首先，确保你的`pom.xml`文件中包含JUnit和JaCoCo的依赖：

```xml
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.13.2</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.8.7</version>
            <executions>
                <execution>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                </execution>
                <execution>
                    <id>report</id>
                    <phase>test</phase>
                    <goals>
                        <goal>report</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
```

### 2. 配置Jenkins Pipeline

接下来，配置Jenkins Pipeline以生成报表：

```groovy
pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                sh 'mvn clean install'
            }
        }
        stage('Test') {
            steps {
                sh 'mvn test'
                junit '**/target/surefire-reports/*.xml'
            }
        }
        stage('Code Coverage') {
            steps {
                sh 'mvn jacoco:report'
                jacoco(
                    execPattern: '**/target/jacoco.exec',
                    classPattern: '**/target/classes',
                    sourcePattern: '**/src/main/java'
                )
            }
        }
    }
}
```

### 3. 查看报表

构建完成后，你可以在Jenkins的构建页面查看生成的测试报告和代码覆盖率报告。

## 总结

通过本文，你学习了如何在Jenkins中生成报表。我们介绍了生成报表的基本步骤，并通过一个实际案例展示了如何配置Jenkins Pipeline以生成测试报告和代码覆盖率报告。生成报表是监控和分析构建结果的重要手段，希望本文能帮助你更好地理解和使用Jenkins。

## 附加资源

- [Jenkins官方文档](https://www.jenkins.io/doc/)
- [JUnit插件文档](https://plugins.jenkins.io/junit/)
- [JaCoCo插件文档](https://plugins.jenkins.io/jacoco/)

## 练习

1. 在你的Jenkins实例中安装JUnit和JaCoCo插件。
2. 配置一个简单的Maven项目，并在Jenkins中生成测试报告和代码覆盖率报告。
3. 尝试使用其他报表插件，如HTML Publisher插件，生成自定义报表。
