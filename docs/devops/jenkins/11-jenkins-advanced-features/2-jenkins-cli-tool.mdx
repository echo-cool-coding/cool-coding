---
title: Jenkins CLI 工具
description: 了解如何使用 Jenkins CLI 工具来管理和操作 Jenkins 实例，提升自动化效率。
---

Jenkins CLI（命令行界面）工具是一个强大的命令行工具，允许用户通过终端与 Jenkins 实例进行交互。它提供了一种无需访问 Jenkins Web 界面的方式来执行任务，例如创建作业、触发构建、查看日志等。对于初学者来说，掌握 Jenkins CLI 工具可以显著提高工作效率，尤其是在自动化脚本和 CI/CD 流水线中。

## 什么是 Jenkins CLI？

Jenkins CLI 是一个命令行工具，允许用户通过终端与 Jenkins 服务器进行交互。它支持多种操作，包括但不限于：

- 创建、更新和删除 Jenkins 作业
- 触发构建并查看构建日志
- 管理 Jenkins 节点和插件
- 执行 Groovy 脚本

Jenkins CLI 工具通常用于自动化任务，特别是在需要与 Jenkins 实例进行频繁交互的场景中。

## 安装 Jenkins CLI

要使用 Jenkins CLI，首先需要确保 Jenkins 服务器已启用 CLI 功能。默认情况下，Jenkins CLI 是启用的。接下来，您可以通过以下步骤安装 Jenkins CLI 工具：

1. **下载 Jenkins CLI JAR 文件**：
   您可以从 Jenkins 服务器的 `/cli` 端点下载 CLI JAR 文件。例如：
   ```bash
   wget http://your-jenkins-server/jnlpJars/jenkins-cli.jar
   ```

2. **验证 CLI 工具**：
   下载完成后，您可以通过运行以下命令来验证 CLI 工具是否正常工作：
   ```bash
   java -jar jenkins-cli.jar -s http://your-jenkins-server/ help
   ```
   如果一切正常，您将看到 Jenkins CLI 的帮助信息。

## 基本命令

以下是一些常用的 Jenkins CLI 命令：

- **列出所有作业**：
  ```bash
  java -jar jenkins-cli.jar -s http://your-jenkins-server/ list-jobs
  ```

- **触发构建**：
  ```bash
  java -jar jenkins-cli.jar -s http://your-jenkins-server/ build <job-name>
  ```

- **查看构建日志**：
  ```bash
  java -jar jenkins-cli.jar -s http://your-jenkins-server/ console <job-name> <build-number>
  ```

- **执行 Groovy 脚本**：
  ```bash
  java -jar jenkins-cli.jar -s http://your-jenkins-server/ groovy <script-file>
  ```

## 实际案例

假设您有一个 Jenkins 作业名为 `my-project`，您希望每天凌晨 2 点自动触发该作业的构建。您可以使用 Jenkins CLI 工具结合 cron 作业来实现这一目标。

1. **编写脚本**：
   创建一个名为 `trigger-build.sh` 的脚本，内容如下：
   ```bash
   #!/bin/bash
   java -jar /path/to/jenkins-cli.jar -s http://your-jenkins-server/ build my-project
   ```

2. **设置 cron 作业**：
   使用 `crontab -e` 编辑 cron 作业，添加以下行：
   ```bash
   0 2 * * * /path/to/trigger-build.sh
   ```

这样，每天凌晨 2 点，`my-project` 作业将自动触发构建。

## 总结

Jenkins CLI 工具是一个强大的命令行工具，可以帮助您更高效地管理和操作 Jenkins 实例。通过掌握 Jenkins CLI，您可以自动化许多日常任务，从而节省时间并提高工作效率。

:::tip
建议您在实际使用中结合 Jenkins 的 API 和 Groovy 脚本，以实现更复杂的自动化任务。
:::

## 附加资源

- [Jenkins CLI 官方文档](https://www.jenkins.io/doc/book/managing/cli/)
- [Jenkins Groovy 脚本指南](https://www.jenkins.io/doc/book/pipeline/shared-libraries/)

## 练习

1. 使用 Jenkins CLI 工具列出您 Jenkins 实例中的所有作业。
2. 编写一个脚本，使用 Jenkins CLI 工具触发一个作业的构建，并查看其构建日志。
3. 尝试使用 Jenkins CLI 工具执行一个简单的 Groovy 脚本，例如打印 "Hello, Jenkins!"。

通过这些练习，您将更深入地理解 Jenkins CLI 工具的使用方法，并能够在实际项目中应用这些知识。