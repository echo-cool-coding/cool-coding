---
title: Jenkins 测试趋势图
description: 了解如何使用Jenkins生成和分析测试趋势图，帮助开发团队监控测试结果的变化趋势。
---

# Jenkins 测试趋势图

Jenkins是一个广泛使用的持续集成工具，它可以帮助开发团队自动化构建、测试和部署流程。在测试过程中，了解测试结果的变化趋势非常重要，这可以帮助团队快速发现问题并改进代码质量。Jenkins提供了测试趋势图功能，能够直观地展示测试结果的历史变化。

## 什么是测试趋势图？

测试趋势图是一种可视化工具，用于展示测试结果（如通过率、失败率、跳过率等）随时间的变化趋势。通过测试趋势图，开发团队可以快速了解测试的稳定性、代码质量的变化以及潜在的问题。

在Jenkins中，测试趋势图通常与测试报告插件（如JUnit、TestNG等）结合使用。每次构建完成后，Jenkins会收集测试结果并生成趋势图，供团队分析。

## 如何生成测试趋势图？

### 1. 配置Jenkins Job以运行测试

首先，确保你的Jenkins Job已经配置为运行测试并生成测试报告。以下是一个简单的Jenkins Job配置示例：

```groovy
pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                sh 'mvn clean install'
            }
        }
        stage('Test') {
            steps {
                sh 'mvn test'
            }
        }
    }
    post {
        always {
            junit '**/target/surefire-reports/*.xml'
        }
    }
}
```

在这个示例中，Jenkins Job会运行Maven构建，并在`post`阶段使用`junit`插件收集测试报告。

### 2. 查看测试趋势图

构建完成后，Jenkins会自动生成测试趋势图。你可以在Job的页面中找到“Test Result Trend”或类似的选项，点击后即可查看趋势图。

:::tip
如果你使用的是Jenkins的Blue Ocean界面，测试趋势图会以更直观的方式展示在构建详情页面中。
:::

## 测试趋势图的实际应用

### 案例：监控测试通过率

假设你的团队正在开发一个Web应用，每次提交代码后都会触发Jenkins Job运行单元测试。通过测试趋势图，你可以监控测试通过率的变化。

```mermaid
lineChart
    title 测试通过率趋势
    x-axis 时间
    y-axis 通过率 (%)
    section 2023-10-01 到 2023-10-07
    2023-10-01: 95
    2023-10-02: 96
    2023-10-03: 94
    2023-10-04: 93
    2023-10-05: 92
    2023-10-06: 91
    2023-10-07: 90
```

从图中可以看出，测试通过率在逐渐下降，这可能意味着代码质量在下降，或者新引入的功能存在较多问题。团队可以根据这一趋势及时采取措施，例如增加代码审查或优化测试用例。

### 案例：分析失败测试的原因

测试趋势图还可以帮助团队分析失败测试的原因。例如，如果某个模块的测试失败率突然上升，团队可以快速定位到相关代码并进行修复。

## 总结

Jenkins的测试趋势图是一个强大的工具，能够帮助开发团队监控测试结果的变化趋势。通过定期查看趋势图，团队可以及时发现潜在问题，并采取相应的措施来改进代码质量。

:::note
测试趋势图不仅适用于单元测试，还可以用于集成测试、端到端测试等不同类型的测试。
:::

## 附加资源

- [Jenkins官方文档](https://www.jenkins.io/doc/)
- [JUnit插件文档](https://plugins.jenkins.io/junit/)
- [Maven Surefire插件文档](https://maven.apache.org/surefire/maven-surefire-plugin/)

## 练习

1. 在你的Jenkins Job中配置测试报告插件，并生成测试趋势图。
2. 分析测试趋势图，找出测试通过率下降的原因，并尝试修复相关问题。
3. 尝试使用不同的测试框架（如TestNG）生成测试趋势图，并比较其与JUnit的差异。
