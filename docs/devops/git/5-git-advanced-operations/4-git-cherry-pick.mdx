---
title: Git Cherry-pick
description: 学习如何使用 Git Cherry-pick 来选择性应用提交到当前分支，提升代码管理的灵活性。
---

# Git Cherry-pick

在 Git 中，`cherry-pick` 是一个非常有用的命令，它允许你将某个分支上的特定提交应用到当前分支。与合并（merge）或变基（rebase）不同，`cherry-pick` 只选择性地应用某些提交，而不是整个分支的更改。这对于修复 bug 或从其他分支提取特定功能非常有用。

## 什么是 Git Cherry-pick？

`cherry-pick` 命令的作用是将某个提交的更改应用到当前分支。你可以将其理解为“挑选”某个提交并将其“粘贴”到当前分支。这个操作不会影响其他提交，也不会改变提交的历史。

:::note
`cherry-pick` 通常用于以下场景：
- 从其他分支提取某个 bug 修复。
- 将某个功能提交应用到不同的分支。
- 避免合并整个分支的更改。
:::

## 如何使用 Git Cherry-pick

### 基本语法

`cherry-pick` 的基本语法如下：

```bash
git cherry-pick <commit-hash>
```

其中，`<commit-hash>` 是你想要应用的提交的哈希值。

### 示例

假设你有两个分支：`main` 和 `feature`。`feature` 分支上有两个提交：`A` 和 `B`。你只想将提交 `B` 应用到 `main` 分支。

1. 首先，切换到 `main` 分支：

   ```bash
   git checkout main
   ```

2. 然后，使用 `cherry-pick` 命令将提交 `B` 应用到 `main` 分支：

   ```bash
   git cherry-pick B
   ```

   这里的 `B` 是提交 `B` 的哈希值。

3. 如果 `cherry-pick` 成功，Git 会将提交 `B` 的更改应用到 `main` 分支，并创建一个新的提交。

### 处理冲突

如果在 `cherry-pick` 过程中发生冲突，Git 会暂停操作并提示你解决冲突。你可以手动编辑文件以解决冲突，然后使用以下命令继续 `cherry-pick`：

```bash
git cherry-pick --continue
```

如果你决定取消 `cherry-pick`，可以使用以下命令：

```bash
git cherry-pick --abort
```

## 实际案例

### 案例 1：修复 bug

假设你在 `feature` 分支上修复了一个 bug，并提交了修复代码。现在你想将这个修复应用到 `main` 分支，而不需要合并整个 `feature` 分支。

1. 首先，找到修复 bug 的提交哈希值：

   ```bash
   git log --oneline feature
   ```

   假设修复 bug 的提交哈希值是 `abc1234`。

2. 切换到 `main` 分支：

   ```bash
   git checkout main
   ```

3. 使用 `cherry-pick` 将修复应用到 `main` 分支：

   ```bash
   git cherry-pick abc1234
   ```

### 案例 2：提取特定功能

假设你在 `feature` 分支上开发了一个新功能，并提交了多个相关的提交。现在你想将这个功能应用到 `main` 分支，但不想合并整个 `feature` 分支。

1. 首先，找到与功能相关的提交哈希值：

   ```bash
   git log --oneline feature
   ```

   假设相关提交的哈希值是 `def5678` 和 `ghi9012`。

2. 切换到 `main` 分支：

   ```bash
   git checkout main
   ```

3. 使用 `cherry-pick` 将这些提交应用到 `main` 分支：

   ```bash
   git cherry-pick def5678 ghi9012
   ```

## 总结

`cherry-pick` 是一个非常有用的 Git 命令，它允许你选择性地将某个提交应用到当前分支。通过 `cherry-pick`，你可以灵活地管理代码，避免不必要的合并操作。

:::tip
在使用 `cherry-pick` 时，务必确保你理解每个提交的更改内容，以避免引入意外的代码问题。
:::

## 附加资源

- [Git 官方文档 - Cherry-pick](https://git-scm.com/docs/git-cherry-pick)
- [Pro Git 书籍](https://git-scm.com/book/en/v2)

## 练习

1. 创建一个新的分支 `bugfix`，并在其中修复一个 bug。然后使用 `cherry-pick` 将这个修复应用到 `main` 分支。
2. 在 `feature` 分支上开发一个新功能，并提交多个相关的提交。然后使用 `cherry-pick` 将这些提交应用到 `main` 分支。

通过这些练习，你将更好地理解 `cherry-pick` 的使用场景和操作方法。