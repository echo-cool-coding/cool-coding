---
title: Git 凭证存储
description: 了解Git凭证存储的工作原理，学习如何配置和管理Git凭证，确保安全便捷地访问远程仓库。
---

# Git 凭证存储

在使用Git时，我们经常需要与远程仓库进行交互，例如克隆、推送或拉取代码。为了简化这些操作，Git提供了凭证存储功能，允许用户保存认证信息（如用户名和密码），从而避免每次操作时重复输入凭证。

## 什么是Git凭证存储？

Git凭证存储是一种机制，用于安全地保存用户的认证信息（如用户名、密码或令牌）。当您首次与远程仓库交互时，Git会提示您输入凭证。如果启用了凭证存储，Git会将这些凭证保存下来，以便在后续操作中自动使用。

:::note
凭证存储的目的是提高便利性，但同时也需要注意安全性。确保您的凭证存储方式适合您的使用场景。
:::

## Git 凭证存储的配置

Git提供了多种凭证存储方式，您可以根据需求选择适合的方式。以下是常见的凭证存储方式：

1. **缓存（Cache）**：将凭证保存在内存中一段时间（默认15分钟）。
2. **存储（Store）**：将凭证以明文形式保存在文件中。
3. **密钥链（Keychain）**：使用系统的密钥管理工具（如macOS的Keychain或Windows的Credential Manager）保存凭证。
4. **助手（Helper）**：使用第三方工具（如Git Credential Manager）管理凭证。

### 配置缓存凭证存储

缓存凭证存储是最简单的凭证存储方式，适合短期使用。您可以通过以下命令启用缓存：

```bash
git config --global credential.helper cache
```

默认情况下，凭证会在内存中缓存15分钟。您可以通过以下命令调整缓存时间（例如设置为1小时）：

```bash
git config --global credential.helper 'cache --timeout=3600'
```

### 配置存储凭证存储

存储凭证存储会将凭证以明文形式保存在文件中。这种方式适合不需要高安全性的场景。启用存储凭证存储的命令如下：

```bash
git config --global credential.helper store
```

凭证会保存在 `~/.git-credentials` 文件中。请注意，这种方式的安全性较低，因为凭证是以明文存储的。

### 配置密钥链凭证存储

如果您使用的是macOS或Windows，可以使用系统的密钥管理工具来保存凭证。以下是启用密钥链凭证存储的命令：

- **macOS**：
  ```bash
  git config --global credential.helper osxkeychain
  ```
- **Windows**：
  ```bash
  git config --global credential.helper manager-core
  ```

### 配置Git Credential Manager

Git Credential Manager（GCM）是一个跨平台的凭证管理工具，支持多种认证方式（如OAuth、PAT等）。您可以从[Git Credential Manager的GitHub页面](https://github.com/git-ecosystem/git-credential-manager)下载并安装。

安装完成后，GCM会自动配置为Git的凭证助手。

## 实际案例

假设您正在开发一个项目，并需要频繁地与GitHub远程仓库交互。为了避免每次推送代码时都输入用户名和密码，您可以启用凭证存储。

1. **启用缓存凭证存储**：
   ```bash
   git config --global credential.helper cache
   ```
   这样，您的凭证会在内存中缓存15分钟。

2. **启用密钥链凭证存储**（适用于macOS）：
   ```bash
   git config --global credential.helper osxkeychain
   ```
   这样，您的凭证会保存在macOS的Keychain中，安全性更高。

3. **使用Git Credential Manager**：
   如果您使用的是Git Credential Manager，它会自动处理凭证存储，并支持OAuth等高级认证方式。

## 总结

Git凭证存储是一个强大的功能，可以显著提高开发效率。通过合理配置凭证存储方式，您可以在安全性和便利性之间找到平衡。以下是本文的主要内容总结：

- Git凭证存储用于保存认证信息，避免重复输入。
- 常见的凭证存储方式包括缓存、存储、密钥链和Git Credential Manager。
- 根据您的需求选择合适的凭证存储方式，并注意安全性。

## 附加资源

- [Git官方文档 - 凭证存储](https://git-scm.com/docs/gitcredentials)
- [Git Credential Manager GitHub页面](https://github.com/git-ecosystem/git-credential-manager)
- [macOS Keychain文档](https://support.apple.com/guide/keychain-access/welcome/mac)

## 练习

1. 在您的本地Git配置中启用缓存凭证存储，并测试其效果。
2. 尝试使用Git Credential Manager配置OAuth认证，并与GitHub远程仓库交互。
3. 比较不同凭证存储方式的安全性，并选择最适合您的方式。