---
title: Git Blob 对象
description: 了解 Git 中的 blob 对象，它是如何存储文件内容的，以及它在版本控制中的作用。
---

## 介绍

在 Git 中，**blob 对象**（Binary Large Object）是 Git 用来存储文件内容的基本数据结构。每当你向 Git 仓库中添加一个文件时，Git 会将该文件的内容压缩并存储为一个 blob 对象。blob 对象是 Git 内部对象模型的核心组成部分之一，它与 tree 对象和 commit 对象一起构成了 Git 的版本控制系统。

:::note
blob 对象只存储文件的内容，而不存储文件名或目录结构。文件名和目录结构由 tree 对象管理。
:::

## blob 对象的结构

blob 对象是一个简单的数据结构，它包含以下内容：

1. **文件内容**：blob 对象存储的是文件的原始内容。
2. **对象类型**：blob 对象的类型标识符是 "blob"。
3. **对象大小**：blob 对象的大小是文件内容的字节数。
4. **SHA-1 哈希值**：Git 会为每个 blob 对象生成一个唯一的 SHA-1 哈希值，用于标识该对象。

### 示例：创建一个 blob 对象

假设我们有一个名为 `hello.txt` 的文件，内容如下：

```plaintext
Hello, World!
```

Git 会将该文件内容存储为一个 blob 对象。我们可以使用 Git 的底层命令来查看这个 blob 对象的内容：

```bash
$ echo "Hello, World!" | git hash-object -w --stdin
```

输出：

```plaintext
8ab686eafeb1f44702738c8b0f24f2567c36da6d
```

这个 SHA-1 哈希值就是 Git 为该 blob 对象生成的唯一标识符。

## blob 对象的存储

Git 将 blob 对象存储在 `.git/objects` 目录中。每个 blob 对象的文件名是其 SHA-1 哈希值的前两个字符，子目录名是哈希值的剩余部分。例如，上面的 blob 对象会被存储在 `.git/objects/8a/b686eafeb1f44702738c8b0f24f2567c36da6d` 文件中。

### 查看 blob 对象内容

我们可以使用 `git cat-file` 命令来查看 blob 对象的内容：

```bash
$ git cat-file -p 8ab686eafeb1f44702738c8b0f24f2567c36da6d
```

输出：

```plaintext
Hello, World!
```

## blob 对象的实际应用

blob 对象在 Git 的日常使用中无处不在。每当你提交一个文件时，Git 都会为该文件创建一个新的 blob 对象。如果你修改了文件内容并再次提交，Git 会为新的内容创建一个新的 blob 对象，而旧的 blob 对象仍然保留在仓库中，以便你可以随时回滚到之前的版本。

### 示例：修改文件并提交

假设我们修改了 `hello.txt` 文件的内容：

```plaintext
Hello, Git!
```

再次提交后，Git 会为新的内容创建一个新的 blob 对象：

```bash
$ echo "Hello, Git!" | git hash-object -w --stdin
```

输出：

```plaintext
5e1c309dae7f45e0f39b1bf3ac3cd9db12e7d689
```

现在，Git 仓库中有两个 blob 对象，分别对应 `hello.txt` 文件的两个版本。

## 总结

blob 对象是 Git 中用于存储文件内容的基本数据结构。它只存储文件的内容，而不存储文件名或目录结构。通过 blob 对象，Git 能够高效地管理文件的版本历史，并支持快速的文件内容检索和回滚。

:::tip
如果你想深入了解 Git 的内部原理，可以尝试使用 `git cat-file` 和 `git hash-object` 等底层命令来探索 Git 对象模型。
:::

## 附加资源

- [Git Internals - Git Objects](https://git-scm.com/book/en/v2/Git-Internals-Git-Objects)
- [Pro Git Book](https://git-scm.com/book/en/v2)

## 练习

1. 创建一个新的文本文件，并使用 `git hash-object` 命令将其内容存储为 blob 对象。
2. 修改文件内容并再次提交，观察 Git 如何为新的内容创建新的 blob 对象。
3. 使用 `git cat-file` 命令查看不同版本的 blob 对象内容。
