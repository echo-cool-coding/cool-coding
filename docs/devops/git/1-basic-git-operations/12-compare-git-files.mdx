---
title: Git 文件对比
description: 学习如何使用Git进行文件对比，掌握查看文件差异的基本操作和实际应用场景。
---

# Git 文件对比

在Git中，文件对比（Diff）是一个非常重要的功能，它允许你查看文件在不同版本之间的差异。无论是查看工作目录中的未提交更改，还是比较不同分支或提交之间的差异，Git的文件对比功能都能帮助你更好地理解代码的变化。

## 什么是Git文件对比？

Git文件对比（Diff）是一种用于显示两个文件或两个提交之间差异的工具。它可以帮助你快速了解哪些行被添加、删除或修改。通过文件对比，你可以更轻松地审查代码、解决冲突以及理解项目的演变过程。

## 基本用法

### 查看工作目录中的更改

当你对文件进行修改后，可以使用以下命令查看工作目录中未提交的更改：

```bash
git diff
```

这个命令会显示当前工作目录与暂存区（Index）之间的差异。如果你只想查看某个特定文件的差异，可以指定文件名：

```bash
git diff <file>
```

### 查看暂存区中的更改

如果你已经将更改添加到暂存区，可以使用以下命令查看暂存区与最后一次提交之间的差异：

```bash
git diff --cached
```

### 比较两个提交之间的差异

你可以使用以下命令比较两个提交之间的差异：

```bash
git diff <commit1> <commit2>
```

例如，比较当前分支与`main`分支之间的差异：

```bash
git diff main
```

### 比较分支之间的差异

如果你想比较两个分支之间的差异，可以使用以下命令：

```bash
git diff <branch1>..<branch2>
```

例如，比较`feature-branch`与`main`分支之间的差异：

```bash
git diff main..feature-branch
```

## 实际案例

### 案例1：审查代码更改

假设你正在开发一个新功能，并且已经完成了一部分代码。在提交之前，你想查看自己做了哪些更改：

```bash
git diff
```

输出可能如下：

```diff
diff --git a/src/main.js b/src/main.js
index 1234567..89abcde 100644
--- a/src/main.js
+++ b/src/main.js
@@ -1,5 +1,6 @@
 function main() {
   console.log("Hello, World!");
+  console.log("This is a new feature.");
 }
```

从输出中可以看到，你在`main.js`文件中添加了一行代码。

### 案例2：解决冲突

在合并分支时，可能会遇到冲突。使用`git diff`可以帮助你查看冲突的具体内容：

```bash
git diff
```

输出可能如下：

```diff
diff --cc src/main.js
index 1234567,89abcde..0000000
--- a/src/main.js
+++ b/src/main.js
@@@ -1,5 -1,6 +1,10 @@@
  function main() {
    console.log("Hello, World!");
++<<<<<<< HEAD
 +  console.log("This is the main branch.");
++=======
+   console.log("This is a new feature.");
++>>>>>>> feature-branch
  }
```

从输出中可以看到，`HEAD`分支和`feature-branch`分支在`main.js`文件中存在冲突。

## 总结

Git文件对比是一个强大的工具，它可以帮助你查看代码的变化、审查更改以及解决冲突。通过掌握`git diff`命令，你可以更高效地管理代码库，并确保代码的质量。

## 附加资源

- [Git官方文档 - Diff](https://git-scm.com/docs/git-diff)
- [Pro Git Book - 查看提交历史](https://git-scm.com/book/en/v2/Git-Basics-Viewing-the-Commit-History)

## 练习

1. 在你的本地仓库中修改一个文件，然后使用`git diff`查看更改。
2. 创建一个新的分支，并在该分支上修改文件，然后使用`git diff`比较两个分支之间的差异。
3. 尝试使用`git diff --cached`查看暂存区中的更改。

通过练习，你将更加熟悉Git文件对比的使用方法，并能够在实际项目中灵活应用。