---
title: 指标命名规范
description: 了解 Prometheus 自定义导出器中指标命名的基本原则和最佳实践，帮助初学者设计清晰、一致的指标名称。
---

在 Prometheus 中，指标（Metrics）是监控系统的核心组成部分。良好的指标命名规范不仅能提高代码的可读性，还能确保指标的一致性和可维护性。本文将详细介绍 Prometheus 自定义导出器中指标命名的基本原则和最佳实践。

## 什么是指标命名规范？

指标命名规范是一组规则和约定，用于定义如何为监控系统中的指标命名。这些规范旨在确保指标名称清晰、一致且易于理解。良好的命名规范可以帮助开发者和运维人员快速理解指标的含义，从而更高效地进行监控和故障排查。

## 指标命名的基本原则

### 1. 使用小写字母
Prometheus 推荐使用小写字母命名指标，并使用下划线 `_` 分隔单词。例如：

```plaintext
http_requests_total
cpu_usage_percent
```

### 2. 使用有意义的名称
指标名称应清晰地反映其含义。避免使用缩写或模糊的术语。例如：

```plaintext
# 不推荐
req_cnt

# 推荐
http_requests_total
```

### 3. 使用单位后缀
如果指标涉及某种度量单位，建议在名称中包含单位。例如：

```plaintext
response_time_seconds
memory_usage_bytes
```

### 4. 使用 `_total` 后缀表示计数器
对于计数器类型的指标，建议使用 `_total` 后缀。例如：

```plaintext
http_requests_total
errors_total
```

### 5. 避免使用特殊字符
指标名称中应避免使用特殊字符（如 `-`、`.`、`/` 等），因为这些字符可能会导致解析问题。

## 实际案例

假设我们正在开发一个自定义导出器来监控 Web 服务器的请求和响应时间。以下是一些符合命名规范的指标示例：

```plaintext
http_requests_total
http_response_time_seconds
http_error_responses_total
```

这些指标名称清晰地反映了其含义，并且遵循了 Prometheus 的命名规范。

## 总结

良好的指标命名规范是构建高效监控系统的基础。通过遵循本文介绍的基本原则和最佳实践，您可以设计出清晰、一致的指标名称，从而提高系统的可维护性和可读性。

## 附加资源

- [Prometheus 官方文档](https://prometheus.io/docs/practices/naming/)
- [Prometheus 最佳实践](https://prometheus.io/docs/practices/instrumentation/)

## 练习

1. 为以下场景设计指标名称：
   - 监控数据库查询的响应时间。
   - 监控系统中发生的错误数量。
   - 监控 CPU 使用率。

2. 检查您现有的 Prometheus 导出器，确保所有指标名称符合命名规范。

通过以上练习，您将更好地掌握指标命名规范，并能够将其应用到实际项目中。