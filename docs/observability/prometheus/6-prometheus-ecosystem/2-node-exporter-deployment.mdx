---
title: Node Exporter 部署
description: 学习如何在 Prometheus 生态系统中部署 Node Exporter，以监控主机级别的系统指标。
---

## 介绍

Node Exporter 是 Prometheus 生态系统中的一个重要组件，用于收集主机级别的系统指标，例如 CPU 使用率、内存使用情况、磁盘 I/O 等。通过部署 Node Exporter，你可以将这些指标暴露给 Prometheus，从而实现对主机性能的全面监控。

本文将逐步指导你如何在 Linux 系统上部署 Node Exporter，并将其与 Prometheus 集成。

## 前提条件

在开始之前，请确保你已经具备以下条件：

- 一台运行 Linux 的服务器
- 对 Linux 命令行有基本的了解
- 已经安装并配置了 Prometheus

## 步骤 1：下载 Node Exporter

首先，你需要从 Prometheus 的官方 GitHub 仓库下载 Node Exporter 的最新版本。

```bash
wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
```

下载完成后，解压文件：

```bash
tar xvfz node_exporter-1.3.1.linux-amd64.tar.gz
```

## 步骤 2：运行 Node Exporter

解压后，进入解压目录并运行 Node Exporter：

```bash
cd node_exporter-1.3.1.linux-amd64
./node_exporter
```

默认情况下，Node Exporter 会在 `9100` 端口上运行。你可以通过访问 `http://<your-server-ip>:9100/metrics` 来验证 Node Exporter 是否正常运行。

:::note
如果你希望 Node Exporter 在后台运行，可以使用 `nohup` 命令：

```bash
nohup ./node_exporter &
```
:::

## 步骤 3：配置 Prometheus 以抓取 Node Exporter 数据

接下来，你需要配置 Prometheus 以抓取 Node Exporter 暴露的指标。编辑 Prometheus 的配置文件 `prometheus.yml`，添加以下内容：

```yaml
scrape_configs:
  - job_name: 'node'
    static_configs:
      - targets: ['<your-server-ip>:9100']
```

保存并退出配置文件后，重启 Prometheus 以应用更改。

:::tip
你可以使用 `systemctl` 命令来重启 Prometheus 服务：

```bash
sudo systemctl restart prometheus
```
:::

## 步骤 4：验证数据抓取

在 Prometheus 的 Web UI 中，导航到 `Status` -> `Targets`，你应该能够看到 `node` 作业的状态为 `UP`，表示 Prometheus 正在成功抓取 Node Exporter 的指标。

## 实际应用场景

假设你正在管理一个由多台服务器组成的集群，你需要监控每台服务器的 CPU 使用率、内存使用情况和磁盘 I/O。通过部署 Node Exporter，你可以轻松地将这些指标暴露给 Prometheus，并在 Grafana 中创建仪表盘，实时监控集群的健康状况。

## 总结

通过本文，你已经学会了如何在 Linux 系统上部署 Node Exporter，并将其与 Prometheus 集成。Node Exporter 是监控主机级别系统指标的重要工具，能够帮助你全面了解服务器的性能状况。

## 附加资源

- [Node Exporter 官方文档](https://prometheus.io/docs/guides/node-exporter/)
- [Prometheus 官方文档](https://prometheus.io/docs/introduction/overview/)
- [Grafana 仪表盘配置指南](https://grafana.com/docs/grafana/latest/dashboards/)

## 练习

1. 尝试在多台服务器上部署 Node Exporter，并配置 Prometheus 抓取所有服务器的指标。
2. 在 Grafana 中创建一个仪表盘，展示 CPU 使用率、内存使用情况和磁盘 I/O 的实时数据。