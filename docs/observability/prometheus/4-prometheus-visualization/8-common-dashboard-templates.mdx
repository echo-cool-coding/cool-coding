---
title: 常用监控面板模板
description: 了解 Prometheus 中常用的监控面板模板，学习如何通过 Grafana 创建和配置这些模板，以便更好地监控系统性能。
---

# 常用监控面板模板

在现代的监控系统中，Prometheus 和 Grafana 是两个非常重要的工具。Prometheus 负责收集和存储监控数据，而 Grafana 则用于将这些数据可视化。为了帮助初学者快速上手，本文将介绍一些常用的监控面板模板，并展示如何通过 Grafana 创建和配置这些模板。

## 什么是监控面板模板？

监控面板模板是预先设计好的 Grafana 面板，用于展示特定的监控指标。这些模板通常包含一组预定义的查询和可视化组件，可以帮助用户快速搭建监控系统，而无需从头开始设计。

## 常用监控面板模板

### 1. CPU 使用率监控面板

CPU 使用率是系统性能监控中最常见的指标之一。以下是一个简单的 CPU 使用率监控面板模板：

```json
{
  "title": "CPU Usage",
  "type": "graph",
  "targets": [
    {
      "expr": "100 - (avg by (instance) (irate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)",
      "legendFormat": "{{instance}}"
    }
  ],
  "yaxes": [
    {
      "format": "percent"
    }
  ]
}
```

#### 解释：
- `expr`：Prometheus 查询表达式，用于计算 CPU 使用率。
- `legendFormat`：图例格式，显示实例名称。
- `yaxes`：Y 轴格式，设置为百分比。

### 2. 内存使用率监控面板

内存使用率是另一个重要的系统性能指标。以下是一个内存使用率监控面板模板：

```json
{
  "title": "Memory Usage",
  "type": "graph",
  "targets": [
    {
      "expr": "node_memory_MemTotal_bytes - node_memory_MemFree_bytes",
      "legendFormat": "{{instance}}"
    }
  ],
  "yaxes": [
    {
      "format": "bytes"
    }
  ]
}
```

#### 解释：
- `expr`：Prometheus 查询表达式，用于计算内存使用量。
- `legendFormat`：图例格式，显示实例名称。
- `yaxes`：Y 轴格式，设置为字节。

### 3. 网络流量监控面板

网络流量监控对于了解系统的网络负载非常重要。以下是一个网络流量监控面板模板：

```json
{
  "title": "Network Traffic",
  "type": "graph",
  "targets": [
    {
      "expr": "irate(node_network_receive_bytes_total[5m])",
      "legendFormat": "{{instance}} - Receive"
    },
    {
      "expr": "irate(node_network_transmit_bytes_total[5m])",
      "legendFormat": "{{instance}} - Transmit"
    }
  ],
  "yaxes": [
    {
      "format": "bytes"
    }
  ]
}
```

#### 解释：
- `expr`：Prometheus 查询表达式，用于计算网络接收和发送的字节数。
- `legendFormat`：图例格式，显示实例名称和流量方向。
- `yaxes`：Y 轴格式，设置为字节。

## 实际案例

假设你正在监控一个包含多个节点的 Kubernetes 集群。你可以使用上述模板来创建以下监控面板：

1. **CPU 使用率面板**：监控每个节点的 CPU 使用情况，确保没有节点过载。
2. **内存使用率面板**：监控每个节点的内存使用情况，确保没有内存泄漏。
3. **网络流量面板**：监控每个节点的网络流量，确保网络带宽充足。

## 总结

通过使用 Prometheus 和 Grafana，你可以轻松创建各种监控面板，以实时监控系统的性能。本文介绍了一些常用的监控面板模板，包括 CPU 使用率、内存使用率和网络流量监控面板。这些模板可以帮助你快速搭建监控系统，确保系统的稳定运行。

## 附加资源

- [Prometheus 官方文档](https://prometheus.io/docs/)
- [Grafana 官方文档](https://grafana.com/docs/)
- [Prometheus 查询示例](https://prometheus.io/docs/prometheus/latest/querying/examples/)

## 练习

1. 尝试在 Grafana 中创建一个新的监控面板，使用本文提供的 CPU 使用率模板。
2. 修改内存使用率模板，使其显示每个节点的内存使用百分比。
3. 创建一个新的网络流量监控面板，监控特定网络接口的流量。

通过完成这些练习，你将更深入地理解如何创建和配置监控面板，并能够根据实际需求进行调整。