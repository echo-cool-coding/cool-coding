---
title: 仪表盘与单值面板
description: 了解如何在 Grafana Alloy 中使用仪表盘和单值面板来可视化数据。本文适合初学者，包含详细的解释、代码示例和实际案例。
---

# 仪表盘与单值面板

在 Grafana Alloy 中，仪表盘（Dashboard）是数据可视化的核心工具，而单值面板（Single Stat Panel）则是其中一种常用的可视化组件。本文将详细介绍仪表盘和单值面板的概念、使用方法以及实际应用场景。

## 什么是仪表盘？

仪表盘是 Grafana Alloy 中用于展示数据的可视化界面。它由多个面板（Panels）组成，每个面板可以显示不同类型的数据，如折线图、柱状图、饼图等。仪表盘的主要目的是帮助用户快速理解数据趋势、异常和关键指标。

## 什么是单值面板？

单值面板是一种特殊的面板类型，用于显示单个数值或关键指标。它通常用于展示重要的 KPI（关键绩效指标），如当前 CPU 使用率、内存使用量、请求成功率等。单值面板的设计简洁明了，适合快速查看关键数据。

## 创建仪表盘

在 Grafana Alloy 中创建仪表盘非常简单。以下是一个基本的仪表盘配置示例：

```yaml
dashboard:
  title: 系统监控仪表盘
  panels:
    - title: CPU 使用率
      type: "graph"
      targets:
        - expr: "rate(node_cpu_seconds_total{mode='system'}[1m])"
    - title: 内存使用量
      type: "graph"
      targets:
        - expr: "node_memory_MemTotal_bytes - node_memory_MemFree_bytes"
```

在这个示例中，我们创建了一个名为 "系统监控仪表盘" 的仪表盘，并添加了两个面板：一个用于显示 CPU 使用率，另一个用于显示内存使用量。

## 添加单值面板

单值面板的配置也非常简单。以下是一个单值面板的配置示例：

```yaml
dashboard:
  title: 系统监控仪表盘
  panels:
    - title: 当前 CPU 使用率
      type: "singlestat"
      targets:
        - expr: "rate(node_cpu_seconds_total{mode='system'}[1m])"
      format: "percent"
```

在这个示例中，我们添加了一个单值面板，用于显示当前 CPU 使用率。`format` 参数指定了数值的显示格式，这里我们使用了百分比格式。

## 实际应用场景

### 场景 1：监控服务器 CPU 使用率

假设你正在监控一组服务器的 CPU 使用率。你可以创建一个仪表盘，其中包含一个单值面板，用于显示当前 CPU 使用率，以及一个折线图面板，用于显示 CPU 使用率的历史趋势。

```yaml
dashboard:
  title: 服务器 CPU 监控
  panels:
    - title: 当前 CPU 使用率
      type: "singlestat"
      targets:
        - expr: "rate(node_cpu_seconds_total{mode='system'}[1m])"
      format: "percent"
    - title: CPU 使用率历史趋势
      type: "graph"
      targets:
        - expr: "rate(node_cpu_seconds_total{mode='system'}[1m])"
```

### 场景 2：监控网站请求成功率

假设你正在监控一个网站的请求成功率。你可以创建一个仪表盘，其中包含一个单值面板，用于显示当前的请求成功率，以及一个柱状图面板，用于显示请求成功率的分布情况。

```yaml
dashboard:
  title: 网站请求成功率监控
  panels:
    - title: 当前请求成功率
      type: "singlestat"
      targets:
        - expr: "sum(rate(http_requests_total{status=~'2..'}[1m])) / sum(rate(http_requests_total[1m]))"
      format: "percent"
    - title: 请求成功率分布
      type: "barchart"
      targets:
        - expr: "sum(rate(http_requests_total{status=~'2..'}[1m])) by (status)"
```

## 总结

仪表盘和单值面板是 Grafana Alloy 中非常重要的可视化工具。通过合理配置和使用这些工具，你可以轻松监控和分析各种关键指标。希望本文能帮助你更好地理解和使用这些工具。

## 附加资源与练习

- **练习 1**：创建一个仪表盘，监控你的服务器的内存使用量和磁盘 I/O。
- **练习 2**：尝试使用不同的单值面板格式（如百分比、字节、时间等）来显示不同的指标。
- **附加资源**：阅读 [Grafana 官方文档](https://grafana.com/docs/) 以获取更多关于仪表盘和面板的详细信息。

:::tip
在实际使用中，建议定期检查和优化你的仪表盘配置，以确保数据的准确性和可视化效果的最佳表现。
:::