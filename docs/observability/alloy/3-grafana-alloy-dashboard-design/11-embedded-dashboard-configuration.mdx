---
title: 嵌入式仪表盘配置
description: 学习如何在 Grafana Alloy 中配置嵌入式仪表盘，掌握从基础到高级的配置技巧，并通过实际案例理解其应用场景。
---

# 嵌入式仪表盘配置

嵌入式仪表盘是 Grafana Alloy 中一个强大的功能，它允许你将 Grafana 仪表盘嵌入到其他应用程序或网页中。通过嵌入式仪表盘，你可以将监控数据可视化无缝集成到你的工作流中，而无需离开当前应用程序。本文将带你从基础概念开始，逐步学习如何配置嵌入式仪表盘，并通过实际案例展示其应用场景。

## 什么是嵌入式仪表盘？

嵌入式仪表盘是指将 Grafana 仪表盘嵌入到其他应用程序或网页中的技术。通过这种方式，你可以在不离开当前应用程序的情况下，实时查看和分析监控数据。嵌入式仪表盘通常通过 iframe 或 API 调用来实现。

## 基础配置

### 1. 创建 Grafana 仪表盘

首先，你需要在 Grafana 中创建一个仪表盘。假设你已经有一个正在运行的 Grafana 实例，并且已经配置了一些数据源。

1. 登录到 Grafana。
2. 点击左侧菜单中的 **"+"** 按钮，选择 **"Dashboard"**。
3. 添加面板并配置数据源和查询。
4. 保存仪表盘。

### 2. 获取仪表盘的嵌入链接

在 Grafana 中，你可以通过以下步骤获取仪表盘的嵌入链接：

1. 打开你想要嵌入的仪表盘。
2. 点击右上角的 **"Share"** 按钮。
3. 在 **"Embed"** 选项卡中，复制 iframe 代码。

例如：

```html
<iframe src="http://your-grafana-instance/d/your-dashboard-uid" width="100%" height="500" frameborder="0"></iframe>
```

### 3. 将仪表盘嵌入到网页中

将上述 iframe 代码粘贴到你的网页中，仪表盘就会显示在网页中。

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embedded Dashboard</title>
</head>
<body>
    <h1>My Embedded Dashboard</h1>
    <iframe src="http://your-grafana-instance/d/your-dashboard-uid" width="100%" height="500" frameborder="0"></iframe>
</body>
</html>
```

## 高级配置

### 1. 使用 Grafana API 嵌入仪表盘

除了 iframe，你还可以使用 Grafana API 来嵌入仪表盘。这种方式提供了更多的灵活性和控制。

1. 首先，你需要生成一个 API 密钥。
2. 使用 API 密钥调用 Grafana 的 API 来获取仪表盘的 JSON 数据。
3. 将 JSON 数据渲染到你的应用程序中。

例如，使用 Python 获取仪表盘数据：

```python
import requests

url = "http://your-grafana-instance/api/dashboards/uid/your-dashboard-uid"
headers = {
    "Authorization": "Bearer your-api-key"
}

response = requests.get(url, headers=headers)
dashboard_data = response.json()

print(dashboard_data)
```

### 2. 动态调整仪表盘大小

你可以通过 JavaScript 动态调整嵌入式仪表盘的大小，以适应不同的屏幕尺寸。

```javascript
window.addEventListener('resize', function() {
    var iframe = document.getElementById('dashboard-iframe');
    iframe.style.height = window.innerHeight + 'px';
});
```

## 实际案例

### 案例 1：将仪表盘嵌入到内部监控系统

假设你有一个内部监控系统，你希望将 Grafana 仪表盘嵌入到该系统中，以便团队成员可以实时查看系统状态。

1. 在 Grafana 中创建一个显示系统关键指标的仪表盘。
2. 获取仪表盘的嵌入链接。
3. 将 iframe 代码嵌入到内部监控系统的网页中。

### 案例 2：在移动应用中嵌入仪表盘

你可以在移动应用中嵌入 Grafana 仪表盘，以便用户可以在移动设备上查看监控数据。

1. 使用 Grafana API 获取仪表盘数据。
2. 在移动应用中渲染仪表盘数据。

## 总结

通过本文，你已经学习了如何在 Grafana Alloy 中配置嵌入式仪表盘。我们从基础配置开始，逐步深入到高级配置，并通过实际案例展示了嵌入式仪表盘的应用场景。希望这些内容能帮助你在实际项目中更好地使用嵌入式仪表盘。

## 附加资源

- [Grafana 官方文档](https://grafana.com/docs/)
- [Grafana API 文档](https://grafana.com/docs/grafana/latest/http_api/)

## 练习

1. 创建一个简单的 Grafana 仪表盘，并将其嵌入到一个网页中。
2. 使用 Grafana API 获取仪表盘数据，并在一个简单的 Python 应用程序中显示这些数据。
3. 尝试动态调整嵌入式仪表盘的大小，以适应不同的屏幕尺寸。
