---
title: 折线图高级设置
description: 学习如何在 Grafana 中配置折线图的高级设置，包括自定义样式、阈值、图例和工具提示等。
---

# 折线图高级设置

折线图是 Grafana 中最常用的可视化工具之一，用于展示时间序列数据的变化趋势。通过 Grafana 的高级设置，您可以自定义折线图的外观和行为，使其更符合您的需求。本文将逐步介绍如何配置折线图的高级设置，并通过实际案例展示其应用。

## 1. 自定义折线图样式

在 Grafana 中，您可以通过调整折线图的样式来增强其可读性和美观性。以下是一些常见的样式设置：

### 1.1 线条颜色和宽度

您可以为每条折线设置不同的颜色和宽度，以区分不同的数据系列。在 Grafana 面板的 "Display" 选项卡中，找到 "Line width" 和 "Line color" 选项，分别调整线条的宽度和颜色。

```json
{
  "fieldConfig": {
    "defaults": {
      "custom": {
        "lineWidth": 2,
        "lineColor": "#FF5733"
      }
    }
  }
}
```

### 1.2 填充区域

如果您希望在折线下方填充颜色，可以在 "Display" 选项卡中启用 "Fill opacity" 选项，并设置填充的不透明度。

```json
{
  "fieldConfig": {
    "defaults": {
      "custom": {
        "fillOpacity": 30
      }
    }
  }
}
```

## 2. 设置阈值

阈值是 Grafana 中用于标记数据是否超出预期范围的工具。您可以为折线图设置多个阈值，并在图表中以不同的颜色显示超出阈值的数据。

### 2.1 添加阈值

在 "Thresholds" 选项卡中，您可以添加多个阈值，并为每个阈值设置不同的颜色。例如，您可以设置一个警告阈值和一个危险阈值：

```json
{
  "thresholds": {
    "mode": "absolute",
    "steps": [
      {
        "value": 50,
        "color": "yellow"
      },
      {
        "value": 80,
        "color": "red"
      }
    ]
  }
}
```

### 2.2 阈值应用场景

假设您正在监控服务器的 CPU 使用率，您可以设置一个警告阈值为 50%，危险阈值为 80%。当 CPU 使用率超过 50% 时，折线图会显示黄色；超过 80% 时，显示红色。

## 3. 配置图例

图例是折线图中用于标识不同数据系列的工具。您可以通过 Grafana 的 "Legend" 选项卡自定义图例的位置、格式和内容。

### 3.1 图例位置

您可以选择将图例放置在图表的顶部、底部、左侧或右侧。在 "Legend" 选项卡中，找到 "Placement" 选项，选择合适的位置。

```json
{
  "legend": {
    "placement": "bottom"
  }
}
```

### 3.2 图例格式

您还可以自定义图例的显示格式。例如，您可以显示每个数据系列的最小值、最大值或平均值。

```json
{
  "legend": {
    "calcs": ["min", "max", "mean"]
  }
}
```

## 4. 工具提示设置

工具提示是当用户将鼠标悬停在折线图上时显示的信息框。您可以通过 "Tooltip" 选项卡自定义工具提示的内容和样式。

### 4.1 工具提示模式

Grafana 提供了两种工具提示模式：单点和多点。单点模式只显示鼠标悬停位置的数据点，而多点模式会显示所有数据系列在该时间点的值。

```json
{
  "tooltip": {
    "mode": "multi"
  }
}
```

### 4.2 工具提示排序

您还可以设置工具提示中数据系列的排序方式。例如，您可以按值的大小排序，以便快速识别最大值或最小值。

```json
{
  "tooltip": {
    "sort": "descending"
  }
}
```

## 5. 实际案例

假设您正在监控一个电子商务网站的订单数量。您可以使用折线图展示每天的订单数量，并设置以下高级设置：

- **线条颜色**：使用不同的颜色区分不同地区的订单数量。
- **阈值**：设置一个警告阈值为 1000 单/天，危险阈值为 1500 单/天。
- **图例**：将图例放置在底部，并显示每个地区的平均订单数量。
- **工具提示**：启用多点模式，并按值的大小排序。

通过这些设置，您可以快速识别订单数量的变化趋势，并在订单量超出预期时及时采取措施。

## 6. 总结

通过 Grafana 的折线图高级设置，您可以自定义图表的外观和行为，使其更符合您的需求。本文介绍了如何调整折线图的样式、设置阈值、配置图例和工具提示，并通过实际案例展示了这些设置的应用场景。

## 7. 附加资源与练习

- **练习**：尝试在 Grafana 中创建一个折线图，并应用本文介绍的高级设置。
- **资源**：阅读 Grafana 官方文档，了解更多关于折线图的高级配置选项。

:::tip
如果您在配置过程中遇到问题，可以参考 Grafana 社区论坛或官方文档，获取更多帮助。
:::