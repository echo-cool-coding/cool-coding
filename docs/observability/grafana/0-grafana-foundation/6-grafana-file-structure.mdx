---
title: Grafana 文件结构
description: 了解 Grafana 的文件结构，掌握其核心目录和配置文件的作用，帮助你更好地管理和自定义 Grafana。
---

# Grafana 文件结构

Grafana 是一个强大的开源监控和可视化工具，广泛用于数据分析和监控。要充分利用 Grafana，了解其文件结构是至关重要的。本文将详细介绍 Grafana 的文件结构，帮助你更好地理解和管理 Grafana 的配置和数据。

## 介绍

Grafana 的文件结构由多个目录和文件组成，每个部分都有其特定的用途。通过了解这些文件和目录的作用，你可以更轻松地进行配置、扩展和故障排除。

## 核心目录和文件

以下是 Grafana 的核心目录和文件的概述：

### 1. **`conf` 目录**

`conf` 目录包含 Grafana 的主要配置文件。默认情况下，Grafana 会从 `conf/defaults.ini` 加载配置。你可以通过创建 `custom.ini` 文件来覆盖默认配置。

```ini
# conf/custom.ini
[server]
http_port = 3000
```

:::tip
建议不要直接修改 `defaults.ini` 文件，而是通过 `custom.ini` 文件进行自定义配置。
:::

### 2. **`data` 目录**

`data` 目录用于存储 Grafana 的持久化数据，包括数据库、插件和日志文件。如果你使用的是 SQLite 数据库，它也会存储在此目录中。

```bash
data/
├── grafana.db
├── plugins/
└── logs/
```

### 3. **`plugins` 目录**

`plugins` 目录用于存储 Grafana 的插件。你可以手动安装插件，也可以使用 Grafana 的插件管理工具进行安装。

```bash
plugins/
├── grafana-clock-panel/
└── grafana-piechart-panel/
```

### 4. **`public` 目录**

`public` 目录包含 Grafana 的静态资源文件，如 CSS、JavaScript 和图像文件。这些文件用于构建 Grafana 的前端界面。

```bash
public/
├── img/
├── css/
└── js/
```

### 5. **`provisioning` 目录**

`provisioning` 目录用于存储 Grafana 的自动化配置脚本。你可以使用这些脚本来自动配置数据源、仪表盘和通知渠道。

```bash
provisioning/
├── dashboards/
├── datasources/
└── notifiers/
```

## 配置文件详解

Grafana 的配置文件是 `conf/defaults.ini` 和 `conf/custom.ini`。以下是配置文件中的一些关键部分：

### `[server]` 部分

```ini
[server]
http_port = 3000
domain = localhost
```

- `http_port`：指定 Grafana 的 HTTP 端口。
- `domain`：指定 Grafana 的域名。

### `[database]` 部分

```ini
[database]
type = sqlite3
path = /var/lib/grafana/grafana.db
```

- `type`：指定数据库类型（如 `sqlite3`、`mysql`、`postgres`）。
- `path`：指定数据库文件的路径。

### `[auth]` 部分

```ini
[auth]
disable_login_form = false
```

- `disable_login_form`：禁用登录表单，仅允许通过 OAuth 登录。

## 实际案例

假设你需要在 Grafana 中配置一个新的数据源，并将其自动化。你可以通过 `provisioning/datasources/` 目录下的 YAML 文件来实现：

```yaml
# provisioning/datasources/datasource.yml
apiVersion: 1

datasources:
  - name: Prometheus
    type: prometheus
    url: http://localhost:9090
    access: proxy
    isDefault: true
```

:::note
通过这种方式，你可以在 Grafana 启动时自动配置数据源，而无需手动操作。
:::

## 总结

了解 Grafana 的文件结构对于管理和自定义 Grafana 至关重要。通过掌握 `conf`、`data`、`plugins`、`public` 和 `provisioning` 目录的作用，你可以更高效地配置和扩展 Grafana。

## 附加资源

- [Grafana 官方文档](https://grafana.com/docs/)
- [Grafana 配置文件参考](https://grafana.com/docs/grafana/latest/administration/configuration/)

## 练习

1. 尝试在 `conf/custom.ini` 中修改 `http_port`，并重启 Grafana 查看效果。
2. 在 `provisioning/datasources/` 目录下创建一个新的 YAML 文件，配置一个新的数据源。
