---
title: 仪表盘注释
description: 了解如何在 Grafana 仪表盘中使用注释功能，以增强数据的可读性和上下文信息。
---

# 仪表盘注释

在 Grafana 中，**仪表盘注释**是一种强大的功能，允许你在图表中添加额外的上下文信息。通过注释，你可以标记特定时间点或事件，帮助团队更好地理解数据的变化和趋势。无论是记录系统故障、部署新版本，还是标记重要事件，注释都能让你的仪表盘更具可读性和实用性。

## 什么是仪表盘注释？

仪表盘注释是在 Grafana 图表上添加的文本标签，通常与特定的时间点或时间范围相关联。它们可以用于标记重要事件、系统变更、故障或其他值得注意的情况。注释可以是手动添加的，也可以是从外部数据源（如 Prometheus 或 Elasticsearch）自动生成的。

### 注释的类型

1. **手动注释**：由用户手动添加，通常用于标记特定事件或时间点。
2. **自动注释**：从外部数据源自动生成，例如从 Prometheus 的警报规则或 Elasticsearch 的日志事件中提取。

## 如何添加手动注释

在 Grafana 中，手动添加注释非常简单。以下是具体步骤：

1. 打开你的 Grafana 仪表盘。
2. 在图表上方，点击“Annotations”按钮（通常是一个小旗子图标）。
3. 在弹出的窗口中，点击“Add Annotation”。
4. 输入注释的标题和描述。
5. 选择注释的时间范围（可以是单个时间点或一个时间段）。
6. 点击“Save”保存注释。

### 示例

假设你正在监控一个 Web 应用的响应时间，并且在某个时间点进行了服务器升级。你可以通过以下步骤添加一个注释：

1. 点击“Annotations”按钮。
2. 点击“Add Annotation”。
3. 输入标题为“Server Upgrade”，描述为“Upgraded server to v2.0”。
4. 选择升级发生的时间点。
5. 点击“Save”。

保存后，你将在图表上看到一个标记，表示服务器升级的时间点。

## 自动注释

自动注释是从外部数据源生成的注释。例如，如果你使用 Prometheus 监控系统，你可以配置 Prometheus 的警报规则，当某个指标超过阈值时，自动在 Grafana 中生成注释。

### 配置自动注释

1. 在 Grafana 中，打开仪表盘的设置。
2. 导航到“Annotations”选项卡。
3. 点击“Add Annotation Query”。
4. 选择数据源（如 Prometheus）。
5. 配置查询语句，例如 `ALERTS{alertstate="firing"}`。
6. 保存设置。

当 Prometheus 触发警报时，Grafana 会自动在图表上生成注释。

## 实际应用场景

### 场景 1：标记系统故障

假设你的系统在某个时间点发生了故障，导致响应时间激增。你可以在 Grafana 中添加一个注释，标记故障发生的时间点，并附上故障原因的简要描述。这样，团队成员在查看图表时，可以立即理解数据异常的原因。

### 场景 2：记录部署时间

在每次部署新版本时，你可以在 Grafana 中添加一个注释，记录部署的时间点和版本号。这样，当你在分析性能数据时，可以轻松识别出哪些变化是由新版本引入的。

## 总结

仪表盘注释是 Grafana 中一个非常有用的功能，它可以帮助你在图表中添加额外的上下文信息，使数据更具可读性和实用性。无论是手动添加注释，还是从外部数据源自动生成注释，都能显著提升团队对数据的理解能力。

### 附加资源

- [Grafana 官方文档：Annotations](https://grafana.com/docs/grafana/latest/dashboards/annotations/)
- [Prometheus 警报规则配置指南](https://prometheus.io/docs/alerting/latest/configuration/)

### 练习

1. 在你的 Grafana 仪表盘中，手动添加一个注释，标记某个重要事件。
2. 配置一个自动注释，从 Prometheus 中提取警报信息并在 Grafana 中显示。

通过实践这些步骤，你将更好地掌握 Grafana 仪表盘注释的使用方法。