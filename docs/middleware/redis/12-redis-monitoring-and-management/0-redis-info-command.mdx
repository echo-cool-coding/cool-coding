---
title: Redis INFO命令
description: "了解如何使用 Redis 的 INFO 命令来监控和管理 Redis 服务器的状态和性能。"
---

# Redis INFO 命令

Redis 是一个高性能的键值存储系统，广泛用于缓存、消息队列和实时数据处理等场景。为了确保 Redis 服务器的稳定运行，监控其状态和性能至关重要。Redis 提供了 `INFO` 命令，用于获取服务器的各种统计信息和状态数据。本文将详细介绍 `INFO` 命令的使用方法及其在实际中的应用。

## 什么是 INFO 命令？

`INFO` 命令是 Redis 提供的一个内置命令，用于返回关于 Redis 服务器的各种信息和统计数据。这些信息包括服务器的版本、内存使用情况、客户端连接数、持久化状态、复制状态等。通过 `INFO` 命令，管理员可以快速了解 Redis 服务器的运行状况，从而进行有效的监控和管理。

## 如何使用 INFO 命令

`INFO` 命令的基本语法如下：

```bash
INFO [section]
```

其中，`section` 是可选的参数，用于指定要获取的信息部分。如果不指定 `section`，`INFO` 命令将返回所有可用的信息。

### 示例：获取所有信息

```bash
127.0.0.1:6379> INFO
```

执行上述命令后，Redis 将返回一个包含所有信息的字符串。以下是一个简化的输出示例：

```bash
# Server
redis_version:6.2.6
redis_git_sha1:00000000
redis_git_dirty:0
redis_build_id:1234567890abcdef
redis_mode:standalone
os:Linux 5.4.0-42-generic x86_64
arch_bits:64
multiplexing_api:epoll
process_id:12345
run_id:abcdef1234567890
tcp_port:6379
uptime_in_seconds:123456
uptime_in_days:1
hz:10
lru_clock:1234567
executable:/usr/local/bin/redis-server
config_file:/etc/redis/redis.conf

# Clients
connected_clients:10
client_recent_max_input_buffer:2
client_recent_max_output_buffer:0
blocked_clients:0

# Memory
used_memory:1234567
used_memory_human:1.18M
used_memory_rss:2345678
used_memory_rss_human:2.24M
used_memory_peak:3456789
used_memory_peak_human:3.30M
used_memory_lua:37888
mem_fragmentation_ratio:1.90
mem_allocator:jemalloc-5.1.0

# Persistence
loading:0
rdb_changes_since_last_save:123
rdb_bgsave_in_progress:0
rdb_last_save_time:1631234567
rdb_last_bgsave_status:ok
rdb_last_bgsave_time_sec:1
rdb_current_bgsave_time_sec:-1
aof_enabled:0
aof_rewrite_in_progress:0
aof_rewrite_scheduled:0
aof_last_rewrite_time_sec:-1
aof_current_rewrite_time_sec:-1
aof_last_bgrewrite_status:ok
aof_last_write_status:ok

# Stats
total_connections_received:12345
total_commands_processed:67890
instantaneous_ops_per_sec:123
total_net_input_bytes:123456789
total_net_output_bytes:987654321
instantaneous_input_kbps:1.23
instantaneous_output_kbps:9.87
rejected_connections:0
sync_full:0
sync_partial_ok:0
sync_partial_err:0
expired_keys:123
evicted_keys:0
keyspace_hits:12345
keyspace_misses:6789
pubsub_channels:0
pubsub_patterns:0
latest_fork_usec:1234
migrate_cached_sockets:0

# Replication
role:master
connected_slaves:1
slave0:ip=127.0.0.1,port=6380,state=online,offset=1234567,lag=0
master_repl_offset:1234567
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:1234567
repl_backlog_histlen:1048576

# CPU
used_cpu_sys:123.45
used_cpu_user:234.56
used_cpu_sys_children:0.00
used_cpu_user_children:0.00

# Cluster
cluster_enabled:0

# Keyspace
db0:keys=123,expires=0,avg_ttl=0
```

### 示例：获取特定部分的信息

如果你只对某个特定部分的信息感兴趣，可以通过指定 `section` 参数来获取。例如，获取内存使用情况：

```bash
127.0.0.1:6379> INFO memory
```

输出示例：

```bash
# Memory
used_memory:1234567
used_memory_human:1.18M
used_memory_rss:2345678
used_memory_rss_human:2.24M
used_memory_peak:3456789
used_memory_peak_human:3.30M
used_memory_lua:37888
mem_fragmentation_ratio:1.90
mem_allocator:jemalloc-5.1.0
```

## INFO 命令的实际应用

### 监控 Redis 服务器状态

通过定期执行 `INFO` 命令，管理员可以监控 Redis 服务器的状态，例如内存使用情况、客户端连接数、命令处理速度等。这些数据可以帮助管理员及时发现潜在的性能问题，并采取相应的措施。

### 自动化监控工具

许多自动化监控工具（如 Prometheus、Grafana）都支持通过 `INFO` 命令获取 Redis 的监控数据。这些工具可以将 `INFO` 命令的输出解析为可视化图表，帮助管理员更直观地了解 Redis 服务器的运行状况。

### 故障排查

当 Redis 服务器出现性能问题或故障时，`INFO` 命令可以提供关键的信息，帮助管理员快速定位问题。例如，通过查看 `used_memory` 和 `used_memory_peak`，可以判断是否存在内存泄漏问题；通过查看 `connected_clients`，可以判断是否存在客户端连接过多的问题。

## 总结

`INFO` 命令是 Redis 提供的一个强大的工具，用于获取服务器的各种统计信息和状态数据。通过 `INFO` 命令，管理员可以有效地监控和管理 Redis 服务器，确保其稳定运行。本文介绍了 `INFO` 命令的基本用法，并通过实际案例展示了其在实际中的应用。

## 附加资源

- [Redis 官方文档](https://redis.io/commands/info)
- [Redis 监控与性能优化指南](https://redis.io/topics/monitoring)

## 练习

1. 使用 `INFO` 命令获取 Redis 服务器的内存使用情况，并解释 `used_memory` 和 `used_memory_peak` 的含义。
2. 编写一个脚本，定期执行 `INFO` 命令并将结果保存到日志文件中，以便后续分析。
3. 使用自动化监控工具（如 Prometheus）配置 Redis 监控，并尝试通过 `INFO` 命令获取的数据生成可视化图表。