---
title: Redis 集合
description: "了解Redis集合数据类型的基本概念、操作及其实际应用场景。本文适合初学者，包含代码示例和实际案例。"
---

## 什么是Redis集合？

Redis集合（Set）是一种无序且唯一的数据结构，它存储不重复的字符串元素。集合的主要特点是：
- **无序性**：集合中的元素没有固定的顺序。
- **唯一性**：集合中的元素不允许重复。

集合非常适合用于存储需要去重的数据，例如用户标签、好友列表等。

---

## Redis 集合的基本操作

### 1. 添加元素
使用 `SADD` 命令向集合中添加一个或多个元素。如果元素已存在，则不会重复添加。

```bash
SADD myset "apple"
SADD myset "banana" "cherry"
```

**输出：**
```bash
(integer) 1  # 表示成功添加了1个新元素
```

### 2. 获取集合中的所有元素
使用 `SMEMBERS` 命令获取集合中的所有元素。

```bash
SMEMBERS myset
```

**输出：**
```bash
1) "apple"
2) "banana"
3) "cherry"
```

### 3. 检查元素是否存在
使用 `SISMEMBER` 命令检查某个元素是否存在于集合中。

```bash
SISMEMBER myset "banana"
```

**输出：**
```bash
(integer) 1  # 表示元素存在
```

### 4. 删除元素
使用 `SREM` 命令从集合中删除一个或多个元素。

```bash
SREM myset "banana"
```

**输出：**
```bash
(integer) 1  # 表示成功删除了1个元素
```

### 5. 获取集合的大小
使用 `SCARD` 命令获取集合中元素的数量。

```bash
SCARD myset
```

**输出：**
```bash
(integer) 2  # 表示集合中有2个元素
```

---

## 集合的高级操作

### 1. 集合的交集
使用 `SINTER` 命令获取多个集合的交集。

```bash
SADD set1 "apple" "banana" "cherry"
SADD set2 "banana" "cherry" "date"
SINTER set1 set2
```

**输出：**
```bash
1) "banana"
2) "cherry"
```

### 2. 集合的并集
使用 `SUNION` 命令获取多个集合的并集。

```bash
SUNION set1 set2
```

**输出：**
```bash
1) "apple"
2) "banana"
3) "cherry"
4) "date"
```

### 3. 集合的差集
使用 `SDIFF` 命令获取多个集合的差集（即第一个集合中存在，但其他集合中不存在的元素）。

```bash
SDIFF set1 set2
```

**输出：**
```bash
1) "apple"
```

---

## 实际应用场景

### 场景1：用户标签系统
假设你正在开发一个社交平台，需要为每个用户存储其兴趣标签。使用Redis集合可以轻松实现这一功能。

```bash
# 为用户1添加标签
SADD user:1:tags "programming" "music" "travel"

# 为用户2添加标签
SADD user:2:tags "music" "photography"

# 获取用户1的标签
SMEMBERS user:1:tags
```

**输出：**
```bash
1) "programming"
2) "music"
3) "travel"
```

### 场景2：共同好友
假设你需要计算两个用户的共同好友列表，可以使用集合的交集操作。

```bash
# 用户1的好友列表
SADD user:1:friends "user2" "user3" "user4"

# 用户2的好友列表
SADD user:2:friends "user3" "user4" "user5"

# 获取共同好友
SINTER user:1:friends user:2:friends
```

**输出：**
```bash
1) "user3"
2) "user4"
```

---

## 总结

Redis集合是一种强大的数据结构，适用于存储无序且唯一的数据。通过本文，你学习了集合的基本操作（如添加、删除、检查元素）以及高级操作（如交集、并集、差集）。我们还通过实际案例展示了集合在用户标签系统和共同好友计算中的应用。

:::tip 提示
如果你想进一步练习，可以尝试以下任务：
1. 创建一个集合，存储你喜欢的电影名称。
2. 使用集合操作找出你和朋友都喜欢的电影。
:::

---

## 附加资源

- [Redis官方文档 - 集合](https://redis.io/docs/data-types/sets/)
- [Redis命令参考](https://redis.io/commands/)