---
title: Seata 安装部署
description: 本教程将详细介绍如何安装和部署Seata，一个开源的分布式事务解决方案，适合初学者快速上手。
---

# Seata 安装部署

## 介绍

Seata（Simple Extensible Autonomous Transaction Architecture）是一个开源的分布式事务解决方案，旨在解决微服务架构中的事务一致性问题。Seata提供了AT（自动补偿事务）、TCC（Try-Confirm-Cancel）、Saga等多种事务模式，适用于不同的业务场景。

在本教程中，我们将逐步讲解如何安装和部署Seata，并通过一个简单的示例展示其基本用法。

## 安装Seata

### 1. 下载Seata

首先，你需要从Seata的官方GitHub仓库下载最新版本的Seata。你可以通过以下命令下载：

```bash
wget https://github.com/seata/seata/releases/download/v1.5.0/seata-server-1.5.0.tar.gz
```

### 2. 解压Seata

下载完成后，解压Seata到指定目录：

```bash
tar -xzf seata-server-1.5.0.tar.gz -C /opt/seata
```

### 3. 配置Seata

Seata的配置文件位于`/opt/seata/conf`目录下。你需要根据你的环境配置`file.conf`和`registry.conf`文件。

#### 配置`file.conf`

`file.conf`文件用于配置Seata的事务存储模式。默认情况下，Seata使用文件存储模式。你可以根据需要更改为数据库存储模式。

```ini
store {
  mode = "db"
  db {
    datasource = "druid"
    db-type = "mysql"
    url = "jdbc:mysql://127.0.0.1:3306/seata"
    user = "root"
    password = "password"
  }
}
```

#### 配置`registry.conf`

`registry.conf`文件用于配置Seata的注册中心。默认情况下，Seata使用文件注册中心。你可以根据需要更改为Nacos、Eureka等注册中心。

```ini
registry {
  type = "nacos"
  nacos {
    serverAddr = "127.0.0.1:8848"
    namespace = ""
    cluster = "default"
  }
}
```

### 4. 启动Seata

配置完成后，你可以通过以下命令启动Seata服务器：

```bash
cd /opt/seata/bin
sh seata-server.sh
```

## 示例：使用Seata进行分布式事务管理

### 1. 创建数据库表

首先，我们需要在数据库中创建两张表：`account`和`order`。

```sql
CREATE TABLE account (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(255) NOT NULL,
  balance DECIMAL(10, 2) NOT NULL
);

CREATE TABLE order (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(255) NOT NULL,
  amount DECIMAL(10, 2) NOT NULL
);
```

### 2. 编写业务代码

接下来，我们编写一个简单的业务逻辑，模拟用户下单并扣减账户余额的操作。

```java
@GlobalTransactional
public void placeOrder(String userId, BigDecimal amount) {
    // 扣减账户余额
    accountService.decrease(userId, amount);
    // 创建订单
    orderService.create(userId, amount);
}
```

### 3. 配置Seata客户端

在业务代码中，我们需要配置Seata客户端以连接到Seata服务器。

```properties
seata.tx-service-group=my_test_tx_group
seata.service.vgroup-mapping.my_test_tx_group=default
seata.service.grouplist.default=127.0.0.1:8091
```

### 4. 运行示例

运行示例代码，观察Seata如何管理分布式事务。如果事务成功，账户余额将被扣减，订单将被创建；如果事务失败，所有操作将被回滚。

## 总结

通过本教程，你已经学会了如何安装和部署Seata，并通过一个简单的示例了解了Seata的基本用法。Seata是一个强大的分布式事务解决方案，能够帮助你在微服务架构中实现事务一致性。

## 附加资源

- [Seata官方文档](https://seata.io/zh-cn/docs/overview/what-is-seata.html)
- [Seata GitHub仓库](https://github.com/seata/seata)

## 练习

1. 尝试将Seata的存储模式更改为数据库模式，并配置MySQL作为存储后端。
2. 修改示例代码，使用TCC模式实现分布式事务管理。
3. 探索Seata的其他事务模式，如Saga模式，并尝试在实际项目中应用。
