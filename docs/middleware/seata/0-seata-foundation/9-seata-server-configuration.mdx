---
title: Seata 服务端配置
description: 本文详细介绍了如何配置Seata服务端，帮助初学者快速上手分布式事务管理工具Seata。
---

# Seata 服务端配置

## 介绍

Seata（Simple Extensible Autonomous Transaction Architecture）是一款开源的分布式事务解决方案，旨在解决微服务架构下的分布式事务问题。Seata服务端是Seata的核心组件之一，负责协调和管理分布式事务的全局事务状态。本文将详细介绍如何配置Seata服务端，帮助初学者快速上手。

## Seata 服务端的基本概念

在Seata中，服务端通常被称为**Transaction Coordinator（TC）**，它负责协调分布式事务的提交和回滚。TC与**Transaction Manager（TM）**和**Resource Manager（RM）**协同工作，确保事务的一致性。

## 配置步骤

### 1. 下载Seata服务端

首先，你需要从Seata的[官方GitHub仓库](https://github.com/seata/seata/releases)下载最新版本的Seata服务端。下载完成后，解压文件到你的工作目录。

### 2. 配置`registry.conf`

Seata服务端的配置文件位于`conf`目录下，名为`registry.conf`。这个文件用于配置服务端的注册中心和配置中心。

```plaintext
registry {
  type = "file"
  file {
    name = "file.conf"
  }
}

config {
  type = "file"
  file {
    name = "file.conf"
  }
}
```

在这个配置中，`registry`部分指定了注册中心的类型为`file`，即使用本地文件作为注册中心。`config`部分指定了配置中心的类型为`file`，即使用本地文件作为配置中心。

### 3. 配置`file.conf`

`file.conf`文件是Seata服务端的主要配置文件，包含了服务端的详细配置信息。

```plaintext
transport {
  type = "TCP"
  server = "NIO"
  heartbeat = true
}

service {
  vgroupMapping.my_test_tx_group = "default"
  default.grouplist = "127.0.0.1:8091"
  enableDegrade = false
  disableGlobalTransaction = false
}

store {
  mode = "file"
  file {
    dir = "sessionStore"
  }
}
```

- `transport`部分配置了网络传输相关的参数，如传输类型、服务器类型和心跳检测。
- `service`部分配置了事务组映射和默认的事务组列表。
- `store`部分配置了事务日志的存储模式，这里使用了文件存储。

### 4. 启动Seata服务端

配置完成后，你可以通过以下命令启动Seata服务端：

```bash
sh bin/seata-server.sh
```

启动后，Seata服务端将在默认端口`8091`上监听来自客户端的请求。

## 实际案例

假设你有一个微服务架构的电商系统，其中包含订单服务、库存服务和支付服务。当用户下单时，这三个服务需要协同工作，确保订单的创建、库存的扣减和支付的完成是一个原子操作。

通过配置Seata服务端，你可以在订单服务中开启一个全局事务，协调库存服务和支付服务的事务操作。如果任何一个服务操作失败，Seata服务端将回滚整个事务，确保数据的一致性。

## 总结

通过本文的介绍，你应该已经掌握了如何配置Seata服务端的基本步骤。Seata服务端是分布式事务管理的核心组件，正确配置它对于确保微服务架构下的事务一致性至关重要。

## 附加资源

- [Seata官方文档](https://seata.io/zh-cn/docs/overview/what-is-seata.html)
- [Seata GitHub仓库](https://github.com/seata/seata)

## 练习

1. 尝试在本地环境中配置并启动Seata服务端。
2. 修改`file.conf`中的配置，将事务日志存储模式改为数据库存储。
3. 在微服务项目中集成Seata客户端，并测试分布式事务的功能。

通过以上练习，你将更深入地理解Seata服务端的配置和使用。