---
title: Eureka 多态
description: 了解面向对象编程中的多态概念，掌握如何通过多态实现代码的灵活性和可扩展性。
---

# Eureka 多态

多态（Polymorphism）是面向对象编程（OOP）中的一个核心概念，它允许不同的对象对同一消息做出不同的响应。简单来说，多态意味着“一个接口，多种实现”。通过多态，我们可以编写更加灵活和可扩展的代码。

## 什么是多态？

多态是面向对象编程的三大特性之一（另外两个是封装和继承）。它允许我们使用父类的引用来调用子类的方法，从而实现代码的复用和扩展。多态的核心思想是：**同一操作作用于不同的对象，可以产生不同的行为**。

### 多态的类型

多态主要分为两种类型：

1. **编译时多态（静态多态）**：通过方法重载（Overloading）实现。在编译时，编译器根据方法的参数类型和数量来决定调用哪个方法。
2. **运行时多态（动态多态）**：通过方法重写（Overriding）实现。在运行时，JVM根据对象的实际类型来决定调用哪个方法。

## 多态的实现

### 方法重载（Overloading）

方法重载是指在同一个类中定义多个同名方法，但这些方法的参数列表不同（参数类型、参数数量或参数顺序不同）。编译器根据调用时传递的参数来决定调用哪个方法。

```java
class Calculator {
    // 方法重载示例
    public int add(int a, int b) {
        return a + b;
    }

    public double add(double a, double b) {
        return a + b;
    }
}

public class Main {
    public static void main(String[] args) {
        Calculator calc = new Calculator();
        System.out.println(calc.add(2, 3));       // 输出: 5
        System.out.println(calc.add(2.5, 3.5));   // 输出: 6.0
    }
}
```

在上面的例子中，`Calculator` 类中有两个 `add` 方法，一个用于整数相加，另一个用于浮点数相加。编译器根据传递的参数类型来决定调用哪个方法。

### 方法重写（Overriding）

方法重写是指子类重新定义父类中的方法。子类的方法必须与父类的方法具有相同的名称、参数列表和返回类型。在运行时，JVM根据对象的实际类型来决定调用哪个方法。

```java
class Animal {
    public void makeSound() {
        System.out.println("Animal is making a sound");
    }
}

class Dog extends Animal {
    @Override
    public void makeSound() {
        System.out.println("Dog is barking");
    }
}

class Cat extends Animal {
    @Override
    public void makeSound() {
        System.out.println("Cat is meowing");
    }
}

public class Main {
    public static void main(String[] args) {
        Animal myAnimal = new Animal();  // Animal 对象
        Animal myDog = new Dog();        // Dog 对象
        Animal myCat = new Cat();        // Cat 对象

        myAnimal.makeSound();  // 输出: Animal is making a sound
        myDog.makeSound();     // 输出: Dog is barking
        myCat.makeSound();     // 输出: Cat is meowing
    }
}
```

在这个例子中，`Dog` 和 `Cat` 类都重写了 `Animal` 类的 `makeSound` 方法。尽管 `myDog` 和 `myCat` 的引用类型是 `Animal`，但在运行时，JVM会根据对象的实际类型调用相应的方法。

## 多态的实际应用

多态在实际开发中有广泛的应用，尤其是在设计模式和框架中。以下是一个简单的实际应用场景：

### 场景：支付系统

假设我们正在开发一个支付系统，支持多种支付方式（如信用卡、支付宝、微信支付）。我们可以使用多态来实现这个系统。

```java
interface Payment {
    void pay(double amount);
}

class CreditCardPayment implements Payment {
    @Override
    public void pay(double amount) {
        System.out.println("Paid " + amount + " via Credit Card");
    }
}

class AlipayPayment implements Payment {
    @Override
    public void pay(double amount) {
        System.out.println("Paid " + amount + " via Alipay");
    }
}

class WechatPayment implements Payment {
    @Override
    public void pay(double amount) {
        System.out.println("Paid " + amount + " via Wechat");
    }
}

public class PaymentSystem {
    public static void main(String[] args) {
        Payment payment = new CreditCardPayment();
        payment.pay(100.0);  // 输出: Paid 100.0 via Credit Card

        payment = new AlipayPayment();
        payment.pay(200.0);  // 输出: Paid 200.0 via Alipay

        payment = new WechatPayment();
        payment.pay(300.0);  // 输出: Paid 300.0 via Wechat
    }
}
```

在这个例子中，`Payment` 接口定义了 `pay` 方法，不同的支付方式实现了这个接口。通过多态，我们可以在运行时动态地选择支付方式，而不需要修改支付系统的核心逻辑。

## 总结

多态是面向对象编程中非常重要的概念，它允许我们编写更加灵活和可扩展的代码。通过方法重载和方法重写，我们可以实现编译时多态和运行时多态。多态在实际开发中有广泛的应用，尤其是在设计模式和框架中。

:::tip 提示
多态的核心思想是“一个接口，多种实现”。通过多态，我们可以减少代码的重复，提高代码的可维护性和可扩展性。
:::

## 附加资源与练习

- **练习**：尝试创建一个简单的图形绘制系统，使用多态来实现不同图形（如圆形、矩形、三角形）的绘制方法。
- **资源**：阅读《Head First 设计模式》一书，了解更多关于多态和设计模式的内容。

通过不断练习和探索，你将能够更好地理解和应用多态这一强大的编程概念。