---
title: Eureka 第一个程序
description: 本文将通过一个简单的示例，带领初学者了解如何使用Eureka构建第一个微服务程序，并解释其核心概念。
---

# Eureka 第一个程序

Eureka是Netflix开源的服务发现组件，主要用于微服务架构中服务的注册与发现。它可以帮助我们轻松管理服务实例，并在服务之间实现动态通信。本文将带领你编写第一个Eureka程序，并逐步讲解其核心概念。

---

## 什么是Eureka？

Eureka是一个基于REST的服务，主要用于定位运行在AWS域中的中间层服务，以实现负载均衡和故障转移。它由两个主要组件组成：

1. **Eureka Server**：服务注册中心，负责管理所有注册的服务实例。
2. **Eureka Client**：服务提供者或消费者，负责向Eureka Server注册自己，并从Server获取其他服务的信息。

通过Eureka，我们可以实现服务之间的动态发现与调用，而无需硬编码服务地址。

---

## 创建第一个Eureka程序

### 1. 环境准备

在开始之前，请确保你已经安装了以下工具：
- JDK 8或更高版本
- Maven或Gradle
- IDE（如IntelliJ IDEA或Eclipse）

### 2. 创建Eureka Server

首先，我们需要创建一个Eureka Server作为服务注册中心。

#### 步骤1：初始化Spring Boot项目

使用[Spring Initializr](https://start.spring.io/)创建一个Spring Boot项目，并添加以下依赖：
- **Spring Web**
- **Eureka Server**

#### 步骤2：配置Eureka Server

在`application.yml`中添加以下配置：

```yaml
server:
  port: 8761

eureka:
  client:
    register-with-eureka: false
    fetch-registry: false
```

- `register-with-eureka: false`：表示该服务不向自己注册。
- `fetch-registry: false`：表示该服务不从自己获取注册表。

#### 步骤3：启用Eureka Server

在主类上添加`@EnableEurekaServer`注解：

```java
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;

@SpringBootApplication
@EnableEurekaServer
public class EurekaServerApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaServerApplication.class, args);
    }
}
```

启动项目后，访问`http://localhost:8761`，你将看到Eureka Server的管理界面。

---

### 3. 创建Eureka Client

接下来，我们创建一个Eureka Client，并将其注册到Eureka Server。

#### 步骤1：初始化Spring Boot项目

同样使用Spring Initializr创建一个新的Spring Boot项目，并添加以下依赖：
- **Spring Web**
- **Eureka Discovery Client**

#### 步骤2：配置Eureka Client

在`application.yml`中添加以下配置：

```yaml
server:
  port: 8080

spring:
  application:
    name: eureka-client

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
```

- `spring.application.name`：指定服务名称。
- `eureka.client.service-url.defaultZone`：指定Eureka Server的地址。

#### 步骤3：启用Eureka Client

在主类上添加`@EnableEurekaClient`注解：

```java
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.cloud.netflix.eureka.EnableEurekaClient;

@SpringBootApplication
@EnableEurekaClient
public class EurekaClientApplication {
    public static void main(String[] args) {
        SpringApplication.run(EurekaClientApplication.class, args);
    }
}
```

启动项目后，访问Eureka Server的管理界面，你将看到`eureka-client`服务已成功注册。

---

## 实际应用场景

假设我们有一个电商系统，其中包含以下服务：
- 用户服务（User Service）
- 订单服务（Order Service）
- 支付服务（Payment Service）

通过Eureka，这些服务可以动态注册和发现彼此。例如，当订单服务需要调用用户服务时，它可以从Eureka Server获取用户服务的地址，而无需硬编码。

---

## 总结

通过本文，你已经学会了如何创建第一个Eureka程序，包括Eureka Server和Eureka Client的搭建与配置。Eureka作为微服务架构中的核心组件，能够帮助我们实现服务的动态发现与调用。

---

## 附加资源与练习

1. **练习**：尝试创建一个包含多个Eureka Client的微服务系统，并观察它们在Eureka Server中的注册情况。
2. **深入学习**：阅读[Eureka官方文档](https://github.com/Netflix/eureka)以了解更多高级功能。
3. **扩展**：结合Spring Cloud的其他组件（如Ribbon、Feign）实现负载均衡和服务调用。

:::