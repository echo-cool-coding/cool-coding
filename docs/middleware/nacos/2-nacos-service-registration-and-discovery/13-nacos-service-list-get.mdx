---
title: Nacos 服务列表获取
description: 学习如何使用Nacos获取服务列表，理解服务注册与发现的核心概念。
---

# Nacos 服务列表获取

在微服务架构中，服务注册与发现是一个关键组件。Nacos 是一个动态服务发现、配置和服务管理平台，能够帮助开发者轻松管理微服务。本文将详细介绍如何使用 Nacos 获取服务列表，并展示其在实际应用中的使用场景。

## 什么是Nacos服务列表获取？

Nacos 服务列表获取是指从 Nacos 服务器中获取已注册的服务实例列表。通过这种方式，客户端可以动态地发现可用的服务实例，从而实现负载均衡和故障转移。

## 如何获取Nacos服务列表

### 1. 引入Nacos客户端依赖

首先，你需要在项目中引入 Nacos 客户端的依赖。以 Maven 项目为例，添加以下依赖：

```xml
<dependency>
    <groupId>com.alibaba.cloud</groupId>
    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>
</dependency>
```

### 2. 配置Nacos服务器地址

在 `application.yml` 或 `application.properties` 中配置 Nacos 服务器的地址：

```yaml
spring:
  cloud:
    nacos:
      discovery:
        server-addr: 127.0.0.1:8848
```

### 3. 获取服务列表

在 Spring Cloud 应用中，你可以通过 `NacosDiscoveryClient` 来获取服务列表。以下是一个简单的示例：

```java
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.cloud.client.discovery.DiscoveryClient;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController
public class ServiceController {

    @Autowired
    private DiscoveryClient discoveryClient;

    @GetMapping("/services")
    public List<String> getServices() {
        return discoveryClient.getServices();
    }
}
```

### 4. 运行并测试

启动你的 Spring Boot 应用，并访问 `/services` 端点，你将看到所有已注册的服务列表。

```bash
curl http://localhost:8080/services
```

输出示例：

```json
["serviceA", "serviceB", "serviceC"]
```

## 实际应用场景

### 场景1：动态负载均衡

在微服务架构中，服务实例可能会动态增加或减少。通过获取服务列表，客户端可以动态选择可用的服务实例，实现负载均衡。

### 场景2：故障转移

当某个服务实例不可用时，客户端可以从服务列表中剔除该实例，并选择其他健康的实例进行请求，从而实现故障转移。

## 总结

通过本文，你学习了如何使用 Nacos 获取服务列表，并理解了其在微服务架构中的重要性。Nacos 提供了强大的服务发现功能，能够帮助开发者轻松管理微服务。

## 附加资源与练习

- **官方文档**: [Nacos 官方文档](https://nacos.io/zh-cn/docs/what-is-nacos.html)
- **练习**: 尝试在你的项目中集成 Nacos，并实现一个简单的服务发现功能。

:::tip
如果你在集成过程中遇到问题，可以参考 Nacos 的官方文档或社区论坛，获取更多帮助。
:::