---
title: Zookeeper 安装前准备
description: 本文详细介绍了在安装Zookeeper之前需要完成的准备工作，包括系统要求、依赖项安装、环境配置等，帮助初学者顺利搭建Zookeeper环境。
---

# Zookeeper 安装前准备

Zookeeper是一个分布式的、开源的协调服务，广泛用于分布式系统中管理配置信息、命名服务、分布式同步和组服务。在安装Zookeeper之前，确保系统满足基本要求并完成必要的准备工作，可以避免后续安装和运行过程中出现的问题。

## 1. 系统要求

在安装Zookeeper之前，首先需要确保系统满足以下最低要求：

- **操作系统**：Zookeeper支持Linux、macOS和Windows操作系统。建议使用Linux或macOS进行开发和测试。
- **Java环境**：Zookeeper是用Java编写的，因此需要安装Java Development Kit (JDK)。Zookeeper 3.5.x及以上版本需要JDK 8或更高版本。
- **内存**：至少1GB的可用内存，建议2GB或更多。
- **磁盘空间**：至少100MB的可用磁盘空间，用于存储Zookeeper的数据和日志。

:::tip
建议在生产环境中使用Linux操作系统，并确保系统资源充足。
:::

## 2. 安装Java

Zookeeper依赖于Java环境，因此在安装Zookeeper之前，必须先安装JDK。以下是安装JDK的步骤：

### 2.1 检查Java是否已安装

在终端或命令提示符中运行以下命令，检查是否已安装Java：

```bash
java -version
```

如果已安装Java，您将看到类似以下的输出：

```bash
openjdk version "11.0.11" 2021-04-20
OpenJDK Runtime Environment (build 11.0.11+9-Ubuntu-0ubuntu2.20.04)
OpenJDK 64-Bit Server VM (build 11.0.11+9-Ubuntu-0ubuntu2.20.04, mixed mode, sharing)
```

如果未安装Java，您将看到类似“command not found”的错误消息。

### 2.2 安装JDK

如果未安装Java，请根据您的操作系统选择合适的安装方法：

- **Ubuntu/Debian**：

  ```bash
  sudo apt update
  sudo apt install openjdk-11-jdk
  ```

- **CentOS/RHEL**：

  ```bash
  sudo yum install java-11-openjdk-devel
  ```

- **macOS**：

  使用Homebrew安装：

  ```bash
  brew install openjdk@11
  ```

- **Windows**：

  从[Oracle官网](https://www.oracle.com/java/technologies/javase-downloads.html)下载并安装JDK。

### 2.3 配置JAVA_HOME环境变量

安装完成后，需要配置`JAVA_HOME`环境变量。以下是配置方法：

- **Linux/macOS**：

  编辑`~/.bashrc`或`~/.zshrc`文件，添加以下内容：

  ```bash
  export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64  # 路径可能因系统而异
  export PATH=$JAVA_HOME/bin:$PATH
  ```

  然后运行以下命令使配置生效：

  ```bash
  source ~/.bashrc
  ```

- **Windows**：

  右键点击“此电脑” -> “属性” -> “高级系统设置” -> “环境变量”，在“系统变量”中添加`JAVA_HOME`变量，值为JDK的安装路径，例如：

  ```
  C:\Program Files\Java\jdk-11.0.11
  ```

  然后在`Path`变量中添加`%JAVA_HOME%\bin`。

## 3. 下载Zookeeper

在安装Zookeeper之前，需要从官方网站下载Zookeeper的二进制包。以下是下载步骤：

1. 访问[Zookeeper官网](https://zookeeper.apache.org/releases.html)。
2. 选择最新的稳定版本（例如`3.7.0`）。
3. 下载二进制包（例如`apache-zookeeper-3.7.0-bin.tar.gz`）。

:::caution
请确保下载的是`-bin`包，而不是`-src`包。`-bin`包包含预编译的二进制文件，而`-src`包包含源代码，需要自行编译。
:::

## 4. 解压Zookeeper

下载完成后，将Zookeeper包解压到目标目录。以下是解压步骤：

```bash
tar -xzf apache-zookeeper-3.7.0-bin.tar.gz
```

解压后，您将看到一个名为`apache-zookeeper-3.7.0-bin`的目录，其中包含Zookeeper的所有文件。

## 5. 配置Zookeeper

在启动Zookeeper之前，需要进行一些基本配置。以下是配置步骤：

### 5.1 创建数据目录

Zookeeper需要一个目录来存储其数据文件和日志文件。您可以在任意位置创建该目录，例如：

```bash
mkdir -p /data/zookeeper
```

### 5.2 配置`zoo.cfg`

Zookeeper的配置文件名为`zoo.cfg`，位于`conf`目录下。您可以从模板文件`zoo_sample.cfg`复制并重命名：

```bash
cd apache-zookeeper-3.7.0-bin/conf
cp zoo_sample.cfg zoo.cfg
```

然后编辑`zoo.cfg`文件，设置数据目录：

```ini
dataDir=/data/zookeeper
```

:::note
`zoo.cfg`文件中还可以配置其他参数，例如端口号、日志目录等。初学者可以暂时使用默认配置。
:::

## 6. 启动Zookeeper

完成上述准备工作后，您可以启动Zookeeper。以下是启动步骤：

```bash
cd apache-zookeeper-3.7.0-bin/bin
./zkServer.sh start
```

如果一切正常，您将看到类似以下的输出：

```bash
ZooKeeper JMX enabled by default
Using config: /path/to/apache-zookeeper-3.7.0-bin/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
```

## 7. 验证安装

启动Zookeeper后，您可以通过以下命令验证其是否正常运行：

```bash
./zkServer.sh status
```

如果Zookeeper正常运行，您将看到类似以下的输出：

```bash
ZooKeeper JMX enabled by default
Using config: /path/to/apache-zookeeper-3.7.0-bin/bin/../conf/zoo.cfg
Mode: standalone
```

## 8. 总结

在安装Zookeeper之前，确保系统满足基本要求，并完成Java环境、Zookeeper下载、解压和配置等准备工作，可以避免后续安装和运行过程中出现的问题。通过本文的步骤，您已经成功完成了Zookeeper的安装前准备。

## 9. 附加资源

- [Zookeeper官方文档](https://zookeeper.apache.org/doc/current/)
- [Java安装指南](https://docs.oracle.com/en/java/javase/11/install/overview-jdk-installation.html)

## 10. 练习

1. 在您的本地机器上安装JDK，并验证`JAVA_HOME`环境变量是否正确配置。
2. 下载并解压Zookeeper，尝试启动并验证其状态。
3. 修改`zoo.cfg`文件中的`dataDir`参数，观察Zookeeper的行为变化。