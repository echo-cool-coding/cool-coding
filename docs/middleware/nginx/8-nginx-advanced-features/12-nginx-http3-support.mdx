---
title: Nginx HTTP/3 支持
description: 了解如何在 Nginx 中启用和配置 HTTP/3 支持，探索其优势和应用场景。
---

# Nginx HTTP/3 支持

HTTP/3 是 HTTP 协议的第三个主要版本，基于 QUIC 协议，旨在提高网络性能、减少延迟并增强安全性。Nginx 从 1.25.0 版本开始支持 HTTP/3，为开发者提供了更高效的网络传输方案。本文将详细介绍如何在 Nginx 中启用和配置 HTTP/3，并探讨其实际应用场景。

## 什么是 HTTP/3？

HTTP/3 是 HTTP 协议的最新版本，基于 QUIC 协议（Quick UDP Internet Connections）。与 HTTP/2 相比，HTTP/3 的主要改进包括：

- **基于 UDP**：HTTP/3 使用 UDP 而不是 TCP，避免了 TCP 的队头阻塞问题。
- **内置加密**：QUIC 协议默认使用 TLS 1.3，提供更强的安全性。
- **连接迁移**：QUIC 支持连接迁移，即使网络切换（如从 Wi-Fi 切换到移动数据），连接也不会中断。

这些特性使得 HTTP/3 在性能上优于 HTTP/2，特别是在高延迟或不稳定的网络环境中。

---

## 在 Nginx 中启用 HTTP/3

要在 Nginx 中启用 HTTP/3，您需要满足以下条件：

1. **Nginx 版本**：确保使用 Nginx 1.25.0 或更高版本。
2. **OpenSSL 版本**：使用 OpenSSL 1.1.1 或更高版本以支持 QUIC。
3. **编译选项**：在编译 Nginx 时，启用 `--with-http_v3_module` 模块。

### 步骤 1：编译 Nginx 以支持 HTTP/3

如果您从源代码编译 Nginx，可以使用以下命令启用 HTTP/3 支持：

```bash
./configure --with-http_v3_module --with-openssl=/path/to/openssl
make
sudo make install
```

### 步骤 2：配置 Nginx 以启用 HTTP/3

在 Nginx 配置文件中，添加以下内容以启用 HTTP/3：

```nginx
http {
    server {
        listen 443 ssl;
        listen 443 quic reuseport;  # 启用 QUIC

        ssl_certificate /path/to/certificate.crt;
        ssl_certificate_key /path/to/private.key;

        # 启用 HTTP/3
        add_header Alt-Svc 'h3=":443"; ma=86400';

        location / {
            root /var/www/html;
            index index.html;
        }
    }
}
```

### 步骤 3：验证 HTTP/3 是否生效

使用 `curl` 或浏览器开发者工具检查 HTTP/3 是否正常工作。例如，使用 `curl` 命令：

```bash
curl -I --http3 https://yourdomain.com
```

如果返回的响应头中包含 `alt-svc`，则说明 HTTP/3 已成功启用。

---

## HTTP/3 的实际应用场景

HTTP/3 在以下场景中表现尤为出色：

1. **高延迟网络**：在移动网络或卫星通信中，HTTP/3 的 UDP 基础减少了延迟。
2. **频繁切换网络**：对于移动设备用户，QUIC 的连接迁移功能确保了无缝的网络切换。
3. **实时应用**：如视频流、在线游戏等对延迟敏感的应用，HTTP/3 提供了更流畅的体验。

---

## 总结

HTTP/3 是未来网络协议的重要发展方向，Nginx 的支持为开发者提供了更高效的网络传输方案。通过本文，您已经学会了如何在 Nginx 中启用和配置 HTTP/3，并了解了其优势和应用场景。

:::tip 提示
如果您想进一步优化 HTTP/3 性能，可以尝试调整 QUIC 参数或使用 CDN 服务来加速内容分发。
:::

---

## 附加资源

- [Nginx 官方文档](https://nginx.org/en/docs/)
- [HTTP/3 协议规范](https://datatracker.ietf.org/doc/html/rfc9114)
- [QUIC 协议介绍](https://www.chromium.org/quic/)

---

## 练习

1. 在本地环境中编译并配置 Nginx 以支持 HTTP/3。
2. 使用 `curl` 或浏览器开发者工具验证 HTTP/3 是否生效。
3. 尝试在高延迟网络环境中测试 HTTP/3 的性能，并与 HTTP/2 进行对比。
