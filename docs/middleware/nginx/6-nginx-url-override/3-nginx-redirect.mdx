---
title: Nginx 重定向
description: "了解Nginx中的URL重定向，掌握如何配置重定向规则以实现URL的跳转和优化。"
---

# Nginx 重定向

在Web服务器中，URL重定向是一种常见的技术，用于将一个URL地址重定向到另一个URL地址。Nginx作为一款高性能的Web服务器，提供了强大的URL重定向功能。本文将详细介绍Nginx中的重定向概念、配置方法以及实际应用场景。

## 什么是Nginx重定向？

Nginx重定向是指将用户请求的URL地址自动跳转到另一个URL地址的过程。这种跳转可以是临时的（HTTP状态码302）或永久的（HTTP状态码301）。重定向通常用于以下场景：

- 网站域名变更
- URL结构调整
- 旧页面迁移到新页面
- 强制使用HTTPS

## 基本语法

在Nginx中，重定向可以通过`rewrite`指令或`return`指令来实现。以下是两种指令的基本语法：

### 使用`rewrite`指令

```nginx
rewrite ^/old-url$ /new-url permanent;
```

- `^/old-url$`：匹配的URL路径。
- `/new-url`：重定向的目标URL。
- `permanent`：表示永久重定向（HTTP状态码301）。如果使用`redirect`，则表示临时重定向（HTTP状态码302）。

### 使用`return`指令

```nginx
return 301 /new-url;
```

- `301`：HTTP状态码，表示永久重定向。
- `/new-url`：重定向的目标URL。

## 实际案例

### 案例1：域名重定向

假设你有一个旧域名`old-example.com`，现在你想将所有流量重定向到新域名`new-example.com`。可以使用以下配置：

```nginx
server {
    listen 80;
    server_name old-example.com;
    return 301 https://new-example.com$request_uri;
}
```

- `$request_uri`：保留原始请求的URI路径。

### 案例2：URL结构调整

假设你的网站URL结构发生了变化，旧的URL路径为`/blog/old-post`，现在你想将其重定向到新的URL路径`/articles/new-post`。可以使用以下配置：

```nginx
rewrite ^/blog/old-post$ /articles/new-post permanent;
```

### 案例3：强制使用HTTPS

为了确保用户通过HTTPS访问你的网站，你可以将所有HTTP请求重定向到HTTPS：

```nginx
server {
    listen 80;
    server_name example.com;
    return 301 https://$host$request_uri;
}
```

- `$host`：保留原始请求的主机名。

## 总结

Nginx重定向是一种强大的工具，可以帮助你管理URL的跳转和优化。通过`rewrite`和`return`指令，你可以轻松实现各种重定向需求。无论是域名变更、URL结构调整，还是强制使用HTTPS，Nginx都能提供灵活的解决方案。

## 附加资源

- [Nginx官方文档](https://nginx.org/en/docs/)
- [HTTP状态码](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status)

## 练习

1. 配置Nginx，将所有`http://example.com`的请求重定向到`https://example.com`。
2. 将`/old-page`重定向到`/new-page`，并确保使用永久重定向。
3. 尝试使用`rewrite`指令实现一个复杂的URL重定向规则。

通过以上练习，你将更深入地理解Nginx重定向的配置和应用。