---
title: 表单重置与默认值
description: 学习如何在 React 中处理表单的重置与默认值，掌握如何初始化表单数据并在用户提交后重置表单。
---

# 表单重置与默认值

在 React 中，表单处理是一个常见的任务。无论是用户注册、登录，还是填写调查问卷，表单都是与用户交互的重要方式。为了提供更好的用户体验，我们通常需要为表单设置默认值，并在用户提交表单后重置表单。本文将详细介绍如何在 React 中实现表单的重置与默认值设置。

## 什么是表单重置与默认值？

**表单重置**是指在用户提交表单后，将表单的所有输入字段恢复到初始状态。这通常是为了让用户可以重新填写表单，或者清除之前的输入。

**默认值**是指在表单首次渲染时，为输入字段预先设置的值。这些值可以是静态的，也可以是从外部数据源（如 API 或本地存储）动态获取的。

## 如何在 React 中设置表单默认值

在 React 中，我们可以通过 `defaultValue` 属性为表单输入字段设置默认值。`defaultValue` 是一个非受控组件的属性，它只在组件首次渲染时生效。

```jsx
import React from 'react';

function MyForm() {
  return (
    <form>
      <label>
        用户名:
        <input type="text" name="username" defaultValue="JohnDoe" />
      </label>
      <br />
      <label>
        邮箱:
        <input type="email" name="email" defaultValue="john@example.com" />
      </label>
      <br />
      <button type="submit">提交</button>
    </form>
  );
}

export default MyForm;
```

在这个例子中，`username` 和 `email` 字段分别被设置为 `"JohnDoe"` 和 `"john@example.com"`。这些值将在表单首次渲染时显示。

:::note
`defaultValue` 只适用于非受控组件。如果你使用的是受控组件（即通过 `value` 属性控制输入值），则需要通过 `state` 来设置默认值。
:::

## 如何在 React 中重置表单

在 React 中，重置表单通常是通过调用表单元素的 `reset()` 方法来实现的。我们可以在表单提交后调用这个方法，以清除所有输入字段的值。

```jsx
import React from 'react';

function MyForm() {
  const handleSubmit = (event) => {
    event.preventDefault();
    // 处理表单提交逻辑
    console.log('表单已提交');
    // 重置表单
    event.target.reset();
  };

  return (
    <form onSubmit={handleSubmit}>
      <label>
        用户名:
        <input type="text" name="username" defaultValue="JohnDoe" />
      </label>
      <br />
      <label>
        邮箱:
        <input type="email" name="email" defaultValue="john@example.com" />
      </label>
      <br />
      <button type="submit">提交</button>
    </form>
  );
}

export default MyForm;
```

在这个例子中，当用户提交表单时，`handleSubmit` 函数会被调用。在提交逻辑处理完毕后，我们调用 `event.target.reset()` 来重置表单。

:::tip
如果你使用的是受控组件，重置表单时需要手动将 `state` 中的值重置为初始值。
:::

## 实际应用场景

假设我们正在开发一个用户注册表单。用户在填写完表单并提交后，我们希望重置表单以便下一个用户可以继续注册。同时，我们希望为某些字段（如国家/地区）设置默认值。

```jsx
import React, { useState } from 'react';

function RegistrationForm() {
  const [formData, setFormData] = useState({
    username: '',
    email: '',
    country: 'USA', // 默认值为 USA
  });

  const handleChange = (event) => {
    const { name, value } = event.target;
    setFormData({
      ...formData,
      [name]: value,
    });
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    // 处理表单提交逻辑
    console.log('表单已提交', formData);
    // 重置表单
    setFormData({
      username: '',
      email: '',
      country: 'USA',
    });
  };

  return (
    <form onSubmit={handleSubmit}>
      <label>
        用户名:
        <input
          type="text"
          name="username"
          value={formData.username}
          onChange={handleChange}
        />
      </label>
      <br />
      <label>
        邮箱:
        <input
          type="email"
          name="email"
          value={formData.email}
          onChange={handleChange}
        />
      </label>
      <br />
      <label>
        国家/地区:
        <select
          name="country"
          value={formData.country}
          onChange={handleChange}
        >
          <option value="USA">美国</option>
          <option value="UK">英国</option>
          <option value="Canada">加拿大</option>
        </select>
      </label>
      <br />
      <button type="submit">提交</button>
    </form>
  );
}

export default RegistrationForm;
```

在这个例子中，我们使用 `useState` 来管理表单的状态。当用户提交表单后，我们将 `formData` 重置为初始值，从而实现了表单的重置。

## 总结

在 React 中处理表单的重置与默认值是开发表单时的重要技能。通过 `defaultValue` 属性，我们可以轻松地为表单字段设置默认值。而通过调用表单的 `reset()` 方法或手动重置 `state`，我们可以实现表单的重置。

:::caution
在使用受控组件时，务必确保在重置表单时同时重置 `state`，否则表单可能不会按预期工作。
:::

## 附加资源与练习

- [React 官方文档 - 表单](https://reactjs.org/docs/forms.html)
- 练习：尝试创建一个带有多个输入字段的表单，并为每个字段设置不同的默认值。在用户提交表单后，重置表单并显示一条成功消息。

希望本文能帮助你更好地理解如何在 React 中处理表单的重置与默认值。继续练习，你将能够轻松应对各种表单处理场景！