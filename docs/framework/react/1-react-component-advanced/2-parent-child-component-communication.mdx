---
title: 父子组件通信
description: 学习如何在 React 中实现父子组件之间的通信，掌握 props 和回调函数的使用方法。
---

在 React 中，组件是构建用户界面的基本单元。父子组件通信是 React 开发中的一个核心概念，它允许父组件向子组件传递数据，同时子组件也可以通过回调函数将数据传递回父组件。本文将详细介绍父子组件通信的实现方式，并通过实际案例帮助你更好地理解这一概念。

## 什么是父子组件通信？

在 React 中，组件通常以树形结构组织，其中一个组件可以包含其他组件。当一个组件包含另一个组件时，我们称前者为父组件，后者为子组件。父子组件通信是指父组件向子组件传递数据（通常通过 `props`），以及子组件通过回调函数将数据传递回父组件的过程。

### 父组件向子组件传递数据

父组件可以通过 `props` 将数据传递给子组件。`props` 是 React 中用于传递数据的机制，它是一个只读对象，子组件不能直接修改 `props`。

```jsx
// 父组件
function ParentComponent() {
  const message = "Hello from Parent!";
  return <ChildComponent message={message} />;
}

// 子组件
function ChildComponent(props) {
  return <div>{props.message}</div>;
}
```

在这个例子中，父组件 `ParentComponent` 通过 `props` 将 `message` 传递给子组件 `ChildComponent`，子组件接收到 `message` 后将其显示在页面上。

### 子组件向父组件传递数据

子组件可以通过回调函数将数据传递回父组件。父组件将一个函数作为 `props` 传递给子组件，子组件在需要时将数据作为参数传递给该函数。

```jsx
// 父组件
function ParentComponent() {
  const handleData = (data) => {
    console.log("Data from child:", data);
  };

  return <ChildComponent onData={handleData} />;
}

// 子组件
function ChildComponent(props) {
  const sendData = () => {
    props.onData("Hello from Child!");
  };

  return <button onClick={sendData}>Send Data to Parent</button>;
}
```

在这个例子中，父组件 `ParentComponent` 将一个名为 `onData` 的回调函数传递给子组件 `ChildComponent`。当用户点击按钮时，子组件调用 `onData` 函数并将数据传递回父组件。

## 实际案例：计数器应用

让我们通过一个实际的案例来展示父子组件通信的应用场景。我们将创建一个简单的计数器应用，其中父组件负责管理计数器的状态，子组件负责显示计数器和处理用户点击事件。

```jsx
// 父组件
function CounterApp() {
  const [count, setCount] = React.useState(0);

  const increment = () => {
    setCount(count + 1);
  };

  const decrement = () => {
    setCount(count - 1);
  };

  return (
    <div>
      <CounterDisplay count={count} />
      <CounterButtons onIncrement={increment} onDecrement={decrement} />
    </div>
  );
}

// 子组件：显示计数器
function CounterDisplay(props) {
  return <div>Count: {props.count}</div>;
}

// 子组件：按钮组件
function CounterButtons(props) {
  return (
    <div>
      <button onClick={props.onIncrement}>Increment</button>
      <button onClick={props.onDecrement}>Decrement</button>
    </div>
  );
}
```

在这个案例中，父组件 `CounterApp` 管理计数器的状态，并将当前计数值传递给子组件 `CounterDisplay` 进行显示。同时，父组件将 `increment` 和 `decrement` 函数作为 `props` 传递给子组件 `CounterButtons`，子组件通过调用这些函数来更新父组件中的计数器状态。

## 总结

父子组件通信是 React 开发中的一个重要概念，它允许组件之间进行数据传递和交互。通过 `props` 和回调函数，父组件可以向子组件传递数据，子组件也可以将数据传递回父组件。掌握这一概念对于构建复杂的 React 应用至关重要。

:::tip
在实际开发中，父子组件通信是构建可复用组件的基础。通过合理设计组件的 `props` 和回调函数，可以使组件更加灵活和易于维护。
:::

## 附加资源与练习

- **练习**：尝试创建一个表单组件，其中父组件管理表单数据，子组件负责渲染表单字段和处理用户输入。
- **资源**：阅读 [React 官方文档](https://reactjs.org/docs/components-and-props.html) 以深入了解组件和 `props` 的使用方法。

通过不断练习和探索，你将能够熟练运用父子组件通信来构建功能强大的 React 应用。