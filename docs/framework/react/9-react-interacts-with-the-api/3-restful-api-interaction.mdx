---
title: RESTful API 交互
description: 学习如何在 React 中与 RESTful API 进行交互，掌握从发送请求到处理响应的完整流程。
---

# RESTful API 交互

在现代 Web 开发中，前端应用通常需要与后端服务器进行数据交互。RESTful API 是一种常见的接口设计风格，它使用 HTTP 协议的标准方法（如 GET、POST、PUT、DELETE）来实现资源的创建、读取、更新和删除（CRUD）操作。本文将介绍如何在 React 中与 RESTful API 进行交互。

## 什么是 RESTful API？

REST（Representational State Transfer）是一种软件架构风格，它定义了一组约束和原则，用于创建 Web 服务。RESTful API 是基于 REST 原则设计的 API，它使用 HTTP 方法对资源进行操作，并通过 JSON 或 XML 格式传输数据。

RESTful API 的核心特点包括：
- **无状态性**：每个请求都包含处理该请求所需的所有信息，服务器不会存储客户端的状态。
- **资源导向**：API 通过 URL 标识资源，并通过 HTTP 方法对资源进行操作。
- **统一接口**：API 使用标准的 HTTP 方法（GET、POST、PUT、DELETE）来执行操作。

## 在 React 中与 RESTful API 交互

在 React 中，我们通常使用 `fetch` 或 `axios` 等工具来发送 HTTP 请求。以下是一个简单的例子，展示如何使用 `fetch` 从 API 获取数据。

### 1. 使用 `fetch` 发送 GET 请求

```javascript
import React, { useEffect, useState } from 'react';

function App() {
  const [data, setData] = useState(null);

  useEffect(() => {
    fetch('https://jsonplaceholder.typicode.com/posts')
      .then(response => response.json())
      .then(json => setData(json))
      .catch(error => console.error('Error fetching data:', error));
  }, []);

  return (
    <div>
      <h1>Posts</h1>
      {data ? (
        <ul>
          {data.map(post => (
            <li key={post.id}>{post.title}</li>
          ))}
        </ul>
      ) : (
        <p>Loading...</p>
      )}
    </div>
  );
}

export default App;
```

在这个例子中，我们使用 `fetch` 发送一个 GET 请求到 `https://jsonplaceholder.typicode.com/posts`，这是一个提供假数据的 API。请求成功后，我们将返回的 JSON 数据存储在组件的状态中，并在页面上显示。

### 2. 使用 `axios` 发送 POST 请求

`axios` 是一个流行的 HTTP 客户端库，它提供了更简洁的 API 和更好的错误处理。以下是一个使用 `axios` 发送 POST 请求的例子：

```javascript
import React, { useState } from 'react';
import axios from 'axios';

function App() {
  const [title, setTitle] = useState('');
  const [body, setBody] = useState('');
  const [response, setResponse] = useState(null);

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      const res = await axios.post('https://jsonplaceholder.typicode.com/posts', {
        title,
        body,
        userId: 1,
      });
      setResponse(res.data);
    } catch (error) {
      console.error('Error submitting data:', error);
    }
  };

  return (
    <div>
      <h1>Create Post</h1>
      <form onSubmit={handleSubmit}>
        <div>
          <label>Title:</label>
          <input type="text" value={title} onChange={(e) => setTitle(e.target.value)} />
        </div>
        <div>
          <label>Body:</label>
          <textarea value={body} onChange={(e) => setBody(e.target.value)} />
        </div>
        <button type="submit">Submit</button>
      </form>
      {response && (
        <div>
          <h2>Response:</h2>
          <pre>{JSON.stringify(response, null, 2)}</pre>
        </div>
      )}
    </div>
  );
}

export default App;
```

在这个例子中，我们使用 `axios.post` 方法发送一个 POST 请求，将用户输入的数据提交到 API。请求成功后，我们将返回的响应数据存储在状态中并显示在页面上。

## 实际应用场景

RESTful API 在实际开发中有广泛的应用场景，例如：
- **用户认证**：通过 API 发送用户的登录信息并获取认证令牌。
- **数据展示**：从 API 获取数据并在前端页面中展示。
- **表单提交**：将用户输入的数据通过 API 提交到服务器。

以下是一个用户登录的实际案例：

```javascript
import React, { useState } from 'react';
import axios from 'axios';

function Login() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');

  const handleLogin = async (e) => {
    e.preventDefault();
    try {
      const res = await axios.post('https://example.com/api/login', {
        email,
        password,
      });
      localStorage.setItem('token', res.data.token);
      alert('Login successful!');
    } catch (error) {
      setError('Invalid email or password');
    }
  };

  return (
    <div>
      <h1>Login</h1>
      <form onSubmit={handleLogin}>
        <div>
          <label>Email:</label>
          <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} />
        </div>
        <div>
          <label>Password:</label>
          <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} />
        </div>
        {error && <p style={{ color: 'red' }}>{error}</p>}
        <button type="submit">Login</button>
      </form>
    </div>
  );
}

export default Login;
```

在这个例子中，用户输入邮箱和密码后，通过 API 发送登录请求。如果登录成功，服务器会返回一个认证令牌，我们可以将其存储在 `localStorage` 中，以便后续请求使用。

## 总结

在 React 中与 RESTful API 进行交互是现代 Web 开发中的核心技能之一。通过 `fetch` 或 `axios`，我们可以轻松地发送 HTTP 请求并处理响应。本文介绍了如何发送 GET 和 POST 请求，并展示了实际应用场景中的代码示例。

:::tip 提示
在实际开发中，建议使用 `axios` 来处理 HTTP 请求，因为它提供了更简洁的 API 和更好的错误处理机制。
:::

## 附加资源与练习

- **练习**：尝试使用 `PUT` 和 `DELETE` 方法更新和删除资源。
- **资源**：
  - [MDN Web Docs: Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)
  - [Axios 官方文档](https://axios-http.com/docs/intro)
  - [JSONPlaceholder](https://jsonplaceholder.typicode.com/)：一个免费的在线 REST API，用于测试和原型设计。

通过不断练习和探索，你将能够熟练地在 React 中与 RESTful API 进行交互，并构建功能强大的 Web 应用。