---
title: 编程式导航
description: 了解如何在 React 应用中使用编程式导航，通过代码控制路由跳转，提升用户体验。
---

在 React 应用中，路由是构建单页应用（SPA）的核心功能之一。除了通过点击链接（如 `<Link>` 组件）进行导航外，我们还可以通过编程的方式控制路由跳转，这就是**编程式导航**。本文将详细介绍编程式导航的概念、使用方法以及实际应用场景。

---

## 什么是编程式导航？

编程式导航是指通过编写代码来控制路由跳转，而不是依赖用户点击链接或按钮。这种方式非常适合在特定条件下（如表单提交成功、用户登录验证通过等）自动跳转到目标页面。

在 React 中，编程式导航通常通过 `useNavigate` 钩子（React Router v6）或 `history` 对象（React Router v5）来实现。

---

## 使用 `useNavigate` 实现编程式导航

在 React Router v6 中，`useNavigate` 是一个钩子函数，用于在函数组件中实现编程式导航。以下是一个简单的示例：

```jsx
import { useNavigate } from 'react-router-dom';

function LoginButton() {
  const navigate = useNavigate();

  const handleLogin = () => {
    // 模拟登录逻辑
    const isLoggedIn = true;

    if (isLoggedIn) {
      // 登录成功后跳转到首页
      navigate('/home');
    }
  };

  return (
    <button onClick={handleLogin}>登录</button>
  );
}
```

### 代码解析
1. 使用 `useNavigate` 钩子获取 `navigate` 函数。
2. 在 `handleLogin` 函数中，模拟登录逻辑。
3. 如果登录成功，调用 `navigate('/home')` 跳转到首页。

---

## 传递参数与状态

编程式导航不仅可以跳转到目标页面，还可以传递参数或状态。例如，在跳转时传递用户信息：

```jsx
const handleLogin = () => {
  const user = { name: 'Alice', age: 25 };
  navigate('/profile', { state: user });
};
```

在目标页面中，可以通过 `useLocation` 钩子获取传递的状态：

```jsx
import { useLocation } from 'react-router-dom';

function Profile() {
  const location = useLocation();
  const user = location.state;

  return (
    <div>
      <h1>用户信息</h1>
      <p>姓名: {user.name}</p>
      <p>年龄: {user.age}</p>
    </div>
  );
}
```

---

## 实际应用场景

### 场景 1：表单提交后跳转
在表单提交成功后，自动跳转到结果页面：

```jsx
const handleSubmit = async () => {
  const response = await submitFormData(formData);
  if (response.success) {
    navigate('/success');
  } else {
    navigate('/error');
  }
};
```

### 场景 2：用户权限验证
在用户访问受限页面时，检查权限并跳转到登录页面：

```jsx
useEffect(() => {
  if (!isAuthenticated) {
    navigate('/login');
  }
}, [isAuthenticated]);
```

---

## 总结

编程式导航是 React 路由中非常强大的功能，它允许开发者通过代码控制路由跳转，从而在特定条件下实现更灵活的用户体验。通过 `useNavigate` 钩子，我们可以轻松实现页面跳转、传递参数以及处理复杂逻辑。

---

## 附加资源与练习

### 资源
- [React Router 官方文档](https://reactrouter.com/)
- [React Router v6 升级指南](https://reactrouter.com/docs/en/v6/upgrading/v5)

### 练习
1. 创建一个登录表单，登录成功后跳转到用户主页。
2. 在跳转时传递用户信息，并在目标页面显示。
3. 实现一个权限验证功能，未登录用户访问受限页面时自动跳转到登录页。

通过以上练习，你将更好地掌握编程式导航的使用方法。祝你学习愉快！