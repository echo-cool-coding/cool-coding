---
title: 可访问性(A11Y)原则
description: 了解 React 中的可访问性(A11Y)原则，学习如何构建对所有人都友好的 Web 应用。
---

## 介绍

可访问性（Accessibility，通常缩写为 A11Y）是指确保所有用户，包括残障人士，都能够访问和使用 Web 应用。在 React 中，遵循可访问性原则不仅有助于提升用户体验，还能让你的应用更加符合 Web 标准。

本文将带你了解 React 中的可访问性原则，并通过代码示例和实际案例展示如何在实际项目中应用这些原则。

## 为什么可访问性重要？

:::note
可访问性不仅仅是针对残障人士，它还能提升所有用户的体验。例如，清晰的标签和语义化的 HTML 结构有助于屏幕阅读器用户更好地理解内容，同时也能让搜索引擎更好地索引你的网站。
:::

## 可访问性原则

### 1. 语义化 HTML

使用语义化的 HTML 标签是确保可访问性的基础。React 允许你使用 JSX 编写 HTML，但你需要确保生成的 HTML 是语义化的。

```jsx
// 错误示例
<div onClick={handleClick}>点击我</div>

// 正确示例
<button onClick={handleClick}>点击我</button>
```

在上面的例子中，使用 `<button>` 标签比使用 `<div>` 更语义化，因为按钮元素具有内置的可访问性特性，如键盘焦点和屏幕阅读器支持。

### 2. ARIA 属性

ARIA（Accessible Rich Internet Applications）属性用于增强 HTML 元素的可访问性，特别是在使用非语义化标签时。

```jsx
<div role="button" tabIndex="0" onClick={handleClick} onKeyPress={handleKeyPress}>
  点击我
</div>
```

在这个例子中，`role="button"` 和 `tabIndex="0"` 属性使得 `<div>` 元素表现得像一个按钮，并且可以通过键盘操作。

### 3. 键盘导航

确保所有交互元素都可以通过键盘访问。例如，按钮、链接和表单控件都应该能够通过 `Tab` 键进行导航。

```jsx
<button onClick={handleClick} onKeyPress={handleKeyPress}>
  点击我
</button>
```

### 4. 焦点管理

在 React 中，焦点管理是一个重要的可访问性考虑因素。特别是在动态内容加载或模态框打开时，焦点应该被正确地管理。

```jsx
import React, { useRef, useEffect } from 'react';

function Modal({ isOpen, onClose }) {
  const modalRef = useRef(null);

  useEffect(() => {
    if (isOpen) {
      modalRef.current.focus();
    }
  }, [isOpen]);

  return (
    <div
      ref={modalRef}
      role="dialog"
      aria-labelledby="modal-title"
      tabIndex="-1"
      style={{ display: isOpen ? 'block' : 'none' }}
    >
      <h2 id="modal-title">模态框标题</h2>
      <p>这是一个模态框的内容。</p>
      <button onClick={onClose}>关闭</button>
    </div>
  );
}
```

在这个例子中，当模态框打开时，焦点会自动移动到模态框内部，确保键盘用户可以立即与模态框交互。

### 5. 颜色对比度

确保文本和背景之间的颜色对比度足够高，以便色盲用户和低视力用户能够轻松阅读内容。

```css
/* 错误示例 */
.button {
  background-color: #ccc;
  color: #fff;
}

/* 正确示例 */
.button {
  background-color: #000;
  color: #fff;
}
```

### 6. 表单可访问性

表单是 Web 应用中常见的交互元素，确保表单元素具有清晰的标签和错误提示。

```jsx
<label htmlFor="username">用户名:</label>
<input id="username" type="text" name="username" />

<span id="error-message" style={{ color: 'red' }}>用户名不能为空</span>
```

在这个例子中，`<label>` 标签与 `<input>` 元素关联，屏幕阅读器可以正确读取标签内容。

## 实际案例

假设你正在构建一个待办事项应用，以下是如何应用可访问性原则的示例：

```jsx
function TodoApp() {
  const [todos, setTodos] = React.useState([]);
  const [newTodo, setNewTodo] = React.useState('');

  const addTodo = () => {
    if (newTodo.trim() === '') {
      alert('待办事项不能为空');
      return;
    }
    setTodos([...todos, newTodo]);
    setNewTodo('');
  };

  return (
    <div>
      <h1>待办事项</h1>
      <ul>
        {todos.map((todo, index) => (
          <li key={index}>{todo}</li>
        ))}
      </ul>
      <label htmlFor="new-todo">新增待办事项:</label>
      <input
        id="new-todo"
        type="text"
        value={newTodo}
        onChange={(e) => setNewTodo(e.target.value)}
      />
      <button onClick={addTodo}>添加</button>
    </div>
  );
}
```

在这个例子中，我们使用了语义化的 HTML 标签、清晰的表单标签和键盘可访问的按钮。

## 总结

遵循可访问性原则不仅有助于提升用户体验，还能让你的应用更加符合 Web 标准。通过使用语义化 HTML、ARIA 属性、键盘导航、焦点管理和颜色对比度等技术，你可以构建出对所有人都友好的 Web 应用。

## 附加资源

- [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/standards-guidelines/wcag/)
- [React 官方文档 - 可访问性](https://reactjs.org/docs/accessibility.html)
- [ARIA 属性指南](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA)

## 练习

1. 修改一个现有的 React 组件，使其符合可访问性原则。
2. 尝试使用屏幕阅读器测试你的应用，并记录下需要改进的地方。
3. 研究并实现一个模态框组件，确保焦点管理和键盘导航正常工作。
