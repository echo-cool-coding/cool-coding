---
title: 部署与托管
description: 学习如何将 React 服务端渲染应用部署到生产环境，并选择合适的托管服务。
---

# 部署与托管

在开发完 React 服务端渲染（SSR）应用后，下一步就是将其部署到生产环境。部署与托管是确保应用能够被用户访问的关键步骤。本文将带你了解如何将 React SSR 应用部署到不同的托管平台，并提供一些实际案例和最佳实践。

## 什么是部署与托管？

部署是将应用程序从开发环境迁移到生产环境的过程，而托管则是将应用程序放置在一个服务器上，使其能够通过互联网访问。对于 React SSR 应用，部署与托管通常涉及以下几个步骤：

1. **构建应用**：将 React 应用打包成生产环境可用的文件。
2. **配置服务器**：设置服务器以支持服务端渲染。
3. **选择托管平台**：选择一个适合的托管服务来运行你的应用。
4. **部署应用**：将应用上传到托管平台并启动服务。

## 构建 React SSR 应用

在部署之前，首先需要构建你的 React SSR 应用。通常，你可以使用以下命令来构建应用：

```bash
npm run build
```

这将生成一个 `build` 目录，其中包含所有生产环境所需的静态文件。

## 配置服务器

React SSR 应用需要一个服务器来渲染页面。你可以使用 Node.js 和 Express 来创建一个简单的服务器：

```javascript
const express = require('express');
const path = require('path');
const app = express();

app.use(express.static(path.join(__dirname, 'build')));

app.get('/*', (req, res) => {
  res.sendFile(path.join(__dirname, 'build', 'index.html'));
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});
```

在这个例子中，Express 服务器会为所有路由提供 `index.html` 文件，并支持服务端渲染。

## 选择托管平台

有多种托管平台可供选择，以下是一些常见的选择：

1. **Vercel**：Vercel 是一个专门为前端应用设计的托管平台，支持 React SSR 应用的无缝部署。
2. **Netlify**：Netlify 提供静态站点托管和服务器端功能，适合 React SSR 应用。
3. **Heroku**：Heroku 是一个通用的云平台，支持 Node.js 应用，适合需要更多自定义配置的场景。
4. **AWS**：AWS 提供多种服务（如 EC2、Lambda、S3）来托管 React SSR 应用，适合需要高度可扩展性的场景。

## 部署到 Vercel

Vercel 是一个非常适合 React SSR 应用的托管平台。以下是部署到 Vercel 的步骤：

1. **安装 Vercel CLI**：如果你还没有安装 Vercel CLI，可以通过以下命令安装：

   ```bash
   npm install -g vercel
   ```

2. **登录 Vercel**：使用以下命令登录 Vercel：

   ```bash
   vercel login
   ```

3. **部署应用**：在项目根目录下运行以下命令来部署应用：

   ```bash
   vercel
   ```

Vercel 会自动检测你的项目类型并完成部署。部署完成后，你会获得一个唯一的 URL，可以通过该 URL 访问你的应用。

## 实际案例

假设你正在开发一个电商网站，使用 React SSR 来提高页面加载速度和 SEO 效果。你可以按照以下步骤将应用部署到 Vercel：

1. **构建应用**：运行 `npm run build` 生成生产环境文件。
2. **配置服务器**：使用 Express 创建一个简单的服务器，如上文所示。
3. **部署到 Vercel**：使用 Vercel CLI 将应用部署到 Vercel。

部署完成后，你的电商网站将能够通过 Vercel 提供的 URL 访问，并且支持服务端渲染。

## 总结

部署与托管是 React SSR 应用开发的重要环节。通过选择合适的托管平台并正确配置服务器，你可以确保应用在生产环境中稳定运行。本文介绍了如何构建 React SSR 应用、配置服务器、选择托管平台，并提供了一个实际案例来帮助你理解这些概念。

## 附加资源

- [Vercel 官方文档](https://vercel.com/docs)
- [Netlify 官方文档](https://docs.netlify.com/)
- [Heroku 官方文档](https://devcenter.heroku.com/)
- [AWS 官方文档](https://aws.amazon.com/documentation/)

## 练习

1. 尝试将你的 React SSR 应用部署到 Vercel 和 Netlify，比较两者的部署过程和性能。
2. 使用 Express 创建一个自定义服务器，并将其部署到 Heroku。
3. 探索 AWS 的 EC2 和 Lambda 服务，尝试将 React SSR 应用部署到 AWS。

通过完成这些练习，你将更深入地理解 React SSR 应用的部署与托管过程。