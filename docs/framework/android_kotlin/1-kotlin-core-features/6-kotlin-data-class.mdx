---
title: Kotlin数据类
description: 了解Kotlin中的数据类，掌握如何通过简洁的语法创建用于存储数据的类，并探索其核心特性和实际应用场景。
---

# Kotlin数据类

在Kotlin中，**数据类（Data Class）** 是一种特殊的类，专门用于存储数据。它们通过简洁的语法提供了许多有用的功能，例如自动生成的 `toString()`、`equals()`、`hashCode()` 和 `copy()` 方法。这使得数据类成为处理数据的理想选择。

## 什么是数据类？

数据类是Kotlin中用于存储数据的类。它们的主要目的是简化数据的存储和操作。与普通类不同，数据类会自动生成一些标准方法，从而减少样板代码的编写。

要定义一个数据类，只需在类声明前加上 `data` 关键字：

```kotlin
data class User(val name: String, val age: Int)
```

在这个例子中，`User` 是一个数据类，它有两个属性：`name` 和 `age`。

## 数据类的核心特性

### 自动生成的方法

Kotlin 数据类会自动生成以下方法：

1. **`toString()`**：返回对象的字符串表示形式。
2. **`equals()`**：用于比较两个对象是否相等。
3. **`hashCode()`**：返回对象的哈希码。
4. **`copy()`**：用于创建对象的副本，并允许修改部分属性。

让我们通过一个例子来看看这些方法的作用：

```kotlin
data class User(val name: String, val age: Int)

fun main() {
    val user1 = User("Alice", 25)
    val user2 = User("Alice", 25)
    
    println(user1.toString()) // 输出: User(name=Alice, age=25)
    println(user1 == user2)   // 输出: true
    println(user1.hashCode()) // 输出: 哈希码
    val user3 = user1.copy(age = 30)
    println(user3)            // 输出: User(name=Alice, age=30)
}
```

:::tip
`copy()` 方法非常有用，尤其是在需要修改对象的某些属性时。它允许你创建一个新对象，同时保留原始对象的其他属性。
:::

### 解构声明

Kotlin 数据类还支持**解构声明**，允许你将对象的属性解构为多个变量：

```kotlin
val (name, age) = User("Bob", 30)
println("Name: $name, Age: $age") // 输出: Name: Bob, Age: 30
```

解构声明在处理集合或返回多个值的函数时非常有用。

## 数据类的实际应用场景

数据类非常适合用于以下场景：

1. **DTO（数据传输对象）**：在应用程序的不同层之间传递数据。
2. **模型类**：表示数据库中的表或API返回的数据。
3. **不可变对象**：由于数据类的属性通常是 `val`，它们非常适合表示不可变对象。

### 示例：使用数据类表示API响应

假设你正在开发一个应用程序，需要处理从API返回的用户数据。你可以使用数据类来表示这些数据：

```kotlin
data class ApiResponse(
    val status: String,
    val data: UserData
)

data class UserData(
    val id: Int,
    val name: String,
    val email: String
)

fun main() {
    val response = ApiResponse("success", UserData(1, "Alice", "alice@example.com"))
    println(response)
}
```

在这个例子中，`ApiResponse` 和 `UserData` 都是数据类，它们清晰地表示了API返回的数据结构。

## 总结

Kotlin 数据类通过简洁的语法和自动生成的方法，极大地简化了数据的存储和操作。它们非常适合用于表示DTO、模型类和不可变对象。通过使用数据类，你可以减少样板代码的编写，并提高代码的可读性和可维护性。

:::note
**练习**：尝试创建一个数据类 `Product`，包含 `id`、`name` 和 `price` 属性，并使用 `copy()` 方法创建一个价格修改后的副本。
:::

## 附加资源

- [Kotlin 官方文档 - 数据类](https://kotlinlang.org/docs/data-classes.html)
- [Kotlin 数据类与 Java 记录类的比较](https://kotlinlang.org/docs/java-interop.html#data-classes)

通过学习和实践，你将能够熟练使用 Kotlin 数据类，并在实际项目中应用它们。