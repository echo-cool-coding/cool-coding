---
title: Kotlin属性与字段
description: 了解Kotlin中的属性与字段，掌握如何定义和使用它们，以及它们在面向对象编程中的实际应用。
---

# Kotlin属性与字段

在Kotlin中，属性（Properties）和字段（Fields）是面向对象编程的核心概念之一。属性是类中用于存储数据的成员，而字段则是属性背后的实际存储空间。Kotlin通过简洁的语法和强大的功能，使得属性的定义和使用变得更加直观和灵活。

## 属性的定义

在Kotlin中，属性可以通过 `val` 或 `var` 关键字来定义。`val` 用于定义只读属性（不可变），而 `var` 用于定义可变属性。

```kotlin
class Person {
    val name: String = "Alice" // 只读属性
    var age: Int = 25 // 可变属性
}
```

在上面的例子中，`name` 是一个只读属性，一旦初始化后就不能再修改。而 `age` 是一个可变属性，可以在类的生命周期内被修改。

## 属性的访问

Kotlin中的属性可以通过点符号（`.`）来访问。对于可变属性，还可以通过赋值操作符（`=`）来修改其值。

```kotlin
val person = Person()
println(person.name) // 输出: Alice
println(person.age) // 输出: 25

person.age = 30
println(person.age) // 输出: 30
```

## 自定义Getter和Setter

Kotlin允许为属性定义自定义的 `getter` 和 `setter`，以便在访问或修改属性时执行额外的逻辑。

```kotlin
class Rectangle {
    var width: Int = 0
        get() = field
        set(value) {
            if (value >= 0) {
                field = value
            }
        }

    var height: Int = 0
        get() = field
        set(value) {
            if (value >= 0) {
                field = value
            }
        }

    val area: Int
        get() = width * height
}
```

在上面的例子中，`width` 和 `height` 属性的 `setter` 确保了它们的值不会为负数。`area` 属性是一个只读属性，它的值是通过 `width` 和 `height` 计算得出的。

:::note
在自定义 `getter` 和 `setter` 中，`field` 是一个特殊的标识符，用于访问属性的实际存储字段。
:::

## 延迟初始化属性

在某些情况下，属性的值可能无法在对象创建时立即初始化。Kotlin提供了 `lateinit` 关键字，用于延迟初始化属性。

```kotlin
class User {
    lateinit var name: String

    fun initializeName() {
        name = "Bob"
    }
}

val user = User()
user.initializeName()
println(user.name) // 输出: Bob
```

:::caution
`lateinit` 只能用于可变属性（`var`），并且不能用于基本类型（如 `Int`、`Boolean` 等）。
:::

## 实际应用场景

假设我们正在开发一个简单的银行账户管理系统。我们可以使用属性来表示账户的余额和账户持有人的姓名。

```kotlin
class BankAccount {
    var balance: Double = 0.0
        private set

    val owner: String

    constructor(owner: String) {
        this.owner = owner
    }

    fun deposit(amount: Double) {
        if (amount > 0) {
            balance += amount
        }
    }

    fun withdraw(amount: Double): Boolean {
        if (amount > 0 && balance >= amount) {
            balance -= amount
            return true
        }
        return false
    }
}

val account = BankAccount("Alice")
account.deposit(1000.0)
println(account.balance) // 输出: 1000.0

account.withdraw(500.0)
println(account.balance) // 输出: 500.0
```

在这个例子中，`balance` 属性被设置为 `private set`，这意味着它只能在类内部被修改，从而确保了余额的安全性。

## 总结

Kotlin中的属性与字段是面向对象编程的基础。通过 `val` 和 `var` 关键字，我们可以轻松定义只读和可变属性。自定义的 `getter` 和 `setter` 允许我们在访问或修改属性时执行额外的逻辑。`lateinit` 关键字则提供了延迟初始化的能力。

## 附加资源与练习

- **练习1**: 创建一个 `Car` 类，包含 `brand`、`model` 和 `year` 属性，并为 `year` 属性添加一个自定义的 `setter`，确保年份不会早于1900年。
- **练习2**: 使用 `lateinit` 关键字创建一个 `Student` 类，包含 `name` 和 `grade` 属性，并在初始化方法中为它们赋值。

通过不断练习，你将更加熟练地掌握Kotlin中的属性与字段的使用。