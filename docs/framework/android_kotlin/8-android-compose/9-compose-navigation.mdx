---
title: Compose 导航
description: 了解如何在 Jetpack Compose 中实现导航，构建多屏幕应用。本文将从基础概念讲起，逐步引导你掌握 Compose 导航的核心用法。
---

# Compose 导航

在现代移动应用开发中，导航是构建多屏幕应用的核心功能之一。Jetpack Compose 提供了一种声明式的方式来管理应用中的导航逻辑。本文将带你从基础概念开始，逐步学习如何在 Compose 中实现导航。

## 什么是 Compose 导航？

Compose 导航是 Jetpack Compose 提供的一个库，用于在应用中管理屏幕之间的切换。与传统的 Android 导航组件不同，Compose 导航是完全声明式的，这意味着你可以通过定义导航图（NavGraph）来描述应用中的屏幕和它们之间的关系。

## 基本概念

在 Compose 导航中，有几个关键概念需要理解：

1. **NavController**：负责管理导航堆栈和当前屏幕状态的对象。
2. **NavHost**：用于定义导航图的容器，它会根据当前导航状态显示相应的屏幕。
3. **NavGraph**：描述应用中所有屏幕及其关系的导航图。

## 设置 Compose 导航

要使用 Compose 导航，首先需要在项目中添加依赖项。在 `build.gradle` 文件中添加以下依赖：

```kotlin
dependencies {
    implementation "androidx.navigation:navigation-compose:2.7.0"
}
```

### 创建 NavController

在 Compose 中，`NavController` 是导航的核心。你可以通过 `rememberNavController()` 函数来创建一个 `NavController`：

```kotlin
val navController = rememberNavController()
```

### 定义 NavHost

`NavHost` 是导航图的容器。你需要为 `NavHost` 提供一个 `NavController` 和一个导航图的定义。以下是一个简单的 `NavHost` 示例：

```kotlin
NavHost(navController = navController, startDestination = "home") {
    composable("home") { HomeScreen(navController) }
    composable("details") { DetailsScreen(navController) }
}
```

在这个例子中，`NavHost` 定义了两个屏幕：`home` 和 `details`。`startDestination` 指定了应用启动时显示的初始屏幕。

### 导航到其他屏幕

要在屏幕之间导航，可以使用 `NavController` 的 `navigate` 方法。例如，在 `HomeScreen` 中，你可以通过以下代码导航到 `DetailsScreen`：

```kotlin
Button(onClick = { navController.navigate("details") }) {
    Text("Go to Details")
}
```

### 返回上一屏幕

要返回到上一屏幕，可以使用 `NavController` 的 `popBackStack` 方法：

```kotlin
Button(onClick = { navController.popBackStack() }) {
    Text("Go Back")
}
```

## 实际案例

假设我们正在构建一个简单的新闻应用，其中包含两个屏幕：`HomeScreen` 和 `DetailsScreen`。`HomeScreen` 显示新闻列表，`DetailsScreen` 显示新闻的详细信息。

### HomeScreen

```kotlin
@Composable
fun HomeScreen(navController: NavController) {
    Column {
        Text("News List")
        Button(onClick = { navController.navigate("details") }) {
            Text("View Details")
        }
    }
}
```

### DetailsScreen

```kotlin
@Composable
fun DetailsScreen(navController: NavController) {
    Column {
        Text("News Details")
        Button(onClick = { navController.popBackStack() }) {
            Text("Go Back")
        }
    }
}
```

### 导航图

```kotlin
NavHost(navController = navController, startDestination = "home") {
    composable("home") { HomeScreen(navController) }
    composable("details") { DetailsScreen(navController) }
}
```

## 总结

通过本文，你已经学习了如何在 Jetpack Compose 中实现导航。我们介绍了 `NavController`、`NavHost` 和 `NavGraph` 的基本概念，并通过一个简单的新闻应用展示了如何在实际项目中使用这些概念。

:::tip
如果你想要进一步学习 Compose 导航，可以参考 [官方文档](https://developer.android.com/jetpack/compose/navigation) 或尝试构建一个更复杂的导航图。
:::

## 附加资源

- [Jetpack Compose 官方文档](https://developer.android.com/jetpack/compose)
- [Compose 导航官方指南](https://developer.android.com/jetpack/compose/navigation)

## 练习

1. 尝试在 `DetailsScreen` 中添加一个按钮，导航到第三个屏幕 `SettingsScreen`。
2. 修改导航图，使得 `SettingsScreen` 成为应用的初始屏幕。
3. 探索如何在导航时传递参数，并在目标屏幕中接收这些参数。
