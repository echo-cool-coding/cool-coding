---
title: Compose自定义组件
description: 学习如何在Jetpack Compose中创建自定义组件，掌握构建可复用UI元素的核心概念和技巧。
---

# Compose自定义组件

Jetpack Compose 是 Android 的现代 UI 工具包，它通过声明式的方式简化了 UI 开发。在 Compose 中，自定义组件是构建复杂且可复用 UI 的核心。本文将带你从零开始学习如何创建自定义组件，并通过实际案例展示其应用场景。

## 什么是自定义组件？

在 Compose 中，组件（Composable）是构建 UI 的基本单元。自定义组件是指开发者根据需求创建的、可复用的 UI 元素。通过自定义组件，你可以将复杂的 UI 逻辑封装起来，使代码更清晰、更易于维护。

## 创建自定义组件的基本步骤

### 1. 定义 Composable 函数

在 Compose 中，自定义组件是一个用 `@Composable` 注解标记的函数。以下是一个简单的自定义组件示例：

```kotlin
@Composable
fun Greeting(name: String) {
    Text(text = "Hello, $name!")
}
```

在这个例子中，`Greeting` 是一个自定义组件，它接收一个 `name` 参数，并显示一条问候消息。

### 2. 使用自定义组件

定义好自定义组件后，你可以在其他 Composable 函数中使用它：

```kotlin
@Composable
fun MyApp() {
    Greeting(name = "Compose")
}
```

运行上述代码后，屏幕上会显示 "Hello, Compose!"。

### 3. 添加样式和布局

自定义组件不仅可以显示文本，还可以包含复杂的布局和样式。以下是一个带有按钮的自定义组件示例：

```kotlin
@Composable
fun CustomButton(text: String, onClick: () -> Unit) {
    Button(onClick = onClick) {
        Text(text = text)
    }
}
```

在这个例子中，`CustomButton` 是一个带有文本和点击事件的自定义按钮组件。

### 4. 组合多个组件

Compose 的强大之处在于可以轻松组合多个组件。以下是一个组合了 `Greeting` 和 `CustomButton` 的示例：

```kotlin
@Composable
fun MyApp() {
    Column {
        Greeting(name = "Compose")
        CustomButton(text = "Click Me", onClick = { /* 处理点击事件 */ })
    }
}
```

在这个例子中，`Column` 用于垂直排列 `Greeting` 和 `CustomButton`。

## 实际案例：创建一个自定义卡片组件

让我们通过一个实际案例来巩固所学知识。我们将创建一个自定义卡片组件，用于显示标题和描述。

### 1. 定义卡片组件

```kotlin
@Composable
fun CustomCard(title: String, description: String) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(16.dp),
        elevation = 4.dp
    ) {
        Column(
            modifier = Modifier.padding(16.dp)
        ) {
            Text(text = title, style = MaterialTheme.typography.h6)
            Spacer(modifier = Modifier.height(8.dp))
            Text(text = description, style = MaterialTheme.typography.body2)
        }
    }
}
```

### 2. 使用卡片组件

```kotlin
@Composable
fun MyApp() {
    CustomCard(
        title = "Compose 自定义组件",
        description = "学习如何在 Jetpack Compose 中创建自定义组件。"
    )
}
```

运行上述代码后，屏幕上会显示一个带有标题和描述的卡片。

## 总结

通过本文，你学习了如何在 Jetpack Compose 中创建自定义组件。我们从简单的文本组件开始，逐步构建了复杂的卡片组件。自定义组件是 Compose 中构建可复用 UI 的核心工具，掌握它将极大地提升你的开发效率。

## 附加资源与练习

- **官方文档**: 阅读 [Jetpack Compose 官方文档](https://developer.android.com/jetpack/compose) 以了解更多高级功能。
- **练习**: 尝试创建一个自定义的进度条组件，并为其添加动画效果。

:::tip
在创建自定义组件时，尽量保持组件的单一职责原则，这样可以使组件更易于复用和维护。
:::

:::caution
避免在自定义组件中直接使用硬编码的样式和布局参数，尽量通过参数传递，以提高组件的灵活性。
:::