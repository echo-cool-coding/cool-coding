---
title: Compose布局
description: 了解 Jetpack Compose 中的布局系统，掌握如何通过组合和排列组件来构建用户界面。
---

# Compose布局

Jetpack Compose 是 Android 的现代 UI 工具包，它通过声明式的方式简化了 UI 开发。在 Compose 中，布局是构建用户界面的核心概念之一。本文将详细介绍 Compose 中的布局系统，帮助你理解如何通过组合和排列组件来构建复杂的用户界面。

## 什么是 Compose 布局？

在 Compose 中，布局是指如何将 UI 组件（如文本、按钮、图像等）排列在屏幕上。Compose 提供了一系列内置的布局组件，如 `Column`、`Row` 和 `Box`，这些组件可以帮助你轻松地组织和排列 UI 元素。

与传统的 Android View 系统不同，Compose 的布局系统是声明式的。这意味着你只需要描述你想要的 UI 布局，Compose 会自动处理布局的计算和绘制。

## 基本布局组件

### Column

`Column` 是一个垂直排列的布局组件，它将其子组件从上到下依次排列。以下是一个简单的 `Column` 示例：

```kotlin
@Composable
fun MyColumn() {
    Column {
        Text("First Item")
        Text("Second Item")
        Text("Third Item")
    }
}
```

在这个例子中，三个 `Text` 组件会垂直排列在屏幕上。

### Row

`Row` 是一个水平排列的布局组件，它将其子组件从左到右依次排列。以下是一个简单的 `Row` 示例：

```kotlin
@Composable
fun MyRow() {
    Row {
        Text("First Item")
        Text("Second Item")
        Text("Third Item")
    }
}
```

在这个例子中，三个 `Text` 组件会水平排列在屏幕上。

### Box

`Box` 是一个堆叠布局组件，它将其子组件堆叠在一起。你可以使用 `Box` 来创建重叠的 UI 元素。以下是一个简单的 `Box` 示例：

```kotlin
@Composable
fun MyBox() {
    Box {
        Text("Background Text")
        Text("Foreground Text")
    }
}
```

在这个例子中，两个 `Text` 组件会堆叠在一起，第一个 `Text` 会作为背景，第二个 `Text` 会作为前景。

## 布局修饰符

在 Compose 中，修饰符（Modifier）用于调整组件的布局、外观和行为。以下是一些常用的布局修饰符：

- `Modifier.fillMaxSize()`：使组件填充其父容器的最大尺寸。
- `Modifier.padding()`：为组件添加内边距。
- `Modifier.size()`：设置组件的尺寸。
- `Modifier.weight()`：在 `Row` 或 `Column` 中分配剩余空间。

以下是一个使用修饰符的示例：

```kotlin
@Composable
fun MyColumnWithModifiers() {
    Column(modifier = Modifier.fillMaxSize().padding(16.dp)) {
        Text("First Item", modifier = Modifier.weight(1f))
        Text("Second Item", modifier = Modifier.weight(2f))
        Text("Third Item", modifier = Modifier.weight(1f))
    }
}
```

在这个例子中，`Column` 会填充整个屏幕，并且每个 `Text` 组件会根据其权重分配剩余空间。

## 自定义布局

虽然 Compose 提供了许多内置的布局组件，但有时你可能需要创建自定义布局。Compose 允许你通过 `Layout` 组件来实现这一点。以下是一个简单的自定义布局示例：

```kotlin
@Composable
fun MyCustomLayout() {
    Layout(
        content = {
            Text("First Item")
            Text("Second Item")
            Text("Third Item")
        }
    ) { measurables, constraints ->
        // 测量子组件
        val placeables = measurables.map { measurable ->
            measurable.measure(constraints)
        }

        // 计算布局尺寸
        val width = placeables.maxOf { it.width }
        val height = placeables.sumOf { it.height }

        // 布局子组件
        layout(width, height) {
            var yPosition = 0
            placeables.forEach { placeable ->
                placeable.placeRelative(0, yPosition)
                yPosition += placeable.height
            }
        }
    }
}
```

在这个例子中，我们创建了一个自定义布局，它将子组件垂直排列，并且每个子组件的高度会累加。

## 实际案例

假设你需要创建一个简单的用户界面，其中包含一个标题、一个输入框和一个按钮。你可以使用 `Column` 和 `Row` 来实现这个布局：

```kotlin
@Composable
fun MyForm() {
    Column(modifier = Modifier.fillMaxSize().padding(16.dp)) {
        Text("Welcome to My App", style = MaterialTheme.typography.h4)
        Spacer(modifier = Modifier.height(16.dp))
        TextField(
            value = "",
            onValueChange = {},
            label = { Text("Enter your name") }
        )
        Spacer(modifier = Modifier.height(16.dp))
        Button(onClick = {}) {
            Text("Submit")
        }
    }
}
```

在这个例子中，`Column` 用于垂直排列标题、输入框和按钮，`Spacer` 用于在组件之间添加间距。

## 总结

Compose 的布局系统通过声明式的方式简化了 UI 开发。你可以使用内置的布局组件（如 `Column`、`Row` 和 `Box`）来组织和排列 UI 元素，也可以使用修饰符来调整组件的布局和外观。如果需要更复杂的布局，你还可以创建自定义布局。

通过掌握 Compose 的布局系统，你将能够轻松构建出复杂的用户界面。

## 附加资源

- [Jetpack Compose 官方文档](https://developer.android.com/jetpack/compose)
- [Compose 布局指南](https://developer.android.com/jetpack/compose/layout)
- [Compose 修饰符指南](https://developer.android.com/jetpack/compose/modifiers)

## 练习

1. 创建一个包含三个按钮的 `Row`，并使用 `Modifier.weight()` 使它们均匀分布。
2. 使用 `Box` 创建一个重叠的 UI，其中包含一个背景图像和一个前景文本。
3. 尝试创建一个自定义布局，将子组件水平排列，并且每个子组件的宽度为屏幕宽度的三分之一。

通过完成这些练习，你将进一步巩固对 Compose 布局系统的理解。