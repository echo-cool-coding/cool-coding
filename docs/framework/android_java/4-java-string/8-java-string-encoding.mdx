---
title: Java字符串编码
description: 了解Java中字符串编码的基本概念、常见编码方式及其实际应用场景，帮助初学者掌握字符串编码的核心知识。
---

# Java字符串编码

在Java编程中，字符串编码是一个重要的概念。它决定了如何将字符转换为字节，以及如何从字节中还原字符。理解字符串编码对于处理文本数据、文件读写、网络通信等场景至关重要。

## 什么是字符串编码？

字符串编码是指将字符（如字母、数字、符号等）转换为字节的过程。不同的编码方式使用不同的规则来表示字符。常见的编码方式包括ASCII、UTF-8、UTF-16等。

:::note
**字符集（Charset）** 和 **编码（Encoding）** 是两个相关但不同的概念。字符集定义了字符的集合，而编码则定义了如何将这些字符转换为字节。
:::

## 常见的字符串编码方式

### 1. ASCII
ASCII是最早的字符编码标准之一，使用7位二进制数表示128个字符。它主要用于表示英文字符和常见的控制字符。

```java
String text = "Hello, ASCII!";
byte[] asciiBytes = text.getBytes("US-ASCII");
System.out.println(Arrays.toString(asciiBytes));
```

**输出：**
```
[72, 101, 108, 108, 111, 44, 32, 65, 83, 67, 73, 73, 33]
```

### 2. UTF-8
UTF-8是一种可变长度的编码方式，可以表示Unicode字符集中的所有字符。它使用1到4个字节来表示一个字符，兼容ASCII编码。

```java
String text = "你好，UTF-8!";
byte[] utf8Bytes = text.getBytes("UTF-8");
System.out.println(Arrays.toString(utf8Bytes));
```

**输出：**
```
[-28, -67, -96, -27, -91, -67, -17, -68, -116, 85, 84, 70, 45, 56, 33]
```

### 3. UTF-16
UTF-16使用2或4个字节来表示一个字符。Java内部使用UTF-16编码来存储字符串。

```java
String text = "Hello, UTF-16!";
byte[] utf16Bytes = text.getBytes("UTF-16");
System.out.println(Arrays.toString(utf16Bytes));
```

**输出：**
```
[-2, -1, 0, 72, 0, 101, 0, 108, 0, 108, 0, 111, 0, 44, 0, 32, 0, 85, 0, 84, 0, 70, 0, 45, 0, 49, 0, 54, 0, 33]
```

## 字符串编码的实际应用

### 1. 文件读写
在读取或写入文件时，指定正确的编码方式非常重要。否则，可能会导致乱码或数据丢失。

```java
import java.nio.charset.StandardCharsets;
import java.nio.file.Files;
import java.nio.file.Paths;

public class FileExample {
    public static void main(String[] args) throws Exception {
        String content = "你好，文件!";
        Files.write(Paths.get("example.txt"), content.getBytes(StandardCharsets.UTF_8));

        String readContent = new String(Files.readAllBytes(Paths.get("example.txt")), StandardCharsets.UTF_8);
        System.out.println(readContent);
    }
}
```

**输出：**
```
你好，文件!
```

### 2. 网络通信
在网络通信中，数据通常以字节流的形式传输。发送和接收数据时，需要确保使用相同的编码方式。

```java
import java.io.*;
import java.net.*;

public class NetworkExample {
    public static void main(String[] args) throws Exception {
        ServerSocket serverSocket = new ServerSocket(8080);
        Socket socket = serverSocket.accept();

        OutputStream out = socket.getOutputStream();
        out.write("你好，客户端!".getBytes("UTF-8"));

        InputStream in = socket.getInputStream();
        byte[] buffer = new byte[1024];
        int length = in.read(buffer);
        String received = new String(buffer, 0, length, "UTF-8");
        System.out.println(received);

        socket.close();
        serverSocket.close();
    }
}
```

## 总结

字符串编码是Java编程中的一个重要概念，理解不同的编码方式及其应用场景对于处理文本数据至关重要。通过本文，你应该已经掌握了ASCII、UTF-8和UTF-16等常见编码方式的基本知识，并了解了它们在文件读写和网络通信中的实际应用。

:::tip
**练习：** 尝试编写一个程序，将一段中文文本分别以UTF-8和UTF-16编码保存到文件中，然后读取并比较两者的字节表示。
:::

## 附加资源

- [Java官方文档：Charset](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/charset/Charset.html)
- [Unicode编码表](https://unicode-table.com/)
- [UTF-8与UTF-16的区别](https://en.wikipedia.org/wiki/UTF-8#Comparison_with_UTF-16)