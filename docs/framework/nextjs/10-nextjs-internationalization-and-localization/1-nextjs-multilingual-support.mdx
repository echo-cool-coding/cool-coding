---
title: Next.js 多语言支持
description: 学习如何在 Next.js 中实现国际化与本地化，支持多语言内容，提升用户体验。
---

## 介绍

在现代 Web 开发中，支持多语言内容是一个重要的功能，尤其是当你的应用面向全球用户时。Next.js 提供了强大的工具和功能，帮助开发者轻松实现国际化（i18n）和本地化（l10n）。通过 Next.js 的多语言支持，你可以为不同语言的用户提供本地化的内容，从而提升用户体验。

本文将逐步讲解如何在 Next.js 中实现多语言支持，包括配置、路由、语言切换以及实际应用案例。

## 配置 Next.js 国际化

Next.js 从 10.0.0 版本开始内置了国际化支持。你可以在 `next.config.js` 文件中配置多语言支持。

```javascript
// next.config.js
module.exports = {
  i18n: {
    locales: ['en', 'fr', 'es'], // 支持的语言列表
    defaultLocale: 'en', // 默认语言
  },
};
```

在这个配置中，`locales` 数组定义了支持的语言，`defaultLocale` 指定了默认语言。Next.js 会根据用户的语言偏好自动选择合适的语言。

## 路由与语言切换

Next.js 的国际化支持会自动为每种语言生成对应的路由。例如，如果你的默认语言是 `en`，那么 `/about` 页面在法语（`fr`）中会自动变为 `/fr/about`。

### 语言切换示例

你可以在页面中添加一个语言切换器，允许用户手动切换语言。以下是一个简单的语言切换器示例：

```javascript
import { useRouter } from 'next/router';

export default function LanguageSwitcher() {
  const router = useRouter();

  const changeLanguage = (locale) => {
    router.push(router.pathname, router.asPath, { locale });
  };

  return (
    <div>
      <button onClick={() => changeLanguage('en')}>English</button>
      <button onClick={() => changeLanguage('fr')}>Français</button>
      <button onClick={() => changeLanguage('es')}>Español</button>
    </div>
  );
}
```

在这个示例中，`useRouter` 钩子用于获取当前的路由信息，并通过 `router.push` 方法切换语言。

## 多语言内容管理

为了实现多语言内容，你可以使用 JSON 文件或 CMS 来管理不同语言的文本内容。以下是一个使用 JSON 文件的示例：

### 创建语言文件

在 `locales` 目录下创建对应语言的 JSON 文件：

```json
// locales/en.json
{
  "greeting": "Hello, World!"
}

// locales/fr.json
{
  "greeting": "Bonjour, le monde!"
}

// locales/es.json
{
  "greeting": "¡Hola, Mundo!"
}
```

### 在页面中使用多语言内容

你可以在页面中使用 `useRouter` 钩子获取当前语言，并根据语言加载对应的内容：

```javascript
import { useRouter } from 'next/router';
import en from '../locales/en.json';
import fr from '../locales/fr.json';
import es from '../locales/es.json';

export default function Home() {
  const router = useRouter();
  const { locale } = router;

  const t = locale === 'en' ? en : locale === 'fr' ? fr : es;

  return (
    <div>
      <h1>{t.greeting}</h1>
    </div>
  );
}
```

在这个示例中，`t` 对象包含了当前语言的文本内容，页面会根据用户的语言偏好显示对应的问候语。

## 实际应用案例

假设你正在开发一个多语言博客网站，你需要为每篇博客文章提供不同语言的版本。你可以使用 Next.js 的动态路由和国际化功能来实现这一需求。

### 动态路由与多语言内容

首先，在 `pages/blog/[slug].js` 中创建一个动态路由页面：

```javascript
import { useRouter } from 'next/router';
import enPosts from '../locales/en/posts.json';
import frPosts from '../locales/fr/posts.json';
import esPosts from '../locales/es/posts.json';

export default function BlogPost() {
  const router = useRouter();
  const { locale, query } = router;
  const { slug } = query;

  const posts = locale === 'en' ? enPosts : locale === 'fr' ? frPosts : esPosts;
  const post = posts.find((p) => p.slug === slug);

  if (!post) {
    return <div>Post not found</div>;
  }

  return (
    <div>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
    </div>
  );
}
```

在这个示例中，`posts.json` 文件包含了每种语言的博客文章列表，页面会根据当前语言和文章 `slug` 动态加载对应的内容。

## 总结

Next.js 提供了强大的国际化支持，使得实现多语言网站变得非常简单。通过配置 `next.config.js` 文件，你可以轻松支持多种语言，并通过动态路由和语言切换器为用户提供本地化的内容。

:::tip
如果你需要更复杂的国际化功能，可以考虑使用第三方库如 `next-i18next` 或 `react-intl`，它们提供了更高级的功能和更好的开发体验。
:::

## 附加资源与练习

- [Next.js 官方文档 - 国际化](https://nextjs.org/docs/advanced-features/i18n-routing)
- [next-i18next 文档](https://github.com/isaachinman/next-i18next)
- [react-intl 文档](https://formatjs.io/docs/react-intl/)

### 练习

1. 在你的 Next.js 项目中配置多语言支持，并添加至少两种语言。
2. 创建一个语言切换器，允许用户手动切换语言。
3. 使用 JSON 文件管理多语言内容，并在页面中动态显示对应语言的文本。
