---
title: Next.js 路由国际化
description: 了解如何在 Next.js 中实现路由国际化，支持多语言网站的开发。
---

# Next.js 路由国际化

在现代 Web 开发中，国际化（i18n）是一个重要的功能，尤其是当你的网站需要面向全球用户时。Next.js 提供了强大的路由国际化支持，使得开发者可以轻松地为不同语言的用户提供本地化的内容。本文将详细介绍如何在 Next.js 中实现路由国际化，并通过实际案例帮助你理解这一概念。

## 什么是路由国际化？

路由国际化是指根据用户的语言偏好，动态地调整网站的 URL 结构，以提供本地化的内容。例如，一个支持英语和法语的网站可能会将 `/about` 页面分别映射为 `/en/about` 和 `/fr/about`。Next.js 通过内置的国际化支持，使得这一过程变得非常简单。

## 配置 Next.js 国际化

要在 Next.js 中启用路由国际化，首先需要在 `next.config.js` 文件中进行配置。以下是一个基本的配置示例：

```javascript
// next.config.js
module.exports = {
  i18n: {
    locales: ['en', 'fr'],
    defaultLocale: 'en',
  },
};
```

在这个配置中，我们定义了两个语言环境：`en`（英语）和 `fr`（法语）。`defaultLocale` 指定了默认的语言环境。

### 语言环境检测

Next.js 会自动检测用户的语言偏好，并根据配置的路由规则进行重定向。例如，如果用户的首选语言是法语，Next.js 会将 `/about` 重定向到 `/fr/about`。

## 创建本地化页面

在配置好国际化后，你可以为每个语言环境创建相应的页面。Next.js 会根据语言环境自动加载对应的页面文件。

### 示例：创建多语言页面

假设我们有一个 `about` 页面，我们需要为英语和法语分别创建页面文件：

- `pages/about.js`（默认页面）
- `pages/fr/about.js`（法语页面）

在 `pages/about.js` 中，我们可以使用 `useRouter` 钩子来获取当前的语言环境：

```javascript
import { useRouter } from 'next/router';

export default function About() {
  const router = useRouter();
  const { locale } = router;

  return (
    <div>
      <h1>About Page</h1>
      <p>Current locale: {locale}</p>
    </div>
  );
}
```

在 `pages/fr/about.js` 中，我们可以提供法语的翻译内容：

```javascript
export default function About() {
  return (
    <div>
      <h1>Page À propos</h1>
      <p>Locale actuelle: fr</p>
    </div>
  );
}
```

### 动态路由与国际化

Next.js 还支持动态路由的国际化。例如，如果你有一个动态路由 `/posts/[id]`，你可以为每个语言环境创建相应的页面：

- `pages/posts/[id].js`（默认页面）
- `pages/fr/posts/[id].js`（法语页面）

在动态路由中，你可以通过 `useRouter` 钩子获取当前的语言环境和动态参数：

```javascript
import { useRouter } from 'next/router';

export default function Post() {
  const router = useRouter();
  const { locale, query } = router;
  const { id } = query;

  return (
    <div>
      <h1>Post {id}</h1>
      <p>Current locale: {locale}</p>
    </div>
  );
}
```

## 实际案例：多语言博客

假设我们正在开发一个多语言博客，支持英语和法语。我们可以通过以下步骤实现路由国际化：

1. **配置国际化**：在 `next.config.js` 中配置 `en` 和 `fr` 语言环境。
2. **创建本地化页面**：为每个语言环境创建相应的页面文件，例如 `pages/blog/[slug].js` 和 `pages/fr/blog/[slug].js`。
3. **动态加载内容**：根据当前语言环境加载对应的博客内容。

### 示例代码

```javascript
// pages/blog/[slug].js
import { useRouter } from 'next/router';

export default function BlogPost() {
  const router = useRouter();
  const { locale, query } = router;
  const { slug } = query;

  const content = {
    en: {
      title: 'Welcome to our blog',
      body: 'This is the English version of the blog post.',
    },
    fr: {
      title: 'Bienvenue sur notre blog',
      body: 'Ceci est la version française de l\'article de blog.',
    },
  };

  return (
    <div>
      <h1>{content[locale].title}</h1>
      <p>{content[locale].body}</p>
    </div>
  );
}
```

在这个示例中，我们根据当前语言环境动态加载博客内容。如果用户访问 `/fr/blog/my-post`，Next.js 会自动加载法语内容。

## 总结

Next.js 的路由国际化功能使得开发者可以轻松地为多语言网站提供本地化的内容。通过简单的配置和动态路由，你可以为不同语言的用户提供无缝的浏览体验。

:::tip
在实际开发中，建议将翻译内容存储在单独的文件或数据库中，以便更好地管理和维护多语言内容。
:::

## 附加资源

- [Next.js 官方文档 - 国际化](https://nextjs.org/docs/advanced-features/i18n-routing)
- [i18next - 国际化框架](https://www.i18next.com/)
- [React Intl - React 国际化库](https://formatjs.io/docs/react-intl)

## 练习

1. 尝试在 Next.js 项目中配置路由国际化，支持英语和西班牙语。
2. 创建一个多语言的博客系统，支持动态加载不同语言的博客内容。
3. 探索如何使用 `next-translate` 等第三方库来简化国际化流程。

通过以上步骤和练习，你将能够掌握 Next.js 路由国际化的核心概念，并能够在实际项目中应用这一功能。