---
title: Next.js Rosetta
description: "了解如何使用 Next.js Rosetta 实现国际化与本地化，为您的应用程序提供多语言支持。"
---

# Next.js Rosetta

在构建现代 Web 应用程序时，国际化（i18n）和本地化（l10n）是至关重要的功能。Next.js 提供了强大的工具来支持多语言应用程序的开发，而 **Next.js Rosetta** 是一个简化这一过程的库。本文将带您了解如何使用 Next.js Rosetta 实现国际化与本地化。

## 什么是 Next.js Rosetta？

Next.js Rosetta 是一个轻量级的库，旨在简化 Next.js 应用程序中的国际化工作。它通过提供一种简单的方式来管理翻译字符串，并支持动态加载语言文件，从而帮助开发者轻松实现多语言支持。

Rosetta 的核心思想是将翻译字符串存储在一个中央化的位置，并根据用户的语言偏好动态加载相应的翻译文件。这使得管理多语言内容变得更加高效和可维护。

## 安装与设置

首先，您需要在项目中安装 Next.js Rosetta：

```bash
npm install next-rosetta
```

接下来，在您的 Next.js 项目中创建一个 `i18n` 文件夹，用于存放语言文件。例如：

```
/pages
/i18n
  /en.json
  /es.json
  /zh.json
```

每个 JSON 文件包含对应语言的翻译字符串。例如，`en.json` 可能如下所示：

```json
{
  "greeting": "Hello, world!",
  "farewell": "Goodbye, world!"
}
```

## 配置 Next.js Rosetta

在您的 Next.js 项目中，创建一个 `i18n.js` 文件来配置 Rosetta：

```javascript
import { createI18n } from 'next-rosetta';

const i18n = createI18n({
  defaultLocale: 'en',
  locales: ['en', 'es', 'zh'],
  loadLocale: async (locale) => {
    const translations = await import(`./i18n/${locale}.json`);
    return translations.default;
  }
});

export default i18n;
```

在这个配置中，我们指定了默认语言为英语（`en`），并支持英语、西班牙语（`es`）和中文（`zh`）。`loadLocale` 函数用于动态加载语言文件。

## 在页面中使用 Rosetta

要在页面中使用 Rosetta，您需要将 `i18n` 配置与 Next.js 的 `getStaticProps` 或 `getServerSideProps` 结合使用。以下是一个示例：

```javascript
import i18n from '../i18n';

export async function getStaticProps({ locale }) {
  const { t } = await i18n.loadLocale(locale);
  return {
    props: {
      t
    }
  };
}

export default function Home({ t }) {
  return (
    <div>
      <h1>{t('greeting')}</h1>
      <p>{t('farewell')}</p>
    </div>
  );
}
```

在这个示例中，`getStaticProps` 函数加载了当前语言环境下的翻译字符串，并将其传递给页面组件。页面组件使用 `t` 函数来获取翻译后的字符串。

## 动态切换语言

Next.js Rosetta 还支持动态切换语言。您可以通过在页面中添加一个语言切换器来实现这一点：

```javascript
import { useRouter } from 'next/router';
import i18n from '../i18n';

export default function LanguageSwitcher() {
  const router = useRouter();

  const changeLanguage = async (locale) => {
    await i18n.loadLocale(locale);
    router.push(router.pathname, router.asPath, { locale });
  };

  return (
    <div>
      <button onClick={() => changeLanguage('en')}>English</button>
      <button onClick={() => changeLanguage('es')}>Español</button>
      <button onClick={() => changeLanguage('zh')}>中文</button>
    </div>
  );
}
```

这个组件允许用户点击按钮来切换语言，并重新加载页面以应用新的语言设置。

## 实际应用场景

假设您正在开发一个多语言的电子商务网站。您可以使用 Next.js Rosetta 来管理产品描述、用户界面文本和错误消息的翻译。通过动态加载语言文件，您可以确保用户始终看到与其语言偏好相符的内容。

例如，当用户访问网站时，系统会根据其浏览器的语言设置自动加载相应的语言文件。如果用户手动切换语言，网站会立即更新所有文本内容，而无需刷新页面。

## 总结

Next.js Rosetta 是一个强大的工具，可以帮助您轻松实现 Next.js 应用程序的国际化与本地化。通过集中管理翻译字符串并动态加载语言文件，您可以构建一个支持多语言的应用程序，为用户提供更好的体验。

## 附加资源与练习

- **官方文档**: 访问 [Next.js Rosetta GitHub 仓库](https://github.com/vercel/next.js/tree/canary/examples/with-rosetta) 了解更多信息。
- **练习**: 尝试在您的 Next.js 项目中集成 Rosetta，并添加一个新的语言支持。
- **扩展阅读**: 了解其他国际化库，如 `react-i18next` 和 `next-i18next`，比较它们与 Rosetta 的异同。

通过本文的学习，您应该已经掌握了如何使用 Next.js Rosetta 实现国际化与本地化的基本知识。现在，您可以开始为您的应用程序添加多语言支持了！