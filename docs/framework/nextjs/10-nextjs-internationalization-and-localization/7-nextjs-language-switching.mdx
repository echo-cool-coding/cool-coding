---
title: Next.js 语言切换
description: 学习如何在 Next.js 中实现语言切换功能，支持国际化与本地化。本文将从基础概念讲起，逐步引导你完成语言切换的实现，并提供实际案例和代码示例。
---

## 介绍

在构建多语言网站时，语言切换是一个关键功能。Next.js 提供了强大的国际化（i18n）支持，使得开发者可以轻松地为网站添加多语言支持。本文将详细介绍如何在 Next.js 中实现语言切换功能，帮助你的网站支持多种语言。

## 基础概念

### 什么是国际化与本地化？

国际化（Internationalization，简称 i18n）是指设计和开发应用程序，使其能够轻松适应不同语言和地区的需求。本地化（Localization，简称 l10n）则是将应用程序适配到特定语言或地区的过程。

在 Next.js 中，国际化与本地化是通过配置 `next.config.js` 文件来实现的。你可以定义支持的语言列表、默认语言以及路由策略。

### Next.js 的国际化配置

首先，你需要在 `next.config.js` 文件中配置国际化设置。以下是一个简单的配置示例：

```javascript
// next.config.js
module.exports = {
  i18n: {
    locales: ['en', 'fr', 'es'], // 支持的语言列表
    defaultLocale: 'en', // 默认语言
  },
};
```

在这个配置中，我们定义了三种语言：英语（`en`）、法语（`fr`）和西班牙语（`es`）。默认语言为英语。

## 实现语言切换

### 1. 创建语言切换组件

为了实现语言切换功能，我们可以创建一个简单的语言切换组件。这个组件将允许用户在不同的语言之间切换。

```javascript
// components/LanguageSwitcher.js
import { useRouter } from 'next/router';

const LanguageSwitcher = () => {
  const router = useRouter();
  const { locales, locale: activeLocale } = router;

  const changeLanguage = (locale) => {
    router.push(router.pathname, router.asPath, { locale });
  };

  return (
    <div>
      {locales.map((locale) => (
        <button
          key={locale}
          onClick={() => changeLanguage(locale)}
          style={{ fontWeight: locale === activeLocale ? 'bold' : 'normal' }}
        >
          {locale.toUpperCase()}
        </button>
      ))}
    </div>
  );
};

export default LanguageSwitcher;
```

在这个组件中，我们使用了 `useRouter` 钩子来获取当前的路由信息，并根据用户选择的语言切换路由。

### 2. 在页面中使用语言切换组件

接下来，我们可以在页面中使用这个语言切换组件。例如，在 `pages/index.js` 中：

```javascript
// pages/index.js
import LanguageSwitcher from '../components/LanguageSwitcher';

export default function Home() {
  return (
    <div>
      <h1>Welcome to our website!</h1>
      <LanguageSwitcher />
    </div>
  );
}
```

现在，当用户访问首页时，他们将看到一个语言切换按钮，点击按钮即可切换语言。

### 3. 处理多语言内容

为了实现真正的多语言支持，你还需要为每种语言提供相应的翻译内容。你可以使用 `next-translate` 或 `next-i18next` 等库来管理多语言内容。

以下是一个使用 `next-translate` 的简单示例：

```javascript
// pages/index.js
import useTranslation from 'next-translate/useTranslation';
import LanguageSwitcher from '../components/LanguageSwitcher';

export default function Home() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t('common:welcome')}</h1>
      <LanguageSwitcher />
    </div>
  );
}
```

在这个示例中，我们使用了 `next-translate` 的 `useTranslation` 钩子来获取翻译内容。`t('common:welcome')` 将根据当前语言返回相应的翻译文本。

## 实际案例

假设我们正在构建一个多语言的电子商务网站。用户可以在英语、法语和西班牙语之间切换。我们可以使用上述方法来实现语言切换功能，并为每种语言提供相应的产品描述、价格等信息。

```javascript
// pages/product/[id].js
import useTranslation from 'next-translate/useTranslation';
import { useRouter } from 'next/router';

export default function Product() {
  const { t } = useTranslation();
  const router = useRouter();
  const { id } = router.query;

  return (
    <div>
      <h1>{t(`products:${id}.title`)}</h1>
      <p>{t(`products:${id}.description`)}</p>
      <p>{t(`products:${id}.price`)}</p>
    </div>
  );
}
```

在这个示例中，我们根据产品 ID 动态加载不同语言的翻译内容。

## 总结

通过本文，你已经学会了如何在 Next.js 中实现语言切换功能。我们从基础概念讲起，逐步实现了语言切换组件，并展示了如何在实际项目中应用这些知识。

:::tip
如果你想要进一步学习 Next.js 的国际化功能，可以参考 [Next.js 官方文档](https://nextjs.org/docs/advanced-features/i18n-routing) 或尝试使用 `next-translate` 等第三方库来简化多语言管理。
:::

## 附加资源

- [Next.js 国际化路由文档](https://nextjs.org/docs/advanced-features/i18n-routing)
- [next-translate 官方文档](https://github.com/vinissimus/next-translate)
- [next-i18next 官方文档](https://github.com/isaachinman/next-i18next)

## 练习

1. 尝试在你的 Next.js 项目中添加一个新的语言（例如德语 `de`），并实现相应的语言切换功能。
2. 使用 `next-translate` 或 `next-i18next` 为你的网站添加多语言内容，并确保所有页面都能正确显示翻译文本。
