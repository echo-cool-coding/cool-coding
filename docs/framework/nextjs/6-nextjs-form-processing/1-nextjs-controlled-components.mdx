---
title: Next.js 受控组件
description: 了解如何在 Next.js 中使用受控组件处理表单输入，掌握其工作原理和实际应用场景。
---

# Next.js 受控组件

在 Next.js 中，表单处理是构建动态网页的重要部分。受控组件（Controlled Components）是 React 和 Next.js 中处理表单输入的一种常见方式。本文将详细介绍受控组件的概念、工作原理以及如何在 Next.js 中使用它们。

## 什么是受控组件？

受控组件是指表单元素（如 `<input>`、`<textarea>` 和 `<select>`）的值由 React 状态（state）控制的组件。换句话说，表单元素的值不再由 DOM 自身管理，而是由 React 的状态管理。这使得开发者可以更精确地控制表单的行为和数据的流动。

:::note
**注意**：受控组件的核心思想是“单一数据源”，即表单元素的值和状态始终保持同步。
:::

## 受控组件的工作原理

在受控组件中，表单元素的值通过 `value` 属性绑定到 React 的状态。当用户输入内容时，通过 `onChange` 事件处理器更新状态，从而重新渲染组件并显示最新的输入值。

### 基本示例

以下是一个简单的受控组件示例，展示了如何在 Next.js 中处理文本输入：

```jsx
import { useState } from 'react';

export default function ControlledInput() {
  const [inputValue, setInputValue] = useState('');

  const handleChange = (event) => {
    setInputValue(event.target.value);
  };

  return (
    <div>
      <label htmlFor="name">Name:</label>
      <input
        type="text"
        id="name"
        value={inputValue}
        onChange={handleChange}
      />
      <p>You typed: {inputValue}</p>
    </div>
  );
}
```

在这个示例中，`inputValue` 状态变量存储了输入框的值。每当用户在输入框中键入内容时，`handleChange` 函数会被调用，更新 `inputValue` 的值，并重新渲染组件以显示最新的输入。

:::tip
**提示**：使用受控组件时，确保为每个表单元素都提供一个 `onChange` 事件处理器，否则输入框将变为只读。
:::

## 受控组件的实际应用

受控组件不仅适用于简单的文本输入，还可以用于处理复杂的表单逻辑。以下是一个更复杂的示例，展示了如何处理多个输入字段和表单提交：

```jsx
import { useState } from 'react';

export default function RegistrationForm() {
  const [formData, setFormData] = useState({
    firstName: '',
    lastName: '',
    email: '',
  });

  const handleChange = (event) => {
    const { name, value } = event.target;
    setFormData({
      ...formData,
      [name]: value,
    });
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    alert(`Form submitted with: ${JSON.stringify(formData)}`);
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label htmlFor="firstName">First Name:</label>
        <input
          type="text"
          id="firstName"
          name="firstName"
          value={formData.firstName}
          onChange={handleChange}
        />
      </div>
      <div>
        <label htmlFor="lastName">Last Name:</label>
        <input
          type="text"
          id="lastName"
          name="lastName"
          value={formData.lastName}
          onChange={handleChange}
        />
      </div>
      <div>
        <label htmlFor="email">Email:</label>
        <input
          type="email"
          id="email"
          name="email"
          value={formData.email}
          onChange={handleChange}
        />
      </div>
      <button type="submit">Submit</button>
    </form>
  );
}
```

在这个示例中，`formData` 状态对象存储了所有表单字段的值。通过 `handleChange` 函数，我们可以动态更新状态中的特定字段。当表单提交时，`handleSubmit` 函数会阻止默认的表单提交行为，并显示当前的表单数据。

:::caution
**注意**：在处理多个输入字段时，确保使用 `name` 属性来区分不同的字段，并在 `onChange` 事件处理器中正确更新状态。
:::

## 总结

受控组件是 React 和 Next.js 中处理表单输入的一种强大工具。通过将表单元素的值绑定到 React 状态，开发者可以更精确地控制表单的行为和数据流动。本文介绍了受控组件的基本概念、工作原理以及实际应用场景，并通过代码示例展示了如何在 Next.js 中使用受控组件。

## 附加资源与练习

- **官方文档**：阅读 [React 官方文档](https://reactjs.org/docs/forms.html) 中关于受控组件的更多内容。
- **练习**：尝试创建一个包含复选框和下拉菜单的受控组件表单，并处理其提交逻辑。
- **扩展阅读**：了解非受控组件（Uncontrolled Components）及其与受控组件的区别。

通过掌握受控组件，你将能够更高效地处理表单输入，并为用户提供更好的交互体验。继续练习和探索，你将很快成为 Next.js 表单处理的高手！