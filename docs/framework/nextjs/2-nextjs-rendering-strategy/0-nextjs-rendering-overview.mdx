---
title: Next.js 渲染概述
description: "了解 Next.js 中的渲染策略，包括静态生成、服务器端渲染和客户端渲染的区别与应用场景。"
---

# Next.js 渲染概述

Next.js 是一个功能强大的 React 框架，提供了多种渲染策略，帮助开发者构建高性能的 Web 应用。理解这些渲染策略是掌握 Next.js 的关键。本文将详细介绍 Next.js 的渲染方式，并通过实际案例帮助你更好地理解它们的应用场景。

## 什么是渲染策略？

在 Web 开发中，渲染策略决定了页面内容是如何生成并呈现给用户的。Next.js 提供了三种主要的渲染策略：

1. **静态生成（Static Generation, SSG）**
2. **服务器端渲染（Server-Side Rendering, SSR）**
3. **客户端渲染（Client-Side Rendering, CSR）**

每种策略都有其独特的优势和适用场景。接下来，我们将逐一介绍这些策略。

---

## 1. 静态生成（Static Generation, SSG）

静态生成是指在构建时生成 HTML 文件，并在请求时直接返回这些文件。这种方式非常适合内容不经常变化的页面，例如博客、文档或产品展示页面。

### 如何使用静态生成？

在 Next.js 中，你可以通过 `getStaticProps` 函数来实现静态生成。以下是一个简单的示例：

```javascript
export async function getStaticProps() {
  const res = await fetch('https://api.example.com/data');
  const data = await res.json();

  return {
    props: {
      data,
    },
  };
}

export default function Home({ data }) {
  return (
    <div>
      <h1>静态生成示例</h1>
      <p>{data.message}</p>
    </div>
  );
}
```

在这个例子中，`getStaticProps` 在构建时运行，获取数据并生成静态 HTML 文件。当用户访问页面时，Next.js 会直接返回这个预先生成的 HTML 文件。

### 适用场景
- 博客文章
- 产品展示页面
- 文档网站

---

## 2. 服务器端渲染（Server-Side Rendering, SSR）

服务器端渲染是指在每次请求时，服务器动态生成 HTML 并返回给客户端。这种方式适合需要频繁更新数据的页面，例如用户仪表盘或实时数据展示页面。

### 如何使用服务器端渲染？

在 Next.js 中，你可以通过 `getServerSideProps` 函数来实现服务器端渲染。以下是一个示例：

```javascript
export async function getServerSideProps() {
  const res = await fetch('https://api.example.com/live-data');
  const data = await res.json();

  return {
    props: {
      data,
    },
  };
}

export default function Dashboard({ data }) {
  return (
    <div>
      <h1>服务器端渲染示例</h1>
      <p>当前数据: {data.value}</p>
    </div>
  );
}
```

在这个例子中，`getServerSideProps` 在每次请求时运行，动态生成 HTML 并返回给客户端。

### 适用场景
- 用户仪表盘
- 实时数据展示
- 需要频繁更新的页面

---

## 3. 客户端渲染（Client-Side Rendering, CSR）

客户端渲染是指在浏览器中动态生成页面内容。这种方式适合需要高度交互的页面，例如单页应用（SPA）。

### 如何使用客户端渲染？

在 Next.js 中，你可以使用 React 的 `useEffect` 钩子来实现客户端渲染。以下是一个示例：

```javascript
import { useEffect, useState } from 'react';

export default function Profile() {
  const [data, setData] = useState(null);

  useEffect(() => {
    fetch('https://api.example.com/user-data')
      .then((res) => res.json())
      .then((data) => setData(data));
  }, []);

  if (!data) {
    return <p>加载中...</p>;
  }

  return (
    <div>
      <h1>客户端渲染示例</h1>
      <p>用户名: {data.username}</p>
    </div>
  );
}
```

在这个例子中，数据在页面加载后通过客户端 JavaScript 获取并渲染。

### 适用场景
- 单页应用（SPA）
- 高度交互的页面
- 需要动态加载数据的页面

---

## 实际案例

假设你正在开发一个电商网站，以下是不同渲染策略的应用场景：

1. **静态生成**：用于展示产品目录页面，因为产品信息不会频繁变化。
2. **服务器端渲染**：用于用户订单页面，因为订单信息需要实时更新。
3. **客户端渲染**：用于购物车页面，因为需要频繁交互和动态更新。

---

## 总结

Next.js 提供了多种渲染策略，每种策略都有其独特的优势和适用场景。通过合理选择渲染策略，你可以构建出高性能、用户体验良好的 Web 应用。

- **静态生成**：适合内容不经常变化的页面。
- **服务器端渲染**：适合需要实时数据的页面。
- **客户端渲染**：适合高度交互的页面。

---

## 附加资源与练习

1. **练习**：尝试在一个 Next.js 项目中同时使用 `getStaticProps` 和 `getServerSideProps`，并观察它们的区别。
2. **资源**：
   - [Next.js 官方文档](https://nextjs.org/docs)
   - [React 官方文档](https://reactjs.org/docs/getting-started.html)

:::tip
如果你对 Next.js 的渲染策略还有疑问，可以参考官方文档或加入社区讨论。
:::