---
title: Next.js 内容管理系统
description: "学习如何使用 Next.js 构建一个简单的内容管理系统（CMS），适合初学者入门。"
---

## 介绍

在现代 Web 开发中，内容管理系统（CMS）是一个非常重要的工具。它允许用户轻松管理和发布内容，而无需深入了解技术细节。Next.js 是一个强大的 React 框架，提供了服务器端渲染（SSR）、静态生成（SSG）和 API 路由等功能，非常适合构建 CMS。

在本教程中，我们将使用 Next.js 构建一个简单的内容管理系统。我们将涵盖从项目初始化到实现基本功能的完整流程，适合初学者学习。

## 项目初始化

首先，我们需要创建一个新的 Next.js 项目。打开终端并运行以下命令：

```bash
npx create-next-app nextjs-cms
cd nextjs-cms
```

这将创建一个名为 `nextjs-cms` 的新项目，并进入项目目录。

## 创建页面

Next.js 使用文件系统路由，这意味着在 `pages` 目录下创建的文件会自动成为路由。让我们创建一个简单的首页。

在 `pages/index.js` 文件中，添加以下代码：

```javascript
export default function Home() {
  return (
    <div>
      <h1>欢迎来到 Next.js CMS</h1>
      <p>这是一个简单的内容管理系统。</p>
    </div>
  );
}
```

现在，运行 `npm run dev` 并访问 `http://localhost:3000`，你应该会看到刚刚创建的首页。

## 添加内容管理功能

接下来，我们将添加一个简单的表单，允许用户提交内容。我们将使用 Next.js 的 API 路由来处理表单提交。

### 创建 API 路由

在 `pages/api` 目录下创建一个新文件 `submit.js`，并添加以下代码：

```javascript
export default function handler(req, res) {
  if (req.method === 'POST') {
    const { title, content } = req.body;
    // 在这里处理内容存储逻辑
    res.status(200).json({ message: '内容提交成功', title, content });
  } else {
    res.status(405).json({ message: '仅支持 POST 请求' });
  }
}
```

### 创建表单页面

在 `pages/submit.js` 文件中，添加以下代码：

```javascript
import { useState } from 'react';

export default function Submit() {
  const [title, setTitle] = useState('');
  const [content, setContent] = useState('');
  const [message, setMessage] = useState('');

  const handleSubmit = async (e) => {
    e.preventDefault();
    const response = await fetch('/api/submit', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ title, content }),
    });
    const data = await response.json();
    setMessage(data.message);
  };

  return (
    <div>
      <h1>提交新内容</h1>
      <form onSubmit={handleSubmit}>
        <div>
          <label>标题:</label>
          <input
            type="text"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
            required
          />
        </div>
        <div>
          <label>内容:</label>
          <textarea
            value={content}
            onChange={(e) => setContent(e.target.value)}
            required
          />
        </div>
        <button type="submit">提交</button>
      </form>
      {message && <p>{message}</p>}
    </div>
  );
}
```

现在，访问 `http://localhost:3000/submit`，你应该会看到一个表单，允许用户提交内容。

## 实际案例

假设我们正在为一个博客网站构建 CMS。用户可以通过表单提交新的博客文章，然后这些文章会被存储并显示在博客首页上。

### 显示内容

在 `pages/index.js` 文件中，我们可以添加一个简单的列表来显示提交的内容。假设我们使用一个数组来存储内容：

```javascript
import { useState } from 'react';

export default function Home() {
  const [posts, setPosts] = useState([]);

  const fetchPosts = async () => {
    const response = await fetch('/api/posts');
    const data = await response.json();
    setPosts(data);
  };

  return (
    <div>
      <h1>欢迎来到 Next.js CMS</h1>
      <p>这是一个简单的内容管理系统。</p>
      <button onClick={fetchPosts}>加载内容</button>
      <ul>
        {posts.map((post, index) => (
          <li key={index}>
            <h2>{post.title}</h2>
            <p>{post.content}</p>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

### 创建获取内容的 API 路由

在 `pages/api/posts.js` 文件中，添加以下代码：

```javascript
let posts = [];

export default function handler(req, res) {
  if (req.method === 'GET') {
    res.status(200).json(posts);
  } else if (req.method === 'POST') {
    const { title, content } = req.body;
    posts.push({ title, content });
    res.status(200).json({ message: '内容提交成功', title, content });
  } else {
    res.status(405).json({ message: '仅支持 GET 和 POST 请求' });
  }
}
```

现在，用户可以提交内容，并在首页上查看所有提交的内容。

## 总结

在本教程中，我们使用 Next.js 构建了一个简单的内容管理系统。我们学习了如何创建页面、处理表单提交、使用 API 路由以及显示内容。虽然这个 CMS 非常简单，但它为你提供了一个良好的起点，可以在此基础上进一步扩展功能。

:::tip
你可以尝试添加更多功能，例如用户认证、内容编辑和删除功能，或者将内容存储在数据库中。
:::

## 附加资源

- [Next.js 官方文档](https://nextjs.org/docs)
- [React 官方文档](https://reactjs.org/docs/getting-started.html)
- [MDX 文档](https://mdxjs.com/)

## 练习

1. 尝试将内容存储在本地存储或数据库中，而不是内存中。
2. 添加一个编辑功能，允许用户修改已提交的内容。
3. 实现用户认证，确保只有登录用户才能提交内容。

祝你学习愉快！