---
title: 静态资源处理
description: 了解如何在 Vue.js 项目中处理静态资源，包括图片、字体、样式表等，并学习如何优化构建和部署流程。
---

在 Vue.js 项目中，静态资源（如图片、字体、样式表等）是构建用户界面的重要组成部分。正确处理这些资源不仅能提升应用的性能，还能确保开发和生产环境的一致性。本文将详细介绍如何在 Vue.js 项目中处理静态资源，并提供实际案例和代码示例。

## 什么是静态资源？

静态资源是指在应用运行期间不会发生变化的文件，例如图片、字体、样式表和 JavaScript 文件。这些资源通常存储在项目的 `public` 或 `assets` 目录中，并在构建过程中被处理。

## 静态资源的存放位置

在 Vue.js 项目中，静态资源通常存放在以下两个目录中：

1. **`public` 目录**：该目录中的文件会被直接复制到构建输出目录中，不会被 Webpack 处理。适合存放不需要经过构建处理的文件，如 `favicon.ico` 或 `robots.txt`。

2. **`assets` 目录**：该目录中的文件会被 Webpack 处理，适合存放需要经过构建优化的资源，如图片、字体和样式表。

## 如何在 Vue.js 中引用静态资源

### 1. 引用 `public` 目录中的文件

在 `public` 目录中的文件可以通过绝对路径引用。例如，如果你在 `public` 目录中有一个 `logo.png` 文件，可以通过以下方式引用：

```html
<img src="/logo.png" alt="Logo" />
```

### 2. 引用 `assets` 目录中的文件

在 `assets` 目录中的文件可以通过相对路径引用，并且会被 Webpack 处理。例如，如果你在 `assets` 目录中有一个 `logo.png` 文件，可以通过以下方式引用：

```html
<img src="@/assets/logo.png" alt="Logo" />
```

:::note
`@` 是 Vue CLI 提供的别名，指向 `src` 目录。
:::

## 处理图片资源

在 Vue.js 中，图片资源可以通过 `img` 标签或 CSS 背景图的方式引用。Webpack 会自动处理这些图片资源，并根据配置进行优化。

### 示例：使用 `img` 标签引用图片

```html
<template>
  <div>
    <img src="@/assets/logo.png" alt="Logo" />
  </div>
</template>
```

### 示例：使用 CSS 背景图

```css
<style scoped>
.logo {
  background-image: url('@/assets/logo.png');
  width: 100px;
  height: 100px;
}
</style>
```

## 处理字体资源

字体文件通常存放在 `assets/fonts` 目录中，并通过 CSS 引用。Webpack 会处理这些字体文件，并将它们打包到构建输出目录中。

### 示例：引用字体文件

```css
@font-face {
  font-family: 'MyFont';
  src: url('@/assets/fonts/myfont.woff2') format('woff2'),
       url('@/assets/fonts/myfont.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}

body {
  font-family: 'MyFont', sans-serif;
}
```

## 处理样式表资源

样式表文件可以通过 `import` 语句引入，Webpack 会将这些样式表打包到最终的 CSS 文件中。

### 示例：引入样式表

```javascript
import '@/assets/styles/main.css';
```

## 实际案例：优化图片加载

在实际项目中，图片加载是一个常见的性能瓶颈。我们可以通过以下方式优化图片加载：

1. **使用 Webpack 的 `url-loader` 或 `file-loader`**：这些加载器可以将小图片转换为 Base64 编码，减少 HTTP 请求。

2. **使用 `image-webpack-loader`**：该加载器可以压缩图片，减少文件大小。

### 示例：配置 Webpack 优化图片加载

```javascript
// vue.config.js
module.exports = {
  chainWebpack: config => {
    config.module
      .rule('images')
      .use('url-loader')
      .loader('url-loader')
      .tap(options => {
        options.limit = 8192; // 小于 8KB 的图片转换为 Base64
        return options;
      });

    config.module
      .rule('images')
      .use('image-webpack-loader')
      .loader('image-webpack-loader')
      .options({
        mozjpeg: {
          progressive: true,
          quality: 65
        },
        optipng: {
          enabled: false,
        },
        pngquant: {
          quality: [0.65, 0.90],
          speed: 4
        },
        gifsicle: {
          interlaced: false,
        },
        webp: {
          quality: 75
        }
      });
  }
};
```

## 总结

在 Vue.js 项目中，正确处理静态资源是提升应用性能和用户体验的关键。通过合理存放和引用静态资源，并结合 Webpack 的优化配置，我们可以有效地管理和优化这些资源。

## 附加资源与练习

- **练习 1**：尝试在 Vue.js 项目中引用不同类型的静态资源（如图片、字体、样式表），并观察构建后的输出。
- **练习 2**：配置 Webpack 优化图片加载，比较优化前后的文件大小和加载速度。
- **阅读资源**：Vue CLI 官方文档中的 [静态资源处理](https://cli.vuejs.org/zh/guide/html-and-static-assets.html) 部分。

通过本文的学习，你应该已经掌握了如何在 Vue.js 项目中处理静态资源。继续实践和探索，你将能够更好地优化你的应用！