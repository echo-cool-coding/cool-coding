---
title: Vue.js计算属性
description: 学习 Vue.js 中的计算属性，了解其工作原理、使用场景以及如何在实际项目中应用。
---

# Vue.js计算属性

在 Vue.js 中，计算属性（Computed Properties）是一种强大的功能，它允许你声明式地定义依赖于其他数据的属性。计算属性的值会根据其依赖的数据自动更新，这使得它们非常适合用于处理复杂的逻辑或数据转换。

## 什么是计算属性？

计算属性是基于 Vue 实例的响应式数据进行计算的属性。它们类似于方法，但具有缓存机制：只有当依赖的数据发生变化时，计算属性才会重新计算。这使得计算属性在性能上比方法更高效，尤其是在处理复杂计算时。

### 计算属性的基本语法

在 Vue 组件中，你可以通过 `computed` 选项来定义计算属性。以下是一个简单的示例：

```javascript
<template>
  <div>
    <p>原始消息: {{ message }}</p>
    <p>反转后的消息: {{ reversedMessage }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      message: 'Hello, Vue.js!'
    };
  },
  computed: {
    reversedMessage() {
      return this.message.split('').reverse().join('');
    }
  }
};
</script>
```

在这个示例中，`reversedMessage` 是一个计算属性，它依赖于 `message` 数据。每当 `message` 发生变化时，`reversedMessage` 会自动更新。

### 计算属性 vs 方法

你可能会问，为什么不直接使用方法来实现相同的功能？虽然方法也可以实现类似的效果，但计算属性具有以下优势：

1. **缓存机制**：计算属性会缓存结果，只有在依赖的数据发生变化时才会重新计算。而方法每次调用时都会重新执行。
2. **声明式代码**：计算属性使得代码更加简洁和易读，因为它们直接声明了依赖关系。

以下是一个使用方法的示例：

```javascript
<template>
  <div>
    <p>原始消息: {{ message }}</p>
    <p>反转后的消息: {{ reverseMessage() }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      message: 'Hello, Vue.js!'
    };
  },
  methods: {
    reverseMessage() {
      return this.message.split('').reverse().join('');
    }
  }
};
</script>
```

虽然这个示例也能正常工作，但每次渲染时都会调用 `reverseMessage` 方法，这在性能上不如计算属性高效。

### 计算属性的实际应用

计算属性在实际开发中有许多应用场景。以下是一些常见的例子：

#### 1. 数据过滤

假设你有一个用户列表，并且需要根据用户的输入来过滤列表。你可以使用计算属性来实现这一功能：

```javascript
<template>
  <div>
    <input v-model="searchQuery" placeholder="搜索用户" />
    <ul>
      <li v-for="user in filteredUsers" :key="user.id">{{ user.name }}</li>
    </ul>
  </div>
</template>

<script>
export default {
  data() {
    return {
      searchQuery: '',
      users: [
        { id: 1, name: 'Alice' },
        { id: 2, name: 'Bob' },
        { id: 3, name: 'Charlie' }
      ]
    };
  },
  computed: {
    filteredUsers() {
      return this.users.filter(user =>
        user.name.toLowerCase().includes(this.searchQuery.toLowerCase())
      );
    }
  }
};
</script>
```

在这个示例中，`filteredUsers` 计算属性会根据 `searchQuery` 的值动态过滤用户列表。

#### 2. 数据格式化

计算属性还可以用于格式化数据。例如，你可以将日期格式化为更易读的形式：

```javascript
<template>
  <div>
    <p>原始日期: {{ rawDate }}</p>
    <p>格式化后的日期: {{ formattedDate }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      rawDate: '2023-10-05'
    };
  },
  computed: {
    formattedDate() {
      const date = new Date(this.rawDate);
      return date.toLocaleDateString('zh-CN', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
      });
    }
  }
};
</script>
```

在这个示例中，`formattedDate` 计算属性将 `rawDate` 格式化为更易读的中文日期格式。

### 计算属性的高级用法

#### 1. 计算属性的 setter

计算属性默认是只读的，但你可以通过定义 `get` 和 `set` 方法来创建一个可写的计算属性：

```javascript
<template>
  <div>
    <p>全名: {{ fullName }}</p>
    <input v-model="firstName" placeholder="名字" />
    <input v-model="lastName" placeholder="姓氏" />
  </div>
</template>

<script>
export default {
  data() {
    return {
      firstName: '张',
      lastName: '三'
    };
  },
  computed: {
    fullName: {
      get() {
        return `${this.firstName} ${this.lastName}`;
      },
      set(newValue) {
        const names = newValue.split(' ');
        this.firstName = names[0];
        this.lastName = names[names.length - 1];
      }
    }
  }
};
</script>
```

在这个示例中，`fullName` 计算属性既可以读取也可以写入。当你修改 `fullName` 时，`firstName` 和 `lastName` 会自动更新。

#### 2. 依赖多个数据的计算属性

计算属性可以依赖于多个数据源。以下是一个依赖于多个数据的计算属性示例：

```javascript
<template>
  <div>
    <p>总价: {{ totalPrice }}</p>
  </div>
</template>

<script>
export default {
  data() {
    return {
      quantity: 2,
      price: 100
    };
  },
  computed: {
    totalPrice() {
      return this.quantity * this.price;
    }
  }
};
</script>
```

在这个示例中，`totalPrice` 计算属性依赖于 `quantity` 和 `price` 两个数据源。

### 总结

Vue.js 的计算属性是一种强大的工具，可以帮助你简化代码并提高性能。通过缓存机制和声明式编程，计算属性使得处理复杂逻辑变得更加容易。在实际开发中，计算属性可以用于数据过滤、格式化、依赖多个数据源等场景。

:::tip 提示
如果你需要在 Vue.js 中处理复杂的逻辑或数据转换，计算属性通常是比方法更好的选择。
:::

### 附加资源与练习

- **官方文档**：阅读 [Vue.js 官方文档](https://v3.vuejs.org/guide/computed.html) 以了解更多关于计算属性的详细信息。
- **练习**：尝试在你的 Vue.js 项目中使用计算属性来实现一个动态过滤列表的功能。

通过不断练习和应用，你将能够更好地掌握 Vue.js 的计算属性，并在实际项目中灵活运用它们。