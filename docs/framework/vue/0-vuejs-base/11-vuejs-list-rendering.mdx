---
title: Vue.js列表渲染
description: 学习如何在 Vue.js 中使用 `v-for` 指令进行列表渲染，掌握动态生成列表、键值绑定以及优化渲染性能的技巧。
---

## 介绍

在 Vue.js 中，列表渲染是一个非常常见的需求。无论是展示一组数据，还是动态生成一组 DOM 元素，Vue.js 都提供了强大的工具来帮助我们实现这一功能。Vue.js 通过 `v-for` 指令来实现列表渲染，它允许我们基于数组或对象动态生成内容。

在本节中，我们将深入探讨 `v-for` 的使用方法，包括如何渲染数组、对象，以及如何通过 `key` 属性优化渲染性能。

---

## 基础用法：渲染数组

`v-for` 最常见的用法是遍历数组并生成一组 DOM 元素。以下是一个简单的示例：

```vue
<template>
  <ul>
    <li v-for="item in items" :key="item.id">
      {{ item.name }}
    </li>
  </ul>
</template>

<script>
export default {
  data() {
    return {
      items: [
        { id: 1, name: 'Apple' },
        { id: 2, name: 'Banana' },
        { id: 3, name: 'Cherry' }
      ]
    };
  }
};
</script>
```

### 输出结果：
- Apple
- Banana
- Cherry

### 代码解析：
1. `v-for="item in items"`：遍历 `items` 数组，`item` 是当前遍历的元素。
2. `:key="item.id"`：为每个元素绑定唯一的 `key`，帮助 Vue.js 高效地更新 DOM。
3. `{{ item.name }}`：显示当前元素的 `name` 属性。

:::tip
始终为 `v-for` 渲染的元素绑定 `key` 属性，这有助于 Vue.js 识别每个节点的唯一性，从而优化渲染性能。
:::

---

## 渲染对象

除了数组，`v-for` 还可以用于遍历对象的属性。以下是一个示例：

```vue
<template>
  <ul>
    <li v-for="(value, key) in user" :key="key">
      {{ key }}: {{ value }}
    </li>
  </ul>
</template>

<script>
export default {
  data() {
    return {
      user: {
        name: 'John Doe',
        age: 30,
        email: 'john@example.com'
      }
    };
  }
};
</script>
```

### 输出结果：
- name: John Doe
- age: 30
- email: john@example.com

### 代码解析：
1. `v-for="(value, key) in user"`：遍历 `user` 对象，`value` 是属性值，`key` 是属性名。
2. `:key="key"`：使用属性名作为 `key`。

---

## 使用索引

在遍历数组时，我们还可以获取当前元素的索引。以下是一个示例：

```vue
<template>
  <ul>
    <li v-for="(item, index) in items" :key="item.id">
      {{ index + 1 }}. {{ item.name }}
    </li>
  </ul>
</template>

<script>
export default {
  data() {
    return {
      items: [
        { id: 1, name: 'Apple' },
        { id: 2, name: 'Banana' },
        { id: 3, name: 'Cherry' }
      ]
    };
  }
};
</script>
```

### 输出结果：
1. Apple  
2. Banana  
3. Cherry  

### 代码解析：
1. `v-for="(item, index) in items"`：`item` 是当前元素，`index` 是当前索引。
2. `{{ index + 1 }}`：显示索引值（从 1 开始）。

---

## 实际应用场景

### 场景 1：动态生成表格
假设我们需要从后端获取一组用户数据并渲染成表格：

```vue
<template>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Email</th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="user in users" :key="user.id">
        <td>{{ user.id }}</td>
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
      </tr>
    </tbody>
  </table>
</template>

<script>
export default {
  data() {
    return {
      users: [
        { id: 1, name: 'Alice', email: 'alice@example.com' },
        { id: 2, name: 'Bob', email: 'bob@example.com' },
        { id: 3, name: 'Charlie', email: 'charlie@example.com' }
      ]
    };
  }
};
</script>
```

### 场景 2：渲染嵌套数据
有时我们需要渲染嵌套的数据结构，例如一个包含多个任务的任务列表：

```vue
<template>
  <div v-for="project in projects" :key="project.id">
    <h3>{{ project.name }}</h3>
    <ul>
      <li v-for="task in project.tasks" :key="task.id">
        {{ task.description }}
      </li>
    </ul>
  </div>
</template>

<script>
export default {
  data() {
    return {
      projects: [
        {
          id: 1,
          name: 'Project A',
          tasks: [
            { id: 1, description: 'Task 1' },
            { id: 2, description: 'Task 2' }
          ]
        },
        {
          id: 2,
          name: 'Project B',
          tasks: [
            { id: 3, description: 'Task 3' },
            { id: 4, description: 'Task 4' }
          ]
        }
      ]
    };
  }
};
</script>
```

---

## 总结

通过 `v-for` 指令，我们可以轻松地在 Vue.js 中实现列表渲染。无论是数组、对象还是嵌套数据结构，`v-for` 都能胜任。记住以下几点：
1. 始终为 `v-for` 渲染的元素绑定 `key` 属性。
2. 可以通过索引或键值对访问当前元素的位置或属性。
3. `v-for` 可以与其他指令（如 `v-if`）结合使用，实现更复杂的逻辑。

---

## 附加资源与练习

### 练习：
1. 尝试使用 `v-for` 渲染一个包含嵌套对象的数据结构。
2. 结合 `v-if` 指令，实现条件渲染列表中的某些元素。

### 进一步学习：
- [Vue.js 官方文档 - 列表渲染](https://v3.vuejs.org/guide/list.html)
- Vue.js 中的 `key` 属性及其重要性