---
title: Fetch API 使用
description: 学习如何在 Vue.js 中使用 Fetch API 与后端 API 进行交互。本文将从基础概念入手，逐步讲解 Fetch API 的使用方法，并提供实际案例和代码示例。
---

# Fetch API 使用

在现代 Web 开发中，前端与后端 API 的交互是至关重要的。Vue.js 作为一个流行的前端框架，提供了多种方式与 API 进行交互，其中 `Fetch API` 是一种简单且强大的工具。本文将详细介绍如何在 Vue.js 中使用 Fetch API 进行数据请求。

## 什么是 Fetch API？

`Fetch API` 是一个现代 JavaScript 接口，用于发起网络请求并处理响应。它提供了一个简单、灵活的方式来获取资源（如 JSON 数据、文本、图片等），并且支持 Promise，使得异步操作更加直观和易于管理。

与传统的 `XMLHttpRequest` 相比，`Fetch API` 更加简洁和强大，是现代 Web 开发中的首选工具。

## 基本用法

`Fetch API` 的基本语法如下：

```javascript
fetch(url, options)
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));
```

- `url`：请求的目标 URL。
- `options`：可选的配置对象，用于指定请求方法、请求头、请求体等。
- `response`：响应对象，包含响应的状态、头信息等。
- `data`：解析后的响应数据。

### 示例：获取 JSON 数据

假设我们有一个 API 端点 `https://api.example.com/data`，返回一个 JSON 格式的数据。我们可以使用以下代码来获取并处理这些数据：

```javascript
fetch('https://api.example.com/data')
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    console.log('Data:', data);
  })
  .catch(error => {
    console.error('There was a problem with the fetch operation:', error);
  });
```

在这个示例中，我们首先检查响应是否成功（`response.ok`），然后解析 JSON 数据并打印到控制台。

## 请求方法

`Fetch API` 支持多种 HTTP 请求方法，如 `GET`、`POST`、`PUT`、`DELETE` 等。默认情况下，`fetch` 使用 `GET` 方法，但可以通过 `options` 对象指定其他方法。

### 示例：发送 POST 请求

假设我们需要向服务器发送一些数据，可以使用 `POST` 方法：

```javascript
fetch('https://api.example.com/data', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    name: 'John Doe',
    email: 'john@example.com',
  }),
})
  .then(response => response.json())
  .then(data => {
    console.log('Success:', data);
  })
  .catch(error => {
    console.error('Error:', error);
  });
```

在这个示例中，我们指定了请求方法为 `POST`，并设置了请求头 `Content-Type` 为 `application/json`。请求体是一个 JSON 字符串，包含了要发送的数据。

## 处理响应

`Fetch API` 的响应对象提供了多种方法来处理不同类型的响应数据，如 `response.json()`、`response.text()`、`response.blob()` 等。

### 示例：处理文本响应

如果 API 返回的是纯文本数据，可以使用 `response.text()` 来解析：

```javascript
fetch('https://api.example.com/text')
  .then(response => response.text())
  .then(text => {
    console.log('Text:', text);
  })
  .catch(error => {
    console.error('Error:', error);
  });
```

## 实际应用场景

### 场景：在 Vue.js 中获取并显示数据

假设我们正在开发一个 Vue.js 应用，需要从 API 获取用户列表并显示在页面上。我们可以使用 `Fetch API` 来实现这一功能：

```javascript
<template>
  <div>
    <h1>User List</h1>
    <ul>
      <li v-for="user in users" :key="user.id">{{ user.name }}</li>
    </ul>
  </div>
</template>

<script>
export default {
  data() {
    return {
      users: [],
    };
  },
  created() {
    this.fetchUsers();
  },
  methods: {
    async fetchUsers() {
      try {
        const response = await fetch('https://api.example.com/users');
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        this.users = await response.json();
      } catch (error) {
        console.error('There was a problem with the fetch operation:', error);
      }
    },
  },
};
</script>
```

在这个示例中，我们在 Vue 组件的 `created` 钩子中调用 `fetchUsers` 方法，使用 `Fetch API` 获取用户数据并存储在 `users` 数组中，然后在模板中使用 `v-for` 指令渲染用户列表。

## 总结

`Fetch API` 是一个强大且灵活的工具，适用于现代 Web 开发中的各种数据请求场景。通过本文的学习，你应该已经掌握了如何在 Vue.js 中使用 `Fetch API` 进行数据交互。

### 附加资源

- [MDN Web Docs: Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)
- [Vue.js 官方文档](https://vuejs.org/)

### 练习

1. 尝试使用 `Fetch API` 获取一个公开的 API（如 [JSONPlaceholder](https://jsonplaceholder.typicode.com/)）的数据，并在 Vue.js 应用中显示。
2. 修改示例代码，使其支持分页加载更多用户数据。

通过实践这些练习，你将更深入地理解 `Fetch API` 的使用方法，并能够在实际项目中灵活应用。