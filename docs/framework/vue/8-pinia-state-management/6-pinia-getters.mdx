---
title: Pinia Getters
description: 了解 Pinia 中的 Getters，掌握如何通过 Getters 派生和计算状态，提升状态管理的灵活性和可维护性。
---

# Pinia Getters

在 Pinia 中，Getters 是用于从状态中派生或计算新值的函数。它们类似于 Vuex 中的 Getters，但更加简洁和灵活。Getters 可以帮助我们从 Store 的状态中提取复杂逻辑，使代码更具可读性和可维护性。

## 什么是 Getters？

Getters 是 Store 中的计算属性。它们接收 Store 的状态作为参数，并返回一个派生值。Getters 可以用于过滤、排序、计算或组合状态数据，而无需直接修改状态本身。

### 基本语法

在 Pinia 中，Getters 是通过 `getters` 属性定义的。每个 Getter 都是一个函数，接收 `state` 作为参数，并返回一个值。

```javascript
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0,
  }),
  getters: {
    doubleCount: (state) => state.count * 2,
  },
});
```

在上面的例子中，`doubleCount` 是一个 Getter，它返回 `count` 的两倍。

## 使用 Getters

### 访问 Getters

在组件中，可以通过 Store 实例直接访问 Getters，就像访问普通属性一样。

```javascript
import { useCounterStore } from './stores/counter';

const counterStore = useCounterStore();
console.log(counterStore.doubleCount); // 输出: 0
```

### 带参数的 Getters

Getters 也可以接收参数。虽然 Getters 本身是函数，但 Pinia 会自动缓存它们的结果，以提高性能。

```javascript
getters: {
  multiplyCount: (state) => (multiplier) => state.count * multiplier,
}
```

在组件中使用时：

```javascript
console.log(counterStore.multiplyCount(3)); // 输出: 0
```

## 实际应用场景

### 过滤列表

假设我们有一个 Store，存储了一个任务列表。我们可以使用 Getters 来过滤已完成的任务。

```javascript
import { defineStore } from 'pinia';

export const useTaskStore = defineStore('task', {
  state: () => ({
    tasks: [
      { id: 1, title: 'Learn Pinia', completed: false },
      { id: 2, title: 'Build a project', completed: true },
    ],
  }),
  getters: {
    completedTasks: (state) => state.tasks.filter(task => task.completed),
  },
});
```

在组件中：

```javascript
import { useTaskStore } from './stores/task';

const taskStore = useTaskStore();
console.log(taskStore.completedTasks); // 输出: [{ id: 2, title: 'Build a project', completed: true }]
```

### 计算购物车总价

在电商应用中，我们可以使用 Getters 来计算购物车中商品的总价。

```javascript
import { defineStore } from 'pinia';

export const useCartStore = defineStore('cart', {
  state: () => ({
    items: [
      { id: 1, name: 'Product A', price: 10, quantity: 2 },
      { id: 2, name: 'Product B', price: 20, quantity: 1 },
    ],
  }),
  getters: {
    totalPrice: (state) => state.items.reduce((total, item) => total + item.price * item.quantity, 0),
  },
});
```

在组件中：

```javascript
import { useCartStore } from './stores/cart';

const cartStore = useCartStore();
console.log(cartStore.totalPrice); // 输出: 40
```

## 总结

Pinia 的 Getters 提供了一种强大的方式来派生和计算状态，使状态管理更加灵活和高效。通过 Getters，我们可以轻松地从 Store 中提取复杂逻辑，并在组件中直接使用这些计算值。

:::tip
Getters 是只读的，它们不会修改状态。如果需要修改状态，请使用 Actions。
:::

## 附加资源

- [Pinia 官方文档](https://pinia.vuejs.org/)
- [Vue.js 官方文档](https://vuejs.org/)

## 练习

1. 创建一个 Store，存储用户信息，并使用 Getters 计算用户的年龄。
2. 在购物车示例中，添加一个 Getter 来计算商品的折扣总价。

通过练习，你将更好地理解 Pinia Getters 的使用场景和优势。