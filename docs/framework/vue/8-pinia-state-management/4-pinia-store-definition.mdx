---
title: Pinia Store 定义
description: 了解如何在 Pinia 中定义 Store，掌握状态管理的基础知识，并通过实际案例加深理解。
---

## 介绍

Pinia 是 Vue.js 的轻量级状态管理库，它提供了一个简单且强大的方式来管理应用程序的状态。在 Pinia 中，**Store** 是状态管理的核心单元。每个 Store 都是一个独立的模块，包含状态（state）、动作（actions）和获取器（getters）。通过定义 Store，你可以将应用程序的状态逻辑集中管理，从而提高代码的可维护性和可读性。

本文将详细介绍如何在 Pinia 中定义 Store，并通过实际案例帮助你理解其应用场景。

## 定义 Pinia Store

在 Pinia 中，Store 是通过 `defineStore` 函数定义的。`defineStore` 接受两个参数：Store 的唯一标识符和一个包含状态、动作和获取器的对象。

### 基本结构

以下是一个简单的 Store 定义示例：

```javascript
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0,
  }),
  actions: {
    increment() {
      this.count++;
    },
    decrement() {
      this.count--;
    },
  },
  getters: {
    doubleCount: (state) => state.count * 2,
  },
});
```

在这个示例中，我们定义了一个名为 `counter` 的 Store，它包含一个状态 `count`，两个动作 `increment` 和 `decrement`，以及一个获取器 `doubleCount`。

### 状态（State）

状态是 Store 的核心部分，它存储了应用程序的数据。在 Pinia 中，状态是通过一个返回对象的函数定义的。这个函数在 Store 初始化时被调用，返回的对象就是 Store 的初始状态。

```javascript
state: () => ({
  count: 0,
}),
```

### 动作（Actions）

动作是 Store 中用于修改状态的方法。它们可以是同步的，也可以是异步的。动作通过 `this` 访问 Store 的状态和其他方法。

```javascript
actions: {
  increment() {
    this.count++;
  },
  decrement() {
    this.count--;
  },
},
```

### 获取器（Getters）

获取器是 Store 中用于计算派生状态的方法。它们类似于 Vue 组件中的计算属性。获取器通过 `state` 参数访问 Store 的状态。

```javascript
getters: {
  doubleCount: (state) => state.count * 2,
},
```

## 实际案例

假设我们正在开发一个简单的计数器应用，用户可以通过点击按钮来增加或减少计数器的值。我们可以使用上面定义的 `useCounterStore` 来管理计数器的状态。

### 在组件中使用 Store

首先，我们需要在组件中导入并使用 Store：

```javascript
<template>
  <div>
    <p>Count: {{ count }}</p>
    <p>Double Count: {{ doubleCount }}</p>
    <button @click="increment">Increment</button>
    <button @click="decrement">Decrement</button>
  </div>
</template>

<script>
import { useCounterStore } from './stores/counter';

export default {
  setup() {
    const counterStore = useCounterStore();

    return {
      count: counterStore.count,
      doubleCount: counterStore.doubleCount,
      increment: counterStore.increment,
      decrement: counterStore.decrement,
    };
  },
};
</script>
```

在这个组件中，我们通过 `useCounterStore` 获取 Store 的实例，并将其状态和动作绑定到组件的模板中。

### 运行结果

当用户点击 "Increment" 按钮时，计数器的值会增加，并且 "Double Count" 会自动更新为当前计数值的两倍。同样，点击 "Decrement" 按钮会减少计数器的值。

## 总结

通过本文，你已经了解了如何在 Pinia 中定义 Store，并掌握了状态、动作和获取器的基本概念。我们还通过一个简单的计数器应用展示了如何在 Vue 组件中使用 Store 来管理状态。

Pinia 提供了一个简单且强大的状态管理解决方案，适用于各种规模的应用程序。通过合理地定义和使用 Store，你可以有效地组织和管理应用程序的状态逻辑。

## 附加资源

- [Pinia 官方文档](https://pinia.vuejs.org/)
- [Vue.js 官方文档](https://vuejs.org/)
- [Vue Mastery - Pinia 教程](https://www.vuemastery.com/courses/pinia-fundamentals)

## 练习

1. 尝试扩展上面的计数器应用，添加一个重置按钮，将计数器的值重置为 0。
2. 创建一个新的 Store，用于管理用户登录状态，并在组件中使用它来显示登录/注销按钮。