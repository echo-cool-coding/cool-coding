---
title: Vue.js列表过渡
description: 学习如何在 Vue.js 中使用列表过渡，为动态列表中的元素添加平滑的过渡效果。本文适合初学者，包含详细的代码示例和实际应用场景。
---

# Vue.js列表过渡

在 Vue.js 中，过渡（Transition）和动画（Animation）是增强用户体验的重要工具。通过过渡效果，我们可以让元素的插入、更新和移除变得更加平滑和自然。而列表过渡（List Transition）则是专门为动态列表设计的过渡效果，能够为列表中的每个元素提供独立的过渡行为。

## 什么是列表过渡？

列表过渡是指当列表中的元素被添加、移除或重新排序时，Vue.js 会自动为这些元素应用过渡效果。Vue.js 提供了一个内置的 `<transition-group>` 组件，专门用于处理列表过渡。与 `<transition>` 组件不同，`<transition-group>` 会为列表中的每个元素生成一个包裹元素，并为这些元素应用过渡效果。

### 基本用法

要使用列表过渡，首先需要将 `<transition-group>` 组件包裹在动态列表的外层。以下是一个简单的示例：

```vue
<template>
  <div>
    <button @click="addItem">添加项目</button>
    <button @click="removeItem">移除项目</button>
    <transition-group name="list" tag="ul">
      <li v-for="item in items" :key="item.id">{{ item.text }}</li>
    </transition-group>
  </div>
</template>

<script>
export default {
  data() {
    return {
      items: [
        { id: 1, text: '项目 1' },
        { id: 2, text: '项目 2' },
        { id: 3, text: '项目 3' }
      ],
      nextId: 4
    };
  },
  methods: {
    addItem() {
      this.items.push({ id: this.nextId++, text: `项目 ${this.nextId}` });
    },
    removeItem() {
      this.items.pop();
    }
  }
};
</script>

<style>
.list-enter-active, .list-leave-active {
  transition: opacity 0.5s, transform 0.5s;
}
.list-enter, .list-leave-to {
  opacity: 0;
  transform: translateY(30px);
}
</style>
```

在这个示例中，我们创建了一个简单的列表，并通过按钮动态添加和移除列表项。`<transition-group>` 组件会为每个列表项应用过渡效果。`name="list"` 属性指定了过渡类名的前缀，而 `tag="ul"` 属性则指定了包裹元素的标签。

### 过渡类名

Vue.js 为列表过渡提供了以下类名：

- `.list-enter`：元素进入时的初始状态。
- `.list-enter-active`：元素进入时的过渡状态。
- `.list-enter-to`：元素进入时的结束状态。
- `.list-leave`：元素离开时的初始状态。
- `.list-leave-active`：元素离开时的过渡状态。
- `.list-leave-to`：元素离开时的结束状态。

通过定义这些类名，我们可以控制列表项在进入和离开时的过渡效果。

### 实际应用场景

列表过渡在实际开发中有很多应用场景。例如，在一个待办事项应用中，当用户添加或删除任务时，可以使用列表过渡来平滑地显示这些变化。以下是一个待办事项列表的示例：

```vue
<template>
  <div>
    <input v-model="newTask" @keyup.enter="addTask" placeholder="添加新任务" />
    <transition-group name="task-list" tag="ul">
      <li v-for="task in tasks" :key="task.id">
        {{ task.text }}
        <button @click="removeTask(task.id)">删除</button>
      </li>
    </transition-group>
  </div>
</template>

<script>
export default {
  data() {
    return {
      newTask: '',
      tasks: [
        { id: 1, text: '学习 Vue.js' },
        { id: 2, text: '完成项目' },
        { id: 3, text: '阅读文档' }
      ],
      nextId: 4
    };
  },
  methods: {
    addTask() {
      if (this.newTask.trim() === '') return;
      this.tasks.push({ id: this.nextId++, text: this.newTask });
      this.newTask = '';
    },
    removeTask(id) {
      this.tasks = this.tasks.filter(task => task.id !== id);
    }
  }
};
</script>

<style>
.task-list-enter-active, .task-list-leave-active {
  transition: opacity 0.5s, transform 0.5s;
}
.task-list-enter, .task-list-leave-to {
  opacity: 0;
  transform: translateX(30px);
}
</style>
```

在这个示例中，用户可以输入新任务并按下回车键将其添加到列表中。每个任务项都有一个删除按钮，点击后任务项会从列表中移除。通过使用 `<transition-group>`，这些操作会伴随着平滑的过渡效果。

## 总结

Vue.js 的列表过渡功能为动态列表提供了强大的过渡效果支持。通过使用 `<transition-group>` 组件，我们可以轻松地为列表中的元素添加进入和离开的过渡效果。无论是简单的列表还是复杂的待办事项应用，列表过渡都能显著提升用户体验。

### 附加资源

- [Vue.js 官方文档 - 列表过渡](https://v3.vuejs.org/guide/transitions-list.html)
- [Vue.js 过渡与动画指南](https://v3.vuejs.org/guide/transitions-overview.html)

### 练习

1. 尝试修改上面的待办事项示例，添加一个“已完成”状态，并为已完成的任务项添加不同的过渡效果。
2. 创建一个购物车应用，使用列表过渡来展示购物车中的商品，并在添加或移除商品时应用过渡效果。

通过实践这些练习，你将更深入地理解 Vue.js 列表过渡的工作原理和应用场景。