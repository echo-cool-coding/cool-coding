---
title: Vue.js进入/离开过渡
description: 学习如何在 Vue.js 中使用进入和离开过渡，为你的应用添加平滑的动画效果。本教程适合初学者，包含代码示例和实际案例。
---

# Vue.js进入/离开过渡

在 Vue.js 中，过渡（Transition）是一种在元素插入、更新或从 DOM 中移除时应用动画效果的机制。Vue 提供了内置的 `<transition>` 组件，使得实现进入和离开过渡变得非常简单。本文将详细介绍如何使用 Vue.js 的进入/离开过渡功能，并通过示例帮助你理解其实际应用。

## 什么是进入/离开过渡？

进入/离开过渡是指在元素被插入到 DOM 中（进入）或从 DOM 中移除（离开）时触发的动画效果。Vue.js 的 `<transition>` 组件会自动为这些过渡添加 CSS 类，从而允许你通过 CSS 或 JavaScript 来定义动画效果。

### 基本用法

要使用 Vue.js 的进入/离开过渡，你需要将目标元素包裹在 `<transition>` 组件中。Vue 会在适当的时机自动添加或移除 CSS 类，从而触发动画效果。

```vue
<template>
  <div>
    <button @click="show = !show">Toggle</button>
    <transition name="fade">
      <p v-if="show">Hello, Vue.js!</p>
    </transition>
  </div>
</template>

<script>
export default {
  data() {
    return {
      show: true
    };
  }
};
</script>

<style>
.fade-enter-active, .fade-leave-active {
  transition: opacity 0.5s;
}
.fade-enter, .fade-leave-to {
  opacity: 0;
}
</style>
```

在上面的示例中，当点击按钮时，`<p>` 元素会根据 `show` 的值在 DOM 中插入或移除。Vue 会自动为 `<p>` 元素添加和移除 `fade-enter-active`、`fade-leave-active`、`fade-enter` 和 `fade-leave-to` 类，从而实现淡入淡出的效果。

### 过渡类名

Vue.js 为进入/离开过渡提供了六个类名，它们分别对应过渡的不同阶段：

- `v-enter`：进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。
- `v-enter-active`：进入过渡的激活状态。在整个进入过渡的阶段中应用。
- `v-enter-to`：进入过渡的结束状态。在元素被插入之后下一帧生效（与此同时 `v-enter` 被移除），在过渡/动画完成之后移除。
- `v-leave`：离开过渡的开始状态。在离开过渡被触发时立即生效，下一帧被移除。
- `v-leave-active`：离开过渡的激活状态。在整个离开过渡的阶段中应用。
- `v-leave-to`：离开过渡的结束状态。在离开过渡被触发之后下一帧生效（与此同时 `v-leave` 被移除），在过渡/动画完成之后移除。

你可以通过为 `<transition>` 组件设置 `name` 属性来自定义这些类名的前缀。例如，如果 `name="fade"`，那么类名将变为 `fade-enter`、`fade-enter-active` 等。

### 实际案例

假设你正在开发一个任务管理应用，你希望在任务被添加或删除时显示动画效果。以下是一个简单的示例：

```vue
<template>
  <div>
    <input v-model="newTask" @keyup.enter="addTask" placeholder="Add a new task" />
    <ul>
      <transition-group name="list" tag="ul">
        <li v-for="task in tasks" :key="task.id" @click="removeTask(task.id)">
          {{ task.text }}
        </li>
      </transition-group>
    </ul>
  </div>
</template>

<script>
export default {
  data() {
    return {
      newTask: '',
      tasks: [],
      nextTaskId: 1
    };
  },
  methods: {
    addTask() {
      if (this.newTask.trim()) {
        this.tasks.push({
          id: this.nextTaskId++,
          text: this.newTask.trim()
        });
        this.newTask = '';
      }
    },
    removeTask(id) {
      this.tasks = this.tasks.filter(task => task.id !== id);
    }
  }
};
</script>

<style>
.list-enter-active, .list-leave-active {
  transition: all 0.5s;
}
.list-enter, .list-leave-to {
  opacity: 0;
  transform: translateY(30px);
}
</style>
```

在这个示例中，我们使用了 `<transition-group>` 组件来为列表中的每个任务项添加进入和离开过渡。当任务被添加或删除时，Vue 会自动应用过渡效果。

### 总结

Vue.js 的进入/离开过渡功能为开发者提供了一种简单而强大的方式来为应用添加动画效果。通过使用 `<transition>` 和 `<transition-group>` 组件，你可以轻松实现元素的淡入淡出、滑动、缩放等动画效果。

:::tip
如果你想要更复杂的动画效果，可以结合使用 JavaScript 钩子函数和 CSS 动画。Vue.js 提供了 `@before-enter`、`@enter`、`@after-enter` 等钩子函数，允许你在动画的不同阶段执行自定义逻辑。
:::

### 附加资源

- [Vue.js 官方文档 - 过渡 & 动画](https://v3.vuejs.org/guide/transitions.html)
- [Vue.js 过渡示例](https://vuejs.org/examples/#transitions)

### 练习

1. 尝试为你的 Vue.js 项目添加一个进入/离开过渡效果。
2. 使用 `<transition-group>` 组件为一个动态列表添加动画效果。
3. 探索如何使用 JavaScript 钩子函数来实现更复杂的动画效果。

希望这篇教程能帮助你掌握 Vue.js 的进入/离开过渡功能，并为你的应用增添更多动态效果！