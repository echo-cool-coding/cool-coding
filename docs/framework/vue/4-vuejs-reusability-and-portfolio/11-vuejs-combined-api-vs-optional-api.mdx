---
title: Vue.js组合式API与选项式API对比
description: 本文详细介绍了Vue.js中的组合式API（Composition API）与选项式API（Options API）的区别，帮助初学者理解两者的使用场景和优势。
---

# Vue.js组合式API与选项式API对比

Vue.js 是一个流行的前端框架，提供了两种主要的 API 风格来组织代码：**选项式API（Options API）** 和 **组合式API（Composition API）**。这两种 API 风格各有优缺点，适用于不同的开发场景。本文将详细介绍它们的区别，并通过实际案例帮助你理解如何选择适合的 API 风格。

## 什么是选项式API？

选项式API是 Vue.js 最早引入的 API 风格，也是大多数 Vue 开发者最初接触的方式。它通过一个包含多个选项（如 `data`、`methods`、`computed` 等）的对象来定义组件。

```javascript
export default {
  data() {
    return {
      count: 0,
    };
  },
  methods: {
    increment() {
      this.count++;
    },
  },
  computed: {
    doubleCount() {
      return this.count * 2;
    },
  },
};
```

在这个例子中，`data` 用于定义组件的状态，`methods` 用于定义方法，`computed` 用于定义计算属性。选项式API的优点是结构清晰，适合初学者快速上手。

## 什么是组合式API？

组合式API是 Vue 3 引入的新特性，旨在解决选项式API在复杂组件中代码组织不够灵活的问题。它通过 `setup` 函数来组织逻辑，允许开发者将相关代码组织在一起，而不是分散在不同的选项中。

```javascript
import { ref, computed } from 'vue';

export default {
  setup() {
    const count = ref(0);
    const doubleCount = computed(() => count.value * 2);

    function increment() {
      count.value++;
    }

    return {
      count,
      doubleCount,
      increment,
    };
  },
};
```

在这个例子中，`ref` 用于定义响应式数据，`computed` 用于定义计算属性，`increment` 是一个方法。组合式API的优点是逻辑更集中，适合处理复杂的组件逻辑。

## 选项式API vs 组合式API

### 1. 代码组织方式

- **选项式API**：代码按照功能分散在不同的选项中（如 `data`、`methods`、`computed` 等）。这种方式在小项目中表现良好，但在复杂组件中可能会导致代码难以维护。
- **组合式API**：代码按照逻辑相关性组织在 `setup` 函数中。这种方式更适合处理复杂的组件逻辑，因为相关代码可以集中在一起。

### 2. 逻辑复用

- **选项式API**：逻辑复用通常通过 mixins 或高阶组件实现，但这些方式可能会导致命名冲突和代码难以追踪。
- **组合式API**：逻辑复用通过自定义组合函数实现，这种方式更加灵活且易于维护。

```javascript
// 自定义组合函数
function useCounter() {
  const count = ref(0);
  const doubleCount = computed(() => count.value * 2);

  function increment() {
    count.value++;
  }

  return {
    count,
    doubleCount,
    increment,
  };
}

// 在组件中使用
export default {
  setup() {
    const { count, doubleCount, increment } = useCounter();
    return {
      count,
      doubleCount,
      increment,
    };
  },
};
```

### 3. 类型支持

- **选项式API**：由于选项式API依赖于 `this` 上下文，类型推断相对较弱。
- **组合式API**：组合式API基于函数式编程，类型推断更加友好，尤其是在使用 TypeScript 时。

## 实际案例

假设我们正在开发一个计数器组件，并且需要在多个地方复用计数逻辑。

### 使用选项式API

```javascript
export default {
  data() {
    return {
      count: 0,
    };
  },
  methods: {
    increment() {
      this.count++;
    },
  },
  computed: {
    doubleCount() {
      return this.count * 2;
    },
  },
};
```

### 使用组合式API

```javascript
import { ref, computed } from 'vue';

function useCounter() {
  const count = ref(0);
  const doubleCount = computed(() => count.value * 2);

  function increment() {
    count.value++;
  }

  return {
    count,
    doubleCount,
    increment,
  };
}

export default {
  setup() {
    const { count, doubleCount, increment } = useCounter();
    return {
      count,
      doubleCount,
      increment,
    };
  },
};
```

在这个案例中，组合式API通过自定义组合函数 `useCounter` 实现了逻辑复用，而选项式API则需要重复编写相同的代码。

## 总结

- **选项式API** 适合初学者和小型项目，结构清晰，易于理解。
- **组合式API** 更适合复杂组件和需要逻辑复用的场景，代码组织更加灵活。

:::tip
如果你是 Vue.js 的初学者，建议从选项式API开始学习，掌握基本概念后再尝试组合式API。
:::

## 附加资源与练习

1. **官方文档**：
   - [选项式API](https://vuejs.org/guide/introduction.html#options-api)
   - [组合式API](https://vuejs.org/guide/introduction.html#composition-api)

2. **练习**：
   - 尝试将一个使用选项式API的组件重构为使用组合式API。
   - 创建一个自定义组合函数，并在多个组件中复用。

通过本文的学习，你应该对 Vue.js 的组合式API和选项式API有了更深入的理解。希望你能在实际项目中灵活运用这两种 API 风格，提升开发效率！