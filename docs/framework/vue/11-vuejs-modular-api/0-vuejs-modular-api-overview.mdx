---
title: Vue.js组合式API概述
description: 了解Vue.js组合式API的基本概念、使用方法及其在实际开发中的应用场景。
---

# Vue.js组合式API概述

Vue.js 3 引入了组合式API（Composition API），这是一种全新的方式来组织和复用逻辑代码。与传统的选项式API（Options API）相比，组合式API提供了更灵活、更强大的工具，使得代码更易于维护和扩展。本文将带你全面了解组合式API的核心概念、使用方法以及实际应用场景。

## 什么是组合式API？

组合式API是Vue.js 3中引入的一种新的API风格，它允许开发者通过函数的方式来组织和复用逻辑代码。与选项式API不同，组合式API将逻辑代码从组件的选项中提取出来，使得代码更加模块化和可复用。

### 组合式API的核心概念

组合式API的核心是 `setup` 函数。`setup` 函数是组合式API的入口点，它在组件实例创建之前执行，并且可以访问组件的 `props` 和 `context`。

```javascript
import { ref, onMounted } from 'vue';

export default {
  setup(props, context) {
    const count = ref(0);

    onMounted(() => {
      console.log('Component is mounted!');
    });

    return {
      count
    };
  }
};
```

在上面的代码中，`setup` 函数定义了一个响应式变量 `count`，并在组件挂载时打印一条消息。`ref` 是组合式API中的一个核心函数，用于创建一个响应式的引用。

## 组合式API的基本用法

### 响应式数据

在组合式API中，你可以使用 `ref` 和 `reactive` 来创建响应式数据。

- `ref` 用于创建一个包含单个值的响应式引用。
- `reactive` 用于创建一个包含多个值的响应式对象。

```javascript
import { ref, reactive } from 'vue';

export default {
  setup() {
    const count = ref(0);
    const state = reactive({
      name: 'Vue.js',
      version: '3.0'
    });

    return {
      count,
      state
    };
  }
};
```

### 生命周期钩子

组合式API提供了与选项式API类似的生命周期钩子，但它们的调用方式有所不同。你可以在 `setup` 函数中使用 `onMounted`、`onUpdated` 等函数来注册生命周期钩子。

```javascript
import { onMounted, onUpdated } from 'vue';

export default {
  setup() {
    onMounted(() => {
      console.log('Component is mounted!');
    });

    onUpdated(() => {
      console.log('Component is updated!');
    });
  }
};
```

### 计算属性和侦听器

组合式API还提供了 `computed` 和 `watch` 函数，用于创建计算属性和侦听器。

```javascript
import { ref, computed, watch } from 'vue';

export default {
  setup() {
    const count = ref(0);
    const doubleCount = computed(() => count.value * 2);

    watch(count, (newValue, oldValue) => {
      console.log(`count changed from ${oldValue} to ${newValue}`);
    });

    return {
      count,
      doubleCount
    };
  }
};
```

## 实际应用场景

组合式API在实际开发中有广泛的应用场景，特别是在需要复用逻辑代码的情况下。以下是一个简单的例子，展示了如何使用组合式API来创建一个可复用的计数器逻辑。

```javascript
import { ref } from 'vue';

export function useCounter() {
  const count = ref(0);

  function increment() {
    count.value++;
  }

  function decrement() {
    count.value--;
  }

  return {
    count,
    increment,
    decrement
  };
}
```

在组件中使用这个逻辑：

```javascript
import { useCounter } from './useCounter';

export default {
  setup() {
    const { count, increment, decrement } = useCounter();

    return {
      count,
      increment,
      decrement
    };
  }
};
```

## 总结

组合式API是Vue.js 3中引入的一种强大的工具，它使得代码的组织和复用变得更加灵活和高效。通过 `setup` 函数、`ref`、`reactive`、`computed` 和 `watch` 等核心函数，开发者可以更轻松地管理组件的逻辑代码。

:::tip 提示
如果你刚刚开始学习Vue.js，建议先从选项式API入手，熟悉之后再逐步过渡到组合式API。
:::

## 附加资源

- [Vue.js官方文档 - 组合式API](https://v3.vuejs.org/guide/composition-api-introduction.html)
- [Vue Mastery - Composition API Course](https://www.vuemastery.com/courses/vue-3-essentials/why-the-composition-api)

## 练习

1. 尝试使用组合式API创建一个简单的待办事项列表应用。
2. 将上述计数器逻辑扩展为一个支持重置功能的计数器。

通过以上内容的学习，你应该对Vue.js的组合式API有了一个全面的了解。接下来，尝试在实际项目中应用这些知识，进一步提升你的Vue.js技能！