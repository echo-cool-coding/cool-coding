---
title: Django 管理站点内联
description: 了解如何在Django管理站点中使用内联模型，以便在同一页面中管理相关模型的数据。
---

## 介绍

Django的管理站点是一个强大的工具，可以帮助开发者快速创建和管理数据库内容。默认情况下，Django的管理站点会为每个模型生成一个独立的页面。然而，在某些情况下，你可能希望在同一页面中管理多个相关的模型。这时，**内联模型（Inline Models）**就派上了用场。

内联模型允许你在父模型的编辑页面中直接编辑与之相关的子模型。例如，如果你有一个`Author`模型和一个`Book`模型，你可以在`Author`的编辑页面中直接添加或编辑`Book`。

## 内联模型的基本用法

要在Django管理站点中使用内联模型，你需要定义一个内联类，并将其注册到父模型的管理类中。以下是一个简单的示例：

```python
from django.contrib import admin
from .models import Author, Book

class BookInline(admin.TabularInline):
    model = Book
    extra = 1  # 默认显示的空表单数量

@admin.register(Author)
class AuthorAdmin(admin.ModelAdmin):
    inlines = [BookInline]
```

在这个示例中，`BookInline`是一个内联类，它告诉Django在`Author`的编辑页面中显示`Book`模型的相关表单。`extra = 1`表示默认显示一个空表单，以便用户可以快速添加新的`Book`。

## 内联模型的类型

Django提供了两种类型的内联模型：

1. **TabularInline**：以表格形式显示子模型的数据。
2. **StackedInline**：以堆叠形式显示子模型的数据。

### TabularInline

`TabularInline`以表格形式显示子模型的数据，适合处理大量数据或需要快速浏览的场景。

```python
class BookInline(admin.TabularInline):
    model = Book
    extra = 1
```

### StackedInline

`StackedInline`以堆叠形式显示子模型的数据，适合处理较少数据或需要详细查看的场景。

```python
class BookInline(admin.StackedInline):
    model = Book
    extra = 1
```

## 实际案例

假设你正在开发一个博客系统，其中有两个模型：`Post`和`Comment`。你希望在`Post`的编辑页面中直接管理与之相关的`Comment`。

```python
from django.contrib import admin
from .models import Post, Comment

class CommentInline(admin.TabularInline):
    model = Comment
    extra = 1

@admin.register(Post)
class PostAdmin(admin.ModelAdmin):
    inlines = [CommentInline]
```

在这个案例中，`CommentInline`允许你在`Post`的编辑页面中直接添加或编辑`Comment`。这样，你就不需要单独进入`Comment`的管理页面来管理评论了。

## 总结

Django的内联模型功能极大地简化了相关模型的管理工作。通过使用`TabularInline`或`StackedInline`，你可以在父模型的编辑页面中直接管理子模型的数据。这不仅提高了开发效率，还使得数据管理更加直观和方便。

## 附加资源与练习

- **练习**：尝试在你的Django项目中实现一个内联模型，例如在一个`Product`模型的编辑页面中管理与之相关的`Review`模型。
- **资源**：阅读Django官方文档中关于[内联模型](https://docs.djangoproject.com/en/stable/ref/contrib/admin/#inlinemodeladmin-objects)的部分，了解更多高级用法和配置选项。

通过掌握内联模型的使用，你将能够更高效地管理Django项目中的相关数据。