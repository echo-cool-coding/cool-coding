---
title: Django 重定向
description: 学习如何在Django中使用重定向功能，将用户从一个URL导航到另一个URL。本文适合初学者，包含代码示例和实际应用场景。
---

# Django 重定向

在Web开发中，重定向（Redirect）是一种常见的技术，用于将用户从一个URL导航到另一个URL。Django提供了简单而强大的工具来实现重定向功能。本文将详细介绍如何在Django中使用重定向，并通过实际案例帮助你理解其应用场景。

## 什么是重定向？

重定向是指当用户访问某个URL时，服务器返回一个HTTP响应，指示浏览器跳转到另一个URL。这在许多场景中非常有用，例如：

- 用户成功提交表单后，将其重定向到“感谢”页面。
- 用户访问一个已更改的URL时，将其重定向到新的URL。
- 用户未登录时，将其重定向到登录页面。

在Django中，重定向通常通过`HttpResponseRedirect`或`redirect`快捷函数来实现。

## 使用`HttpResponseRedirect`

`HttpResponseRedirect`是Django提供的一个类，用于创建重定向响应。以下是一个简单的示例：

```python
from django.http import HttpResponseRedirect

def my_view(request):
    # 重定向到 '/new-url/'
    return HttpResponseRedirect('/new-url/')
```

在这个例子中，当用户访问`my_view`时，他们将被重定向到`/new-url/`。

## 使用`redirect`快捷函数

Django还提供了一个更简洁的`redirect`快捷函数，它封装了`HttpResponseRedirect`的功能。以下是如何使用`redirect`的示例：

```python
from django.shortcuts import redirect

def my_view(request):
    # 重定向到 '/new-url/'
    return redirect('/new-url/')
```

`redirect`函数不仅支持URL字符串，还支持模型实例、视图名称等。例如：

```python
from django.shortcuts import redirect
from myapp.models import Article

def my_view(request):
    article = Article.objects.get(id=1)
    # 重定向到文章的详细页面
    return redirect(article)
```

在这个例子中，`redirect`函数会自动调用模型的`get_absolute_url`方法，生成正确的URL。

## 实际应用场景

### 1. 表单提交后的重定向

假设你有一个表单页面，用户提交表单后，你希望将他们重定向到一个“感谢”页面。以下是如何实现的示例：

```python
from django.shortcuts import render, redirect

def form_view(request):
    if request.method == 'POST':
        # 处理表单数据
        # ...
        # 重定向到感谢页面
        return redirect('/thank-you/')
    return render(request, 'form.html')
```

### 2. 用户未登录时的重定向

在Django中，你可以使用`@login_required`装饰器来保护视图，确保只有登录用户才能访问。如果用户未登录，他们将被重定向到登录页面：

```python
from django.contrib.auth.decorators import login_required

@login_required
def protected_view(request):
    # 只有登录用户才能访问
    return render(request, 'protected.html')
```

默认情况下，`@login_required`会将未登录用户重定向到`/accounts/login/`。你可以通过设置`LOGIN_URL`来更改这个URL。

## 总结

重定向是Web开发中的一个重要概念，Django提供了多种方式来实现它。通过`HttpResponseRedirect`和`redirect`快捷函数，你可以轻松地将用户从一个URL导航到另一个URL。本文介绍了重定向的基本用法，并通过实际案例展示了其应用场景。

## 附加资源与练习

- **练习1**：创建一个Django视图，当用户访问`/old-url/`时，将其重定向到`/new-url/`。
- **练习2**：使用`@login_required`装饰器保护一个视图，并测试未登录用户是否被重定向到登录页面。
- **阅读更多**：[Django官方文档 - 重定向](https://docs.djangoproject.com/en/stable/topics/http/shortcuts/#redirect)

希望本文能帮助你理解Django中的重定向功能，并在你的项目中灵活运用！