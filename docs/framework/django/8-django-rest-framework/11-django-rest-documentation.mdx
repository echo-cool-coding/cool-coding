---
title: Django REST 文档
description: 了解如何使用 Django REST 框架创建和管理 API 文档，帮助开发者更好地理解和使用你的 API。
---

# Django REST 文档

Django REST 框架（DRF）是一个强大的工具，用于构建 Web API。它不仅提供了创建 API 的功能，还支持自动生成 API 文档。API 文档是开发者理解和使用 API 的关键资源，它详细描述了 API 的端点、请求方法、参数和响应格式。

在本指南中，我们将探讨如何使用 Django REST 框架生成和管理 API 文档，并通过实际案例展示其应用场景。

## 什么是 API 文档？

API 文档是描述 API 如何工作的详细说明。它通常包括以下内容：

- API 的端点（URL）
- 支持的 HTTP 方法（如 GET、POST、PUT、DELETE）
- 请求参数（如查询参数、请求体）
- 响应格式（如 JSON、XML）
- 错误代码和消息

良好的 API 文档可以帮助开发者快速上手，减少开发时间，并避免常见的错误。

## 使用 Django REST 框架生成文档

Django REST 框架提供了多种方式来生成 API 文档。最常见的方式是使用 `coreapi` 和 `swagger`。

### 1. 使用 `coreapi` 生成文档

`coreapi` 是 Django REST 框架内置的文档生成工具。它可以根据你的 API 视图和序列化器自动生成文档。

首先，确保你已经安装了 `coreapi`：

```bash
pip install coreapi
```

然后，在你的 Django 项目的 `settings.py` 文件中添加以下配置：

```python
REST_FRAMEWORK = {
    'DEFAULT_SCHEMA_CLASS': 'rest_framework.schemas.coreapi.AutoSchema',
}
```

接下来，在你的 `urls.py` 文件中添加文档路由：

```python
from rest_framework.documentation import include_docs_urls

urlpatterns = [
    path('docs/', include_docs_urls(title='My API')),
]
```

现在，你可以访问 `/docs/` 路径来查看自动生成的 API 文档。

### 2. 使用 `swagger` 生成文档

`swagger` 是一个流行的 API 文档工具，它提供了一个交互式的 UI，允许开发者直接在浏览器中测试 API。

首先，安装 `drf-yasg` 包：

```bash
pip install drf-yasg
```

然后，在你的 `urls.py` 文件中添加以下配置：

```python
from drf_yasg.views import get_schema_view
from drf_yasg import openapi

schema_view = get_schema_view(
    openapi.Info(
        title="My API",
        default_version='v1',
        description="My API description",
        terms_of_service="https://www.myapi.com/terms/",
        contact=openapi.Contact(email="contact@myapi.com"),
    public=True,
)

urlpatterns = [
    path('swagger/', schema_view.with_ui('swagger', cache_timeout=0), name='schema-swagger-ui'),
]
```

现在，你可以访问 `/swagger/` 路径来查看交互式的 API 文档。

## 实际案例

假设我们有一个简单的 Django 应用，用于管理博客文章。我们有一个 `Post` 模型和一个对应的 `PostSerializer`。

```python
from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=100)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

from rest_framework import serializers

class PostSerializer(serializers.ModelSerializer):
    class Meta:
        model = Post
        fields = ['id', 'title', 'content', 'created_at']
```

我们还有一个 `PostViewSet` 用于处理 CRUD 操作：

```python
from rest_framework import viewsets
from .models import Post
from .serializers import PostSerializer

class PostViewSet(viewsets.ModelViewSet):
    queryset = Post.objects.all()
    serializer_class = PostSerializer
```

通过上述配置，Django REST 框架会自动为 `PostViewSet` 生成 API 文档。你可以在 `/docs/` 或 `/swagger/` 路径下查看这些文档。

## 总结

API 文档是开发者理解和使用 API 的重要工具。Django REST 框架提供了多种方式来生成和管理 API 文档，包括 `coreapi` 和 `swagger`。通过自动生成文档，你可以节省大量时间，并确保文档的准确性和一致性。

## 附加资源

- [Django REST 框架官方文档](https://www.django-rest-framework.org/)
- [drf-yasg 文档](https://drf-yasg.readthedocs.io/)
- [Swagger 官方文档](https://swagger.io/)

## 练习

1. 在你的 Django 项目中集成 `coreapi` 并生成 API 文档。
2. 使用 `drf-yasg` 生成交互式的 Swagger 文档。
3. 尝试为你的 API 添加自定义描述和示例。

通过完成这些练习，你将更好地掌握 Django REST 框架的文档生成功能。