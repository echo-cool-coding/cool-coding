---
title: Django 与React集成
description: 学习如何将Django后端与React前端集成，构建现代化的全栈Web应用。
---

# Django 与React集成

在现代Web开发中，前后端分离的架构越来越流行。Django作为强大的后端框架，与React作为灵活的前端库，结合使用可以构建高效、可维护的全栈应用。本文将逐步讲解如何将Django与React集成，并提供实际案例帮助你理解这一过程。

## 什么是Django与React集成？

Django与React集成是指将Django作为后端框架，负责处理数据逻辑和API接口，而React作为前端框架，负责用户界面的渲染和交互。通过这种分离架构，开发者可以更专注于各自领域的开发，同时通过API进行数据交互。

## 为什么选择Django与React集成？

- **前后端分离**：前后端开发可以独立进行，提高开发效率。
- **灵活性**：React的组件化开发方式使得前端代码更易于维护和扩展。
- **性能优化**：React的虚拟DOM和Django的高效数据处理能力结合，可以提升应用性能。

## 集成步骤

### 1. 创建Django项目

首先，创建一个新的Django项目：

```bash
django-admin startproject myproject
cd myproject
```

### 2. 创建Django应用

在Django项目中创建一个新的应用：

```bash
python manage.py startapp myapp
```

### 3. 配置Django REST Framework

为了提供API接口，我们需要安装并配置Django REST Framework：

```bash
pip install djangorestframework
```

在 `settings.py` 中添加 `rest_framework` 到 `INSTALLED_APPS`：

```python
INSTALLED_APPS = [
    ...
    'rest_framework',
    'myapp',
]
```

### 4. 创建API视图

在 `myapp/views.py` 中创建一个简单的API视图：

```python
from rest_framework.decorators import api_view
from rest_framework.response import Response

@api_view(['GET'])
def hello_world(request):
    return Response({"message": "Hello, World!"})
```

在 `myapp/urls.py` 中配置路由：

```python
from django.urls import path
from .views import hello_world

urlpatterns = [
    path('hello/', hello_world),
]
```

在 `myproject/urls.py` 中包含 `myapp` 的路由：

```python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('myapp.urls')),
]
```

### 5. 创建React应用

在Django项目根目录下创建一个React应用：

```bash
npx create-react-app frontend
cd frontend
```

### 6. 配置React与Django的通信

在 `frontend/src/App.js` 中，添加代码以调用Django的API：

```javascript
import React, { useEffect, useState } from 'react';

function App() {
  const [message, setMessage] = useState('');

  useEffect(() => {
    fetch('/api/hello/')
      .then(response => response.json())
      .then(data => setMessage(data.message));
  }, []);

  return (
    <div className="App">
      <h1>{message}</h1>
    </div>
  );
}

export default App;
```

### 7. 配置Django以服务React应用

在 `settings.py` 中配置静态文件路径：

```python
import os

STATIC_URL = '/static/'
STATICFILES_DIRS = [
    os.path.join(BASE_DIR, 'frontend/build/static'),
]
```

在 `myproject/urls.py` 中添加路由以服务React应用：

```python
from django.urls import re_path
from django.views.generic import TemplateView

urlpatterns = [
    ...
    re_path(r'^.*$', TemplateView.as_view(template_name='index.html')),
]
```

### 8. 构建React应用

在 `frontend` 目录下构建React应用：

```bash
npm run build
```

将构建后的文件复制到Django的静态文件目录：

```bash
cp -r build/* ../myproject/myapp/static/
```

## 实际案例

假设我们正在开发一个简单的任务管理应用。Django后端负责存储和提供任务数据，React前端负责展示任务列表和添加新任务。

### Django 后端

在 `myapp/models.py` 中定义任务模型：

```python
from django.db import models

class Task(models.Model):
    title = models.CharField(max_length=200)
    completed = models.BooleanField(default=False)

    def __str__(self):
        return self.title
```

在 `myapp/serializers.py` 中定义序列化器：

```python
from rest_framework import serializers
from .models import Task

class TaskSerializer(serializers.ModelSerializer):
    class Meta:
        model = Task
        fields = '__all__'
```

在 `myapp/views.py` 中定义视图：

```python
from rest_framework import generics
from .models import Task
from .serializers import TaskSerializer

class TaskListCreate(generics.ListCreateAPIView):
    queryset = Task.objects.all()
    serializer_class = TaskSerializer
```

在 `myapp/urls.py` 中配置路由：

```python
from django.urls import path
from .views import TaskListCreate

urlpatterns = [
    path('tasks/', TaskListCreate.as_view()),
]
```

### React前端

在 `frontend/src/App.js` 中展示任务列表和添加新任务的功能：

```javascript
import React, { useEffect, useState } from 'react';

function App() {
  const [tasks, setTasks] = useState([]);
  const [newTask, setNewTask] = useState('');

  useEffect(() => {
    fetch('/api/tasks/')
      .then(response => response.json())
      .then(data => setTasks(data));
  }, []);

  const addTask = () => {
    fetch('/api/tasks/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ title: newTask, completed: false }),
    })
      .then(response => response.json())
      .then(data => setTasks([...tasks, data]));
  };

  return (
    <div className="App">
      <h1>Task Manager</h1>
      <ul>
        {tasks.map(task => (
          <li key={task.id}>{task.title}</li>
        ))}
      </ul>
      <input
        type="text"
        value={newTask}
        onChange={(e) => setNewTask(e.target.value)}
      />
      <button onClick={addTask}>Add Task</button>
    </div>
  );
}

export default App;
```

## 总结

通过本文的学习，你应该已经掌握了如何将Django与React集成，构建一个简单的全栈Web应用。这种前后端分离的架构不仅提高了开发效率，还使得应用更易于维护和扩展。

## 附加资源与练习

- **Django官方文档**：https://docs.djangoproject.com/
- **React官方文档**：https://reactjs.org/docs/getting-started.html
- **练习**：尝试扩展任务管理应用，添加任务编辑和删除功能。

:::tip
在实际开发中，你可能还需要考虑跨域问题、身份验证、状态管理等高级话题。继续深入学习这些内容，将使你的全栈开发技能更上一层楼。
:::