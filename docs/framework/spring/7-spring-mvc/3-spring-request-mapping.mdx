---
title: Spring 请求映射
description: 了解Spring MVC中的请求映射（Request Mapping），掌握如何使用注解将HTTP请求映射到控制器方法。
---

# Spring 请求映射

在Spring MVC中，**请求映射**（Request Mapping）是将HTTP请求映射到控制器方法的过程。通过使用注解，Spring可以轻松地将特定的URL路径、HTTP方法或其他请求属性与控制器方法关联起来。这是构建RESTful Web服务或传统Web应用程序的基础。

## 1. 什么是请求映射？

请求映射是Spring MVC框架的核心功能之一。它允许开发者通过注解将HTTP请求映射到特定的控制器方法。Spring提供了多种注解来实现这一功能，其中最常用的是`@RequestMapping`及其变体（如`@GetMapping`、`@PostMapping`等）。

### 1.1 基本用法

以下是一个简单的示例，展示了如何使用`@RequestMapping`将HTTP GET请求映射到控制器方法：

```java
@RestController
public class HelloController {

    @RequestMapping(value = "/hello", method = RequestMethod.GET)
    public String sayHello() {
        return "Hello, World!";
    }
}
```

在这个例子中，当用户访问`/hello`路径时，Spring会调用`sayHello()`方法，并返回字符串`"Hello, World!"`。

:::note
`@RequestMapping`注解可以用于类级别和方法级别。类级别的注解用于定义通用的路径前缀，而方法级别的注解用于定义具体的路径和HTTP方法。
:::

## 2. 请求映射的变体

Spring提供了多个简化的注解，用于处理常见的HTTP方法。这些注解是`@RequestMapping`的变体，使用它们可以使代码更加简洁。

### 2.1 `@GetMapping`

`@GetMapping`用于处理HTTP GET请求。以下是一个示例：

```java
@RestController
public class UserController {

    @GetMapping("/users")
    public List<User> getUsers() {
        // 返回用户列表
        return Arrays.asList(new User("Alice"), new User("Bob"));
    }
}
```

### 2.2 `@PostMapping`

`@PostMapping`用于处理HTTP POST请求。以下是一个示例：

```java
@RestController
public class UserController {

    @PostMapping("/users")
    public User createUser(@RequestBody User user) {
        // 创建用户并返回
        return user;
    }
}
```

### 2.3 其他变体

- `@PutMapping`：用于处理HTTP PUT请求。
- `@DeleteMapping`：用于处理HTTP DELETE请求。
- `@PatchMapping`：用于处理HTTP PATCH请求。

## 3. 路径变量和查询参数

在实际应用中，URL路径通常包含变量或查询参数。Spring MVC允许我们通过路径变量和查询参数来动态处理请求。

### 3.1 路径变量

路径变量是URL路径中的动态部分。我们可以使用`@PathVariable`注解将其绑定到方法参数。以下是一个示例：

```java
@RestController
public class UserController {

    @GetMapping("/users/{id}")
    public User getUserById(@PathVariable Long id) {
        // 根据ID查找用户
        return new User("User " + id);
    }
}
```

在这个例子中，`{id}`是路径变量，Spring会自动将其值绑定到`id`参数。

### 3.2 查询参数

查询参数是URL中的键值对，通常用于过滤或排序数据。我们可以使用`@RequestParam`注解将其绑定到方法参数。以下是一个示例：

```java
@RestController
public class UserController {

    @GetMapping("/users")
    public List<User> getUsersByRole(@RequestParam String role) {
        // 根据角色过滤用户
        return Arrays.asList(new User("Alice", role), new User("Bob", role));
    }
}
```

在这个例子中，`role`是查询参数，Spring会自动将其值绑定到`role`参数。

## 4. 实际应用场景

假设我们正在构建一个简单的博客系统，用户可以通过REST API创建、读取、更新和删除博客文章。以下是如何使用请求映射来实现这些功能：

```java
@RestController
@RequestMapping("/posts")
public class PostController {

    @GetMapping
    public List<Post> getAllPosts() {
        // 返回所有博客文章
        return postService.getAllPosts();
    }

    @GetMapping("/{id}")
    public Post getPostById(@PathVariable Long id) {
        // 根据ID返回博客文章
        return postService.getPostById(id);
    }

    @PostMapping
    public Post createPost(@RequestBody Post post) {
        // 创建新的博客文章
        return postService.createPost(post);
    }

    @PutMapping("/{id}")
    public Post updatePost(@PathVariable Long id, @RequestBody Post post) {
        // 更新博客文章
        return postService.updatePost(id, post);
    }

    @DeleteMapping("/{id}")
    public void deletePost(@PathVariable Long id) {
        // 删除博客文章
        postService.deletePost(id);
    }
}
```

在这个例子中，我们使用了`@GetMapping`、`@PostMapping`、`@PutMapping`和`@DeleteMapping`来处理不同的HTTP方法，并通过路径变量和请求体来传递数据。

## 5. 总结

Spring MVC的请求映射功能非常强大且灵活。通过使用`@RequestMapping`及其变体，我们可以轻松地将HTTP请求映射到控制器方法，并处理路径变量、查询参数和请求体。掌握这些概念是构建RESTful Web服务的关键。

:::tip
为了进一步巩固你的知识，建议你尝试以下练习：
1. 创建一个简单的REST API，处理用户资源的CRUD操作。
2. 尝试使用路径变量和查询参数来实现更复杂的请求处理。
:::

## 6. 附加资源

- [Spring官方文档 - Request Mapping](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-ann-requestmapping)
- [Spring MVC教程](https://www.baeldung.com/spring-mvc-tutorial)