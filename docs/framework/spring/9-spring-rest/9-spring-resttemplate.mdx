---
title: Spring RestTemplate
description: 学习如何使用 Spring 的 RestTemplate 进行 RESTful API 调用。本文适合初学者，包含代码示例、实际案例和详细解释。
---

# Spring RestTemplate

## 介绍

`RestTemplate` 是 Spring 框架中用于简化 RESTful API 调用的工具类。它提供了一组便捷的方法，允许开发者通过 HTTP 协议与远程服务进行交互。无论是发送 GET、POST、PUT 还是 DELETE 请求，`RestTemplate` 都能轻松处理。

:::note
`RestTemplate` 是 Spring 3.x 和 4.x 中的主要 HTTP 客户端工具，但在 Spring 5.x 中，官方推荐使用 `WebClient` 作为替代。尽管如此，`RestTemplate` 仍然被广泛使用，尤其是在现有项目中。
:::

## 基本用法

### 1. 创建 RestTemplate 实例

在使用 `RestTemplate` 之前，首先需要创建一个实例。你可以通过以下方式创建：

```java
RestTemplate restTemplate = new RestTemplate();
```

### 2. 发送 GET 请求

`RestTemplate` 提供了多种方法来发送 GET 请求。以下是一个简单的示例，展示如何从远程 API 获取数据：

```java
String url = "https://api.example.com/users/1";
User user = restTemplate.getForObject(url, User.class);
System.out.println(user);
```

在这个示例中，`getForObject` 方法会将响应体映射为 `User` 对象。

### 3. 发送 POST 请求

发送 POST 请求同样简单。以下是一个示例，展示如何向远程 API 发送数据：

```java
String url = "https://api.example.com/users";
User newUser = new User("John", "Doe");
User createdUser = restTemplate.postForObject(url, newUser, User.class);
System.out.println(createdUser);
```

`postForObject` 方法会将请求体发送到指定的 URL，并将响应映射为 `User` 对象。

### 4. 发送 PUT 请求

PUT 请求通常用于更新资源。以下是一个示例：

```java
String url = "https://api.example.com/users/1";
User updatedUser = new User("Jane", "Doe");
restTemplate.put(url, updatedUser);
```

`put` 方法会将请求体发送到指定的 URL，但不会返回响应体。

### 5. 发送 DELETE 请求

DELETE 请求用于删除资源。以下是一个示例：

```java
String url = "https://api.example.com/users/1";
restTemplate.delete(url);
```

`delete` 方法会向指定的 URL 发送 DELETE 请求。

## 实际案例

假设你正在开发一个简单的用户管理系统，需要与远程 API 进行交互。以下是一个完整的示例，展示如何使用 `RestTemplate` 进行 CRUD 操作：

```java
public class UserService {

    private final RestTemplate restTemplate;

    public UserService(RestTemplate restTemplate) {
        this.restTemplate = restTemplate;
    }

    public User getUserById(Long id) {
        String url = "https://api.example.com/users/" + id;
        return restTemplate.getForObject(url, User.class);
    }

    public User createUser(User user) {
        String url = "https://api.example.com/users";
        return restTemplate.postForObject(url, user, User.class);
    }

    public void updateUser(Long id, User user) {
        String url = "https://api.example.com/users/" + id;
        restTemplate.put(url, user);
    }

    public void deleteUser(Long id) {
        String url = "https://api.example.com/users/" + id;
        restTemplate.delete(url);
    }
}
```

在这个示例中，`UserService` 类封装了与用户相关的所有操作，并通过 `RestTemplate` 与远程 API 进行交互。

## 总结

`RestTemplate` 是 Spring 框架中一个强大的工具，能够简化 RESTful API 的调用。通过本文的学习，你应该已经掌握了如何使用 `RestTemplate` 进行基本的 HTTP 请求操作，并了解了如何在实际项目中应用这些知识。

:::tip
如果你正在使用 Spring 5.x 或更高版本，建议尝试使用 `WebClient`，它是 `RestTemplate` 的现代化替代品，支持响应式编程模型。
:::

## 附加资源

- [Spring RestTemplate 官方文档](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html)
- [Spring WebClient 官方文档](https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#webflux-client)

## 练习

1. 使用 `RestTemplate` 实现一个简单的天气查询应用，调用公共天气 API 并显示当前天气信息。
2. 修改上面的 `UserService` 示例，使其能够处理异常情况（例如，API 返回 404 错误时）。