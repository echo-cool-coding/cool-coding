---
title: Spring REST文档
description: 了解如何使用Spring REST文档为您的RESTful API生成清晰、结构化的文档，帮助开发者和用户更好地理解和使用API。
---

# Spring REST文档

在现代Web开发中，RESTful API是应用程序之间通信的核心。为了让开发者和其他用户更好地理解和使用API，文档是必不可少的。Spring REST文档是一个强大的工具，可以帮助您为Spring应用程序中的RESTful API生成清晰、结构化的文档。

## 什么是Spring REST文档？

Spring REST文档是一个库，它允许您通过编写测试来生成API文档。与传统的文档编写方式不同，Spring REST文档通过测试来确保文档的准确性和实时性。这意味着，每当您的API发生变化时，文档也会自动更新，从而避免了文档与代码不同步的问题。

## 为什么使用Spring REST文档？

1. **自动化**：通过测试生成文档，确保文档始终与代码同步。
2. **结构化**：生成的文档具有良好的结构，易于阅读和理解。
3. **可扩展**：支持自定义文档格式和内容，满足不同需求。
4. **集成**：与Spring生态系统无缝集成，易于在现有项目中引入。

## 如何开始使用Spring REST文档？

### 1. 添加依赖

首先，您需要在项目中添加Spring REST文档的依赖。如果您使用的是Maven，可以在`pom.xml`中添加以下依赖：

```xml
<dependency>
    <groupId>org.springframework.restdocs</groupId>
    <artifactId>spring-restdocs-mockmvc</artifactId>
    <version>2.0.6.RELEASE</version>
    <scope>test</scope>
</dependency>
```

### 2. 编写测试

接下来，您需要编写测试来生成文档。以下是一个简单的示例，展示了如何使用Spring REST文档为GET请求生成文档：

```java
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.web.servlet.MockMvc;

import static org.springframework.restdocs.mockmvc.MockMvcRestDocumentation.document;
import static org.springframework.restdocs.mockmvc.RestDocumentationRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;

@SpringBootTest
@AutoConfigureMockMvc
public class ApiDocumentationTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    public void shouldReturnDefaultMessage() throws Exception {
        this.mockMvc.perform(get("/api/greeting"))
                .andExpect(status().isOk())
                .andDo(document("greeting"));
    }
}
```

在这个测试中，我们使用`MockMvc`来模拟HTTP请求，并通过`document`方法生成文档。生成的文档将保存在`target/generated-snippets/greeting`目录下。

### 3. 生成文档

运行测试后，Spring REST文档会生成一组片段文件，这些文件包含了API的详细信息。您可以使用这些片段文件来构建最终的文档。

### 4. 构建最终文档

Spring REST文档支持多种文档格式，包括AsciiDoc和Markdown。以下是一个使用AsciiDoc生成文档的示例：

```asciidoc
= Greeting API

== GET /api/greeting

This endpoint returns a greeting message.

.Request
include::{snippets}/greeting/http-request.adoc[]

.Response
include::{snippets}/greeting/http-response.adoc[]
```

在这个示例中，我们使用AsciiDoc的`include`指令将生成的片段文件包含到最终文档中。

## 实际应用场景

假设您正在开发一个用户管理系统，其中包含一个获取用户信息的API。通过使用Spring REST文档，您可以轻松地为这个API生成文档，并确保文档始终与代码同步。

```java
@Test
public void shouldReturnUserDetails() throws Exception {
    this.mockMvc.perform(get("/api/users/{id}", 1))
            .andExpect(status().isOk())
            .andDo(document("user-details"));
}
```

生成的文档将包含API的请求和响应示例，帮助开发者快速理解如何使用这个API。

## 总结

Spring REST文档是一个强大的工具，可以帮助您为RESTful API生成清晰、结构化的文档。通过编写测试来生成文档，您可以确保文档的准确性和实时性，从而避免文档与代码不同步的问题。

## 附加资源

- [Spring REST文档官方文档](https://docs.spring.io/spring-restdocs/docs/current/reference/html5/)
- [AsciiDoc语法指南](https://asciidoctor.org/docs/asciidoc-syntax-quick-reference/)
- [Markdown语法指南](https://www.markdownguide.org/)

## 练习

1. 为您的Spring项目添加Spring REST文档依赖。
2. 编写一个测试，为您的API生成文档。
3. 使用AsciiDoc或Markdown构建最终文档，并查看生成的结果。

通过完成这些练习，您将更好地理解如何使用Spring REST文档来生成高质量的API文档。