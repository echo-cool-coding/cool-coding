---
title: 页面路由与导航
description: 了解 JavaScript 中的页面路由与导航，掌握如何通过路由实现单页面应用（SPA）的页面切换和导航功能。
---

# 页面路由与导航

在现代 Web 开发中，单页面应用（SPA）已经成为一种主流的设计模式。与传统的多页面应用不同，SPA 通过 JavaScript 动态加载内容，避免了页面的完全刷新，从而提供了更流畅的用户体验。而实现这一功能的核心技术之一就是**页面路由与导航**。

## 什么是页面路由与导航？

页面路由（Routing）是指在单页面应用中，根据 URL 的变化动态加载不同内容的过程。通过路由，用户可以在不刷新整个页面的情况下，切换到不同的视图或页面。导航（Navigation）则是用户通过点击链接或按钮等方式触发路由变化的行为。

简单来说，路由是技术实现，导航是用户行为。两者共同协作，为用户提供无缝的页面切换体验。

---

## 路由的基本原理

在传统的多页面应用中，每次用户点击链接时，浏览器会向服务器发送请求，服务器返回一个新的 HTML 页面。而在 SPA 中，路由的工作方式有所不同：

1. **URL 变化**：用户点击链接或输入 URL 时，URL 会发生变化。
2. **路由匹配**：JavaScript 监听 URL 的变化，并根据 URL 匹配对应的组件或视图。
3. **内容加载**：匹配成功后，动态加载相应的内容并渲染到页面上。

为了实现这一功能，通常会使用前端路由库，例如 [React Router](https://reactrouter.com/) 或 [Vue Router](https://router.vuejs.org/)。

---

## 实现一个简单的路由

以下是一个使用原生 JavaScript 实现的简单路由示例：

```javascript
// 定义路由表
const routes = {
  '/': '首页内容',
  '/about': '关于我们',
  '/contact': '联系我们'
};

// 监听 URL 变化
window.addEventListener('hashchange', () => {
  const path = window.location.hash.slice(1) || '/';
  document.getElementById('content').innerText = routes[path] || '页面未找到';
});

// 初始化页面
window.addEventListener('load', () => {
  const path = window.location.hash.slice(1) || '/';
  document.getElementById('content').innerText = routes[path] || '页面未找到';
});
```

### 代码解析

1. **路由表**：`routes` 对象定义了 URL 路径与对应内容的映射关系。
2. **监听 URL 变化**：通过 `hashchange` 事件监听 URL 的变化，并根据新的 URL 更新页面内容。
3. **初始化页面**：在页面加载时，根据当前 URL 初始化页面内容。

### 示例输出

- 访问 `http://example.com/#/`，页面显示“首页内容”。
- 访问 `http://example.com/#/about`，页面显示“关于我们”。
- 访问 `http://example.com/#/contact`，页面显示“联系我们”。

---

## 使用 React Router 实现路由

在实际开发中，通常会使用现成的路由库来简化开发。以下是使用 React Router 实现路由的示例：

```javascript
import React from 'react';
import { BrowserRouter as Router, Route, Routes, Link } from 'react-router-dom';

function Home() {
  return <h1>首页内容</h1>;
}

function About() {
  return <h1>关于我们</h1>;
}

function Contact() {
  return <h1>联系我们</h1>;
}

function App() {
  return (
    <Router>
      <nav>
        <Link to="/">首页</Link>
        <Link to="/about">关于</Link>
        <Link to="/contact">联系</Link>
      </nav>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
        <Route path="/contact" element={<Contact />} />
      </Routes>
    </Router>
  );
}

export default App;
```

### 代码解析

1. **`BrowserRouter`**：用于包裹整个应用，提供路由功能。
2. **`Link`**：用于创建导航链接，点击后会更新 URL。
3. **`Routes` 和 `Route`**：用于定义路由规则，将 URL 路径与组件关联起来。

---

## 实际应用场景

### 场景 1：电商网站的商品详情页

在电商网站中，用户可以通过点击商品列表中的某个商品进入商品详情页。使用路由可以实现以下功能：

- 点击商品时，URL 更新为 `/product/123`（假设商品 ID 为 123）。
- 页面动态加载商品详情内容，而不需要刷新整个页面。

### 场景 2：博客网站的文章列表

在博客网站中，用户可以通过点击文章标题进入文章详情页。使用路由可以实现以下功能：

- 点击文章标题时，URL 更新为 `/post/456`（假设文章 ID 为 456）。
- 页面动态加载文章内容，并显示在页面上。

---

## 总结

页面路由与导航是单页面应用的核心功能之一。通过路由，我们可以根据 URL 的变化动态加载内容，从而提供更流畅的用户体验。无论是使用原生 JavaScript 还是现成的路由库，掌握路由的基本原理和实现方法都是非常重要的。

---

## 附加资源与练习

### 资源
- [React Router 官方文档](https://reactrouter.com/)
- [Vue Router 官方文档](https://router.vuejs.org/)
- [MDN: Window: hashchange event](https://developer.mozilla.org/en-US/docs/Web/API/Window/hashchange_event)

### 练习
1. 使用原生 JavaScript 实现一个包含 4 个页面的简单路由系统。
2. 使用 React Router 创建一个包含嵌套路由的应用（例如 `/user/:id/profile`）。
3. 尝试在路由中添加 404 页面处理功能，当用户访问不存在的路径时显示“页面未找到”。

通过实践这些练习，你将更深入地理解页面路由与导航的工作原理和应用场景。