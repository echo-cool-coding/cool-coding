---
title: STM32 LCD 接口
description: 本教程将详细介绍 STM32 微控制器的 LCD 接口，包括其工作原理、配置方法以及实际应用案例。适合初学者学习如何使用 STM32 驱动 LCD 显示屏。
---

## 介绍

LCD（液晶显示器）是一种常见的显示设备，广泛应用于嵌入式系统中。STM32 微控制器提供了多种接口方式与 LCD 显示屏进行通信，包括并行接口、SPI 接口和 I2C 接口等。本教程将重点介绍如何使用 STM32 的 GPIO 和 FSMC（Flexible Static Memory Controller）接口来驱动 LCD 显示屏。

## STM32 LCD 接口的工作原理

STM32 的 LCD 接口通常通过 GPIO 引脚或 FSMC 控制器与 LCD 显示屏连接。FSMC 是一种灵活的静态存储器控制器，可以用于驱动外部存储器设备，如 SRAM、NOR Flash 和 LCD 显示屏。

### GPIO 接口

使用 GPIO 接口驱动 LCD 显示屏时，STM32 的 GPIO 引脚被配置为输出模式，并通过软件控制来模拟 LCD 的时序信号。这种方法适用于简单的 LCD 显示屏，但效率较低。

### FSMC 接口

FSMC 接口提供了更高的数据传输速率和更简单的硬件连接方式。通过 FSMC，STM32 可以直接将 LCD 显示屏映射到内存地址空间，从而通过内存读写操作来控制 LCD 显示屏。

## 配置 STM32 的 LCD 接口

### 使用 GPIO 接口驱动 LCD

以下是一个使用 GPIO 接口驱动 LCD 显示屏的简单示例：

```c
#include "stm32f4xx.h"

#define LCD_RS_PIN GPIO_PIN_0
#define LCD_RS_PORT GPIOA
#define LCD_RW_PIN GPIO_PIN_1
#define LCD_RW_PORT GPIOA
#define LCD_E_PIN GPIO_PIN_2
#define LCD_E_PORT GPIOA
#define LCD_D4_PIN GPIO_PIN_3
#define LCD_D4_PORT GPIOA
#define LCD_D5_PIN GPIO_PIN_4
#define LCD_D5_PORT GPIOA
#define LCD_D6_PIN GPIO_PIN_5
#define LCD_D6_PORT GPIOA
#define LCD_D7_PIN GPIO_PIN_6
#define LCD_D7_PORT GPIOA

void LCD_Init() {
    // 初始化 GPIO 引脚
    GPIO_InitTypeDef GPIO_InitStruct = {0};
    __HAL_RCC_GPIOA_CLK_ENABLE();
    GPIO_InitStruct.Pin = LCD_RS_PIN | LCD_RW_PIN | LCD_E_PIN | LCD_D4_PIN | LCD_D5_PIN | LCD_D6_PIN | LCD_D7_PIN;
    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
    GPIO_InitStruct.Pull = GPIO_NOPULL;
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
    HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

    // 初始化 LCD
    // 这里省略了具体的初始化代码
}

void LCD_SendCommand(uint8_t command) {
    // 发送命令到 LCD
    // 这里省略了具体的发送命令代码
}

void LCD_SendData(uint8_t data) {
    // 发送数据到 LCD
    // 这里省略了具体的发送数据代码
}
```

### 使用 FSMC 接口驱动 LCD

以下是一个使用 FSMC 接口驱动 LCD 显示屏的简单示例：

```c
#include "stm32f4xx.h"

#define LCD_BASE_ADDRESS 0x60000000

void LCD_Init() {
    // 初始化 FSMC
    // 这里省略了具体的 FSMC 初始化代码

    // 初始化 LCD
    // 这里省略了具体的 LCD 初始化代码
}

void LCD_WriteCommand(uint16_t command) {
    *(__IO uint16_t *)(LCD_BASE_ADDRESS) = command;
}

void LCD_WriteData(uint16_t data) {
    *(__IO uint16_t *)(LCD_BASE_ADDRESS + 0x20000) = data;
}
```

## 实际应用案例

### 案例：使用 STM32 驱动 16x2 字符 LCD

假设我们有一个 16x2 的字符 LCD 显示屏，我们可以使用 STM32 的 GPIO 接口来驱动它。以下是一个简单的示例，展示了如何在 LCD 上显示 "Hello, World!"：

```c
#include "stm32f4xx.h"

void LCD_Init() {
    // 初始化 GPIO 引脚
    // 这里省略了具体的初始化代码
}

void LCD_SendCommand(uint8_t command) {
    // 发送命令到 LCD
    // 这里省略了具体的发送命令代码
}

void LCD_SendData(uint8_t data) {
    // 发送数据到 LCD
    // 这里省略了具体的发送数据代码
}

void LCD_Print(char *str) {
    while (*str) {
        LCD_SendData(*str++);
    }
}

int main(void) {
    LCD_Init();
    LCD_SendCommand(0x01); // 清屏
    LCD_SendCommand(0x0C); // 显示开，光标关
    LCD_Print("Hello, World!");
    while (1) {
        // 主循环
    }
}
```

## 总结

本教程介绍了 STM32 微控制器的 LCD 接口，包括 GPIO 和 FSMC 接口的使用方法。通过实际案例，我们展示了如何使用 STM32 驱动 LCD 显示屏。希望这些内容能帮助你更好地理解 STM32 的 LCD 接口，并在实际项目中应用。

## 附加资源与练习

- **练习 1**：尝试使用 FSMC 接口驱动一个图形 LCD 显示屏，并显示一幅简单的图像。
- **练习 2**：修改 GPIO 接口的代码，使其支持 8 位数据模式。
- **附加资源**：参考 STM32 官方文档，了解更多关于 FSMC 和 GPIO 的详细信息。

:::tip
在实际项目中，选择合适的接口方式（GPIO 或 FSMC）取决于 LCD 显示屏的类型和项目需求。FSMC 接口通常更适合高性能应用，而 GPIO 接口则适用于简单的 LCD 显示屏。
:::