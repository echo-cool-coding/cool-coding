---
title: STM32 启动模式
description: 了解STM32微控制器的启动模式，掌握如何通过配置启动引脚选择不同的启动方式。
---

# STM32 启动模式

STM32微控制器是嵌入式系统中广泛使用的芯片之一。了解其启动模式是开发过程中的关键一步。启动模式决定了STM32在上电或复位后如何加载和执行程序。本文将详细介绍STM32的启动模式，帮助初学者理解其工作原理和应用场景。

## 什么是STM32启动模式？

STM32的启动模式是指微控制器在上电或复位后，从哪个存储区域开始执行程序。STM32提供了多种启动模式，开发者可以通过配置启动引脚（BOOT0和BOOT1）来选择不同的启动方式。

## STM32 启动模式详解

STM32的启动模式主要由两个引脚（BOOT0和BOOT1）控制。以下是三种主要的启动模式：

1. **从主闪存启动（Main Flash Memory）**  
   这是最常见的启动模式，STM32从内部闪存中加载并执行程序。适用于大多数应用程序。

2. **从系统存储器启动（System Memory）**  
   在这种模式下，STM32从系统存储器中加载并执行程序。系统存储器通常包含出厂预编程的引导加载程序（Bootloader），用于通过串口、USB等方式更新固件。

3. **从嵌入式SRAM启动（Embedded SRAM）**  
   在这种模式下，STM32从内部SRAM中加载并执行程序。适用于调试或需要快速启动的场景。

### 启动模式配置

启动模式通过BOOT0和BOOT1引脚的电平状态来配置。以下是不同启动模式的配置表：

| BOOT1 | BOOT0 | 启动模式           |
|-------|-------|--------------------|
| 0     | 0     | 主闪存启动         |
| 0     | 1     | 系统存储器启动     |
| 1     | 0     | 嵌入式SRAM启动     |
| 1     | 1     | 保留（通常不使用） |

:::note
在实际应用中，BOOT1引脚通常通过电阻下拉到GND，因此大多数情况下只需关注BOOT0引脚的状态。
:::

### 启动模式的选择

选择启动模式时，需要考虑以下因素：

- **主闪存启动**：适用于常规应用程序开发，程序存储在内部闪存中。
- **系统存储器启动**：适用于固件更新或恢复出厂设置。
- **嵌入式SRAM启动**：适用于调试或需要快速启动的场景，但程序在断电后会丢失。

## 实际应用案例

### 案例1：通过系统存储器启动更新固件

假设你需要通过串口更新STM32的固件。以下是具体步骤：

1. 将BOOT0引脚拉高（连接到VDD），BOOT1引脚拉低（连接到GND）。
2. 复位STM32，使其进入系统存储器启动模式。
3. 使用ST提供的工具（如STM32CubeProgrammer）通过串口连接STM32。
4. 上传新的固件到主闪存。
5. 完成后，将BOOT0引脚拉低，复位STM32，使其从主闪存启动。

### 案例2：调试时使用嵌入式SRAM启动

在调试阶段，你可能希望快速加载并测试代码，而不需要将程序写入闪存。以下是具体步骤：

1. 将BOOT0引脚拉高，BOOT1引脚拉低。
2. 复位STM32，使其进入嵌入式SRAM启动模式。
3. 使用调试工具（如ST-Link）将程序加载到SRAM中。
4. 运行程序并观察调试结果。

:::tip
在调试完成后，记得将BOOT0引脚拉低，以便STM32从主闪存启动。
:::

## 总结

STM32的启动模式是开发过程中非常重要的概念。通过配置BOOT0和BOOT1引脚，开发者可以选择从主闪存、系统存储器或嵌入式SRAM启动。每种启动模式都有其特定的应用场景，理解这些模式有助于更好地开发和调试STM32应用程序。

## 附加资源与练习

- **练习1**：尝试通过系统存储器启动模式更新STM32的固件。
- **练习2**：在调试模式下，使用嵌入式SRAM启动模式加载并运行一个简单的程序。
- **资源**：参考STM32官方文档，了解更多关于启动模式的详细信息。

希望本文能帮助你更好地理解STM32的启动模式。如果你有任何问题，欢迎在评论区留言讨论！