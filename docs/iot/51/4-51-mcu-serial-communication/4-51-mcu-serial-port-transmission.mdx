---
title: 51单片机串口发送
description: 学习如何在51单片机中使用串口发送数据。本文将从基础概念入手，逐步讲解串口通信的原理和实现方法，并提供代码示例和实际应用场景。
---

## 介绍

串口通信是单片机与外部设备进行数据交换的一种常见方式。51单片机内置了串行通信接口（UART），可以通过串口发送和接收数据。本文将重点介绍如何使用51单片机的串口发送数据。

串口通信的基本原理是通过两根信号线（TX 和 RX）进行数据的传输。TX（Transmit）用于发送数据，RX（Receive）用于接收数据。串口通信的常见参数包括波特率（Baud Rate）、数据位、停止位和校验位。

## 串口发送的基本步骤

1. **初始化串口**：设置波特率、数据位、停止位和校验位。
2. **发送数据**：将数据写入串口发送缓冲区，等待数据发送完成。

### 1. 初始化串口

在51单片机中，串口的初始化通常通过配置特殊功能寄存器（SFR）来完成。以下是一个典型的串口初始化代码示例：

```c
#include <reg51.h>

void UART_Init() {
    SCON = 0x50;        // 设置串口模式1，8位数据，1位停止位
    TMOD |= 0x20;       // 设置定时器1为模式2（8位自动重装）
    TH1 = 0xFD;         // 设置波特率为9600
    TL1 = 0xFD;
    TR1 = 1;            // 启动定时器1
    ES = 1;             // 使能串口中断
    EA = 1;             // 使能全局中断
}
```

### 2. 发送数据

发送数据时，将数据写入 `SBUF` 寄存器，单片机会自动将数据通过串口发送出去。以下是一个发送单个字符的示例：

```c
void UART_SendChar(char c) {
    SBUF = c;           // 将字符写入发送缓冲区
    while (!TI);        // 等待发送完成
    TI = 0;             // 清除发送中断标志
}
```

### 3. 发送字符串

如果需要发送一个字符串，可以循环调用 `UART_SendChar` 函数：

```c
void UART_SendString(char *str) {
    while (*str) {
        UART_SendChar(*str++);
    }
}
```

## 实际应用场景

假设你正在开发一个温度监控系统，单片机通过串口将温度数据发送到PC端进行显示。以下是一个简单的示例：

```c
void main() {
    UART_Init();        // 初始化串口
    while (1) {
        int temperature = readTemperature(); // 读取温度传感器数据
        char buffer[10];
        sprintf(buffer, "Temp: %d C\n", temperature); // 格式化温度数据
        UART_SendString(buffer); // 发送温度数据
        delay(1000);    // 延时1秒
    }
}
```

在这个示例中，单片机每隔1秒读取一次温度数据，并通过串口发送到PC端。

## 总结

通过本文，你学习了如何在51单片机中使用串口发送数据。我们介绍了串口通信的基本原理、初始化步骤以及如何发送单个字符和字符串。最后，我们通过一个实际应用场景展示了串口发送数据的使用方法。

:::tip
在实际开发中，确保串口通信的波特率、数据位、停止位和校验位与接收端一致，否则会导致通信失败。
:::

## 附加资源

- [51单片机串口通信手册](https://example.com)
- [串口通信协议详解](https://example.com)

## 练习

1. 修改代码，使单片机每隔500毫秒发送一次数据。
2. 尝试使用不同的波特率（如19200、38400）进行通信，并观察结果。
3. 扩展代码，使单片机能够发送浮点数数据。