---
title: 51单片机串口应用实例
description: 本文详细介绍了51单片机串口通信的基本概念、实现方法以及实际应用案例，适合初学者学习。
---

# 51单片机串口应用实例

## 介绍

串口通信是51单片机中非常重要的一种通信方式，它允许单片机与其他设备（如电脑、传感器、显示屏等）进行数据交换。串口通信通过两根线（TX 和 RX）实现数据的发送和接收，具有简单、可靠的特点。本文将逐步讲解51单片机串口通信的基本原理，并通过实际案例展示其应用。

## 串口通信的基本概念

串口通信是一种异步通信方式，数据以字节为单位进行传输。每个字节由起始位、数据位、校验位和停止位组成。常见的波特率（Baud Rate）有9600、19200、38400等，表示每秒传输的位数。

在51单片机中，串口通信通常通过UART（通用异步收发传输器）模块实现。UART模块负责将并行数据转换为串行数据，并通过TX引脚发送出去；同时，它也能通过RX引脚接收串行数据，并将其转换为并行数据。

## 51单片机串口通信的实现

### 1. 配置串口

在使用串口通信之前，需要对51单片机的串口进行配置。主要包括设置波特率、数据位、校验位和停止位。

以下是一个配置串口的代码示例：

```c
#include <reg51.h>

void UART_Init() {
    SCON = 0x50;        // 8位数据位，1位停止位，无校验位
    TMOD |= 0x20;       // 定时器1工作在模式2（8位自动重装）
    TH1 = 0xFD;         // 波特率9600
    TL1 = 0xFD;
    TR1 = 1;            // 启动定时器1
    ES = 1;             // 使能串口中断
    EA = 1;             // 使能总中断
}
```

### 2. 发送数据

配置好串口后，可以通过`SBUF`寄存器发送数据。以下是一个发送数据的代码示例：

```c
void UART_SendByte(unsigned char byte) {
    SBUF = byte;        // 将数据写入SBUF寄存器
    while (!TI);        // 等待发送完成
    TI = 0;             // 清除发送标志位
}
```

### 3. 接收数据

接收数据时，可以通过`SBUF`寄存器读取接收到的数据。以下是一个接收数据的代码示例：

```c
unsigned char UART_ReceiveByte() {
    while (!RI);        // 等待接收完成
    RI = 0;             // 清除接收标志位
    return SBUF;        // 返回接收到的数据
}
```

### 4. 串口中断

为了实时处理接收到的数据，可以使用串口中断。以下是一个串口中断处理的代码示例：

```c
void UART_ISR() interrupt 4 {
    if (RI) {
        RI = 0;         // 清除接收标志位
        unsigned char receivedData = SBUF;  // 读取接收到的数据
        // 处理接收到的数据
    }
    if (TI) {
        TI = 0;         // 清除发送标志位
    }
}
```

## 实际应用案例

### 案例1：单片机与PC通信

假设我们需要通过串口将51单片机采集的温度数据发送到PC，并在PC上显示。以下是实现该功能的代码示例：

```c
#include <reg51.h>

void UART_Init() {
    SCON = 0x50;        // 8位数据位，1位停止位，无校验位
    TMOD |= 0x20;       // 定时器1工作在模式2（8位自动重装）
    TH1 = 0xFD;         // 波特率9600
    TL1 = 0xFD;
    TR1 = 1;            // 启动定时器1
    ES = 1;             // 使能串口中断
    EA = 1;             // 使能总中断
}

void UART_SendByte(unsigned char byte) {
    SBUF = byte;        // 将数据写入SBUF寄存器
    while (!TI);        // 等待发送完成
    TI = 0;             // 清除发送标志位
}

void UART_SendString(char *str) {
    while (*str) {
        UART_SendByte(*str++);
    }
}

void main() {
    UART_Init();
    while (1) {
        unsigned char temperature = 25;  // 假设采集到的温度为25度
        UART_SendString("Temperature: ");
        UART_SendByte(temperature + '0');  // 发送温度数据
        UART_SendString(" C\n");
        // 延时一段时间
        for (int i = 0; i < 10000; i++);
    }
}
```

在PC端，可以使用串口调试工具（如Tera Term、Putty等）接收并显示单片机发送的温度数据。

### 案例2：单片机与LCD显示屏通信

假设我们需要通过串口将51单片机采集的光强数据发送到LCD显示屏上显示。以下是实现该功能的代码示例：

```c
#include <reg51.h>

void UART_Init() {
    SCON = 0x50;        // 8位数据位，1位停止位，无校验位
    TMOD |= 0x20;       // 定时器1工作在模式2（8位自动重装）
    TH1 = 0xFD;         // 波特率9600
    TL1 = 0xFD;
    TR1 = 1;            // 启动定时器1
    ES = 1;             // 使能串口中断
    EA = 1;             // 使能总中断
}

void UART_SendByte(unsigned char byte) {
    SBUF = byte;        // 将数据写入SBUF寄存器
    while (!TI);        // 等待发送完成
    TI = 0;             // 清除发送标志位
}

void UART_SendString(char *str) {
    while (*str) {
        UART_SendByte(*str++);
    }
}

void main() {
    UART_Init();
    while (1) {
        unsigned char lightIntensity = 80;  // 假设采集到的光强为80
        UART_SendString("Light Intensity: ");
        UART_SendByte(lightIntensity / 10 + '0');  // 发送十位数
        UART_SendByte(lightIntensity % 10 + '0');  // 发送个位数
        UART_SendString("\n");
        // 延时一段时间
        for (int i = 0; i < 10000; i++);
    }
}
```

在LCD显示屏上，可以通过串口接收并显示单片机发送的光强数据。

## 总结

本文详细介绍了51单片机串口通信的基本概念、实现方法以及实际应用案例。通过配置串口、发送和接收数据，以及使用串口中断，我们可以实现单片机与其他设备之间的数据交换。串口通信在嵌入式系统中有着广泛的应用，掌握这一技术对于初学者来说非常重要。

## 附加资源与练习

- **练习1**：修改案例1中的代码，使其能够发送更多的传感器数据（如湿度、气压等）。
- **练习2**：尝试使用不同的波特率进行串口通信，并观察通信效果。
- **附加资源**：可以参考51单片机的数据手册，了解更多关于UART模块的详细信息。

:::tip
在实际项目中，串口通信可能会受到电磁干扰的影响，建议在硬件设计时采取适当的抗干扰措施，如使用屏蔽线、增加滤波电容等。
:::