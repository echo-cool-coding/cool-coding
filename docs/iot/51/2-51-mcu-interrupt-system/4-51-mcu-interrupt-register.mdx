---
title: 51单片机中断寄存器
description: 本文详细介绍了51单片机中断寄存器的功能、配置方法以及实际应用场景，帮助初学者理解并掌握中断寄存器的使用。
---

## 介绍

在51单片机中，中断系统是一个非常重要的功能，它允许单片机在执行主程序的同时，响应外部或内部事件。中断寄存器是控制和管理中断系统的关键部分。通过配置这些寄存器，开发者可以决定哪些中断源被启用、中断的优先级以及中断触发的方式。

本文将详细介绍51单片机中的中断寄存器，包括它们的结构、功能以及如何配置这些寄存器来实现中断控制。

## 中断寄存器概述

51单片机的中断系统主要由以下几个寄存器控制：

1. **IE（Interrupt Enable）寄存器**：用于启用或禁用中断源。
2. **IP（Interrupt Priority）寄存器**：用于设置中断的优先级。
3. **TCON（Timer Control）寄存器**：用于控制定时器中断和外部中断的触发方式。
4. **SCON（Serial Control）寄存器**：用于控制串口中断。

### IE 寄存器

IE 寄存器用于启用或禁用中断源。它是一个8位寄存器，每一位对应一个中断源。以下是 IE 寄存器的位定义：

| 位 | 名称 | 描述 |
|----|------|------|
| 7 | EA | 全局中断使能位。1：启用全局中断；0：禁用全局中断。 |
| 6 | - | 保留位。 |
| 5 | ET2 | 定时器2中断使能位。1：启用；0：禁用。 |
| 4 | ES | 串口中断使能位。1：启用；0：禁用。 |
| 3 | ET1 | 定时器1中断使能位。1：启用；0：禁用。 |
| 2 | EX1 | 外部中断1使能位。1：启用；0：禁用。 |
| 1 | ET0 | 定时器0中断使能位。1：启用；0：禁用。 |
| 0 | EX0 | 外部中断0使能位。1：启用；0：禁用。 |

### IP 寄存器

IP 寄存器用于设置中断的优先级。它是一个8位寄存器，每一位对应一个中断源。以下是 IP 寄存器的位定义：

| 位 | 名称 | 描述 |
|----|------|------|
| 7 | - | 保留位。 |
| 6 | - | 保留位。 |
| 5 | PT2 | 定时器2中断优先级。1：高优先级；0：低优先级。 |
| 4 | PS | 串口中断优先级。1：高优先级；0：低优先级。 |
| 3 | PT1 | 定时器1中断优先级。1：高优先级；0：低优先级。 |
| 2 | PX1 | 外部中断1优先级。1：高优先级；0：低优先级。 |
| 1 | PT0 | 定时器0中断优先级。1：高优先级；0：低优先级。 |
| 0 | PX0 | 外部中断0优先级。1：高优先级；0：低优先级。 |

### TCON 寄存器

TCON 寄存器用于控制定时器中断和外部中断的触发方式。以下是 TCON 寄存器的位定义：

| 位 | 名称 | 描述 |
|----|------|------|
| 7 | TF1 | 定时器1溢出标志位。1：溢出；0：未溢出。 |
| 6 | TR1 | 定时器1运行控制位。1：启动；0：停止。 |
| 5 | TF0 | 定时器0溢出标志位。1：溢出；0：未溢出。 |
| 4 | TR0 | 定时器0运行控制位。1：启动；0：停止。 |
| 3 | IE1 | 外部中断1触发标志位。1：触发；0：未触发。 |
| 2 | IT1 | 外部中断1触发方式控制位。1：下降沿触发；0：低电平触发。 |
| 1 | IE0 | 外部中断0触发标志位。1：触发；0：未触发。 |
| 0 | IT0 | 外部中断0触发方式控制位。1：下降沿触发；0：低电平触发。 |

### SCON 寄存器

SCON 寄存器用于控制串口中断。以下是 SCON 寄存器的位定义：

| 位 | 名称 | 描述 |
|----|------|------|
| 7 | SM0 | 串口模式选择位。 |
| 6 | SM1 | 串口模式选择位。 |
| 5 | SM2 | 多机通信控制位。 |
| 4 | REN | 接收使能位。1：启用接收；0：禁用接收。 |
| 3 | TB8 | 发送数据位8。 |
| 2 | RB8 | 接收数据位8。 |
| 1 | TI | 发送中断标志位。1：发送完成；0：未完成。 |
| 0 | RI | 接收中断标志位。1：接收完成；0：未完成。 |

## 配置中断寄存器

### 启用中断

要启用某个中断源，首先需要设置 IE 寄存器中的相应位。例如，启用外部中断0和定时器0中断：

```c
IE = 0x83;  // 启用外部中断0和定时器0中断
```

### 设置中断优先级

通过设置 IP 寄存器，可以为不同的中断源设置优先级。例如，将外部中断0设置为高优先级：

```c
IP = 0x01;  // 设置外部中断0为高优先级
```

### 配置外部中断触发方式

通过设置 TCON 寄存器中的 IT0 和 IT1 位，可以配置外部中断的触发方式。例如，将外部中断0配置为下降沿触发：

```c
TCON = 0x01;  // 设置外部中断0为下降沿触发
```

## 实际应用案例

### 外部中断控制LED

假设我们希望通过外部中断0来控制一个LED的开关。当外部中断0触发时，LED的状态会翻转。以下是实现代码：

```c
#include <reg51.h>

sbit LED = P1^0;  // 定义LED连接到P1.0

void external0_isr() interrupt 0 {
    LED = ~LED;  // 翻转LED状态
}

void main() {
    IE = 0x81;  // 启用外部中断0
    IT0 = 1;    // 设置外部中断0为下降沿触发
    while (1) {
        // 主程序循环
    }
}
```

在这个例子中，当外部中断0触发时，`external0_isr` 函数会被调用，LED的状态会翻转。

## 总结

51单片机的中断寄存器是控制中断系统的关键。通过配置 IE、IP、TCON 和 SCON 寄存器，开发者可以灵活地管理中断源、优先级和触发方式。掌握这些寄存器的使用方法，对于编写高效的单片机程序至关重要。

## 附加资源与练习

- **练习1**：尝试修改上述代码，使用定时器0中断来控制LED的闪烁频率。
- **练习2**：研究串口中断的使用方法，编写一个通过串口接收数据并控制LED的程序。

:::tip
在实际开发中，合理使用中断可以大大提高程序的响应速度和效率。建议多进行实践，熟悉各种中断的使用场景。
:::