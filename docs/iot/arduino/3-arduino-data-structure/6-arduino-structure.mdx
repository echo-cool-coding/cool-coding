---
title: Arduino 结构体
description: "了解如何在Arduino中使用结构体来组织和存储相关数据，提升代码的可读性和可维护性。"
---

## 什么是Arduino结构体？

在Arduino编程中，**结构体（Struct）**是一种用户定义的数据类型，允许你将多个不同类型的变量组合在一起。结构体非常适合用于组织和存储相关数据，例如传感器读数、设备状态或复杂的数据记录。

结构体的主要优势在于它可以将多个相关的数据项封装在一个单一的实体中，从而使代码更易于理解和维护。

## 定义结构体

在Arduino中，结构体通过 `struct` 关键字定义。以下是一个简单的结构体定义示例：

```cpp
struct SensorData {
  int temperature;
  float humidity;
  bool isActive;
};
```

在这个例子中，我们定义了一个名为 `SensorData` 的结构体，它包含三个成员变量：`temperature`（温度）、`humidity`（湿度）和 `isActive`（是否激活）。

## 使用结构体

定义结构体后，你可以创建该结构体的变量，并访问其成员变量。以下是如何使用 `SensorData` 结构体的示例：

```cpp
SensorData mySensor;

void setup() {
  Serial.begin(9600);

  // 为结构体成员赋值
  mySensor.temperature = 25;
  mySensor.humidity = 60.5;
  mySensor.isActive = true;

  // 打印结构体成员的值
  Serial.print("Temperature: ");
  Serial.println(mySensor.temperature);
  Serial.print("Humidity: ");
  Serial.println(mySensor.humidity);
  Serial.print("Is Active: ");
  Serial.println(mySensor.isActive);
}

void loop() {
  // 主循环代码
}
```

### 输出结果

```
Temperature: 25
Humidity: 60.50
Is Active: 1
```

在这个示例中，我们创建了一个 `SensorData` 类型的变量 `mySensor`，并为其成员变量赋值。然后，我们通过串口打印这些值。

## 结构体的实际应用

结构体在Arduino项目中非常有用，尤其是在处理复杂数据时。以下是一个实际应用场景：

### 案例：多传感器数据记录

假设你有一个Arduino项目，需要记录多个传感器的数据。使用结构体可以轻松地组织和存储这些数据。

```cpp
struct SensorData {
  int temperature;
  float humidity;
  bool isActive;
};

SensorData sensor1, sensor2;

void setup() {
  Serial.begin(9600);

  // 初始化传感器数据
  sensor1.temperature = 25;
  sensor1.humidity = 60.5;
  sensor1.isActive = true;

  sensor2.temperature = 30;
  sensor2.humidity = 55.0;
  sensor2.isActive = false;

  // 打印传感器数据
  printSensorData(sensor1);
  printSensorData(sensor2);
}

void loop() {
  // 主循环代码
}

void printSensorData(SensorData sensor) {
  Serial.print("Temperature: ");
  Serial.println(sensor.temperature);
  Serial.print("Humidity: ");
  Serial.println(sensor.humidity);
  Serial.print("Is Active: ");
  Serial.println(sensor.isActive);
  Serial.println("-------------------");
}
```

### 输出结果

```
Temperature: 25
Humidity: 60.50
Is Active: 1
-------------------
Temperature: 30
Humidity: 55.00
Is Active: 0
-------------------
```

在这个案例中，我们定义了两个 `SensorData` 类型的变量 `sensor1` 和 `sensor2`，并分别初始化它们的数据。然后，我们使用一个函数 `printSensorData` 来打印每个传感器的数据。

## 结构体数组

你还可以创建结构体数组，以便存储多个结构体实例。以下是一个示例：

```cpp
struct SensorData {
  int temperature;
  float humidity;
  bool isActive;
};

SensorData sensors[3];

void setup() {
  Serial.begin(9600);

  // 初始化传感器数据
  sensors[0].temperature = 25;
  sensors[0].humidity = 60.5;
  sensors[0].isActive = true;

  sensors[1].temperature = 30;
  sensors[1].humidity = 55.0;
  sensors[1].isActive = false;

  sensors[2].temperature = 22;
  sensors[2].humidity = 70.0;
  sensors[2].isActive = true;

  // 打印所有传感器数据
  for (int i = 0; i < 3; i++) {
    printSensorData(sensors[i]);
  }
}

void loop() {
  // 主循环代码
}

void printSensorData(SensorData sensor) {
  Serial.print("Temperature: ");
  Serial.println(sensor.temperature);
  Serial.print("Humidity: ");
  Serial.println(sensor.humidity);
  Serial.print("Is Active: ");
  Serial.println(sensor.isActive);
  Serial.println("-------------------");
}
```

### 输出结果

```
Temperature: 25
Humidity: 60.50
Is Active: 1
-------------------
Temperature: 30
Humidity: 55.00
Is Active: 0
-------------------
Temperature: 22
Humidity: 70.00
Is Active: 1
-------------------
```

在这个示例中，我们创建了一个 `SensorData` 类型的数组 `sensors`，并初始化了三个传感器的数据。然后，我们使用一个循环来打印所有传感器的数据。

## 总结

结构体是Arduino编程中非常有用的工具，它允许你将多个相关的数据项组合在一起，从而使代码更易于理解和维护。通过使用结构体，你可以更有效地组织和处理复杂的数据。

:::tip
**提示**：在实际项目中，结构体可以与其他高级功能（如函数、数组和指针）结合使用，以实现更复杂的数据处理逻辑。
:::

## 附加资源与练习

1. **练习**：尝试创建一个结构体来存储一个RGB LED的颜色值（红、绿、蓝），并编写代码来控制LED的颜色。
2. **扩展阅读**：了解更多关于C/C++中的结构体和其他数据类型的知识，以便在Arduino项目中更灵活地使用它们。

通过掌握结构体的使用，你将能够编写更高效、更易读的Arduino代码。继续练习和探索，你会发现结构体在项目开发中的强大之处！