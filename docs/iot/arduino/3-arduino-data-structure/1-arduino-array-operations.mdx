---
title: Arduino 数组操作
description: "学习如何在Arduino中使用数组，包括数组的声明、初始化、访问和操作。本文适合初学者，包含代码示例和实际应用场景。"
---

# Arduino 数组操作

数组是编程中一种重要的数据结构，它允许我们存储多个相同类型的值。在Arduino中，数组的使用非常广泛，尤其是在处理传感器数据、控制多个LED或管理多个输入输出时。本文将详细介绍如何在Arduino中使用数组，包括数组的声明、初始化、访问和操作。

## 什么是数组？

数组是一种数据结构，它允许我们将多个相同类型的值存储在一个变量中。数组中的每个值都有一个索引，通过索引我们可以访问或修改数组中的特定元素。数组的索引从0开始，这意味着第一个元素的索引是0，第二个元素的索引是1，依此类推。

## 数组的声明与初始化

在Arduino中，数组的声明和初始化非常简单。以下是一个声明和初始化整型数组的示例：

```cpp
int myArray[5] = {10, 20, 30, 40, 50};
```

在这个例子中，我们声明了一个名为 `myArray` 的数组，它可以存储5个整数。数组中的元素被初始化为 `{10, 20, 30, 40, 50}`。

:::note
数组的大小在声明时必须确定，并且不能更改。如果你尝试访问超出数组大小的索引，可能会导致程序崩溃或未定义的行为。
:::

## 访问数组元素

要访问数组中的元素，我们可以使用数组的索引。例如，要访问 `myArray` 中的第三个元素，我们可以这样做：

```cpp
int thirdElement = myArray[2];  // 索引从0开始，所以第三个元素的索引是2
```

在这个例子中，`thirdElement` 的值将是 `30`。

## 修改数组元素

我们也可以通过索引来修改数组中的元素。例如，如果我们想将 `myArray` 中的第四个元素改为 `100`，我们可以这样做：

```cpp
myArray[3] = 100;  // 将第四个元素的值改为100
```

## 遍历数组

在实际应用中，我们经常需要遍历数组中的所有元素。这可以通过使用 `for` 循环来实现。以下是一个遍历 `myArray` 并打印每个元素的示例：

```cpp
for (int i = 0; i < 5; i++) {
  Serial.println(myArray[i]);
}
```

在这个例子中，`for` 循环从 `i = 0` 开始，每次循环增加 `i` 的值，直到 `i` 达到数组的大小（5）。在每次循环中，`myArray[i]` 的值被打印到串口监视器。

## 实际应用场景

### 控制多个LED

假设我们有5个LED连接到Arduino的数字引脚2到6。我们可以使用数组来存储这些引脚号，并通过遍历数组来控制每个LED的状态。

```cpp
int ledPins[5] = {2, 3, 4, 5, 6};

void setup() {
  for (int i = 0; i < 5; i++) {
    pinMode(ledPins[i], OUTPUT);
  }
}

void loop() {
  for (int i = 0; i < 5; i++) {
    digitalWrite(ledPins[i], HIGH);
    delay(100);
    digitalWrite(ledPins[i], LOW);
  }
}
```

在这个例子中，`ledPins` 数组存储了LED连接的引脚号。在 `setup` 函数中，我们使用 `for` 循环将每个引脚设置为输出模式。在 `loop` 函数中，我们再次使用 `for` 循环依次点亮每个LED，并在点亮后稍作延迟。

### 读取多个传感器数据

假设我们有3个模拟传感器连接到Arduino的A0到A2引脚。我们可以使用数组来存储这些传感器的读数。

```cpp
int sensorPins[3] = {A0, A1, A2};
int sensorValues[3];

void setup() {
  Serial.begin(9600);
}

void loop() {
  for (int i = 0; i < 3; i++) {
    sensorValues[i] = analogRead(sensorPins[i]);
    Serial.print("Sensor ");
    Serial.print(i);
    Serial.print(": ");
    Serial.println(sensorValues[i]);
  }
  delay(1000);
}
```

在这个例子中，`sensorPins` 数组存储了传感器连接的引脚号，`sensorValues` 数组用于存储每个传感器的读数。在 `loop` 函数中，我们使用 `for` 循环读取每个传感器的值，并将其打印到串口监视器。

## 总结

数组是Arduino编程中非常强大的工具，它允许我们高效地存储和操作多个相同类型的值。通过本文，我们学习了如何声明、初始化、访问和修改数组，以及如何在实际应用中使用数组来控制多个LED或读取多个传感器数据。

:::tip
练习：尝试创建一个数组来存储10个温度传感器的读数，并在串口监视器中打印出每个传感器的读数。
:::

## 附加资源

- [Arduino官方文档](https://www.arduino.cc/reference/en/)
- [Arduino数组教程](https://www.arduino.cc/en/Tutorial/BuiltInExamples/Arrays)

希望本文能帮助你更好地理解和使用Arduino中的数组。如果你有任何问题或需要进一步的帮助，请随时访问我们的论坛或查阅相关文档。