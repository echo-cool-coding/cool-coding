---
title: Arduino 程序结构
description: 了解Arduino程序的基本结构，包括setup()和loop()函数的作用，以及如何编写和运行简单的Arduino程序。
---

## 介绍

Arduino是一种开源的电子原型平台，广泛应用于各种电子项目和物联网设备中。要开始使用Arduino，首先需要了解其程序的基本结构。Arduino程序通常由两个主要部分组成：`setup()` 和 `loop()`。这两个函数是Arduino程序的核心，理解它们的作用对于编写有效的Arduino代码至关重要。

## Arduino 程序的基本结构

每个Arduino程序都包含以下两个主要函数：

1. **`setup()` 函数**：这个函数在程序启动时只运行一次。它通常用于初始化变量、设置引脚模式、启动串口通信等。

2. **`loop()` 函数**：这个函数在`setup()`函数执行完毕后会不断重复运行。它包含了程序的主要逻辑，如读取传感器数据、控制输出设备等。

### 示例代码

以下是一个简单的Arduino程序示例，展示了`setup()`和`loop()`函数的基本用法：

```cpp
void setup() {
  // 初始化串口通信，设置波特率为9600
  Serial.begin(9600);
  
  // 设置13号引脚为输出模式
  pinMode(13, OUTPUT);
}

void loop() {
  // 打开13号引脚的LED
  digitalWrite(13, HIGH);
  
  // 等待1秒
  delay(1000);
  
  // 关闭13号引脚的LED
  digitalWrite(13, LOW);
  
  // 等待1秒
  delay(1000);
}
```

### 代码解释

- **`setup()` 函数**：
  - `Serial.begin(9600);`：初始化串口通信，设置波特率为9600。
  - `pinMode(13, OUTPUT);`：将13号引脚设置为输出模式，用于控制LED。

- **`loop()` 函数**：
  - `digitalWrite(13, HIGH);`：将13号引脚设置为高电平，点亮LED。
  - `delay(1000);`：等待1秒。
  - `digitalWrite(13, LOW);`：将13号引脚设置为低电平，关闭LED。
  - `delay(1000);`：再次等待1秒。

## 实际应用案例

### 案例：闪烁LED

假设你有一个连接到Arduino的LED灯，你希望它每隔1秒闪烁一次。你可以使用上述代码来实现这个功能。通过`setup()`函数初始化引脚，然后在`loop()`函数中不断切换LED的状态，从而实现闪烁效果。

### 案例：读取温度传感器

假设你有一个温度传感器连接到Arduino的模拟输入引脚。你可以在`setup()`函数中初始化串口通信，然后在`loop()`函数中不断读取传感器的值并将其发送到串口监视器。

```cpp
void setup() {
  // 初始化串口通信
  Serial.begin(9600);
}

void loop() {
  // 读取模拟输入引脚A0的值
  int sensorValue = analogRead(A0);
  
  // 将读取的值发送到串口监视器
  Serial.println(sensorValue);
  
  // 等待500毫秒
  delay(500);
}
```

## 总结

Arduino程序的基本结构由`setup()`和`loop()`两个函数组成。`setup()`函数用于初始化设置，而`loop()`函数则包含了程序的主要逻辑，并会不断重复执行。理解这两个函数的作用是编写Arduino程序的基础。

## 附加资源与练习

- **练习1**：修改上述闪烁LED的代码，使LED的闪烁频率变为每500毫秒一次。
- **练习2**：编写一个程序，读取光敏电阻的值，并根据光线强度控制LED的亮度。
- **附加资源**：Arduino官方文档提供了丰富的教程和示例代码，建议初学者多参考官方文档以加深理解。

:::tip
提示：在编写Arduino程序时，务必确保`setup()`和`loop()`函数的正确使用，这是Arduino程序正常运行的关键。
:::