---
title: Arduino 函数基础
description: 了解Arduino函数的基本概念、语法和实际应用，帮助初学者掌握如何编写和使用函数。
---

# Arduino 函数基础

在Arduino编程中，函数是组织代码的基本单元。它们允许你将代码分解为可重用的模块，从而提高代码的可读性和可维护性。本文将介绍Arduino函数的基础知识，包括如何定义函数、调用函数以及函数的实际应用。

## 什么是函数？

函数是一段可以重复使用的代码块，它执行特定的任务。通过使用函数，你可以避免重复编写相同的代码，并且可以将复杂的程序分解为更小、更易管理的部分。

在Arduino中，函数通常分为两类：
1. **内置函数**：由Arduino库提供的函数，如 `digitalWrite()`、`delay()` 等。
2. **自定义函数**：由用户根据需要定义的函数。

## 定义函数

在Arduino中，函数的定义通常包括以下几个部分：
- **返回类型**：函数执行后返回的数据类型。如果函数不返回任何值，则使用 `void`。
- **函数名**：函数的名称，用于调用该函数。
- **参数列表**：传递给函数的数据，用逗号分隔。如果函数不需要参数，则使用空括号 `()`。
- **函数体**：包含函数实际执行的代码块，用大括号 `{}` 包裹。

### 语法
```cpp
返回类型 函数名(参数列表) {
    // 函数体
}
```

### 示例
以下是一个简单的函数示例，它接受两个整数作为参数并返回它们的和：
```cpp
int add(int a, int b) {
    return a + b;
}
```

## 调用函数

定义函数后，你可以通过函数名和适当的参数来调用它。调用函数时，程序会跳转到函数体并执行其中的代码，然后返回到调用点继续执行。

### 示例
```cpp
void setup() {
    Serial.begin(9600);
    int result = add(3, 5); // 调用add函数
    Serial.println(result); // 输出8
}

void loop() {
    // 主循环代码
}
```

## 实际应用案例

### 案例1：控制LED闪烁
假设你有一个连接到Arduino的LED灯，并且你想让它以特定的频率闪烁。你可以编写一个函数来实现这个功能：

```cpp
void blinkLED(int pin, int delayTime) {
    digitalWrite(pin, HIGH); // 打开LED
    delay(delayTime);        // 等待
    digitalWrite(pin, LOW);  // 关闭LED
    delay(delayTime);        // 等待
}

void setup() {
    pinMode(13, OUTPUT); // 设置13号引脚为输出模式
}

void loop() {
    blinkLED(13, 500); // 每500毫秒闪烁一次
}
```

### 案例2：读取传感器数据
假设你有一个连接到Arduino的温度传感器，并且你想定期读取并打印温度值。你可以编写一个函数来读取传感器数据：

```cpp
float readTemperature(int sensorPin) {
    int sensorValue = analogRead(sensorPin); // 读取传感器值
    float voltage = sensorValue * (5.0 / 1023.0); // 转换为电压
    float temperature = (voltage - 0.5) * 100; // 转换为温度
    return temperature;
}

void setup() {
    Serial.begin(9600);
}

void loop() {
    float temp = readTemperature(A0); // 读取A0引脚的温度
    Serial.print("Temperature: ");
    Serial.println(temp);
    delay(1000); // 每秒读取一次
}
```

## 总结

函数是Arduino编程中非常重要的概念。通过使用函数，你可以将代码组织得更加清晰和模块化，从而提高代码的可读性和可维护性。本文介绍了如何定义和调用函数，并通过实际案例展示了函数的应用。

## 附加资源与练习

- **练习1**：编写一个函数，计算两个数的乘积，并在 `setup()` 中调用它。
- **练习2**：编写一个函数，控制两个LED灯交替闪烁，并在 `loop()` 中调用它。
- **参考资源**：Arduino官方文档中的[函数部分](https://www.arduino.cc/reference/en/)提供了更多关于内置函数的信息。

通过不断练习和探索，你将能够更好地掌握Arduino函数的使用，并编写出更复杂的程序。