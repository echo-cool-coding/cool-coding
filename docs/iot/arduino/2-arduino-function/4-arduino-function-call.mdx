---
title: Arduino 函数调用
description: 了解如何在Arduino中调用函数，掌握函数调用的基本概念、语法和实际应用场景。
---

# Arduino 函数调用

在Arduino编程中，函数调用是一个非常重要的概念。函数允许你将代码组织成可重用的模块，从而提高代码的可读性和可维护性。本文将详细介绍如何在Arduino中调用函数，并通过实际案例帮助你理解这一概念。

## 什么是函数调用？

函数调用是指在程序中使用已定义的函数。当你调用一个函数时，程序会跳转到该函数的定义处，执行其中的代码，然后返回到调用点继续执行后续代码。

### 函数调用的基本语法

在Arduino中，函数调用的基本语法如下：

```cpp
functionName(argument1, argument2, ...);
```

- `functionName` 是你要调用的函数的名称。
- `argument1, argument2, ...` 是传递给函数的参数（如果有的话）。

### 示例：简单的函数调用

让我们从一个简单的例子开始。假设我们有一个函数 `blinkLED`，它的功能是让LED灯闪烁一次。

```cpp
void blinkLED() {
  digitalWrite(LED_BUILTIN, HIGH);  // 打开LED
  delay(1000);                      // 等待1秒
  digitalWrite(LED_BUILTIN, LOW);   // 关闭LED
  delay(1000);                      // 等待1秒
}
```

要调用这个函数，你只需要在 `loop` 函数中写入 `blinkLED();`：

```cpp
void loop() {
  blinkLED();  // 调用blinkLED函数
}
```

在这个例子中，每次 `loop` 函数执行时，`blinkLED` 函数都会被调用一次，LED灯会闪烁一次。

## 带参数的函数调用

有时候，函数需要接收一些参数来完成特定的任务。例如，我们可以修改 `blinkLED` 函数，使其接收一个参数来控制LED闪烁的时间。

```cpp
void blinkLED(int delayTime) {
  digitalWrite(LED_BUILTIN, HIGH);  // 打开LED
  delay(delayTime);                 // 等待指定的时间
  digitalWrite(LED_BUILTIN, LOW);   // 关闭LED
  delay(delayTime);                 // 等待指定的时间
}
```

现在，当你调用 `blinkLED` 函数时，你需要传递一个参数：

```cpp
void loop() {
  blinkLED(500);  // 调用blinkLED函数，传递500毫秒作为参数
}
```

在这个例子中，LED灯会以500毫秒的间隔闪烁。

## 实际应用场景

### 案例1：控制多个LED

假设你有多个LED灯，并且希望它们以不同的时间间隔闪烁。你可以通过调用带参数的函数来实现这一点。

```cpp
void blinkLED(int pin, int delayTime) {
  digitalWrite(pin, HIGH);  // 打开指定引脚的LED
  delay(delayTime);         // 等待指定的时间
  digitalWrite(pin, LOW);   // 关闭指定引脚的LED
  delay(delayTime);         // 等待指定的时间
}

void loop() {
  blinkLED(2, 500);  // 控制引脚2的LED，闪烁间隔500毫秒
  blinkLED(3, 1000); // 控制引脚3的LED，闪烁间隔1000毫秒
}
```

在这个例子中，我们通过传递不同的引脚号和延迟时间来控制多个LED灯。

### 案例2：计算两个数的和

函数不仅可以用于控制硬件，还可以用于执行计算任务。例如，我们可以编写一个函数来计算两个数的和。

```cpp
int add(int a, int b) {
  return a + b;
}

void setup() {
  Serial.begin(9600);
  int result = add(5, 3);  // 调用add函数，计算5 + 3
  Serial.println(result);  // 输出结果
}

void loop() {
  // 空循环
}
```

在这个例子中，`add` 函数接收两个整数参数并返回它们的和。在 `setup` 函数中，我们调用 `add` 函数并将结果打印到串口监视器。

## 总结

函数调用是Arduino编程中的一个基本概念，它允许你将代码组织成可重用的模块。通过本文的学习，你应该已经掌握了如何在Arduino中调用函数，包括带参数和不带参数的函数调用。我们还通过实际案例展示了函数调用在控制硬件和执行计算任务中的应用。

:::tip
**练习：**
1. 编写一个函数 `toggleLED`，它接收一个引脚号作为参数，并在每次调用时切换该引脚的状态（从高电平到低电平，或从低电平到高电平）。
2. 修改 `blinkLED` 函数，使其接收两个参数：一个用于控制LED的引脚号，另一个用于控制闪烁的次数。
:::

通过不断练习，你将更加熟练地掌握函数调用的技巧，并能够编写出更加复杂和高效的Arduino程序。