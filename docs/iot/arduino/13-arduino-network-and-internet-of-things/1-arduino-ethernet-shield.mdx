---
title: Arduino 以太网Shield
description: 了解如何使用Arduino以太网Shield将Arduino连接到互联网，并探索其在物联网中的应用。
---

# Arduino 以太网Shield

Arduino以太网Shield是一种扩展板，允许Arduino通过以太网连接到互联网。它为Arduino提供了网络功能，使其能够发送和接收数据，从而实现物联网（IoT）应用。本文将详细介绍如何使用Arduino以太网Shield，并提供实际案例和代码示例。

## 什么是Arduino以太网Shield？

Arduino以太网Shield是一种扩展板，可以插在Arduino主板上，通过RJ45以太网接口连接到网络。它基于Wiznet W5100芯片，支持TCP/IP协议栈，使Arduino能够进行网络通信。以太网Shield还支持SD卡插槽，可以用于存储数据。

## 硬件连接

首先，将Arduino以太网Shield插入Arduino主板上。确保Shield与Arduino的引脚对齐并牢固连接。接下来，将以太网线插入Shield的RJ45接口，另一端连接到路由器或交换机。

## 软件设置

要使用Arduino以太网Shield，您需要安装Arduino IDE并导入以太网库。以下是设置步骤：

1. 打开Arduino IDE。
2. 导航到“工具” > “管理库”。
3. 搜索“Ethernet”并安装“Ethernet”库。

## 代码示例

以下是一个简单的代码示例，展示了如何使用Arduino以太网Shield连接到互联网并发送HTTP请求：

```cpp
#include <SPI.h>
#include <Ethernet.h>

// 设置MAC地址和IP地址
byte mac[] = { 0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED };
IPAddress ip(192, 168, 1, 177);

// 初始化以太网客户端
EthernetClient client;

void setup() {
  // 启动串口通信
  Serial.begin(9600);

  // 启动以太网连接
  if (Ethernet.begin(mac) == 0) {
    Serial.println("Failed to configure Ethernet using DHCP");
    // 如果DHCP失败，使用静态IP地址
    Ethernet.begin(mac, ip);
  }

  // 打印IP地址
  Serial.print("IP address: ");
  Serial.println(Ethernet.localIP());
}

void loop() {
  // 连接到服务器
  if (client.connect("www.example.com", 80)) {
    Serial.println("connected");

    // 发送HTTP请求
    client.println("GET / HTTP/1.1");
    client.println("Host: www.example.com");
    client.println("Connection: close");
    client.println();
  } else {
    Serial.println("connection failed");
  }

  // 等待服务器响应
  while (client.connected()) {
    if (client.available()) {
      char c = client.read();
      Serial.print(c);
    }
  }

  // 断开连接
  client.stop();
  Serial.println("disconnected");

  // 等待5秒后重新连接
  delay(5000);
}
```

### 代码解释

- `mac[]`：定义Arduino的MAC地址。
- `ip`：定义Arduino的IP地址。
- `Ethernet.begin(mac)`：尝试通过DHCP获取IP地址。如果失败，则使用静态IP地址。
- `client.connect("www.example.com", 80)`：连接到指定的服务器和端口。
- `client.println("GET / HTTP/1.1")`：发送HTTP GET请求。
- `client.available()`：检查是否有数据可读。
- `client.stop()`：断开连接。

## 实际应用案例

### 远程监控系统

Arduino以太网Shield可以用于构建远程监控系统。例如，您可以使用Arduino连接温度传感器，并通过以太网将数据发送到远程服务器。服务器可以存储数据并生成实时图表，供用户查看。

### 智能家居控制

通过Arduino以太网Shield，您可以控制家中的智能设备。例如，您可以通过Arduino控制灯光、空调等设备，并通过网络远程控制这些设备。

## 总结

Arduino以太网Shield为Arduino提供了强大的网络功能，使其能够连接到互联网并实现物联网应用。通过本文的介绍和代码示例，您应该能够开始使用Arduino以太网Shield进行网络通信。

## 附加资源

- [Arduino官方文档](https://www.arduino.cc/en/Reference/Ethernet)
- [Wiznet W5100芯片手册](https://www.wiznet.io/product-item/w5100/)

## 练习

1. 修改代码示例，使其连接到您自己的服务器并发送数据。
2. 尝试使用Arduino以太网Shield和传感器构建一个简单的远程监控系统。
3. 探索如何使用SD卡插槽存储数据，并通过网络发送这些数据。
