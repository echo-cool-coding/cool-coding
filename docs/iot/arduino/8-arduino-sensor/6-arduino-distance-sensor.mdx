---
title: Arduino 距离传感器
description: 了解如何使用Arduino连接和控制距离传感器，测量物体与传感器之间的距离，并探索其实际应用场景。
---

## 介绍

距离传感器是一种用于测量物体与传感器之间距离的设备。它们广泛应用于机器人、自动化系统、避障系统等领域。Arduino与距离传感器的结合，为初学者提供了一个简单而强大的工具，用于学习和实现距离测量功能。

在本教程中，我们将使用**HC-SR04超声波距离传感器**，这是Arduino项目中常用的传感器之一。它通过发射超声波并测量其反射时间来计算距离。

## 所需材料

- Arduino开发板（如Arduino Uno）
- HC-SR04超声波距离传感器
- 连接线
- 面包板（可选）

## 连接电路

首先，我们需要将HC-SR04传感器连接到Arduino。以下是连接方式：

- **VCC** -> 5V
- **GND** -> GND
- **Trig** -> 数字引脚9
- **Echo** -> 数字引脚10

:::note
确保连接正确，避免短路或损坏传感器。
:::

## 编写代码

接下来，我们将编写一个简单的Arduino程序来读取距离传感器的数据。

```cpp
const int trigPin = 9;
const int echoPin = 10;

void setup() {
  Serial.begin(9600);
  pinMode(trigPin, OUTPUT);
  pinMode(echoPin, INPUT);
}

void loop() {
  // 发送超声波脉冲
  digitalWrite(trigPin, LOW);
  delayMicroseconds(2);
  digitalWrite(trigPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(trigPin, LOW);

  // 读取反射时间
  long duration = pulseIn(echoPin, HIGH);

  // 计算距离（单位：厘米）
  int distance = duration * 0.034 / 2;

  // 输出距离到串口监视器
  Serial.print("Distance: ");
  Serial.print(distance);
  Serial.println(" cm");

  delay(1000); // 每秒测量一次
}
```

### 代码解释

1. **`trigPin`** 和 **`echoPin`** 分别连接到传感器的Trig和Echo引脚。
2. 在 `setup()` 函数中，我们初始化串口通信并设置引脚模式。
3. 在 `loop()` 函数中，我们发送一个10微秒的超声波脉冲，然后使用 `pulseIn()` 函数测量反射时间。
4. 根据声速（约340米/秒），我们计算距离并将其输出到串口监视器。

:::tip
你可以通过调整 `delay(1000)` 的值来改变测量频率。
:::

## 实际应用

距离传感器在许多实际应用中非常有用。以下是一些常见的应用场景：

1. **避障机器人**：机器人可以使用距离传感器检测前方障碍物并自动避开。
2. **自动门**：当有人接近时，距离传感器可以触发门自动打开。
3. **液位检测**：通过测量液体表面与传感器之间的距离，可以监控液位高度。

## 总结

在本教程中，我们学习了如何使用Arduino连接和控制HC-SR04超声波距离传感器。我们编写了一个简单的程序来测量距离，并探索了其实际应用场景。

:::caution
在实际项目中，确保传感器的测量范围和环境条件适合你的应用。例如，超声波传感器在潮湿或嘈杂的环境中可能表现不佳。
:::

## 附加资源

- [Arduino官方文档](https://www.arduino.cc/)
- [HC-SR04数据手册](https://www.sparkfun.com/datasheets/Sensors/Proximity/HCSR04.pdf)
- [Arduino项目示例](https://create.arduino.cc/projecthub)

## 练习

1. 修改代码，使LED灯在检测到物体距离小于10厘米时亮起。
2. 尝试使用其他类型的距离传感器（如红外距离传感器）并比较其性能。
3. 设计一个简单的避障机器人，使用距离传感器检测障碍物并改变方向。

通过完成这些练习，你将更深入地理解距离传感器的工作原理和应用场景。祝你学习愉快！