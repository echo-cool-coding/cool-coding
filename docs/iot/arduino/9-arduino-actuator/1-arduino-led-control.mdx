---
title: Arduino LED控制
description: "学习如何使用Arduino控制LED灯，从基础到实际应用，掌握LED的开关、亮度调节以及闪烁效果。"
---

# Arduino LED控制

LED（发光二极管）是Arduino项目中最常见的执行器之一。通过控制LED，我们可以实现简单的灯光效果，也可以构建复杂的交互式设备。本文将带你从基础开始，逐步学习如何使用Arduino控制LED。

## 1. 什么是LED？

LED是一种半导体器件，当电流通过时会发光。它有两个引脚：正极（阳极）和负极（阴极）。正极通常连接到电源，负极连接到地（GND）。LED的亮度可以通过调节电流来控制。

:::note
**注意**：LED是极性敏感的，连接时务必确保正负极正确，否则LED不会发光。
:::

## 2. 基础电路连接

在开始编程之前，我们需要将LED连接到Arduino板上。以下是一个简单的电路连接示例：

- 将LED的正极（长引脚）连接到Arduino的数字引脚（例如D13）。
- 将LED的负极（短引脚）连接到220Ω电阻的一端。
- 将电阻的另一端连接到Arduino的GND引脚。

```mermaid
graph LR
    A[Arduino D13] --> B[LED正极]
    B --> C[220Ω电阻]
    C --> D[Arduino GND]
```

## 3. 编写第一个LED控制程序

现在，我们将编写一个简单的Arduino程序，控制LED的开关。

```cpp
void setup() {
  // 将D13引脚设置为输出模式
  pinMode(13, OUTPUT);
}

void loop() {
  // 打开LED
  digitalWrite(13, HIGH);
  delay(1000); // 等待1秒

  // 关闭LED
  digitalWrite(13, LOW);
  delay(1000); // 等待1秒
}
```

### 代码解释：
- `pinMode(13, OUTPUT);`：将D13引脚设置为输出模式，以便控制LED。
- `digitalWrite(13, HIGH);`：将D13引脚设置为高电平，LED亮起。
- `digitalWrite(13, LOW);`：将D13引脚设置为低电平，LED熄灭。
- `delay(1000);`：程序暂停1秒。

### 输出效果：
LED将每隔1秒闪烁一次。

## 4. 控制LED亮度

除了开关LED，我们还可以通过PWM（脉宽调制）来控制LED的亮度。PWM通过快速切换引脚的高低电平来模拟不同的电压，从而控制LED的亮度。

以下是一个使用PWM控制LED亮度的示例：

```cpp
void setup() {
  // 将D9引脚设置为输出模式
  pinMode(9, OUTPUT);
}

void loop() {
  // 逐渐增加亮度
  for (int brightness = 0; brightness <= 255; brightness++) {
    analogWrite(9, brightness);
    delay(10); // 每10毫秒增加一次亮度
  }

  // 逐渐减少亮度
  for (int brightness = 255; brightness >= 0; brightness--) {
    analogWrite(9, brightness);
    delay(10); // 每10毫秒减少一次亮度
  }
}
```

### 代码解释：
- `analogWrite(9, brightness);`：使用PWM控制D9引脚的亮度，`brightness`值范围为0（完全关闭）到255（最亮）。
- `delay(10);`：每10毫秒调整一次亮度。

### 输出效果：
LED的亮度会逐渐增加，然后逐渐减少，形成呼吸灯效果。

## 5. 实际应用案例

### 案例1：交通信号灯模拟

我们可以使用多个LED来模拟交通信号灯。以下是一个简单的交通信号灯模拟程序：

```cpp
void setup() {
  // 设置三个LED引脚为输出模式
  pinMode(8, OUTPUT); // 红灯
  pinMode(9, OUTPUT); // 黄灯
  pinMode(10, OUTPUT); // 绿灯
}

void loop() {
  // 红灯亮
  digitalWrite(8, HIGH);
  delay(5000); // 红灯亮5秒

  // 红灯灭，绿灯亮
  digitalWrite(8, LOW);
  digitalWrite(10, HIGH);
  delay(5000); // 绿灯亮5秒

  // 绿灯灭，黄灯亮
  digitalWrite(10, LOW);
  digitalWrite(9, HIGH);
  delay(2000); // 黄灯亮2秒

  // 黄灯灭
  digitalWrite(9, LOW);
}
```

### 输出效果：
红灯亮5秒，然后绿灯亮5秒，最后黄灯亮2秒，循环往复。

### 案例2：LED闪烁频率控制

我们可以通过读取电位器的值来控制LED的闪烁频率。以下是一个示例程序：

```cpp
void setup() {
  // 设置D13引脚为输出模式
  pinMode(13, OUTPUT);
}

void loop() {
  // 读取电位器的值（0-1023）
  int sensorValue = analogRead(A0);

  // 将电位器的值映射到延迟时间（10-1000毫秒）
  int delayTime = map(sensorValue, 0, 1023, 10, 1000);

  // 控制LED闪烁
  digitalWrite(13, HIGH);
  delay(delayTime);
  digitalWrite(13, LOW);
  delay(delayTime);
}
```

### 输出效果：
LED的闪烁频率会随着电位器的旋转而变化。

## 6. 总结

通过本文，你已经学会了如何使用Arduino控制LED的开关、亮度以及实现闪烁效果。我们还通过实际案例展示了LED控制的应用场景，如交通信号灯模拟和闪烁频率控制。

:::tip
**提示**：尝试使用多个LED和不同的控制方式，创建更复杂的灯光效果或交互式项目。
:::

## 7. 附加资源与练习

- **练习1**：尝试使用多个LED创建一个跑马灯效果。
- **练习2**：结合按钮输入，实现按下按钮时LED亮起，松开时LED熄灭。
- **附加资源**：阅读Arduino官方文档，了解更多关于PWM和数字输入输出的内容。

希望你能通过这些练习进一步巩固所学知识，并在未来的项目中灵活运用LED控制技术！